(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vl(e,t){const n=new Set(e.split(","));return t?a=>n.has(a.toLowerCase()):a=>n.has(a)}const et={},Da=[],hn=()=>{},rh=()=>!1,ns=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Dl=e=>e.startsWith("onUpdate:"),Ct=Object.assign,Gd=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},sh=Object.prototype.hasOwnProperty,Ge=(e,t)=>sh.call(e,t),Pe=Array.isArray,Fa=e=>zo(e)==="[object Map]",eo=e=>zo(e)==="[object Set]",si=e=>zo(e)==="[object Date]",He=e=>typeof e=="function",ct=e=>typeof e=="string",qn=e=>typeof e=="symbol",at=e=>e!==null&&typeof e=="object",Ud=e=>(at(e)||He(e))&&He(e.then)&&He(e.catch),Kd=Object.prototype.toString,zo=e=>Kd.call(e),lh=e=>zo(e).slice(8,-1),zd=e=>zo(e)==="[object Object]",Fl=e=>ct(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,wo=Vl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),as=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},uh=/-(\w)/g,Sn=as(e=>e.replace(uh,(t,n)=>n?n.toUpperCase():"")),ih=/\B([A-Z])/g,to=as(e=>e.replace(ih,"-$1").toLowerCase()),os=as(e=>e.charAt(0).toUpperCase()+e.slice(1)),Bs=as(e=>e?`on${os(e)}`:""),Zn=(e,t)=>!Object.is(e,t),br=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Ar=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Io=e=>{const t=parseFloat(e);return isNaN(t)?e:t},ch=e=>{const t=ct(e)?Number(e):NaN;return isNaN(t)?e:t};let li;const Gl=()=>li||(li=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function st(e){if(Pe(e)){const t={};for(let n=0;n<e.length;n++){const a=e[n],o=ct(a)?mh(a):st(a);if(o)for(const r in o)t[r]=o[r]}return t}else if(ct(e)||at(e))return e}const dh=/;(?![^(]*\))/g,ph=/:([^]+)/,fh=/\/\*[^]*?\*\//g;function mh(e){const t={};return e.replace(fh,"").split(dh).forEach(n=>{if(n){const a=n.split(ph);a.length>1&&(t[a[0].trim()]=a[1].trim())}}),t}function qe(e){let t="";if(ct(e))t=e;else if(Pe(e))for(let n=0;n<e.length;n++){const a=qe(e[n]);a&&(t+=a+" ")}else if(at(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function vh(e){if(!e)return null;let{class:t,style:n}=e;return t&&!ct(t)&&(e.class=qe(t)),n&&(e.style=st(n)),e}const hh="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",yh=Vl(hh);function Yd(e){return!!e||e===""}function gh(e,t){if(e.length!==t.length)return!1;let n=!0;for(let a=0;n&&a<e.length;a++)n=Yo(e[a],t[a]);return n}function Yo(e,t){if(e===t)return!0;let n=si(e),a=si(t);if(n||a)return n&&a?e.getTime()===t.getTime():!1;if(n=qn(e),a=qn(t),n||a)return e===t;if(n=Pe(e),a=Pe(t),n||a)return n&&a?gh(e,t):!1;if(n=at(e),a=at(t),n||a){if(!n||!a)return!1;const o=Object.keys(e).length,r=Object.keys(t).length;if(o!==r)return!1;for(const s in e){const l=e.hasOwnProperty(s),u=t.hasOwnProperty(s);if(l&&!u||!l&&u||!Yo(e[s],t[s]))return!1}}return String(e)===String(t)}function Ul(e,t){return e.findIndex(n=>Yo(n,t))}const Ne=e=>ct(e)?e:e==null?"":Pe(e)||at(e)&&(e.toString===Kd||!He(e.toString))?JSON.stringify(e,Hd,2):String(e),Hd=(e,t)=>t&&t.__v_isRef?Hd(e,t.value):Fa(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[a,o],r)=>(n[Rs(a,r)+" =>"]=o,n),{})}:eo(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Rs(n))}:qn(t)?Rs(t):at(t)&&!Pe(t)&&!zd(t)?String(t):t,Rs=(e,t="")=>{var n;return qn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Qt;class _h{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Qt,!t&&Qt&&(this.index=(Qt.scopes||(Qt.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Qt;try{return Qt=this,t()}finally{Qt=n}}}on(){Qt=this}off(){Qt=this.parent}stop(t){if(this._active){let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.scopes)for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function bh(e,t=Qt){t&&t.active&&t.effects.push(e)}function Sh(){return Qt}let ha;class Kl{constructor(t,n,a,o){this.fn=t,this.trigger=n,this.scheduler=a,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,bh(this,o)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,no();for(let t=0;t<this._depsLength;t++){const n=this.deps[t];if(n.computed&&(wh(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ao()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=zn,n=ha;try{return zn=!0,ha=this,this._runnings++,ui(this),this.fn()}finally{ii(this),this._runnings--,ha=n,zn=t}}stop(){var t;this.active&&(ui(this),ii(this),(t=this.onStop)==null||t.call(this),this.active=!1)}}function wh(e){return e.value}function ui(e){e._trackId++,e._depsLength=0}function ii(e){if(e.deps.length>e._depsLength){for(let t=e._depsLength;t<e.deps.length;t++)Xd(e.deps[t],e);e.deps.length=e._depsLength}}function Xd(e,t){const n=e.get(t);n!==void 0&&t._trackId!==n&&(e.delete(t),e.size===0&&e.cleanup())}let zn=!0,sl=0;const Wd=[];function no(){Wd.push(zn),zn=!1}function ao(){const e=Wd.pop();zn=e===void 0?!0:e}function zl(){sl++}function Yl(){for(sl--;!sl&&ll.length;)ll.shift()()}function Jd(e,t,n){if(t.get(e)!==e._trackId){t.set(e,e._trackId);const a=e.deps[e._depsLength];a!==t?(a&&Xd(a,e),e.deps[e._depsLength++]=t):e._depsLength++}}const ll=[];function qd(e,t,n){zl();for(const a of e.keys()){let o;a._dirtyLevel<t&&(o??(o=e.get(a)===a._trackId))&&(a._shouldSchedule||(a._shouldSchedule=a._dirtyLevel===0),a._dirtyLevel=t),a._shouldSchedule&&(o??(o=e.get(a)===a._trackId))&&(a.trigger(),(!a._runnings||a.allowRecurse)&&a._dirtyLevel!==2&&(a._shouldSchedule=!1,a.scheduler&&ll.push(a.scheduler)))}Yl()}const Zd=(e,t)=>{const n=new Map;return n.cleanup=e,n.computed=t,n},ul=new WeakMap,ya=Symbol(""),il=Symbol("");function Ft(e,t,n){if(zn&&ha){let a=ul.get(e);a||ul.set(e,a=new Map);let o=a.get(n);o||a.set(n,o=Zd(()=>a.delete(n))),Jd(ha,o)}}function $n(e,t,n,a,o,r){const s=ul.get(e);if(!s)return;let l=[];if(t==="clear")l=[...s.values()];else if(n==="length"&&Pe(e)){const u=Number(a);s.forEach((i,c)=>{(c==="length"||!qn(c)&&c>=u)&&l.push(i)})}else switch(n!==void 0&&l.push(s.get(n)),t){case"add":Pe(e)?Fl(n)&&l.push(s.get("length")):(l.push(s.get(ya)),Fa(e)&&l.push(s.get(il)));break;case"delete":Pe(e)||(l.push(s.get(ya)),Fa(e)&&l.push(s.get(il)));break;case"set":Fa(e)&&l.push(s.get(ya));break}zl();for(const u of l)u&&qd(u,4);Yl()}const kh=Vl("__proto__,__v_isRef,__isVue"),Qd=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(qn)),ci=Eh();function Eh(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const a=Ue(this);for(let r=0,s=this.length;r<s;r++)Ft(a,"get",r+"");const o=a[t](...n);return o===-1||o===!1?a[t](...n.map(Ue)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){no(),zl();const a=Ue(this)[t].apply(this,n);return Yl(),ao(),a}}),e}function Ch(e){const t=Ue(this);return Ft(t,"has",e),t.hasOwnProperty(e)}class ep{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,a){const o=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return r;if(n==="__v_raw")return a===(o?r?Nh:op:r?ap:np).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(a)?t:void 0;const s=Pe(t);if(!o){if(s&&Ge(ci,n))return Reflect.get(ci,n,a);if(n==="hasOwnProperty")return Ch}const l=Reflect.get(t,n,a);return(qn(n)?Qd.has(n):kh(n))||(o||Ft(t,"get",n),r)?l:Ht(l)?s&&Fl(n)?l:l.value:at(l)?o?rp(l):_a(l):l}}class tp extends ep{constructor(t=!1){super(!1,t)}set(t,n,a,o){let r=t[n];if(!this._isShallow){const u=Ya(r);if(!$r(a)&&!Ya(a)&&(r=Ue(r),a=Ue(a)),!Pe(t)&&Ht(r)&&!Ht(a))return u?!1:(r.value=a,!0)}const s=Pe(t)&&Fl(n)?Number(n)<t.length:Ge(t,n),l=Reflect.set(t,n,a,o);return t===Ue(o)&&(s?Zn(a,r)&&$n(t,"set",n,a):$n(t,"add",n,a)),l}deleteProperty(t,n){const a=Ge(t,n);t[n];const o=Reflect.deleteProperty(t,n);return o&&a&&$n(t,"delete",n,void 0),o}has(t,n){const a=Reflect.has(t,n);return(!qn(n)||!Qd.has(n))&&Ft(t,"has",n),a}ownKeys(t){return Ft(t,"iterate",Pe(t)?"length":ya),Reflect.ownKeys(t)}}class Mh extends ep{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Oh=new tp,Th=new Mh,Ah=new tp(!0),Hl=e=>e,rs=e=>Reflect.getPrototypeOf(e);function er(e,t,n=!1,a=!1){e=e.__v_raw;const o=Ue(e),r=Ue(t);n||(Zn(t,r)&&Ft(o,"get",t),Ft(o,"get",r));const{has:s}=rs(o),l=a?Hl:n?Jl:Lo;if(s.call(o,t))return l(e.get(t));if(s.call(o,r))return l(e.get(r));e!==o&&e.get(t)}function tr(e,t=!1){const n=this.__v_raw,a=Ue(n),o=Ue(e);return t||(Zn(e,o)&&Ft(a,"has",e),Ft(a,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function nr(e,t=!1){return e=e.__v_raw,!t&&Ft(Ue(e),"iterate",ya),Reflect.get(e,"size",e)}function di(e){e=Ue(e);const t=Ue(this);return rs(t).has.call(t,e)||(t.add(e),$n(t,"add",e,e)),this}function pi(e,t){t=Ue(t);const n=Ue(this),{has:a,get:o}=rs(n);let r=a.call(n,e);r||(e=Ue(e),r=a.call(n,e));const s=o.call(n,e);return n.set(e,t),r?Zn(t,s)&&$n(n,"set",e,t):$n(n,"add",e,t),this}function fi(e){const t=Ue(this),{has:n,get:a}=rs(t);let o=n.call(t,e);o||(e=Ue(e),o=n.call(t,e)),a&&a.call(t,e);const r=t.delete(e);return o&&$n(t,"delete",e,void 0),r}function mi(){const e=Ue(this),t=e.size!==0,n=e.clear();return t&&$n(e,"clear",void 0,void 0),n}function ar(e,t){return function(a,o){const r=this,s=r.__v_raw,l=Ue(s),u=t?Hl:e?Jl:Lo;return!e&&Ft(l,"iterate",ya),s.forEach((i,c)=>a.call(o,u(i),u(c),r))}}function or(e,t,n){return function(...a){const o=this.__v_raw,r=Ue(o),s=Fa(r),l=e==="entries"||e===Symbol.iterator&&s,u=e==="keys"&&s,i=o[e](...a),c=n?Hl:t?Jl:Lo;return!t&&Ft(r,"iterate",u?il:ya),{next(){const{value:d,done:p}=i.next();return p?{value:d,done:p}:{value:l?[c(d[0]),c(d[1])]:c(d),done:p}},[Symbol.iterator](){return this}}}}function Bn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function $h(){const e={get(r){return er(this,r)},get size(){return nr(this)},has:tr,add:di,set:pi,delete:fi,clear:mi,forEach:ar(!1,!1)},t={get(r){return er(this,r,!1,!0)},get size(){return nr(this)},has:tr,add:di,set:pi,delete:fi,clear:mi,forEach:ar(!1,!0)},n={get(r){return er(this,r,!0)},get size(){return nr(this,!0)},has(r){return tr.call(this,r,!0)},add:Bn("add"),set:Bn("set"),delete:Bn("delete"),clear:Bn("clear"),forEach:ar(!0,!1)},a={get(r){return er(this,r,!0,!0)},get size(){return nr(this,!0)},has(r){return tr.call(this,r,!0)},add:Bn("add"),set:Bn("set"),delete:Bn("delete"),clear:Bn("clear"),forEach:ar(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=or(r,!1,!1),n[r]=or(r,!0,!1),t[r]=or(r,!1,!0),a[r]=or(r,!0,!0)}),[e,n,t,a]}const[xh,Ih,Lh,Ph]=$h();function Xl(e,t){const n=t?e?Ph:Lh:e?Ih:xh;return(a,o,r)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?a:Reflect.get(Ge(n,o)&&o in a?n:a,o,r)}const Bh={get:Xl(!1,!1)},Rh={get:Xl(!1,!0)},jh={get:Xl(!0,!1)},np=new WeakMap,ap=new WeakMap,op=new WeakMap,Nh=new WeakMap;function Vh(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Dh(e){return e.__v_skip||!Object.isExtensible(e)?0:Vh(lh(e))}function _a(e){return Ya(e)?e:Wl(e,!1,Oh,Bh,np)}function Fh(e){return Wl(e,!1,Ah,Rh,ap)}function rp(e){return Wl(e,!0,Th,jh,op)}function Wl(e,t,n,a,o){if(!at(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=o.get(e);if(r)return r;const s=Dh(e);if(s===0)return e;const l=new Proxy(e,s===2?a:n);return o.set(e,l),l}function Ga(e){return Ya(e)?Ga(e.__v_raw):!!(e&&e.__v_isReactive)}function Ya(e){return!!(e&&e.__v_isReadonly)}function $r(e){return!!(e&&e.__v_isShallow)}function sp(e){return Ga(e)||Ya(e)}function Ue(e){const t=e&&e.__v_raw;return t?Ue(t):e}function lp(e){return Object.isExtensible(e)&&Ar(e,"__v_skip",!0),e}const Lo=e=>at(e)?_a(e):e,Jl=e=>at(e)?rp(e):e;class up{constructor(t,n,a,o){this.getter=t,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new Kl(()=>t(this._value),()=>Sr(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=a}get value(){const t=Ue(this);return(!t._cacheable||t.effect.dirty)&&Zn(t._value,t._value=t.effect.run())&&Sr(t,4),ip(t),t.effect._dirtyLevel>=2&&Sr(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Gh(e,t,n=!1){let a,o;const r=He(e);return r?(a=e,o=hn):(a=e.get,o=e.set),new up(a,o,r||!o,n)}function ip(e){var t;zn&&ha&&(e=Ue(e),Jd(ha,(t=e.dep)!=null?t:e.dep=Zd(()=>e.dep=void 0,e instanceof up?e:void 0)))}function Sr(e,t=4,n){e=Ue(e);const a=e.dep;a&&qd(a,t)}function Ht(e){return!!(e&&e.__v_isRef===!0)}function H(e){return Uh(e,!1)}function Uh(e,t){return Ht(e)?e:new Kh(e,t)}class Kh{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Ue(t),this._value=n?t:Lo(t)}get value(){return ip(this),this._value}set value(t){const n=this.__v_isShallow||$r(t)||Ya(t);t=n?t:Ue(t),Zn(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:Lo(t),Sr(this,4))}}function G(e){return Ht(e)?e.value:e}const zh={get:(e,t,n)=>G(Reflect.get(e,t,n)),set:(e,t,n,a)=>{const o=e[t];return Ht(o)&&!Ht(n)?(o.value=n,!0):Reflect.set(e,t,n,a)}};function cp(e){return Ga(e)?e:new Proxy(e,zh)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Yn(e,t,n,a){try{return a?e(...a):e()}catch(o){ss(o,t,n)}}function on(e,t,n,a){if(He(e)){const r=Yn(e,t,n,a);return r&&Ud(r)&&r.catch(s=>{ss(s,t,n)}),r}const o=[];for(let r=0;r<e.length;r++)o.push(on(e[r],t,n,a));return o}function ss(e,t,n,a=!0){const o=t?t.vnode:null;if(t){let r=t.parent;const s=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const i=r.ec;if(i){for(let c=0;c<i.length;c++)if(i[c](e,s,l)===!1)return}r=r.parent}const u=t.appContext.config.errorHandler;if(u){Yn(u,null,10,[e,s,l]);return}}Yh(e,n,o,a)}function Yh(e,t,n,a=!0){console.error(e)}let Po=!1,cl=!1;const xt=[];let mn=0;const Ua=[];let Vn=null,pa=0;const dp=Promise.resolve();let ql=null;function Ea(e){const t=ql||dp;return e?t.then(this?e.bind(this):e):t}function Hh(e){let t=mn+1,n=xt.length;for(;t<n;){const a=t+n>>>1,o=xt[a],r=Bo(o);r<e||r===e&&o.pre?t=a+1:n=a}return t}function Zl(e){(!xt.length||!xt.includes(e,Po&&e.allowRecurse?mn+1:mn))&&(e.id==null?xt.push(e):xt.splice(Hh(e.id),0,e),pp())}function pp(){!Po&&!cl&&(cl=!0,ql=dp.then(mp))}function Xh(e){const t=xt.indexOf(e);t>mn&&xt.splice(t,1)}function Wh(e){Pe(e)?Ua.push(...e):(!Vn||!Vn.includes(e,e.allowRecurse?pa+1:pa))&&Ua.push(e),pp()}function vi(e,t,n=Po?mn+1:0){for(;n<xt.length;n++){const a=xt[n];if(a&&a.pre){if(e&&a.id!==e.uid)continue;xt.splice(n,1),n--,a()}}}function fp(e){if(Ua.length){const t=[...new Set(Ua)].sort((n,a)=>Bo(n)-Bo(a));if(Ua.length=0,Vn){Vn.push(...t);return}for(Vn=t,pa=0;pa<Vn.length;pa++)Vn[pa]();Vn=null,pa=0}}const Bo=e=>e.id==null?1/0:e.id,Jh=(e,t)=>{const n=Bo(e)-Bo(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function mp(e){cl=!1,Po=!0,xt.sort(Jh);const t=hn;try{for(mn=0;mn<xt.length;mn++){const n=xt[mn];n&&n.active!==!1&&Yn(n,null,14)}}finally{mn=0,xt.length=0,fp(),Po=!1,ql=null,(xt.length||Ua.length)&&mp()}}function qh(e,t,...n){if(e.isUnmounted)return;const a=e.vnode.props||et;let o=n;const r=t.startsWith("update:"),s=r&&t.slice(7);if(s&&s in a){const c=`${s==="modelValue"?"model":s}Modifiers`,{number:d,trim:p}=a[c]||et;p&&(o=n.map(f=>ct(f)?f.trim():f)),d&&(o=n.map(Io))}let l,u=a[l=Bs(t)]||a[l=Bs(Sn(t))];!u&&r&&(u=a[l=Bs(to(t))]),u&&on(u,e,6,o);const i=a[l+"Once"];if(i){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,on(i,e,6,o)}}function Zh(e,t,n=!1){const a=t.emitsCache,o=a.get(e);if(o!==void 0)return o;const r=e.emits;let s={};return!r&&!!1?(at(e)&&a.set(e,null),null):(Pe(r)?r.forEach(u=>s[u]=null):Ct(s,r),at(e)&&a.set(e,s),s)}function ls(e,t){return!e||!ns(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ge(e,t[0].toLowerCase()+t.slice(1))||Ge(e,to(t))||Ge(e,t))}let bt=null,us=null;function xr(e){const t=bt;return bt=e,us=e&&e.type.__scopeId||null,t}function dt(e){us=e}function pt(){us=null}function D(e,t=bt,n){if(!t||e._n)return e;const a=(...o)=>{a._d&&Ai(-1);const r=xr(t);let s;try{s=e(...o)}finally{xr(r),a._d&&Ai(1)}return s};return a._n=!0,a._c=!0,a._d=!0,a}function js(e){const{type:t,vnode:n,proxy:a,withProxy:o,props:r,propsOptions:[s],slots:l,attrs:u,emit:i,render:c,renderCache:d,data:p,setupState:f,ctx:m,inheritAttrs:v}=e;let y,E;const h=xr(e);try{if(n.shapeFlag&4){const $=o||a,_=$;y=fn(c.call(_,$,d,r,f,p,m)),E=u}else{const $=t;y=fn($.length>1?$(r,{attrs:u,slots:l,emit:i}):$(r,null)),E=t.props?u:Qh(u)}}catch($){Oo.length=0,ss($,e,1),y=k(Zt)}let S=y;if(E&&v!==!1){const $=Object.keys(E),{shapeFlag:_}=S;$.length&&_&7&&(s&&$.some(Dl)&&(E=ey(E,s)),S=Qn(S,E))}return n.dirs&&(S=Qn(S),S.dirs=S.dirs?S.dirs.concat(n.dirs):n.dirs),n.transition&&(S.transition=n.transition),y=S,xr(h),y}const Qh=e=>{let t;for(const n in e)(n==="class"||n==="style"||ns(n))&&((t||(t={}))[n]=e[n]);return t},ey=(e,t)=>{const n={};for(const a in e)(!Dl(a)||!(a.slice(9)in t))&&(n[a]=e[a]);return n};function ty(e,t,n){const{props:a,children:o,component:r}=e,{props:s,children:l,patchFlag:u}=t,i=r.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return a?hi(a,s,i):!!s;if(u&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const p=c[d];if(s[p]!==a[p]&&!ls(i,p))return!0}}}else return(o||l)&&(!l||!l.$stable)?!0:a===s?!1:a?s?hi(a,s,i):!0:!!s;return!1}function hi(e,t,n){const a=Object.keys(t);if(a.length!==Object.keys(e).length)return!0;for(let o=0;o<a.length;o++){const r=a[o];if(t[r]!==e[r]&&!ls(n,r))return!0}return!1}function ny({vnode:e,parent:t},n){for(;t;){const a=t.subTree;if(a.suspense&&a.suspense.activeBranch===e&&(a.el=e.el),a===e)(e=t.vnode).el=n,t=t.parent;else break}}const Ql="components";function eu(e,t){return hp(Ql,e,!0,t)||e}const vp=Symbol.for("v-ndc");function tu(e){return ct(e)?hp(Ql,e,!1)||e:e||vp}function hp(e,t,n=!0,a=!1){const o=bt||Bt;if(o){const r=o.type;if(e===Ql){const l=zy(r,!1);if(l&&(l===t||l===Sn(t)||l===os(Sn(t))))return r}const s=yi(o[e]||r[e],t)||yi(o.appContext[e],t);return!s&&a?r:s}}function yi(e,t){return e&&(e[t]||e[Sn(t)]||e[os(Sn(t))])}const ay=e=>e.__isSuspense;function oy(e,t){t&&t.pendingBranch?Pe(e)?t.effects.push(...e):t.effects.push(e):Wh(e)}const ry=Symbol.for("v-scx"),sy=()=>Ma(ry);function rn(e,t){return yp(e,null,t)}const rr={};function vt(e,t,n){return yp(e,t,n)}function yp(e,t,{immediate:n,deep:a,flush:o,once:r,onTrack:s,onTrigger:l}=et){if(t&&r){const A=t;t=(...O)=>{A(...O),_()}}const u=Bt,i=A=>a===!0?A:ma(A,a===!1?1:void 0);let c,d=!1,p=!1;if(Ht(e)?(c=()=>e.value,d=$r(e)):Ga(e)?(c=()=>i(e),d=!0):Pe(e)?(p=!0,d=e.some(A=>Ga(A)||$r(A)),c=()=>e.map(A=>{if(Ht(A))return A.value;if(Ga(A))return i(A);if(He(A))return Yn(A,u,2)})):He(e)?t?c=()=>Yn(e,u,2):c=()=>(f&&f(),on(e,u,3,[m])):c=hn,t&&a){const A=c;c=()=>ma(A())}let f,m=A=>{f=S.onStop=()=>{Yn(A,u,4),f=S.onStop=void 0}},v;if(ps)if(m=hn,t?n&&on(t,u,3,[c(),p?[]:void 0,m]):c(),o==="sync"){const A=sy();v=A.__watcherHandles||(A.__watcherHandles=[])}else return hn;let y=p?new Array(e.length).fill(rr):rr;const E=()=>{if(!(!S.active||!S.dirty))if(t){const A=S.run();(a||d||(p?A.some((O,T)=>Zn(O,y[T])):Zn(A,y)))&&(f&&f(),on(t,u,3,[A,y===rr?void 0:p&&y[0]===rr?[]:y,m]),y=A)}else S.run()};E.allowRecurse=!!t;let h;o==="sync"?h=E:o==="post"?h=()=>Vt(E,u&&u.suspense):(E.pre=!0,u&&(E.id=u.uid),h=()=>Zl(E));const S=new Kl(c,hn,h),$=Sh(),_=()=>{S.stop(),$&&Gd($.effects,S)};return t?n?E():y=S.run():o==="post"?Vt(S.run.bind(S),u&&u.suspense):S.run(),v&&v.push(_),_}function ma(e,t,n=0,a){if(!at(e)||e.__v_skip)return e;if(t&&t>0){if(n>=t)return e;n++}if(a=a||new Set,a.has(e))return e;if(a.add(e),Ht(e))ma(e.value,t,n,a);else if(Pe(e))for(let o=0;o<e.length;o++)ma(e[o],t,n,a);else if(eo(e)||Fa(e))e.forEach(o=>{ma(o,t,n,a)});else if(zd(e))for(const o in e)ma(e[o],t,n,a);return e}function oa(e,t){if(bt===null)return e;const n=fs(bt)||bt.proxy,a=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[r,s,l,u=et]=t[o];r&&(He(r)&&(r={mounted:r,updated:r}),r.deep&&ma(s),a.push({dir:r,instance:n,value:s,oldValue:void 0,arg:l,modifiers:u}))}return e}function la(e,t,n,a){const o=e.dirs,r=t&&t.dirs;for(let s=0;s<o.length;s++){const l=o[s];r&&(l.oldValue=r[s].value);let u=l.dir[a];u&&(no(),on(u,n,8,[e.el,l,e,t]),ao())}}const Dn=Symbol("_leaveCb"),sr=Symbol("_enterCb");function ly(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Gt(()=>{e.isMounted=!0}),py(()=>{e.isUnmounting=!0}),e}const Wt=[Function,Array],gp={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Wt,onEnter:Wt,onAfterEnter:Wt,onEnterCancelled:Wt,onBeforeLeave:Wt,onLeave:Wt,onAfterLeave:Wt,onLeaveCancelled:Wt,onBeforeAppear:Wt,onAppear:Wt,onAfterAppear:Wt,onAppearCancelled:Wt},uy={name:"BaseTransition",props:gp,setup(e,{slots:t}){const n=Dy(),a=ly();return()=>{const o=t.default&&bp(t.default(),!0);if(!o||!o.length)return;let r=o[0];if(o.length>1){for(const p of o)if(p.type!==Zt){r=p;break}}const s=Ue(e),{mode:l}=s;if(a.isLeaving)return Ns(r);const u=gi(r);if(!u)return Ns(r);const i=dl(u,s,a,n);pl(u,i);const c=n.subTree,d=c&&gi(c);if(d&&d.type!==Zt&&!fa(u,d)){const p=dl(d,s,a,n);if(pl(d,p),l==="out-in")return a.isLeaving=!0,p.afterLeave=()=>{a.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},Ns(r);l==="in-out"&&u.type!==Zt&&(p.delayLeave=(f,m,v)=>{const y=_p(a,d);y[String(d.key)]=d,f[Dn]=()=>{m(),f[Dn]=void 0,delete i.delayedLeave},i.delayedLeave=v})}return r}}},iy=uy;function _p(e,t){const{leavingVNodes:n}=e;let a=n.get(t.type);return a||(a=Object.create(null),n.set(t.type,a)),a}function dl(e,t,n,a){const{appear:o,mode:r,persisted:s=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:i,onEnterCancelled:c,onBeforeLeave:d,onLeave:p,onAfterLeave:f,onLeaveCancelled:m,onBeforeAppear:v,onAppear:y,onAfterAppear:E,onAppearCancelled:h}=t,S=String(e.key),$=_p(n,e),_=(T,L)=>{T&&on(T,a,9,L)},A=(T,L)=>{const N=L[1];_(T,L),Pe(T)?T.every(U=>U.length<=1)&&N():T.length<=1&&N()},O={mode:r,persisted:s,beforeEnter(T){let L=l;if(!n.isMounted)if(o)L=v||l;else return;T[Dn]&&T[Dn](!0);const N=$[S];N&&fa(e,N)&&N.el[Dn]&&N.el[Dn](),_(L,[T])},enter(T){let L=u,N=i,U=c;if(!n.isMounted)if(o)L=y||u,N=E||i,U=h||c;else return;let I=!1;const R=T[sr]=B=>{I||(I=!0,B?_(U,[T]):_(N,[T]),O.delayedLeave&&O.delayedLeave(),T[sr]=void 0)};L?A(L,[T,R]):R()},leave(T,L){const N=String(e.key);if(T[sr]&&T[sr](!0),n.isUnmounting)return L();_(d,[T]);let U=!1;const I=T[Dn]=R=>{U||(U=!0,L(),R?_(m,[T]):_(f,[T]),T[Dn]=void 0,$[N]===e&&delete $[N])};$[N]=e,p?A(p,[T,I]):I()},clone(T){return dl(T,t,n,a)}};return O}function Ns(e){if(nu(e))return e=Qn(e),e.children=null,e}function gi(e){return nu(e)?e.children?e.children[0]:void 0:e}function pl(e,t){e.shapeFlag&6&&e.component?pl(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function bp(e,t=!1,n){let a=[],o=0;for(let r=0;r<e.length;r++){let s=e[r];const l=n==null?s.key:String(n)+String(s.key!=null?s.key:r);s.type===ve?(s.patchFlag&128&&o++,a=a.concat(bp(s.children,t,l))):(t||s.type!==Zt)&&a.push(l!=null?Qn(s,{key:l}):s)}if(o>1)for(let r=0;r<a.length;r++)a[r].patchFlag=-2;return a}/*! #__NO_SIDE_EFFECTS__ */function q(e,t){return He(e)?(()=>Ct({name:e.name},t,{setup:e}))():e}const ko=e=>!!e.type.__asyncLoader,nu=e=>e.type.__isKeepAlive;function cy(e,t,n=Bt,a=!1){if(n){const o=n[e]||(n[e]=[]),r=t.__weh||(t.__weh=(...s)=>{if(n.isUnmounted)return;no();const l=lu(n),u=on(t,n,e,s);return l(),ao(),u});return a?o.unshift(r):o.push(r),r}}const is=e=>(t,n=Bt)=>(!ps||e==="sp")&&cy(e,(...a)=>t(...a),n),Gt=is("m"),dy=is("bu"),py=is("bum"),Ca=is("um");function Ie(e,t,n,a){let o;const r=n&&n[a];if(Pe(e)||ct(e)){o=new Array(e.length);for(let s=0,l=e.length;s<l;s++)o[s]=t(e[s],s,void 0,r&&r[s])}else if(typeof e=="number"){o=new Array(e);for(let s=0;s<e;s++)o[s]=t(s+1,s,void 0,r&&r[s])}else if(at(e))if(e[Symbol.iterator])o=Array.from(e,(s,l)=>t(s,l,void 0,r&&r[l]));else{const s=Object.keys(e);o=new Array(s.length);for(let l=0,u=s.length;l<u;l++){const i=s[l];o[l]=t(e[i],i,l,r&&r[l])}}else o=[];return n&&(n[a]=o),o}function ot(e,t,n={},a,o){if(bt.isCE||bt.parent&&ko(bt.parent)&&bt.parent.isCE)return t!=="default"&&(n.name=t),k("slot",n,a&&a());let r=e[t];r&&r._c&&(r._d=!1),b();const s=r&&Sp(r(n)),l=be(ve,{key:n.key||s&&s.key||`_${t}`},s||(a?a():[]),s&&e._===1?64:-2);return!o&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function Sp(e){return e.some(t=>Lr(t)?!(t.type===Zt||t.type===ve&&!Sp(t.children)):!0)?e:null}const fl=e=>e?Ip(e)?fs(e)||e.proxy:fl(e.parent):null,Eo=Ct(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>fl(e.parent),$root:e=>fl(e.root),$emit:e=>e.emit,$options:e=>e.type,$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Zl(e.update)}),$nextTick:e=>e.n||(e.n=Ea.bind(e.proxy)),$watch:e=>hn}),Vs=(e,t)=>e!==et&&!e.__isScriptSetup&&Ge(e,t),fy={get({_:e},t){const{ctx:n,setupState:a,data:o,props:r,accessCache:s,type:l,appContext:u}=e;let i;if(t[0]!=="$"){const f=s[t];if(f!==void 0)switch(f){case 1:return a[t];case 2:return o[t];case 4:return n[t];case 3:return r[t]}else{if(Vs(a,t))return s[t]=1,a[t];if(o!==et&&Ge(o,t))return s[t]=2,o[t];if((i=e.propsOptions[0])&&Ge(i,t))return s[t]=3,r[t];if(n!==et&&Ge(n,t))return s[t]=4,n[t];s[t]=0}}const c=Eo[t];let d,p;if(c)return t==="$attrs"&&Ft(e,"get",t),c(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(n!==et&&Ge(n,t))return s[t]=4,n[t];if(p=u.config.globalProperties,Ge(p,t))return p[t]},set({_:e},t,n){const{data:a,setupState:o,ctx:r}=e;return Vs(o,t)?(o[t]=n,!0):a!==et&&Ge(a,t)?(a[t]=n,!0):Ge(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:a,appContext:o,propsOptions:r}},s){let l;return!!n[s]||e!==et&&Ge(e,s)||Vs(t,s)||(l=r[0])&&Ge(l,s)||Ge(a,s)||Ge(Eo,s)||Ge(o.config.globalProperties,s)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ge(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function _i(e){return Pe(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}function my(e){const t=e.type,{mixins:n,extends:a}=t,{mixins:o,optionsCache:r,config:{optionMergeStrategies:s}}=e.appContext,l=r.get(t);let u;return l?u=l:!o.length&&!n&&!a?u=t:(u={},o.length&&o.forEach(i=>Ir(u,i,s,!0)),Ir(u,t,s)),at(t)&&r.set(t,u),u}function Ir(e,t,n,a=!1){const{mixins:o,extends:r}=t;r&&Ir(e,r,n,!0),o&&o.forEach(s=>Ir(e,s,n,!0));for(const s in t)if(!(a&&s==="expose")){const l=vy[s]||n&&n[s];e[s]=l?l(e[s],t[s]):t[s]}return e}const vy={data:bi,props:wi,emits:wi,methods:So,computed:So,beforeCreate:Pt,created:Pt,beforeMount:Pt,mounted:Pt,beforeUpdate:Pt,updated:Pt,beforeDestroy:Pt,beforeUnmount:Pt,destroyed:Pt,unmounted:Pt,activated:Pt,deactivated:Pt,errorCaptured:Pt,serverPrefetch:Pt,components:So,directives:So,watch:yy,provide:bi,inject:hy};function bi(e,t){return t?e?function(){return Ct(He(e)?e.call(this,this):e,He(t)?t.call(this,this):t)}:t:e}function hy(e,t){return So(Si(e),Si(t))}function Si(e){if(Pe(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Pt(e,t){return e?[...new Set([].concat(e,t))]:t}function So(e,t){return e?Ct(Object.create(null),e,t):t}function wi(e,t){return e?Pe(e)&&Pe(t)?[...new Set([...e,...t])]:Ct(Object.create(null),_i(e),_i(t??{})):t}function yy(e,t){if(!e)return t;if(!t)return e;const n=Ct(Object.create(null),e);for(const a in t)n[a]=Pt(e[a],t[a]);return n}function wp(){return{app:null,config:{isNativeTag:rh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gy=0;function _y(e,t){return function(a,o=null){He(a)||(a=Ct({},a)),o!=null&&!at(o)&&(o=null);const r=wp(),s=new WeakSet;let l=!1;const u=r.app={_uid:gy++,_component:a,_props:o,_container:null,_context:r,_instance:null,version:Xy,get config(){return r.config},set config(i){},use(i,...c){return s.has(i)||(i&&He(i.install)?(s.add(i),i.install(u,...c)):He(i)&&(s.add(i),i(u,...c))),u},mixin(i){return u},component(i,c){return c?(r.components[i]=c,u):r.components[i]},directive(i,c){return c?(r.directives[i]=c,u):r.directives[i]},mount(i,c,d){if(!l){const p=k(a,o);return p.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),c&&t?t(p,i):e(p,i,d),l=!0,u._container=i,i.__vue_app__=u,fs(p.component)||p.component.proxy}},unmount(){l&&(e(null,u._container),delete u._container.__vue_app__)},provide(i,c){return r.provides[i]=c,u},runWithContext(i){const c=Co;Co=u;try{return i()}finally{Co=c}}};return u}}let Co=null;function oo(e,t){if(Bt){let n=Bt.provides;const a=Bt.parent&&Bt.parent.provides;a===n&&(n=Bt.provides=Object.create(a)),n[e]=t}}function Ma(e,t,n=!1){const a=Bt||bt;if(a||Co){const o=a?a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:Co._context.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&He(t)?t.call(a&&a.proxy):t}}function by(e,t,n,a=!1){const o={},r={};Ar(r,ds,1),e.propsDefaults=Object.create(null),kp(e,t,o,r);for(const s in e.propsOptions[0])s in o||(o[s]=void 0);n?e.props=a?o:Fh(o):e.type.props?e.props=o:e.props=r,e.attrs=r}function Sy(e,t,n,a){const{props:o,attrs:r,vnode:{patchFlag:s}}=e,l=Ue(o),[u]=e.propsOptions;let i=!1;if((a||s>0)&&!(s&16)){if(s&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let p=c[d];if(ls(e.emitsOptions,p))continue;const f=t[p];if(u)if(Ge(r,p))f!==r[p]&&(r[p]=f,i=!0);else{const m=Sn(p);o[m]=ml(u,l,m,f,e,!1)}else f!==r[p]&&(r[p]=f,i=!0)}}}else{kp(e,t,o,r)&&(i=!0);let c;for(const d in l)(!t||!Ge(t,d)&&((c=to(d))===d||!Ge(t,c)))&&(u?n&&(n[d]!==void 0||n[c]!==void 0)&&(o[d]=ml(u,l,d,void 0,e,!0)):delete o[d]);if(r!==l)for(const d in r)(!t||!Ge(t,d))&&(delete r[d],i=!0)}i&&$n(e,"set","$attrs")}function kp(e,t,n,a){const[o,r]=e.propsOptions;let s=!1,l;if(t)for(let u in t){if(wo(u))continue;const i=t[u];let c;o&&Ge(o,c=Sn(u))?!r||!r.includes(c)?n[c]=i:(l||(l={}))[c]=i:ls(e.emitsOptions,u)||(!(u in a)||i!==a[u])&&(a[u]=i,s=!0)}if(r){const u=Ue(n),i=l||et;for(let c=0;c<r.length;c++){const d=r[c];n[d]=ml(o,u,d,i[d],e,!Ge(i,d))}}return s}function ml(e,t,n,a,o,r){const s=e[n];if(s!=null){const l=Ge(s,"default");if(l&&a===void 0){const u=s.default;if(s.type!==Function&&!s.skipFactory&&He(u)){const{propsDefaults:i}=o;if(n in i)a=i[n];else{const c=lu(o);a=i[n]=u.call(null,t),c()}}else a=u}s[0]&&(r&&!l?a=!1:s[1]&&(a===""||a===to(n))&&(a=!0))}return a}function wy(e,t,n=!1){const a=t.propsCache,o=a.get(e);if(o)return o;const r=e.props,s={},l=[];if(!r&&!!1)return at(e)&&a.set(e,Da),Da;if(Pe(r))for(let c=0;c<r.length;c++){const d=Sn(r[c]);ki(d)&&(s[d]=et)}else if(r)for(const c in r){const d=Sn(c);if(ki(d)){const p=r[c],f=s[d]=Pe(p)||He(p)?{type:p}:Ct({},p);if(f){const m=Mi(Boolean,f.type),v=Mi(String,f.type);f[0]=m>-1,f[1]=v<0||m<v,(m>-1||Ge(f,"default"))&&l.push(d)}}}const i=[s,l];return at(e)&&a.set(e,i),i}function ki(e){return e[0]!=="$"&&!wo(e)}function Ei(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function Ci(e,t){return Ei(e)===Ei(t)}function Mi(e,t){return Pe(t)?t.findIndex(n=>Ci(n,e)):He(t)&&Ci(t,e)?0:-1}const Ep=e=>e[0]==="_"||e==="$stable",au=e=>Pe(e)?e.map(fn):[fn(e)],ky=(e,t,n)=>{if(t._n)return t;const a=D((...o)=>au(t(...o)),n);return a._c=!1,a},Cp=(e,t,n)=>{const a=e._ctx;for(const o in e){if(Ep(o))continue;const r=e[o];if(He(r))t[o]=ky(o,r,a);else if(r!=null){const s=au(r);t[o]=()=>s}}},Mp=(e,t)=>{const n=au(t);e.slots.default=()=>n},Ey=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Ue(t),Ar(t,"_",n)):Cp(t,e.slots={})}else e.slots={},t&&Mp(e,t);Ar(e.slots,ds,1)},Cy=(e,t,n)=>{const{vnode:a,slots:o}=e;let r=!0,s=et;if(a.shapeFlag&32){const l=t._;l?n&&l===1?r=!1:(Ct(o,t),!n&&l===1&&delete o._):(r=!t.$stable,Cp(t,o)),s=t}else t&&(Mp(e,t),s={default:1});if(r)for(const l in o)!Ep(l)&&s[l]==null&&delete o[l]};function vl(e,t,n,a,o=!1){if(Pe(e)){e.forEach((p,f)=>vl(p,t&&(Pe(t)?t[f]:t),n,a,o));return}if(ko(a)&&!o)return;const r=a.shapeFlag&4?fs(a.component)||a.component.proxy:a.el,s=o?null:r,{i:l,r:u}=e,i=t&&t.r,c=l.refs===et?l.refs={}:l.refs,d=l.setupState;if(i!=null&&i!==u&&(ct(i)?(c[i]=null,Ge(d,i)&&(d[i]=null)):Ht(i)&&(i.value=null)),He(u))Yn(u,l,12,[s,c]);else{const p=ct(u),f=Ht(u);if(p||f){const m=()=>{if(e.f){const v=p?Ge(d,u)?d[u]:c[u]:u.value;o?Pe(v)&&Gd(v,r):Pe(v)?v.includes(r)||v.push(r):p?(c[u]=[r],Ge(d,u)&&(d[u]=c[u])):(u.value=[r],e.k&&(c[e.k]=u.value))}else p?(c[u]=s,Ge(d,u)&&(d[u]=s)):f&&(u.value=s,e.k&&(c[e.k]=s))};s?(m.id=-1,Vt(m,n)):m()}}}function My(){typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__!="boolean"&&(Gl().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const Vt=oy;function Oy(e){return Ty(e)}function Ty(e,t){My();const n=Gl();n.__VUE__=!0;const{insert:a,remove:o,patchProp:r,createElement:s,createText:l,createComment:u,setText:i,setElementText:c,parentNode:d,nextSibling:p,setScopeId:f=hn,insertStaticContent:m}=e,v=(x,P,F,V=null,J=null,oe=null,de=void 0,ee=null,se=!!P.dynamicChildren)=>{if(x===P)return;x&&!fa(x,P)&&(V=fe(x),_e(x,J,oe,!0),x=null),P.patchFlag===-2&&(se=!1,P.dynamicChildren=null);const{type:Q,ref:ye,shapeFlag:Ae}=P;switch(Q){case cs:y(x,P,F,V);break;case Zt:E(x,P,F,V);break;case Fs:x==null&&h(P,F,V,de);break;case ve:I(x,P,F,V,J,oe,de,ee,se);break;default:Ae&1?_(x,P,F,V,J,oe,de,ee,se):Ae&6?R(x,P,F,V,J,oe,de,ee,se):(Ae&64||Ae&128)&&Q.process(x,P,F,V,J,oe,de,ee,se,ne)}ye!=null&&J&&vl(ye,x&&x.ref,oe,P||x,!P)},y=(x,P,F,V)=>{if(x==null)a(P.el=l(P.children),F,V);else{const J=P.el=x.el;P.children!==x.children&&i(J,P.children)}},E=(x,P,F,V)=>{x==null?a(P.el=u(P.children||""),F,V):P.el=x.el},h=(x,P,F,V)=>{[x.el,x.anchor]=m(x.children,P,F,V,x.el,x.anchor)},S=({el:x,anchor:P},F,V)=>{let J;for(;x&&x!==P;)J=p(x),a(x,F,V),x=J;a(P,F,V)},$=({el:x,anchor:P})=>{let F;for(;x&&x!==P;)F=p(x),o(x),x=F;o(P)},_=(x,P,F,V,J,oe,de,ee,se)=>{P.type==="svg"?de="svg":P.type==="math"&&(de="mathml"),x==null?A(P,F,V,J,oe,de,ee,se):L(x,P,J,oe,de,ee,se)},A=(x,P,F,V,J,oe,de,ee)=>{let se,Q;const{props:ye,shapeFlag:Ae,transition:j,dirs:X}=x;if(se=x.el=s(x.type,oe,ye&&ye.is,ye),Ae&8?c(se,x.children):Ae&16&&T(x.children,se,null,V,J,Ds(x,oe),de,ee),X&&la(x,null,V,"created"),O(se,x,x.scopeId,de,V),ye){for(const pe in ye)pe!=="value"&&!wo(pe)&&r(se,pe,null,ye[pe],oe,x.children,V,J,K);"value"in ye&&r(se,"value",null,ye.value,oe),(Q=ye.onVnodeBeforeMount)&&pn(Q,V,x)}X&&la(x,null,V,"beforeMount");const ae=Ay(J,j);ae&&j.beforeEnter(se),a(se,P,F),((Q=ye&&ye.onVnodeMounted)||ae||X)&&Vt(()=>{Q&&pn(Q,V,x),ae&&j.enter(se),X&&la(x,null,V,"mounted")},J)},O=(x,P,F,V,J)=>{if(F&&f(x,F),V)for(let oe=0;oe<V.length;oe++)f(x,V[oe]);if(J){let oe=J.subTree;if(P===oe){const de=J.vnode;O(x,de,de.scopeId,de.slotScopeIds,J.parent)}}},T=(x,P,F,V,J,oe,de,ee,se=0)=>{for(let Q=se;Q<x.length;Q++){const ye=x[Q]=ee?Fn(x[Q]):fn(x[Q]);v(null,ye,P,F,V,J,oe,de,ee)}},L=(x,P,F,V,J,oe,de)=>{const ee=P.el=x.el;let{patchFlag:se,dynamicChildren:Q,dirs:ye}=P;se|=x.patchFlag&16;const Ae=x.props||et,j=P.props||et;let X;if(F&&ua(F,!1),(X=j.onVnodeBeforeUpdate)&&pn(X,F,P,x),ye&&la(P,x,F,"beforeUpdate"),F&&ua(F,!0),Q?N(x.dynamicChildren,Q,ee,F,V,Ds(P,J),oe):de||Fe(x,P,ee,null,F,V,Ds(P,J),oe,!1),se>0){if(se&16)U(ee,P,Ae,j,F,V,J);else if(se&2&&Ae.class!==j.class&&r(ee,"class",null,j.class,J),se&4&&r(ee,"style",Ae.style,j.style,J),se&8){const ae=P.dynamicProps;for(let pe=0;pe<ae.length;pe++){const Be=ae[pe],De=Ae[Be],tt=j[Be];(tt!==De||Be==="value")&&r(ee,Be,De,tt,J,x.children,F,V,K)}}se&1&&x.children!==P.children&&c(ee,P.children)}else!de&&Q==null&&U(ee,P,Ae,j,F,V,J);((X=j.onVnodeUpdated)||ye)&&Vt(()=>{X&&pn(X,F,P,x),ye&&la(P,x,F,"updated")},V)},N=(x,P,F,V,J,oe,de)=>{for(let ee=0;ee<P.length;ee++){const se=x[ee],Q=P[ee],ye=se.el&&(se.type===ve||!fa(se,Q)||se.shapeFlag&70)?d(se.el):F;v(se,Q,ye,null,V,J,oe,de,!0)}},U=(x,P,F,V,J,oe,de)=>{if(F!==V){if(F!==et)for(const ee in F)!wo(ee)&&!(ee in V)&&r(x,ee,F[ee],null,de,P.children,J,oe,K);for(const ee in V){if(wo(ee))continue;const se=V[ee],Q=F[ee];se!==Q&&ee!=="value"&&r(x,ee,Q,se,de,P.children,J,oe,K)}"value"in V&&r(x,"value",F.value,V.value,de)}},I=(x,P,F,V,J,oe,de,ee,se)=>{const Q=P.el=x?x.el:l(""),ye=P.anchor=x?x.anchor:l("");let{patchFlag:Ae,dynamicChildren:j,slotScopeIds:X}=P;X&&(ee=ee?ee.concat(X):X),x==null?(a(Q,F,V),a(ye,F,V),T(P.children||[],F,ye,J,oe,de,ee,se)):Ae>0&&Ae&64&&j&&x.dynamicChildren?(N(x.dynamicChildren,j,F,J,oe,de,ee),(P.key!=null||J&&P===J.subTree)&&ou(x,P,!0)):Fe(x,P,F,ye,J,oe,de,ee,se)},R=(x,P,F,V,J,oe,de,ee,se)=>{P.slotScopeIds=ee,x==null?P.shapeFlag&512?J.ctx.activate(P,F,V,de,se):B(P,F,V,J,oe,de,se):Y(x,P,se)},B=(x,P,F,V,J,oe,de)=>{const ee=x.component=Vy(x,V,J);if(nu(x)&&(ee.ctx.renderer=ne),Fy(ee),ee.asyncDep){if(J&&J.registerDep(ee,Ce),!x.el){const se=ee.subTree=k(Zt);E(null,se,P,F)}}else Ce(ee,x,P,F,J,oe,de)},Y=(x,P,F)=>{const V=P.component=x.component;if(ty(x,P,F))if(V.asyncDep&&!V.asyncResolved){Le(V,P,F);return}else V.next=P,Xh(V.update),V.effect.dirty=!0,V.update();else P.el=x.el,V.vnode=P},Ce=(x,P,F,V,J,oe,de)=>{const ee=()=>{if(x.isMounted){let{next:ye,bu:Ae,u:j,parent:X,vnode:ae}=x;{const mt=Op(x);if(mt){ye&&(ye.el=ae.el,Le(x,ye,de)),mt.asyncDep.then(()=>{x.isUnmounted||ee()});return}}let pe=ye,Be;ua(x,!1),ye?(ye.el=ae.el,Le(x,ye,de)):ye=ae,Ae&&br(Ae),(Be=ye.props&&ye.props.onVnodeBeforeUpdate)&&pn(Be,X,ye,ae),ua(x,!0);const De=js(x),tt=x.subTree;x.subTree=De,v(tt,De,d(tt.el),fe(tt),x,J,oe),ye.el=De.el,pe===null&&ny(x,De.el),j&&Vt(j,J),(Be=ye.props&&ye.props.onVnodeUpdated)&&Vt(()=>pn(Be,X,ye,ae),J)}else{let ye;const{el:Ae,props:j}=P,{bm:X,m:ae,parent:pe}=x,Be=ko(P);if(ua(x,!1),X&&br(X),!Be&&(ye=j&&j.onVnodeBeforeMount)&&pn(ye,pe,P),ua(x,!0),Ae&&Ke){const De=()=>{x.subTree=js(x),Ke(Ae,x.subTree,x,J,null)};Be?P.type.__asyncLoader().then(()=>!x.isUnmounted&&De()):De()}else{const De=x.subTree=js(x);v(null,De,F,V,x,J,oe),P.el=De.el}if(ae&&Vt(ae,J),!Be&&(ye=j&&j.onVnodeMounted)){const De=P;Vt(()=>pn(ye,pe,De),J)}(P.shapeFlag&256||pe&&ko(pe.vnode)&&pe.vnode.shapeFlag&256)&&x.a&&Vt(x.a,J),x.isMounted=!0,P=F=V=null}},se=x.effect=new Kl(ee,hn,()=>Zl(Q),x.scope),Q=x.update=()=>{se.dirty&&se.run()};Q.id=x.uid,ua(x,!0),Q()},Le=(x,P,F)=>{P.component=x;const V=x.vnode.props;x.vnode=P,x.next=null,Sy(x,P.props,V,F),Cy(x,P.children,F),no(),vi(x),ao()},Fe=(x,P,F,V,J,oe,de,ee,se=!1)=>{const Q=x&&x.children,ye=x?x.shapeFlag:0,Ae=P.children,{patchFlag:j,shapeFlag:X}=P;if(j>0){if(j&128){Me(Q,Ae,F,V,J,oe,de,ee,se);return}else if(j&256){Qe(Q,Ae,F,V,J,oe,de,ee,se);return}}X&8?(ye&16&&K(Q,J,oe),Ae!==Q&&c(F,Ae)):ye&16?X&16?Me(Q,Ae,F,V,J,oe,de,ee,se):K(Q,J,oe,!0):(ye&8&&c(F,""),X&16&&T(Ae,F,V,J,oe,de,ee,se))},Qe=(x,P,F,V,J,oe,de,ee,se)=>{x=x||Da,P=P||Da;const Q=x.length,ye=P.length,Ae=Math.min(Q,ye);let j;for(j=0;j<Ae;j++){const X=P[j]=se?Fn(P[j]):fn(P[j]);v(x[j],X,F,null,J,oe,de,ee,se)}Q>ye?K(x,J,oe,!0,!1,Ae):T(P,F,V,J,oe,de,ee,se,Ae)},Me=(x,P,F,V,J,oe,de,ee,se)=>{let Q=0;const ye=P.length;let Ae=x.length-1,j=ye-1;for(;Q<=Ae&&Q<=j;){const X=x[Q],ae=P[Q]=se?Fn(P[Q]):fn(P[Q]);if(fa(X,ae))v(X,ae,F,null,J,oe,de,ee,se);else break;Q++}for(;Q<=Ae&&Q<=j;){const X=x[Ae],ae=P[j]=se?Fn(P[j]):fn(P[j]);if(fa(X,ae))v(X,ae,F,null,J,oe,de,ee,se);else break;Ae--,j--}if(Q>Ae){if(Q<=j){const X=j+1,ae=X<ye?P[X].el:V;for(;Q<=j;)v(null,P[Q]=se?Fn(P[Q]):fn(P[Q]),F,ae,J,oe,de,ee,se),Q++}}else if(Q>j)for(;Q<=Ae;)_e(x[Q],J,oe,!0),Q++;else{const X=Q,ae=Q,pe=new Map;for(Q=ae;Q<=j;Q++){const Tt=P[Q]=se?Fn(P[Q]):fn(P[Q]);Tt.key!=null&&pe.set(Tt.key,Q)}let Be,De=0;const tt=j-ae+1;let mt=!1,lt=0;const Je=new Array(tt);for(Q=0;Q<tt;Q++)Je[Q]=0;for(Q=X;Q<=Ae;Q++){const Tt=x[Q];if(De>=tt){_e(Tt,J,oe,!0);continue}let Xt;if(Tt.key!=null)Xt=pe.get(Tt.key);else for(Be=ae;Be<=j;Be++)if(Je[Be-ae]===0&&fa(Tt,P[Be])){Xt=Be;break}Xt===void 0?_e(Tt,J,oe,!0):(Je[Xt-ae]=Q+1,Xt>=lt?lt=Xt:mt=!0,v(Tt,P[Xt],F,null,J,oe,de,ee,se),De++)}const Cn=mt?$y(Je):Da;for(Be=Cn.length-1,Q=tt-1;Q>=0;Q--){const Tt=ae+Q,Xt=P[Tt],co=Tt+1<ye?P[Tt+1].el:V;Je[Q]===0?v(null,Xt,F,co,J,oe,de,ee,se):mt&&(Be<0||Q!==Cn[Be]?re(Xt,F,co,2):Be--)}}},re=(x,P,F,V,J=null)=>{const{el:oe,type:de,transition:ee,children:se,shapeFlag:Q}=x;if(Q&6){re(x.component.subTree,P,F,V);return}if(Q&128){x.suspense.move(P,F,V);return}if(Q&64){de.move(x,P,F,ne);return}if(de===ve){a(oe,P,F);for(let Ae=0;Ae<se.length;Ae++)re(se[Ae],P,F,V);a(x.anchor,P,F);return}if(de===Fs){S(x,P,F);return}if(V!==2&&Q&1&&ee)if(V===0)ee.beforeEnter(oe),a(oe,P,F),Vt(()=>ee.enter(oe),J);else{const{leave:Ae,delayLeave:j,afterLeave:X}=ee,ae=()=>a(oe,P,F),pe=()=>{Ae(oe,()=>{ae(),X&&X()})};j?j(oe,ae,pe):pe()}else a(oe,P,F)},_e=(x,P,F,V=!1,J=!1)=>{const{type:oe,props:de,ref:ee,children:se,dynamicChildren:Q,shapeFlag:ye,patchFlag:Ae,dirs:j}=x;if(ee!=null&&vl(ee,null,F,x,!0),ye&256){P.ctx.deactivate(x);return}const X=ye&1&&j,ae=!ko(x);let pe;if(ae&&(pe=de&&de.onVnodeBeforeUnmount)&&pn(pe,P,x),ye&6)Ot(x.component,F,V);else{if(ye&128){x.suspense.unmount(F,V);return}X&&la(x,null,P,"beforeUnmount"),ye&64?x.type.remove(x,P,F,J,ne,V):Q&&(oe!==ve||Ae>0&&Ae&64)?K(Q,P,F,!1,!0):(oe===ve&&Ae&384||!J&&ye&16)&&K(se,P,F),V&&Ve(x)}(ae&&(pe=de&&de.onVnodeUnmounted)||X)&&Vt(()=>{pe&&pn(pe,P,x),X&&la(x,null,P,"unmounted")},F)},Ve=x=>{const{type:P,el:F,anchor:V,transition:J}=x;if(P===ve){ft(F,V);return}if(P===Fs){$(x);return}const oe=()=>{o(F),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(x.shapeFlag&1&&J&&!J.persisted){const{leave:de,delayLeave:ee}=J,se=()=>de(F,oe);ee?ee(x.el,oe,se):se()}else oe()},ft=(x,P)=>{let F;for(;x!==P;)F=p(x),o(x),x=F;o(P)},Ot=(x,P,F)=>{const{bum:V,scope:J,update:oe,subTree:de,um:ee}=x;V&&br(V),J.stop(),oe&&(oe.active=!1,_e(de,x,P,F)),ee&&Vt(ee,P),Vt(()=>{x.isUnmounted=!0},P),P&&P.pendingBranch&&!P.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===P.pendingId&&(P.deps--,P.deps===0&&P.resolve())},K=(x,P,F,V=!1,J=!1,oe=0)=>{for(let de=oe;de<x.length;de++)_e(x[de],P,F,V,J)},fe=x=>x.shapeFlag&6?fe(x.component.subTree):x.shapeFlag&128?x.suspense.next():p(x.anchor||x.el);let ke=!1;const Se=(x,P,F)=>{x==null?P._vnode&&_e(P._vnode,null,null,!0):v(P._vnode||null,x,P,null,null,null,F),ke||(ke=!0,vi(),fp(),ke=!1),P._vnode=x},ne={p:v,um:_e,m:re,r:Ve,mt:B,mc:T,pc:Fe,pbc:N,n:fe,o:e};let we,Ke;return t&&([we,Ke]=t(ne)),{render:Se,hydrate:we,createApp:_y(Se,we)}}function Ds({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function ua({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Ay(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ou(e,t,n=!1){const a=e.children,o=t.children;if(Pe(a)&&Pe(o))for(let r=0;r<a.length;r++){const s=a[r];let l=o[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=o[r]=Fn(o[r]),l.el=s.el),n||ou(s,l)),l.type===cs&&(l.el=s.el)}}function $y(e){const t=e.slice(),n=[0];let a,o,r,s,l;const u=e.length;for(a=0;a<u;a++){const i=e[a];if(i!==0){if(o=n[n.length-1],e[o]<i){t[a]=o,n.push(a);continue}for(r=0,s=n.length-1;r<s;)l=r+s>>1,e[n[l]]<i?r=l+1:s=l;i<e[n[r]]&&(r>0&&(t[a]=n[r-1]),n[r]=a)}}for(r=n.length,s=n[r-1];r-- >0;)n[r]=s,s=t[s];return n}function Op(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Op(t)}const xy=e=>e.__isTeleport,Mo=e=>e&&(e.disabled||e.disabled===""),Oi=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Ti=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,hl=(e,t)=>{const n=e&&e.to;return ct(n)?t?t(n):null:n},Iy={name:"Teleport",__isTeleport:!0,process(e,t,n,a,o,r,s,l,u,i){const{mc:c,pc:d,pbc:p,o:{insert:f,querySelector:m,createText:v,createComment:y}}=i,E=Mo(t.props);let{shapeFlag:h,children:S,dynamicChildren:$}=t;if(e==null){const _=t.el=v(""),A=t.anchor=v("");f(_,n,a),f(A,n,a);const O=t.target=hl(t.props,m),T=t.targetAnchor=v("");O&&(f(T,O),s==="svg"||Oi(O)?s="svg":(s==="mathml"||Ti(O))&&(s="mathml"));const L=(N,U)=>{h&16&&c(S,N,U,o,r,s,l,u)};E?L(n,A):O&&L(O,T)}else{t.el=e.el;const _=t.anchor=e.anchor,A=t.target=e.target,O=t.targetAnchor=e.targetAnchor,T=Mo(e.props),L=T?n:A,N=T?_:O;if(s==="svg"||Oi(A)?s="svg":(s==="mathml"||Ti(A))&&(s="mathml"),$?(p(e.dynamicChildren,$,L,o,r,s,l),ou(e,t,!0)):u||d(e,t,L,N,o,r,s,l,!1),E)T?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):lr(t,n,_,i,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const U=t.target=hl(t.props,m);U&&lr(t,U,null,i,0)}else T&&lr(t,A,O,i,1)}Tp(t)},remove(e,t,n,a,{um:o,o:{remove:r}},s){const{shapeFlag:l,children:u,anchor:i,targetAnchor:c,target:d,props:p}=e;if(d&&r(c),s&&r(i),l&16){const f=s||!Mo(p);for(let m=0;m<u.length;m++){const v=u[m];o(v,t,n,f,!!v.dynamicChildren)}}},move:lr,hydrate:Ly};function lr(e,t,n,{o:{insert:a},m:o},r=2){r===0&&a(e.targetAnchor,t,n);const{el:s,anchor:l,shapeFlag:u,children:i,props:c}=e,d=r===2;if(d&&a(s,t,n),(!d||Mo(c))&&u&16)for(let p=0;p<i.length;p++)o(i[p],t,n,2);d&&a(l,t,n)}function Ly(e,t,n,a,o,r,{o:{nextSibling:s,parentNode:l,querySelector:u}},i){const c=t.target=hl(t.props,u);if(c){const d=c._lpa||c.firstChild;if(t.shapeFlag&16)if(Mo(t.props))t.anchor=i(s(e),t,l(e),n,a,o,r),t.targetAnchor=d;else{t.anchor=s(e);let p=d;for(;p;)if(p=s(p),p&&p.nodeType===8&&p.data==="teleport anchor"){t.targetAnchor=p,c._lpa=t.targetAnchor&&s(t.targetAnchor);break}i(d,t,c,n,a,o,r)}Tp(t)}return t.anchor&&s(t.anchor)}const ru=Iy;function Tp(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n&&n!==e.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const ve=Symbol.for("v-fgt"),cs=Symbol.for("v-txt"),Zt=Symbol.for("v-cmt"),Fs=Symbol.for("v-stc"),Oo=[];let en=null;function b(e=!1){Oo.push(en=e?null:[])}function Py(){Oo.pop(),en=Oo[Oo.length-1]||null}let Ro=1;function Ai(e){Ro+=e}function Ap(e){return e.dynamicChildren=Ro>0?en||Da:null,Py(),Ro>0&&en&&en.push(e),e}function M(e,t,n,a,o,r){return Ap(C(e,t,n,a,o,r,!0))}function be(e,t,n,a,o){return Ap(k(e,t,n,a,o,!0))}function Lr(e){return e?e.__v_isVNode===!0:!1}function fa(e,t){return e.type===t.type&&e.key===t.key}const ds="__vInternal",$p=({key:e})=>e??null,wr=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ct(e)||Ht(e)||He(e)?{i:bt,r:e,k:t,f:!!n}:e:null);function C(e,t=null,n=null,a=0,o=null,r=e===ve?0:1,s=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&$p(t),ref:t&&wr(t),scopeId:us,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:a,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:bt};return l?(su(u,n),r&128&&e.normalize(u)):n&&(u.shapeFlag|=ct(n)?8:16),Ro>0&&!s&&en&&(u.patchFlag>0||r&6)&&u.patchFlag!==32&&en.push(u),u}const k=By;function By(e,t=null,n=null,a=0,o=null,r=!1){if((!e||e===vp)&&(e=Zt),Lr(e)){const l=Qn(e,t,!0);return n&&su(l,n),Ro>0&&!r&&en&&(l.shapeFlag&6?en[en.indexOf(e)]=l:en.push(l)),l.patchFlag|=-2,l}if(Yy(e)&&(e=e.__vccOpts),t){t=xp(t);let{class:l,style:u}=t;l&&!ct(l)&&(t.class=qe(l)),at(u)&&(sp(u)&&!Pe(u)&&(u=Ct({},u)),t.style=st(u))}const s=ct(e)?1:ay(e)?128:xy(e)?64:at(e)?4:He(e)?2:0;return C(e,t,n,a,o,s,r,!0)}function xp(e){return e?sp(e)||ds in e?Ct({},e):e:null}function Qn(e,t,n=!1){const{props:a,ref:o,patchFlag:r,children:s}=e,l=t?Ry(a||{},t):a;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&$p(l),ref:t&&t.ref?n&&o?Pe(o)?o.concat(wr(t)):[o,wr(t)]:wr(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ve?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Qn(e.ssContent),ssFallback:e.ssFallback&&Qn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function $t(e=" ",t=0){return k(cs,null,e,t)}function ce(e="",t=!1){return t?(b(),be(Zt,null,e)):k(Zt,null,e)}function fn(e){return e==null||typeof e=="boolean"?k(Zt):Pe(e)?k(ve,null,e.slice()):typeof e=="object"?Fn(e):k(cs,null,String(e))}function Fn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Qn(e)}function su(e,t){let n=0;const{shapeFlag:a}=e;if(t==null)t=null;else if(Pe(t))n=16;else if(typeof t=="object")if(a&65){const o=t.default;o&&(o._c&&(o._d=!1),su(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(ds in t)?t._ctx=bt:o===3&&bt&&(bt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else He(t)?(t={default:t,_ctx:bt},n=32):(t=String(t),a&64?(n=16,t=[$t(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ry(...e){const t={};for(let n=0;n<e.length;n++){const a=e[n];for(const o in a)if(o==="class")t.class!==a.class&&(t.class=qe([t.class,a.class]));else if(o==="style")t.style=st([t.style,a.style]);else if(ns(o)){const r=t[o],s=a[o];s&&r!==s&&!(Pe(r)&&r.includes(s))&&(t[o]=r?[].concat(r,s):s)}else o!==""&&(t[o]=a[o])}return t}function pn(e,t,n,a=null){on(e,t,7,[n,a])}const jy=wp();let Ny=0;function Vy(e,t,n){const a=e.type,o=(t?t.appContext:e.appContext)||jy,r={uid:Ny++,vnode:e,type:a,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new _h(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:wy(a,o),emitsOptions:Zh(a,o),emit:null,emitted:null,propsDefaults:et,inheritAttrs:a.inheritAttrs,ctx:et,data:et,props:et,attrs:et,slots:et,refs:et,setupState:et,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=qh.bind(null,r),e.ce&&e.ce(r),r}let Bt=null;const Dy=()=>Bt||bt;let Pr,yl;{const e=Gl(),t=(n,a)=>{let o;return(o=e[n])||(o=e[n]=[]),o.push(a),r=>{o.length>1?o.forEach(s=>s(r)):o[0](r)}};Pr=t("__VUE_INSTANCE_SETTERS__",n=>Bt=n),yl=t("__VUE_SSR_SETTERS__",n=>ps=n)}const lu=e=>{const t=Bt;return Pr(e),e.scope.on(),()=>{e.scope.off(),Pr(t)}},$i=()=>{Bt&&Bt.scope.off(),Pr(null)};function Ip(e){return e.vnode.shapeFlag&4}let ps=!1;function Fy(e,t=!1){t&&yl(t);const{props:n,children:a}=e.vnode,o=Ip(e);by(e,n,o,t),Ey(e,a);const r=o?Gy(e,t):void 0;return t&&yl(!1),r}function Gy(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=lp(new Proxy(e.ctx,fy));const{setup:a}=n;if(a){const o=e.setupContext=a.length>1?Ky(e):null,r=lu(e);no();const s=Yn(a,e,0,[e.props,o]);if(ao(),r(),Ud(s)){if(s.then($i,$i),t)return s.then(l=>{xi(e,l,t)}).catch(l=>{ss(l,e,0)});e.asyncDep=s}else xi(e,s,t)}else Lp(e,t)}function xi(e,t,n){He(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:at(t)&&(e.setupState=cp(t)),Lp(e,n)}let Ii;function Lp(e,t,n){const a=e.type;if(!e.render){if(!t&&Ii&&!a.render){const o=a.template||my(e).template;if(o){const{isCustomElement:r,compilerOptions:s}=e.appContext.config,{delimiters:l,compilerOptions:u}=a,i=Ct(Ct({isCustomElement:r,delimiters:l},s),u);a.render=Ii(o,i)}}e.render=a.render||hn}}function Uy(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Ft(e,"get","$attrs"),t[n]}}))}function Ky(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return Uy(e)},slots:e.slots,emit:e.emit,expose:t}}function fs(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(cp(lp(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Eo)return Eo[n](e)},has(t,n){return n in t||n in Eo}}))}function zy(e,t=!0){return He(e)?e.displayName||e.name:e.name||t&&e.__name}function Yy(e){return He(e)&&"__vccOpts"in e}const g=(e,t)=>Gh(e,t,ps);function Hy(e,t,n){const a=arguments.length;return a===2?at(t)&&!Pe(t)?Lr(t)?k(e,null,[t]):k(e,t):k(e,null,t):(a>3?n=Array.prototype.slice.call(arguments,2):a===3&&Lr(n)&&(n=[n]),k(e,t,n))}const Xy="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Wy="http://www.w3.org/2000/svg",Jy="http://www.w3.org/1998/Math/MathML",Gn=typeof document<"u"?document:null,Li=Gn&&Gn.createElement("template"),qy={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,a)=>{const o=t==="svg"?Gn.createElementNS(Wy,e):t==="mathml"?Gn.createElementNS(Jy,e):Gn.createElement(e,n?{is:n}:void 0);return e==="select"&&a&&a.multiple!=null&&o.setAttribute("multiple",a.multiple),o},createText:e=>Gn.createTextNode(e),createComment:e=>Gn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Gn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,a,o,r){const s=n?n.previousSibling:t.lastChild;if(o&&(o===r||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===r||!(o=o.nextSibling)););else{Li.innerHTML=a==="svg"?`<svg>${e}</svg>`:a==="mathml"?`<math>${e}</math>`:e;const l=Li.content;if(a==="svg"||a==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[s?s.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Rn="transition",ho="animation",jo=Symbol("_vtc"),uu=(e,{slots:t})=>Hy(iy,Zy(e),t);uu.displayName="Transition";const Pp={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};uu.props=Ct({},gp,Pp);const ia=(e,t=[])=>{Pe(e)?e.forEach(n=>n(...t)):e&&e(...t)},Pi=e=>e?Pe(e)?e.some(t=>t.length>1):e.length>1:!1;function Zy(e){const t={};for(const I in e)I in Pp||(t[I]=e[I]);if(e.css===!1)return t;const{name:n="v",type:a,duration:o,enterFromClass:r=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:u=r,appearActiveClass:i=s,appearToClass:c=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,m=Qy(o),v=m&&m[0],y=m&&m[1],{onBeforeEnter:E,onEnter:h,onEnterCancelled:S,onLeave:$,onLeaveCancelled:_,onBeforeAppear:A=E,onAppear:O=h,onAppearCancelled:T=S}=t,L=(I,R,B)=>{ca(I,R?c:l),ca(I,R?i:s),B&&B()},N=(I,R)=>{I._isLeaving=!1,ca(I,d),ca(I,f),ca(I,p),R&&R()},U=I=>(R,B)=>{const Y=I?O:h,Ce=()=>L(R,I,B);ia(Y,[R,Ce]),Bi(()=>{ca(R,I?u:r),jn(R,I?c:l),Pi(Y)||Ri(R,a,v,Ce)})};return Ct(t,{onBeforeEnter(I){ia(E,[I]),jn(I,r),jn(I,s)},onBeforeAppear(I){ia(A,[I]),jn(I,u),jn(I,i)},onEnter:U(!1),onAppear:U(!0),onLeave(I,R){I._isLeaving=!0;const B=()=>N(I,R);jn(I,d),ng(),jn(I,p),Bi(()=>{I._isLeaving&&(ca(I,d),jn(I,f),Pi($)||Ri(I,a,y,B))}),ia($,[I,B])},onEnterCancelled(I){L(I,!1),ia(S,[I])},onAppearCancelled(I){L(I,!0),ia(T,[I])},onLeaveCancelled(I){N(I),ia(_,[I])}})}function Qy(e){if(e==null)return null;if(at(e))return[Gs(e.enter),Gs(e.leave)];{const t=Gs(e);return[t,t]}}function Gs(e){return ch(e)}function jn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[jo]||(e[jo]=new Set)).add(t)}function ca(e,t){t.split(/\s+/).forEach(a=>a&&e.classList.remove(a));const n=e[jo];n&&(n.delete(t),n.size||(e[jo]=void 0))}function Bi(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let eg=0;function Ri(e,t,n,a){const o=e._endId=++eg,r=()=>{o===e._endId&&a()};if(n)return setTimeout(r,n);const{type:s,timeout:l,propCount:u}=tg(e,t);if(!s)return a();const i=s+"end";let c=0;const d=()=>{e.removeEventListener(i,p),r()},p=f=>{f.target===e&&++c>=u&&d()};setTimeout(()=>{c<u&&d()},l+1),e.addEventListener(i,p)}function tg(e,t){const n=window.getComputedStyle(e),a=m=>(n[m]||"").split(", "),o=a(`${Rn}Delay`),r=a(`${Rn}Duration`),s=ji(o,r),l=a(`${ho}Delay`),u=a(`${ho}Duration`),i=ji(l,u);let c=null,d=0,p=0;t===Rn?s>0&&(c=Rn,d=s,p=r.length):t===ho?i>0&&(c=ho,d=i,p=u.length):(d=Math.max(s,i),c=d>0?s>i?Rn:ho:null,p=c?c===Rn?r.length:u.length:0);const f=c===Rn&&/\b(transform|all)(,|$)/.test(a(`${Rn}Property`).toString());return{type:c,timeout:d,propCount:p,hasTransform:f}}function ji(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,a)=>Ni(n)+Ni(e[a])))}function Ni(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ng(){return document.body.offsetHeight}function ag(e,t,n){const a=e[jo];a&&(t=(t?[t,...a]:[...a]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Br=Symbol("_vod"),Bp=Symbol("_vsh"),Rp={beforeMount(e,{value:t},{transition:n}){e[Br]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):yo(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:a}){!t!=!n&&(a?t?(a.beforeEnter(e),yo(e,!0),a.enter(e)):a.leave(e,()=>{yo(e,!1)}):yo(e,t))},beforeUnmount(e,{value:t}){yo(e,t)}};function yo(e,t){e.style.display=t?e[Br]:"none",e[Bp]=!t}const og=Symbol(""),rg=/(^|;)\s*display\s*:/;function sg(e,t,n){const a=e.style,o=ct(n);let r=!1;if(n&&!o){if(t)if(ct(t))for(const s of t.split(";")){const l=s.slice(0,s.indexOf(":")).trim();n[l]==null&&kr(a,l,"")}else for(const s in t)n[s]==null&&kr(a,s,"");for(const s in n)s==="display"&&(r=!0),kr(a,s,n[s])}else if(o){if(t!==n){const s=a[og];s&&(n+=";"+s),a.cssText=n,r=rg.test(n)}}else t&&e.removeAttribute("style");Br in e&&(e[Br]=r?a.display:"",e[Bp]&&(a.display="none"))}const Vi=/\s*!important$/;function kr(e,t,n){if(Pe(n))n.forEach(a=>kr(e,t,a));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const a=lg(e,t);Vi.test(n)?e.setProperty(to(a),n.replace(Vi,""),"important"):e[a]=n}}const Di=["Webkit","Moz","ms"],Us={};function lg(e,t){const n=Us[t];if(n)return n;let a=Sn(t);if(a!=="filter"&&a in e)return Us[t]=a;a=os(a);for(let o=0;o<Di.length;o++){const r=Di[o]+a;if(r in e)return Us[t]=r}return t}const Fi="http://www.w3.org/1999/xlink";function ug(e,t,n,a,o){if(a&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Fi,t.slice(6,t.length)):e.setAttributeNS(Fi,t,n);else{const r=yh(t);n==null||r&&!Yd(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function ig(e,t,n,a,o,r,s){if(t==="innerHTML"||t==="textContent"){a&&s(a,o,r),e[t]=n??"";return}const l=e.tagName;if(t==="value"&&l!=="PROGRESS"&&!l.includes("-")){const i=l==="OPTION"?e.getAttribute("value")||"":e.value,c=n??"";(i!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let u=!1;if(n===""||n==null){const i=typeof e[t];i==="boolean"?n=Yd(n):n==null&&i==="string"?(n="",u=!0):i==="number"&&(n=0,u=!0)}try{e[t]=n}catch{}u&&e.removeAttribute(t)}function Un(e,t,n,a){e.addEventListener(t,n,a)}function cg(e,t,n,a){e.removeEventListener(t,n,a)}const Gi=Symbol("_vei");function dg(e,t,n,a,o=null){const r=e[Gi]||(e[Gi]={}),s=r[t];if(a&&s)s.value=a;else{const[l,u]=pg(t);if(a){const i=r[t]=vg(a,o);Un(e,l,i,u)}else s&&(cg(e,l,s,u),r[t]=void 0)}}const Ui=/(?:Once|Passive|Capture)$/;function pg(e){let t;if(Ui.test(e)){t={};let a;for(;a=e.match(Ui);)e=e.slice(0,e.length-a[0].length),t[a[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):to(e.slice(2)),t]}let Ks=0;const fg=Promise.resolve(),mg=()=>Ks||(fg.then(()=>Ks=0),Ks=Date.now());function vg(e,t){const n=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=n.attached)return;on(hg(a,n.value),t,5,[a])};return n.value=e,n.attached=mg(),n}function hg(e,t){if(Pe(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(a=>o=>!o._stopped&&a&&a(o))}else return t}const Ki=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,yg=(e,t,n,a,o,r,s,l,u)=>{const i=o==="svg";t==="class"?ag(e,a,i):t==="style"?sg(e,n,a):ns(t)?Dl(t)||dg(e,t,n,a,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):gg(e,t,a,i))?ig(e,t,a,r,s,l,u):(t==="true-value"?e._trueValue=a:t==="false-value"&&(e._falseValue=a),ug(e,t,a,i))};function gg(e,t,n,a){if(a)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ki(t)&&He(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const o=e.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Ki(t)&&ct(n)?!1:t in e}const Ha=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Pe(t)?n=>br(t,n):t};function _g(e){e.target.composing=!0}function zi(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const xn=Symbol("_assign"),ms={created(e,{modifiers:{lazy:t,trim:n,number:a}},o){e[xn]=Ha(o);const r=a||o.props&&o.props.type==="number";Un(e,t?"change":"input",s=>{if(s.target.composing)return;let l=e.value;n&&(l=l.trim()),r&&(l=Io(l)),e[xn](l)}),n&&Un(e,"change",()=>{e.value=e.value.trim()}),t||(Un(e,"compositionstart",_g),Un(e,"compositionend",zi),Un(e,"change",zi))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:a,number:o}},r){if(e[xn]=Ha(r),e.composing)return;const s=o||e.type==="number"?Io(e.value):e.value,l=t??"";s!==l&&(document.activeElement===e&&e.type!=="range"&&(n||a&&e.value.trim()===l)||(e.value=l))}},bg={deep:!0,created(e,t,n){e[xn]=Ha(n),Un(e,"change",()=>{const a=e._modelValue,o=No(e),r=e.checked,s=e[xn];if(Pe(a)){const l=Ul(a,o),u=l!==-1;if(r&&!u)s(a.concat(o));else if(!r&&u){const i=[...a];i.splice(l,1),s(i)}}else if(eo(a)){const l=new Set(a);r?l.add(o):l.delete(o),s(l)}else s(jp(e,r))})},mounted:Yi,beforeUpdate(e,t,n){e[xn]=Ha(n),Yi(e,t,n)}};function Yi(e,{value:t,oldValue:n},a){e._modelValue=t,Pe(t)?e.checked=Ul(t,a.props.value)>-1:eo(t)?e.checked=t.has(a.props.value):t!==n&&(e.checked=Yo(t,jp(e,!0)))}const Sg={deep:!0,created(e,{value:t,modifiers:{number:n}},a){const o=eo(t);Un(e,"change",()=>{const r=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>n?Io(No(s)):No(s));e[xn](e.multiple?o?new Set(r):r:r[0]),e._assigning=!0,Ea(()=>{e._assigning=!1})}),e[xn]=Ha(a)},mounted(e,{value:t,modifiers:{number:n}}){Hi(e,t,n)},beforeUpdate(e,t,n){e[xn]=Ha(n)},updated(e,{value:t,modifiers:{number:n}}){e._assigning||Hi(e,t,n)}};function Hi(e,t,n){const a=e.multiple,o=Pe(t);if(!(a&&!o&&!eo(t))){for(let r=0,s=e.options.length;r<s;r++){const l=e.options[r],u=No(l);if(a)if(o){const i=typeof u;i==="string"||i==="number"?l.selected=t.includes(n?Io(u):u):l.selected=Ul(t,u)>-1}else l.selected=t.has(u);else if(Yo(No(l),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!a&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function No(e){return"_value"in e?e._value:e.value}function jp(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const wg=["ctrl","shift","alt","meta"],kg={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>wg.some(n=>e[`${n}Key`]&&!t.includes(n))},ze=(e,t)=>{const n=e._withMods||(e._withMods={}),a=t.join(".");return n[a]||(n[a]=(o,...r)=>{for(let s=0;s<t.length;s++){const l=kg[t[s]];if(l&&l(o,t))return}return e(o,...r)})},Eg=Ct({patchProp:yg},qy);let Xi;function Cg(){return Xi||(Xi=Oy(Eg))}const Mg=(...e)=>{const t=Cg().createApp(...e),{mount:n}=t;return t.mount=a=>{const o=Tg(a);if(!o)return;const r=t._component;!He(r)&&!r.render&&!r.template&&(r.template=o.innerHTML),o.innerHTML="";const s=n(o,!1,Og(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),s},t};function Og(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Tg(e){return ct(e)?document.querySelector(e):e}const Ag={class:"cnavas-mode-panel"},$g=q({__name:"CanvasModepanel",props:{canvasMode:{}},emits:["change-mode"],setup(e,{emit:t}){const n=t;function a(o){n("change-mode",o)}return(o,r)=>(b(),M("div",Ag,[C("button",{type:"button",class:qe({selected:o.canvasMode==="edit"}),onClick:r[0]||(r[0]=s=>a("edit"))}," Edit ",2),C("button",{type:"button",class:qe({selected:o.canvasMode==="pose"}),onClick:r[1]||(r[1]=s=>a("pose"))}," Pose ",2),C("button",{type:"button",class:qe({selected:o.canvasMode==="weight"}),onClick:r[2]||(r[2]=s=>a("weight"))}," Weight ",2)]))}});const Te=(e,t)=>{const n=e.__vccOpts||e;for(const[a,o]of t)n[a]=o;return n},xg=Te($g,[["__scopeId","data-v-fd46187a"]]),Ig={key:0,class:"canvas-command"},Lg={key:0,class:"command"},Pg=q({__name:"CommandExamPanel",props:{availableCommandList:{default:()=>[]}},setup(e){return(t,n)=>(b(),be(uu,null,{default:D(()=>[t.availableCommandList.length>0?(b(),M("div",Ig,[C("ul",null,[(b(!0),M(ve,null,Ie(t.availableCommandList,a=>(b(),M("li",{key:a.command},[a.command?(b(),M("span",Lg,Ne(a.command)+":",1)):ce("",!0),C("span",null,Ne(a.title),1)]))),128))])])):ce("",!0)]),_:1}))}});const iu=Te(Pg,[["__scopeId","data-v-0fbccacb"]]),Bg={key:0,class:"drop-menu"},Rg=["onClick"],jg={key:0},Ng=q({__name:"DropdownMenu",props:{label:{},items:{default:()=>[]}},setup(e){const t=H(),n=H(!1);function a(s){var l;s.target instanceof Element&&((l=t.value)!=null&&l.contains(s.target)||(n.value=!1))}vt(n,s=>{s?window.addEventListener("mousemove",a):window.removeEventListener("mousemove",a)});function o(){n.value=!n.value}function r(s){s==null||s(),n.value=!1}return(s,l)=>(b(),M("div",{ref_key:"root",ref:t,class:"dropdown-menu"},[C("button",{type:"button",onClick:o},Ne(s.label),1),n.value?(b(),M("ul",Bg,[(b(!0),M(ve,null,Ie(s.items,u=>(b(),M(ve,{key:u.label},[C("li",null,[C("button",{type:"button",onClick:i=>r(u.exec)},Ne(u.label),9,Rg)]),u.underline?(b(),M("hr",jg)):ce("",!0)],64))),128))])):ce("",!0)],512))}});const Vg=Te(Ng,[["__scopeId","data-v-9bbe2402"]]),Dg={class:"group-wrapper"},Fg=q({__name:"CanvasToolMenuGroups",props:{groups:{default:()=>[]}},setup(e){return(t,n)=>(b(),M("div",Dg,[(b(!0),M(ve,null,Ie(t.groups,a=>(b(),be(Vg,{key:a.label,items:a.items,label:a.label,class:"group"},null,8,["items","label"]))),128))]))}});const Np=Te(Fg,[["__scopeId","data-v-b4b0b460"]]),Gg=["transform"],Ug=C("rect",{width:"10",height:"10",stroke:"none",class:"fill-background-second"},null,-1),Kg=C("path",{d:"M2 7L8 7L5 2z","stroke-linejoin":"round",stroke:"none",class:"fill-background"},null,-1),zg=[Ug,Kg],Rr=q({__name:"UpIcon",props:{flipped:{type:Boolean,default:!1},right:{type:Boolean,default:!1}},setup(e){return(t,n)=>(b(),M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",transform:`rotate(${e.right?90:0}) scale(1, ${e.flipped?-1:1})`},zg,8,Gg))}}),Yg={class:"input-wrapper"},Hg=["disabled","data-keep-focus"],Xg=q({__name:"TextInput",props:{modelValue:{default:""},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},realtime:{type:Boolean,default:!1},keepFocus:{type:Boolean,default:!1}},emits:["update:model-value","blur"],setup(e,{emit:t}){const n=e,a=t,o=H(),r=H(n.autofocus),s=H("");rn(()=>{s.value=n.modelValue}),vt(s,()=>{n.realtime&&a("update:model-value",s.value)});function l(){s.value!==n.modelValue&&a("update:model-value",s.value)}function u(){var d,p;(d=o.value)==null||d.focus(),(p=o.value)==null||p.select()}Gt(()=>{var d,p;n.autofocus&&((d=o.value)==null||d.focus(),(p=o.value)==null||p.select())});function i(){r.value=!1,a("blur")}const c=()=>r.value=!0;return(d,p)=>(b(),M("div",Yg,[oa(C("input",{ref_key:"inputEl",ref:o,"onUpdate:modelValue":p[0]||(p[0]=f=>s.value=f),type:"text",disabled:d.disabled,"data-keep-focus":d.keepFocus,onChange:l,onFocus:c,onBlur:i},null,40,Hg),[[ms,s.value]]),!r.value&&!d.disabled?(b(),M("div",{key:0,class:"input-forward",onClick:u})):ce("",!0)]))}});const Hn=Te(Xg,[["__scopeId","data-v-a20938b3"]]),Wg=q({__name:"DeltaText",props:{deltaList:{}},setup(e){return(t,n)=>(b(),M("p",null,[(b(!0),M(ve,null,Ie(t.deltaList,(a,o)=>(b(),M("span",{key:o,class:qe({hit:a.hit})},Ne(a.text),3))),128))]))}});const Jg=Te(Wg,[["__scopeId","data-v-48d60cf7"]]);function qg(e,t){const n=t.indexOf(e);return n===-1?void 0:{from:n,length:e.length}}function Zg(e,t){const n=[],a=e.toLowerCase();let o=t;for(;o.length>0;){const r=qg(a,o.toLowerCase());if(!r){n.push({text:o});break}r.from>0&&n.push({text:o.slice(0,r.from)}),n.push({text:o.slice(r.from,r.from+r.length),hit:!0}),o=o.slice(r.from+r.length)}return n}const Qg=e=>(dt("data-v-963e1997"),e=e(),pt(),e),e_={key:0,class:"keyword-block"},t_={key:1,class:"not-found"},n_=Qg(()=>C("p",null,"Not found",-1)),a_=[n_],o_={key:2},r_=["onClick","onMousemove"],s_={key:1},Wi=26,Ji=26,l_=q({__name:"PopupMenuList",props:{popupMenuList:{},enabledSearch:{type:Boolean,default:!1}},setup(e){const t=e,n=g(()=>t.popupMenuList.findIndex(u=>u.focus)),a=g(()=>{const u=n.value;return u!==-1?`translateY(-${u*Wi+Ji}px)`:""}),o=g(()=>t.popupMenuList.findIndex(u=>u.opened)),r=g(()=>{var c;const u=(c=t.popupMenuList[o.value])==null?void 0:c.children;if(!u)return 0;const i=Math.ceil(u.length/2)-1;return(o.value-i)*Wi+Ji-1}),s=H(""),l=g(()=>{if(!s.value)return t.popupMenuList;const u=s.value.toLowerCase();return t.popupMenuList.flatMap(i=>[i,...i.children??[]].filter(c=>c.exec&&!c.children&&c.label.toLowerCase().includes(u))).sort((i,c)=>i.label.length-c.label.length)});return(u,i)=>{const c=eu("PopupMenuList",!0);return b(),M("div",{class:"popup-menu-list-wrapper",style:st({transform:a.value})},[u.enabledSearch?(b(),M("div",e_,[k(Hn,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=d=>s.value=d),realtime:"",autofocus:"","keep-focus":""},null,8,["modelValue"])])):ce("",!0),s.value&&l.value.length===0?(b(),M("div",t_,a_)):(b(),M("ul",o_,[(b(!0),M(ve,null,Ie(l.value,d=>(b(),M("li",{key:d.label},[C("button",{type:"button",onClick:d.exec,onMousemove:d.hover},[s.value?(b(),be(Jg,{key:0,"delta-list":G(Zg)(s.value,d.label)},null,8,["delta-list"])):(b(),M("p",s_,Ne(d.label),1)),d.children?(b(),be(Rr,{key:2,right:"",class:"right-arrow"})):ce("",!0)],40,r_),d.children&&d.opened?(b(),be(c,{key:0,"popup-menu-list":d.children,style:st({top:`${r.value}px`}),class:"children"},null,8,["popup-menu-list","style"])):ce("",!0)]))),128))]))],4)}}});const cu=Te(l_,[["__scopeId","data-v-963e1997"]]);/*! okageo v3.0.8, License MIT, git+https://github.com/miyanokomiya/okageo.git */var u_=Object.defineProperty,qi=Object.getOwnPropertySymbols,i_=Object.prototype.hasOwnProperty,c_=Object.prototype.propertyIsEnumerable,Zi=(e,t,n)=>t in e?u_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qi=(e,t)=>{for(var n in t||(t={}))i_.call(t,n)&&Zi(e,n,t[n]);if(qi)for(var n of qi(t))c_.call(t,n)&&Zi(e,n,t[n]);return e};const ea=1e-6,rt=[1,0,0,1,0,0];function me(e,t){return{x:e,y:t}}function te(e,t){return me(e.x+t.x,e.y+t.y)}function Oe(e,t){return me(e.x-t.x,e.y-t.y)}function je(e,t){return me(e.x*t,e.y*t)}function Ka(e,t){const n=Oe(e,t);return Math.abs(n.x)<ea&&Math.abs(n.y)<ea}function It(e,t){return ba(Oe(e,t))}function d_(e,t=!1){if(e.length<2)return 0;let n=0;for(let a=0;a<e.length-1;a++)n+=It(e[a],e[a+1]);return t&&(n+=It(e[e.length-1],e[0])),n}function ba(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function Xa(e){return ba(e)<ea}function p_(e,t){return e.x*t.y-e.y*t.x}function jr(e,t){return e.x*t.x+e.y*t.y}function Vp(e,t){return je(te(e,t),1/2)}function f_(e){return me(e.x+e.width/2,e.y+e.height/2)}function Dp(e){return e.length===0?me(0,0):je(e.reduce((t,n)=>te(t,n),me(0,0)),1/e.length)}function yt(e,t=me(0,0)){const n=Oe(e,t);return Math.atan2(n.y,n.x)}function ur(e,t=me(0,0)){return te(je(Oe(t,e),2),e)}function kt(e,t,n=me(0,0)){const a=Oe(e,n),o=Math.sin(t),r=Math.cos(t);return te(me(r*a.x-o*a.y,o*a.x+r*a.y),n)}function m_(e,t=me(0,0)){const n=Math.sin(e),a=Math.cos(e);return(o,r)=>{const s=Oe(o,t);return te(r?me(a*s.x+n*s.y,-n*s.x+a*s.y):me(a*s.x-n*s.y,n*s.x+a*s.y),t)}}function v_(e,t,n){if(va(e))return va(t)?[]:[-n/t];const a=t*t-4*e*n;if(a<0)return[];const o=.5/e;if(va(a))return[-t*o];const r=Math.sqrt(a);return[(-t+r)*o,(-t-r)*o]}function vs(e,t){if(t.length!==2)throw new Error("line must be length = 2");const n=t[0],a=t[1],o=Oe(a,n),r=Oe(e,n),s=jr(o,r)/jr(o,o);return te(n,je(o,s))}function h_(e,t){const{ta:n,tb:a,tc:o,td:r}=y_(e,t);return o*r<=0&&n*a<=0}function y_(e,t){const n=e[0].x,a=e[0].y,o=e[1].x,r=e[1].y,s=t[0].x,l=t[0].y,u=t[1].x,i=t[1].y,c=(s-u)*(a-l)+(l-i)*(s-n),d=(s-u)*(r-l)+(l-i)*(s-o),p=(n-o)*(l-a)+(a-r)*(n-s),f=(n-o)*(i-a)+(a-r)*(n-u);return{ta:c,tb:d,tc:p,td:f}}function g_(e,t){const n=p_(e,t);return Math.abs(n)<ea}function ec(e,t){return Xa(Oe(e,vs(e,t)))}function __(e,t){if(!Xa(Oe(e,vs(e,t))))return!1;const n=Oe(t[1],t[0]),a=Oe(e,t[0]);return!(jr(n,a)<0||ba(n)<ba(a))}function b_(e,t){if(Math.abs(t[0].y-t[1].y)<ea)return!1;let n,a;if(t[0].y<t[1].y?[a,n]=t:[n,a]=t,e.y<a.y||n.y<=e.y)return!1;const o=S_(t,[e,me(e.x+1,e.y)]);return!(!o||o.x<=e.x)}function tc(e,t){if(t.find(a=>e.x===a.x&&e.y===a.y))return!0;const n=t.map((a,o)=>[a,o<t.length-1?t[o+1]:t[0]]).filter(a=>!Ka(a[0],a[1]));for(let a=0;a<n.length;a++){const o=n[a];if(__(e,o))return!0}return n.filter(a=>b_(e,a)).length%2===1}function S_(e,t){if(g_(Oe(e[0],e[1]),Oe(t[0],t[1])))return null;if(ec(e[0],t))return Qi({},e[0]);if(ec(e[1],t))return Qi({},e[1]);const n=((t[1].x-t[0].x)*(e[0].y-t[0].y)-(t[1].y-t[0].y)*(e[0].x-t[0].x))/2,a=((t[1].x-t[0].x)*(t[0].y-e[1].y)-(t[1].y-t[0].y)*(t[0].x-e[1].x))/2,o=n/(n+a);return 0<o&&o<1?me(e[0].x+(e[1].x-e[0].x)*o,e[0].y+(e[1].y-e[0].y)*o):null}function w_(e,t){const n=t,a=1-n,o=je(e[0],a*a),r=je(e[1],2*n*a),s=je(e[2],n*n);return me(o.x+r.x+s.x,o.y+r.y+s.y)}function ir(e){return t=>w_(e,t)}function k_(e,t){const n=t,a=1-n,o=je(e[0],a*a*a),r=je(e[1],3*n*a*a),s=je(e[2],3*n*n*a),l=je(e[3],n*n*n);return me(o.x+r.x+s.x+l.x,o.y+r.y+s.y+l.y)}function cr(e){return t=>k_(e,t)}function E_(e,t){const[n,a,o,r]=e,s=-n.x+3*a.x-3*o.x+r.x,l=3*n.x-6*a.x+3*o.x,u=-3*n.x+3*a.x,i=n.x-t,c=O_(s,l,u,i),d=c*c,p=d*c,f=1-c,m=f*f;return m*f*n.y+3*c*m*a.y+3*d*f*o.y+p*r.y}function nc(e,t,n,a,o,r,s){if(Math.abs(e*t)<ea)return N=>Va(n,a,N);const l=m_(s),u=n,i=a,c=l(me((u.x-i.x)/2,(u.y-i.y)/2),!0),d=c.x*c.x,p=c.y*c.y,f=d/e/e+p/t/t,m=f>1?Math.sqrt(f):1,{x:v,y}=me(Math.abs(e)*m,Math.abs(t)*m),E=v*v,h=y*y,S=je(je(me(v*c.y/y,-y*c.x/v),Math.sqrt(Math.max(0,E*h-E*p-h*d)/(E*p+h*d))),o===r?-1:1),$=te(l(S),je(te(u,i),.5)),_=me((c.x-S.x)/v,(c.y-S.y)/y),A=me((-c.x-S.x)/v,(-c.y-S.y)/y),O=yt(_),T=(yt(A)-yt(_))%(2*Math.PI),L=!r&&0<T?T-2*Math.PI:r&&T<0?T+2*Math.PI:T;return N=>{if(N===0)return n;if(N===1)return a;{const U=O+L*N;return te(l(me(v*Math.cos(U),y*Math.sin(U))),$)}}}function Va(e,t,n){return te(e,je(Oe(t,e),n))}function C_(e,t){if(t<=1)return[e(0),e(1)];const n=[];let a=1/t;for(let o=0;o<=t;o++)n.push(e(a*o));return n}function M_(e){const[t,n,a,o,r,s]=e,l=t*o-n*a;return[o/l,-n/l,-a/l,t/l,(a*s-o*r)/l,-(t*s-n*r)/l]}function gl(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}function ro(e){return e.reduce((t,n)=>gl(t,n),rt)}function Nr(e,t,n){return e*(1-n)+t*n}function Er(e,t,n){return me(Nr(e.x,t.x,n),Nr(e.y,t.y,n))}function O_(e,t,n,a){const o=T_(e,t,n,a);if(o.length===0)return 0;const r=A_(o,0,1);if(r===void 0)throw new Error("Error: Cannot resolve uniquely in 0 <= t <= 1.");return Math.max(Math.min(r,1),0)}function T_(e,t,n,a){if(va(e))return v_(t,n,a);const o=(3*e*n-t*t)/(3*e*e),r=(2*t*t*t-9*e*t*n+27*e*e*a)/(27*e*e*e),s=-t/(3*e);if(va(o)&&va(r))return[s];const l=(27*r*r+4*o*o*o)/108;if(va(l)){const u=Math.sign(r)*Math.pow(Math.abs(r)/2,.3333333333333333);return[-2*u+s,u+s]}else if(l>0){const u=Math.sqrt(l),i=-r/2+u,c=-r/2-u,d=Math.sign(i)*Math.pow(Math.abs(i),1/3),p=Math.sign(c)*Math.pow(Math.abs(c),1/3);return[d+p+s]}else{const u=-r/2,i=Math.sqrt(-l),c=Math.atan2(i,u),d=2*Math.pow(u*u+i*i,1/6),p=Math.cos(c/3),f=Math.cos((c+2*Math.PI)/3),m=Math.cos((c+4*Math.PI)/3),v=d*p+s,y=d*f+s,E=d*m+s;return[v,y,E]}}function A_(e,t,n){return e.find(a=>!!(t<=a&&a<=n||ac(a,t)||ac(a,n)))}function ac(e,t){return Math.abs(e-t)<ea}function va(e){return Math.abs(e)<ea}function ut(e=-1/0,t=1/0,n){return Math.max(Math.min(n,t),e)}function Sa(e,t,n){return e===t?e:t<n?(n-t)%(t-e)+e:n<e?t-(e-n)%(t-e):n}function $_(e,t,n){const a=t-e,o=2*a;if(o===0)return e;const r=Math.abs(n-e)%o;return r<a?r+e:o-r+e}const da=e=>+e,Fp={bezierSplitSize:10,ellipseSplitSize:20};function x_(e){if(e.length===8)return[e[0],da(e[1]),da(e[2]),da(e[3]),e[4]!=="0",e[5]!=="0",da(e[6]),da(e[7])];{const[t,...n]=e;return[t,...n.map(da)]}}function du(e){return zp(e).map(t=>x_(t))}function Gp(e){return e.map(t=>t===!0?"1":t===!1?"0":t.toString()).join(" ")}function Up(e){return I_(du(e))}function I_(e){const t=[];let n=me(0,0),a=n,o=n,r=1;return e.forEach(s=>{switch(s[0]){case"M":{const l=me(s[1],s[2]);t.push({command:"M",segment:[l,l]}),n=l,o=l,r=1,a=l;break}case"m":{const l=me(s[1],s[2]);t.push({command:"m",segment:[l,l]}),n=l,a=l,o=l,r=1;break}case"L":{const l=a,u=me(s[1],s[2]);t.push({command:"L",segment:[l,u]}),n!=null||(n=u),o=u,r=1,a=u;break}case"l":{const l=a,u=te(a,me(s[1],s[2]));t.push({command:"l",segment:[l,u]}),n!=null||(n=u),o=u,r=1,a=u;break}case"H":{const l=a,u=me(s[1],l.y);t.push({command:"H",segment:[l,u]}),o=u,r=1,a=u;break}case"h":{const l=a,u=me(s[1]+l.x,l.y);t.push({command:"h",segment:[l,u]}),o=u,r=1,a=u;break}case"V":{const l=a,u=me(l.x,s[1]);t.push({command:"V",segment:[l,u]}),o=u,r=1,a=u;break}case"v":{const l=a,u=me(l.x,s[1]+l.y);t.push({command:"v",segment:[l,u]}),o=u,r=1,a=u;break}case"Q":{const l=a,u=me(s[1],s[2]),i=me(s[3],s[4]);t.push({command:"Q",lerpFn:ir([l,u,i]),curve:!0}),o=u,r=2,a=i;break}case"q":{const l=a,u=te(l,me(s[1],s[2])),i=te(l,me(s[3],s[4]));t.push({command:"q",lerpFn:ir([l,u,i]),curve:!0}),o=u,r=2,a=i;break}case"T":{const l=a,u=r===2?ur(o,l):l,i=me(s[1],s[2]);t.push({command:"T",lerpFn:ir([l,u,i]),curve:!0}),o=u,r=2,a=i;break}case"t":{const l=a,u=r===2?ur(o,l):l,i=te(l,me(s[1],s[2]));t.push({command:"t",lerpFn:ir([l,u,i]),curve:!0}),o=u,r=2,a=i;break}case"C":{const l=a,u=me(s[1],s[2]),i=me(s[3],s[4]),c=me(s[5],s[6]);t.push({command:"C",lerpFn:cr([l,u,i,c]),curve:!0}),o=i,r=3,a=c;break}case"c":{const l=a,u=te(l,me(s[1],s[2])),i=te(l,me(s[3],s[4])),c=te(l,me(s[5],s[6]));t.push({command:"c",lerpFn:cr([l,u,i,c]),curve:!0}),o=i,r=3,a=c;break}case"S":{const l=a,u=r===3?ur(o,l):l,i=me(s[1],s[2]),c=me(s[3],s[4]);t.push({command:"S",lerpFn:cr([l,u,i,c]),curve:!0}),o=i,r=3,a=c;break}case"s":{const l=a,u=r===3?ur(o,l):l,i=te(l,me(s[1],s[2])),c=te(l,me(s[3],s[4]));t.push({command:"s",lerpFn:cr([l,u,i,c]),curve:!0}),o=i,r=3,a=c;break}case"A":{const l=a,u=s[1],i=s[2],c=s[4],d=s[5],p=s[3]/180*Math.PI,f=me(s[6],s[7]);t.push({command:"A",lerpFn:nc(u,i,l,f,c,d,p),curve:!0}),o=f,r=1,a=f;break}case"a":{const l=a,u=s[1],i=s[2],c=s[4],d=s[5],p=s[3]/180*Math.PI,f=te(l,me(s[6],s[7]));t.push({command:"a",lerpFn:nc(u,i,l,f,c,d,p),curve:!0}),o=f,r=1,a=f;break}case"Z":case"z":{const l=a,u=n;t.push({command:s[0],segment:[l,u]}),o=u,r=1,a=u;break}}}),t}function L_(e,t=Fp.bezierSplitSize){return Up(e).map(n=>({lerpFn:n.curve?n.lerpFn:a=>Va(n.segment[0],n.segment[1],a),length:d_(n.curve?C_(n.lerpFn,t):n.segment)}))}function P_(e){return e.reduce((t,n)=>t+n.length,0)}function B_(e,t){let n=Math.max(t,0);for(let a=0;a<e.length;a++){const o=e[a];if(n<o.length)return o.lerpFn(n/o.length);n-=o.length}return e.length>0?e[e.length-1].lerpFn(1):me(0,0)}function Kp(e){const t=[],n=[];let a,o=me(0,0),r=o,s=o,l=1;for(let u=0;u<e.length;u++){switch(a=e[u],a[0]){case"M":{o=r=s=me(a[1],a[2]),l=1;break}case"m":{o=r=s=te(me(a[1],a[2]),r),l=1;break}case"L":{const i=me(a[1],a[2]);o!=null||(o=i),r=s=i,l=1;break}case"l":{const i=te(me(a[1],a[2]),r);o!=null||(o=i),r=s=i,l=1;break}case"H":{r=s=me(a[1],r.y),l=1;break}case"h":{r=s=me(a[1]+r.x,r.y),l=1;break}case"V":{r=s=me(r.x,a[1]),l=1;break}case"v":{r=s=me(r.x,a[1]+r.y),l=1;break}case"Q":{s=me(a[1],a[2]),r=me(a[3],a[4]),l=2;break}case"q":{s=me(a[1]+r.x,a[2]+r.y),r=me(a[3]+r.x,a[4]+r.y),l=2;break}case"T":{s=l===2?Va(s,r,2):r,r=me(a[1],a[2]),l=2;break}case"t":{s=l===2?Va(s,r,2):r,r=me(a[1]+r.x,a[2]+r.y),l=2;break}case"C":{s=me(a[3],a[4]),r=me(a[5],a[6]),l=3;break}case"c":{s=me(a[3]+r.x,a[4]+r.y),r=me(a[5]+r.x,a[6]+r.y),l=3;break}case"S":{s=l===3?Va(s,r,2):r,r=me(a[3],a[4]),l=3;break}case"s":{s=l===3?Va(s,r,2):r,r=me(a[3]+r.x,a[4]+r.y),l=3;break}case"A":{r=s=me(a[6],a[7]),l=1;break}case"a":{r=s=me(a[6]+r.x,a[7]+r.y),l=1;break}case"Z":case"z":{r=s=o,l=1;break}default:throw Yp()}n.push(s),t.push(r)}return{points:t,controls:n}}function dr(e){return/Q|q|T|t|C|c|S|s|A|a/.test(e)}function R_(e){if(e.length<2)return e;const t=[],{points:n,controls:a}=Kp(e),o=e.length;let r,s,l=!1;for(let u=o-1;0<=u;u--)switch(r=e[u],s=n[u===0?o-1:u-1],r[0]){case"M":l&&(dr(t[t.length-1][0])?t.push(["Z"]):t[t.length-1]=["Z"],l=!1),t.push([r[0],s.x,s.y]);break;case"m":l&&(dr(t[t.length-1][0])?t.push(["z"]):t[t.length-1]=["z"],l=!1),u===0?t.push(["M",s.x,s.y]):t.push([r[0],-r[1],-r[2]]);break;case"L":l&&u===0&&(dr(t[t.length-1][0])?t.push(["Z"]):t[t.length-1]=["Z"],l=!1),t.push([r[0],s.x,s.y]);break;case"l":l&&u===0&&(dr(t[t.length-1][0])?t.push(["z"]):t[t.length-1]=["z"],l=!1),u===0?t.push(["L",s.x,s.y]):t.push([r[0],-r[1],-r[2]]);break;case"H":t.push([r[0],s.x]);break;case"h":t.push([r[0],-r[1]]);break;case"V":t.push([r[0],s.y]);break;case"v":t.push([r[0],-r[1]]);break;case"Q":{t.push([r[0],r[1],r[2],s.x,s.y]);break}case"q":{t.push([r[0],r[1]-r[3],r[2]-r[4],-r[3],-r[4]]);break}case"T":{const i=a[u];t.push(["Q",i.x,i.y,s.x,s.y]);break}case"t":{const i=n[u],c=a[u];t.push(["q",c.x-i.x,c.y-i.y,-r[1],-r[2]]);break}case"C":{t.push([r[0],r[3],r[4],r[1],r[2],s.x,s.y]);break}case"c":{t.push([r[0],r[3]-r[5],r[4]-r[6],r[1]-r[5],r[2]-r[6],-r[5],-r[6]]);break}case"S":{const i=a[u];t.push(["C",r[1],r[2],i.x,i.y,s.x,s.y]);break}case"s":{const i=n[u],c=a[u];t.push(["c",r[1]-r[3],r[2]-r[4],c.x-i.x,c.y-i.y,-r[3],-r[4]]);break}case"A":{t.push([r[0],r[1],r[2],r[3],r[4],!r[5],s.x,s.y]);break}case"a":{t.push([r[0],r[1],r[2],r[3],r[4],!r[5],-r[6],-r[7]]);break}case"Z":l=!0,t.push(["L",s.x,s.y]);break;case"z":{l=!0;const i=n[u];t.push(["l",s.x-i.x,s.y-i.y]);break}}return t.unshift(t.pop()),t}function oc(e,t){return e.map(n=>{const a=[...n];switch(a[0]){case"H":a[1]+=t.x;break;case"V":a[1]+=t.y;break;case"A":a[6]+=t.x,a[7]+=t.y;break;default:if(a[0]===a[0].toUpperCase())for(let o=1;o<a.length-1;o+=2)a[o]+=t.x,a[o+1]+=t.y;break}return a})}function j_(e,t){return e.map(n=>{const a=[...n];switch(a[0]){case"H":case"h":a[1]*=t.x;break;case"V":case"v":a[1]*=t.y;break;case"A":case"a":a[1]*=Math.abs(t.x),a[2]*=Math.abs(t.y),t.x*t.y<0&&(a[5]=!a[5]),a[6]*=t.x,a[7]*=t.y;break;default:for(let o=1;o<a.length-1;o+=2)a[o]*=t.x,a[o+1]*=t.y;break}return a})}function N_(e){const t=e.some(a=>/H|V/.test(a[0])),{points:n}=Kp(t?e:[]);return e.map((a,o)=>{switch(a[0]){case"H":return["L",a[1],n[o].y];case"h":return["l",a[1],0];case"V":return["L",n[o].x,a[1]];case"v":return["l",0,a[1]];default:return a}})}function V_(e,t){const n=Math.sin(t),a=Math.cos(t);return N_(e).map(o=>{const r=[...o];switch(r[0]){case"A":case"a":{r[3]+=t*180/Math.PI;const s=r[6],l=r[7];r[6]=a*s-n*l,r[7]=n*s+a*l;break}default:for(let s=1;s<r.length-1;s+=2){const l=r[s],u=r[s+1];r[s]=a*l-n*u,r[s+1]=n*l+a*u}break}return r})}function D_(e,t=Fp.bezierSplitSize){const n=Math.max(1,t);let a=[],o=1/n;return Up(e).forEach(r=>{if(!(r.command==="Z"||r.command==="z"))if(r.curve)for(let s=1;s<=n;s++)a.push(r.lerpFn(o*s));else a.push(r.segment[1])}),a}const rc=/M|m|L|l|H|h|V|v|C|c|S|s|Q|q|T|t|A|a|Z|z/g;function zp(e){const t=e.replace(rc," $& ").replace(/([^e])(-|\+)/g,"$1 $2").split(/,| /).filter(o=>o).flatMap(F_);let n="M";const a=[];for(let o=0;o<t.length;){const r=[];switch(t[o].match(rc)?(r.push(t[o]),n=r[0],o++):n.toUpperCase()!=="Z"&&r.push(n),r[0].toUpperCase()){case"Z":break;case"V":case"H":r.push(t[o]),o+=1;break;case"M":case"L":case"T":r.push(t[o],t[o+1]),o+=2;break;case"Q":case"S":r.push(t[o],t[o+1],t[o+2],t[o+3]),o+=4;break;case"C":r.push(t[o],t[o+1],t[o+2],t[o+3],t[o+4],t[o+5]),o+=6;break;case"A":r.push(t[o],t[o+1],t[o+2],t[o+3],t[o+4],t[o+5],t[o+6]),o+=7;break;default:throw Yp()}a.push(r)}return a}function F_(e){const t=e.split(/\./);return t.length<=2?[e]:[`${t[0]}.${t[1]}`,...t.slice(2).map(n=>`0.${n}`)]}function G_(e){return`matrix(${e.join(",")})`}function U_(e){const t=e.split(")").map(n=>`${n})`).map(n=>K_(n));return ro(t)}function K_(e){return/translateX/.test(e)?Y_(e):/translateY/.test(e)?H_(e):/translate/.test(e)?z_(e):/skewX/.test(e)?X_(e):/skewY/.test(e)?W_(e):/scaleX/.test(e)?q_(e):/scaleY/.test(e)?Z_(e):/scale/.test(e)?J_(e):/rotate/.test(e)?Q_(e):/matrix/.test(e)?eb(e):[...rt]}function sn(e){return e.trim().replace(/,/g," ").split(/ +/).map(t=>da(t))}function z_(e){const t=e.match(/translate\((.+)\)/);if(!t||t.length<1)return[...rt];const n=sn(t[1]);return n.length<1?[...rt]:n.length===1?[1,0,0,1,n[0],0]:[1,0,0,1,n[0],n[1]]}function Y_(e){const t=e.match(/translateX\((.+)\)/);if(!t||t.length<1)return[...rt];const n=sn(t[1]);return n.length<1?[...rt]:[1,0,0,1,n[0],0]}function H_(e){const t=e.match(/translateY\((.+)\)/);if(!t||t.length<1)return[...rt];const n=sn(t[1]);return n.length<1?[...rt]:[1,0,0,1,0,n[0]]}function X_(e){const t=e.match(/skewX\((.+)\)/);if(!t||t.length<1)return[...rt];const n=sn(t[1]);return n.length<1?[...rt]:[1,0,Math.tan(n[0]*Math.PI/180),1,0,0]}function W_(e){const t=e.match(/skewY\((.+)\)/);if(!t||t.length<1)return[...rt];const n=sn(t[1]);return n.length<1?[...rt]:[1,Math.tan(n[0]*Math.PI/180),0,1,0,0]}function J_(e){const t=e.match(/scale\((.+)\)/);if(!t||t.length<2)return[...rt];const n=sn(t[1]);return n.length<1?[...rt]:n.length===1?[n[0],0,0,n[0],0,0]:[n[0],0,0,n[1],0,0]}function q_(e){const t=e.match(/scaleX\((.+)\)/);if(!t||t.length<1)return[...rt];const n=sn(t[1]);return n.length<1?[...rt]:[n[0],0,0,1,0,0]}function Z_(e){const t=e.match(/scaleY\((.+)\)/);if(!t||t.length<1)return[...rt];const n=sn(t[1]);return n.length<1?[...rt]:[1,0,0,n[0],0,0]}function Q_(e){const t=e.match(/rotate\((.+)\)/);if(!t||t.length<2)return[...rt];const n=sn(t[1]);if(sn.length<1)return[...rt];const a=n[0]/180*Math.PI,o=Math.cos(a),r=Math.sin(a),s=[o,r,-r,o,0,0];return n.length>2?gl(gl([1,0,0,1,n[1],n[2]],s),[1,0,0,1,-n[1],-n[2]]):s}function eb(e){const t=e.match(/matrix\((.+)\)/);if(!t||t.length<2)return[...rt];const n=sn(t[1]);return n.length<5?[...rt]:n.slice(0,6)}function Yp(){return new Error("Unexpected error")}const tb=window.navigator.userAgent.toLowerCase();function nb(){return tb.indexOf("mac os x")!==-1}function Xn(e){return e.ctrlKey||e.metaKey}function tn(){return nb()?"Command":"Ctrl"}function ab(e,t){var n,a,o;Xn(e)?(n=t.ctrl)==null||n.call(t):e.shiftKey?(a=t.shift)==null||a.call(t):(o=t.plain)==null||o.call(t)}function gn(e){return{shift:e.shiftKey,ctrl:Xn(e),button:e.button}}function Vo(e){return{key:e.key,shift:e.shiftKey,ctrl:Xn(e)}}function sc(e){return!e.shift&&!!e.ctrl&&(e.key==="v"||e.key==="c")}const Hp=_a({size:{width:window.innerWidth,height:window.innerHeight}});window.addEventListener("resize",()=>{Hp.size={width:window.innerWidth,height:window.innerHeight}});function pu(){return{state:Hp}}function ob(e,t=!1){Gt(()=>{window.addEventListener("scroll",e,t)}),Ca(()=>{window.removeEventListener("scroll",e,t)})}function rb(e,t=!1){Gt(()=>{window.addEventListener("click",e,t)}),Ca(()=>{window.removeEventListener("click",e,t)})}function Ho(e){Gt(()=>{window.addEventListener("mousemove",e)}),Ca(()=>{window.removeEventListener("mousemove",e)})}function Xo(e){Gt(()=>{window.addEventListener("mouseup",e),window.addEventListener("mouseleave",e)}),Ca(()=>{window.removeEventListener("mouseup",e),window.removeEventListener("mouseleave",e)})}function sb(e){Gt(()=>{window.addEventListener("keydown",e)}),Ca(()=>{window.removeEventListener("keydown",e)})}function hs(e){let t=!1,n={x:0,y:0};const a=H({x:0,y:0}),o=H(),r=H("move");Ho(u=>{var p,f;if(!t||!o.value){const m={x:u.pageX,y:u.pageY},v=Oe(a.value,m);a.value=m,(p=e.onGlobalMove)==null||p.call(e,{base:n,p:m,d:v,...gn(u)});return}const i={x:r.value==="move-v"?0:u.movementX,y:r.value==="move-h"?0:u.movementY};if(ba(i)>200)return;const c=gn(u);o.value=te(o.value,je(i,c.shift?.1:1)),a.value=o.value;const d={base:n,p:o.value,d:i,...c};(f=e.onGlobalMove)==null||f.call(e,d),e.onMove(d)});function s(){o.value=void 0,t=!1,document.exitPointerLock()}Xo(u=>{var i;t&&(s(),(i=e.onUp)==null||i.call(e,u))});function l(){var u;t&&!document.pointerLockElement&&(t=!1,(u=e.onEscape)==null||u.call(e))}return document.addEventListener("pointerlockchange",l),Ca(()=>{document.removeEventListener("pointerlockchange",l)}),{globalCurrent:g(()=>a.value),current:g(()=>o.value),motion:r,requestPointerLock(u,i="move"){n=a.value,r.value=i,o.value=a.value,u.preventDefault(),u.target.requestPointerLock(),t=!0},requestPointerLockFromElement(u,i="move"){n=a.value,r.value=i,o.value=a.value,u.requestPointerLock(),t=!0},exitPointerLock:s}}const ys=e=>(dt("data-v-14983842"),e=e(),pt(),e),lb=["transform"],ub=ys(()=>C("circle",{r:"2"},null,-1)),ib=["transform"],cb=ys(()=>C("path",{d:"M20,0L10,-10L10,10z"},null,-1)),db=ys(()=>C("path",{d:"M-20,0L-10,-10L-10,10z"},null,-1)),pb=[cb,db],fb=ys(()=>C("g",{class:"stroke-text"},[C("line",{x1:"-10",x2:"10"}),C("line",{y1:"-10",y2:"10"})],-1)),mb=[fb],$a=13,vb=q({__name:"GlobalCursor",props:{p:{default:void 0},cursor:{default:"move"},rotate:{default:0}},setup(e){const t=e,n=pu(),a=g(()=>{if(t.p)return{x:Sa(0,n.state.size.width,t.p.x),y:Sa(0,n.state.size.height,t.p.y)}}),o=H();let r=0;vt(()=>t.p,(i,c)=>{!c&&i?(o.value=i,clearTimeout(r)):c&&!i&&(r=setTimeout(()=>{o.value=void 0},200))});const s=g(()=>{if(o.value)return`translate(${o.value.x-$a}px, ${o.value.y-$a}px)`}),l=g(()=>a.value?`translate(${a.value.x-$a}px, ${a.value.y-$a}px)`:o.value?`translate(${o.value.x-$a}px, ${o.value.y-$a}px)`:void 0),u=g(()=>{switch(t.cursor){case"move":return[0,90];case"move-h":return[0];case"move-v":return[90]}return[]});return(i,c)=>l.value?(b(),be(ru,{key:0,to:"body"},[(b(),M("svg",{class:qe(["global-cursor",{fade:!i.p}]),style:st({transform:l.value}),xmlns:"http://www.w3.org/2000/svg",viewBox:"-20 -20 40 40",stroke:"none"},[C("g",{transform:`rotate(${i.rotate})`,class:"stroke-text"},[ub,(b(!0),M(ve,null,Ie(u.value,d=>(b(),M("g",{key:d,transform:`rotate(${d})`},pb,8,ib))),128))],8,lb)],6)),s.value?(b(),M("svg",{key:0,class:"global-cursor",style:st({transform:s.value}),xmlns:"http://www.w3.org/2000/svg",viewBox:"-20 -20 40 40"},mb,4)):ce("",!0)])):ce("",!0)}});const hb=Te(vb,[["__scopeId","data-v-14983842"]]),W={BOOLEAN:"BOOLEAN",SCALER:"SCALER",VECTOR2:"VECTOR2",TRANSFORM:"TRANSFORM",COLOR:"COLOR",TEXT:"TEXT",BONE:"BONE",OBJECT:"OBJECT",D:"D",STOP:"STOP",GENERICS:"GENERICS",INPUT:"INPUT",OUTPUT:"OUTPUT",UNKNOWN:"UNKNOWN"},Xe={UNIT:"UNIT",ARRAY:"ARRAY",UNIT_OR_ARRAY:"UNIT_OR_ARRAY"},yb=[{key:"pad",value:0},{key:"reflect",value:1},{key:"repeat",value:2}],gb=[{key:"userSpaceOnUse",value:0},{key:"objectBoundingBox",value:1}],_b=[{key:"butt",value:0},{key:"round",value:1},{key:"square",value:2}],bb=[{key:"arcs",value:0},{key:"round",value:1},{key:"bevel",value:2},{key:"miter",value:3},{key:"miter-clip",value:4}],Xp={SPREAD_METHOD:yb,SPACE_UNITS:gb,LINECAP:_b,LINEJOIN:bb};function wa(e,t){var o;const n=Xp[e]??[],a=ut(0,n.length-1,Math.floor(t));return((o=n.find(r=>r.value===a))==null?void 0:o.key)??""}function Sb(e,t){const n=H(),a=g(e);function o(){return Object.keys(a.value).sort().join(",")}function r(){n.value=Ue(t.value)}let s=o();return r(),dy(()=>{const l=o();s!==l&&(r(),s=l)}),{cache:n,updateCache:r}}function wb(e){let t,n=!0;function a(){return n&&(t=e(),n=!1),t}function o(){n=!0}return{update:o,getValue:a}}function Wp(e,t,n=100){const a=new Map;function o(s){const l=e(s),u=a.get(l)??t(s);return a.delete(l),a.set(l,u),a.size>n&&a.delete(a.keys().next().value),u}function r(){a.clear()}return{getValue:o,clear:r}}function kb(e,t){let n={};function a(r){return r in n||(n[r]=t(e[r])),n[r]}function o(){n={}}return{getValue:a,clear:o}}let Eb=e=>crypto.getRandomValues(new Uint8Array(e)),Cb=(e,t,n)=>{let a=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*a*t/e.length);return(r=t)=>{let s="";for(;;){let l=n(o),u=o;for(;u--;)if(s+=e[l[u]&a]||"",s.length===r)return s}}},Mb=(e,t=21)=>Cb(e,t,Eb);const lc="abcdefghijklmnopqrstuvwxyz",Ob=Mb(lc+lc.toUpperCase()+"0123456789-",12),We=()=>`b${Ob()}`,uc=/\.[0-9]{3,}$/;function ic(e){return uc.test(e)?e.replace(uc,t=>"."+`${parseInt(t.slice(1),10)+1}`.padStart(3,"0")):`${e}.001`}function qt(e,t){const n=new Map(t.map(o=>[o,!0]));if(!n.has(e))return e;let a=ic(e);for(;n.has(a);)a=ic(a);return a}function Tb(e,t,n){const a=e.concat(),o=a[t];return!o||o.name===n?e:(a[t]={...o,name:qt(n,a.map(r=>r.name))},a)}function Ab(e,t){if(t<=0||e.length-1<t)return e;const n=e.concat(),a=n[t-1];return n[t-1]=n[t],n[t]=a,n}function $b(e,t){if(t<0||e.length-1<=t)return e;const n=e.concat(),a=n[t+1];return n[t+1]=n[t],n[t]=a,n}function Vr(e,t=!1){const n=[],a=new Set(Object.keys(e)),o=new Set,r={resolve(s){e[s]&&a.has(s)&&n.push(s),a.delete(s)},getDeps(s){if(o.has(s)){if(t)throw new Error("Circular dependency is detected.");return}return o.add(s),e[s]}};for(;a.size>0;)Jp(r,a.values().next().value);return n}function Jp(e,t){const n=e.getDeps(t);n&&Object.keys(n).forEach(a=>Jp(e,a)),e.resolve(t)}function xb(e,t,n){if(!e[t])return{path:[],processed:[t]};if(e[t][n])return{path:[t,n],processed:[t,n]};let a=[];const o=new Set([t]);let r=new Map(Object.keys(e[t]).map(s=>[s,[t]]));for(;r.size>0;){const s=new Map;for(const[l,u]of r){const i=e[l];if(!(!i||o.has(l)))if(o.add(l),i[n]){a=[...u,l,n],o.add(n),s.clear();break}else{const c=[...u,l];Object.keys(i).forEach(d=>r.set(d,c))}}r=s}return{path:a,processed:Array.from(o.values())}}function Ib(e,t){const n=[],a=new Set(Object.keys(e)),o=new Set([t]),r={...e};delete r[t];for(const s of a){if(o.has(s))continue;const l=xb(r,s,t);l.path.length>0&&l.path.forEach((u,i)=>{i!==l.path.length-1&&n.push(u)}),l.processed.forEach(u=>{delete r[u],o.add(u)})}return n}function Lb(e,t){return e.reduce((n,a)=>(n[a]=t,n),{})}function wn(e,t){return e.reduce((n,a)=>{const o=a[t];return n[o]=a,n},{})}function Oa(e,t){const n={};return e.forEach(a=>{n[a[t]]?n[a[t]].push(a):n[a[t]]=[a]}),n}function qp(e){return Object.keys(e).flatMap(t=>e[t])}function Ee(e){return Object.keys(e).map(t=>e[t])}function Z(e,t){return Object.keys(e).reduce((n,a)=>(n[a]=t(e[a],a),n),{})}function nt(e,t){return Object.keys(t).reduce((n,a)=>(e[a]!==void 0&&(n[a]=e[a]),n),{})}function _t(e,t){return Ze(e,(n,a)=>t[a]===void 0)}function Ze(e,t){return Object.keys(e).reduce((n,a)=>(t(e[a],a)&&(n[a]=e[a]),n),{})}function Pb(e,t,n){return Ee({...wn(e,n),...wn(t,n)})}function Bb(e,t,n,a=!1){const o=wn(e,n),r=wn(t,n);return Ee(Ze(o,(s,l)=>{var u;return s[n]===((u=r[l])==null?void 0:u[n])===a}))}function Wa(e,t,n=""){const a=e[t];return!a||!e[a.parentId]||n===a.parentId?[]:[...Wa(e,a.parentId,n),a.parentId]}function Rb(e,t,n){const a=Wa(e,t),o=a.findIndex(l=>l===n);if(o!==-1)return[...a.slice(o),t];const r=Wa(e,n),s=r.findIndex(l=>l===t);return s!==-1?[...r.slice(s),n]:[t,n]}function Zp(e){return/\.r\.?/.test(e)?"r":/\.R\.?/.test(e)?"R":/\.l\.?/.test(e)?"l":/\.L\.?/.test(e)?"L":""}const cc={"":"",r:"l",R:"L",l:"r",L:"R"};function _l(e){const t=Zp(e);return cc[t]?e.replace(`.${t}`,`.${cc[t]}`):e}function Qp(e,t){const n=e.map(a=>a[t]).sort().reduce((a,o,r)=>(a[o]=r,a),{});return e.concat().sort((a,o)=>n[a[t]]-n[o[t]])}function ef(e){return e.reduce((t,n)=>jb(t,n),{})}function jb(e,t){return Object.keys(t).reduce((n,a)=>(n[a]?n[a]+=t[a]:n[a]=t[a],n),{...e})}function Nb(e){return ie(Ee(e).map(t=>({...t,id:We()})))}function dc(e){const t=Object.keys(e);return t.length>0?e[t[0]]:void 0}function Dr(e,t,n){return{..._t(e,t),...n(nt(e,t))}}function Vb(e,t){const n=Object.keys(e),a=Object.keys(t);return n.length!==a.length?!1:n.every(o=>e[o]===t[o])}function tf(e,t,n=(a,o)=>a===o){if(!e)return t;if(!t)return e;const a=Object.keys(t).length>1;let o=!0;const r=Object.keys({...e,...t}).reduce((s,l)=>(n(e[l],t[l])&&!a||(o=o&&!!e[l]&&!!t[l]&&n(e[l],t[l]),s[l]=t[l]??e[l]),s),{});if(!o)return r}function nf(e,t,n){return n?{...e,[t]:n}:_t(e,{[t]:!0})}function Db(e){return Array.from(new Set(e))}function Fb(e){return{...e,id:We()}}function Gb(e,t,n){const a=e[0];return a?a[t]:n}function Ub(e,t=n=>!!n){const n=[],a=[];return e.forEach(o=>{t(o)?n.push(o):a.push(o)}),[n,a]}function In(e,t){return e.reduce((n,a)=>(n[a]=t(a),n),{})}function af(e,t){const n=Object.entries(e),a=Object.entries(t);return n.length===a.length&&n.every(([o,r])=>r===t[o])}function pc(e,t){return(e||t)&&!(e&&t)}function Kb(e,t){if(t){const n={...e},a=e[t];if(a)return delete n[t],Object.entries(n).concat([[t,a]])}return Object.entries(e)}function zb(e,t=(n,a)=>n===a){const n=new Set;let a;return e.forEach((o,r)=>{!a||!t(a.item,o)?a={item:o,from:r}:a.from+1<r&&n.add(r-1)}),e.map((o,r)=>n.has(r)?void 0:o)}function Yb(e){return Array.from(new Set(e.flatMap(n=>n?Object.keys(n):[]))).reduce((n,a)=>(zb(e.map(o=>o==null?void 0:o[a])).forEach((o,r)=>{o&&(n[r][a]=o)}),n),e.map(()=>({}))).map(n=>Object.keys(n).length===0?void 0:n)}function Hb(e,t,n=!1){const a=Math.floor(1/t),o=e.filter((r,s)=>s%a===0);return n&&Number.isInteger(e.length*t)&&o.push(e[e.length-1]),o}function bl(e){return e!=null}function of(e){return Ze(e,bl)}function rf(e={},t=!1){const n=t?We():e.id??"";return{name:"",armatureId:"",nodes:[],...e,id:n}}function fu(e={},t=!1){const n=t?We():e.id??"";return{name:"",nodes:[],...e,id:n}}function Cr(e={},t=!1){const n=t?We():e.id??"";return{index:0,...e,id:n}}function gs(e={},t=!1){const n=t?We():e.id??"";return{tag:"",attributes:{},children:[],...e,id:n}}function Xb(e={},t=!1){const n=t?We():e.id??"";return{index:0,tag:"",...e,id:n}}function mu(e={},t=!1){const n=t?We():e.id??"";return{armatureId:"",svgTree:gs(),elements:[],viewBox:{x:0,y:0,width:400,height:400},...e,id:n}}function he(e={}){return{translate:{x:0,y:0},origin:{x:0,y:0},rotate:0,scale:{x:1,y:1},...e}}function sf(e={},t=!1){const n=t?We():e.id??"";return{name:"",armatureId:"",keyframes:[],...e,id:n}}function Wn(e={},t=!1){const n=t?We():e.id??"";return{name:"",transform:he(),parentId:"",connected:!1,head:{x:0,y:0},tail:{x:0,y:0},inheritRotation:!0,inheritScale:!0,constraints:[],...e,id:n}}function Sl(e={},t=!1){const n=t?We():e.id??"";return{name:"",transform:he(),bones:[],...e,id:n}}function ie(e){return wn(e,"id")}function zs(e){return wn(e,"targetId")}function Fr(e,t){return Object.keys({...e,...t}).reduce((n,a)=>(n[a]={...e[a]??{},...t[a]??{}},n),{})}function lf(e,t=!1){return e?t?!!e.head&&!!e.tail:!!e.head||!!e.tail:!1}const vu=1.1,vn=10;function Kt(e,t){const n=Math.pow(10,-e);return Math.round(t*n)/n}function xa(e,t){const n=Math.abs(Math.round(t)),a=Math.sign(t),o=n.toString().length;return o>=e?n*a:Kt(o-e,t)}function Gr(e,t){return Math.round(t/e)*e}function fc(e){return Sa(-Math.PI,Math.PI,e)}function Wb(e,t){return e>0&&t<e-Math.PI?t+Math.PI*2:e<0&&t>e+Math.PI?t-Math.PI*2:t}function uf(e,t){const n=fc(e),a=fc(t);return Wb(n,a)-n}const Jb=he();function qb(e){return Zb(e,Jb)}function Zb(e,t){return!(!Ka(e.translate,t.translate)||!Ka(e.scale,t.scale)||!Ka(e.origin,t.origin)||e.rotate!==t.rotate)}function cf(e){const t=Math.round(Math.log(e)/Math.log(vu));return t<5?10:t<8?20:t<11?50:100}function df(e,t=15){return wl(e,t)}function pf(e,t=.1){return{x:wl(e.x,t),y:wl(e.y,t)}}function wl(e,t=1){return Math.round(e/t)*t}function Qb(e){const t=e.width>0?e.x:e.x+e.width,n=e.height>0?e.y:e.y+e.height;return{x:t,y:n,width:Math.abs(e.width),height:Math.abs(e.height)}}function hu(e){return yt(e.tail,e.head)/Math.PI*180}function mc(e){return e.transform.rotate+hu(e)}function Do(e){return te(e.head,Fo(e))}function so(e){return yt(e.tail,e.head)-Math.PI/2}function Fo(e){const t=so(e);return kt(e.transform.translate,t)}function Ta(e){const t=so(e);return{toLocal:n=>kt(n,-t),toWorld:n=>kt(n,t)}}function vc(e){const t=e.head.x-e.tail.x,n=e.head.y-e.tail.y;return t*t+n*n}function Ja(e,t,n={x:0,y:0}){return{x:n.x+(e.x-n.x)*t.x,y:n.y+(e.y-n.y)*t.y}}function e0(e){return{x:e.x===0?0:1/e.x,y:e.y===0?0:1/e.y}}function _n(e,t){return te(kt(Ja(e,t.scale,t.origin),t.rotate/180*Math.PI,t.origin),t.translate)}function ff(e,t){const n=yt(e.tail,e.head),a=kt(e.transform.translate,n-Math.PI/2),o=_n(e.head,he({translate:a})),r=_n(e.tail,he({...e.transform,translate:a,origin:e.head,scale:{x:1,y:1}})),s=_n(t,he({...e.transform,translate:a,origin:e.head,scale:{x:1,y:1}}));if(Ka(o,r))return s;const l=vs(s,[o,r]),u=Oe(l,o),i=Oe(s,l);return te(te(je(u,e.transform.scale.y),je(i,e.transform.scale.x)),o)}function t0(e,t){return _n(e,{...t,translate:{x:0,y:0}})}function n0(e,t){return{..._n(e,{...t,rotate:0}),width:e.width*t.scale.x,height:e.height*t.scale.y}}function a0(e){const t=e.rotate/180*Math.PI,n=Math.cos(t),a=Math.sin(t);return ro([[1,0,0,1,e.translate.x,e.translate.y],[1,0,0,1,e.origin.x,e.origin.y],[n,a,-a,n,0,0],[e.scale.x,0,0,e.scale.y,0,0],[1,0,0,1,-e.origin.x,-e.origin.y]])}function o0(e){const t=e.x+e.width,n=e.y+e.height;return a=>!(t<a.x||n<a.y||a.x+a.width<e.x||a.y+a.height<e.y)}function _s(e){const t=e.flatMap(l=>[l.x,l.x+l.width]),n=e.flatMap(l=>[l.y,l.y+l.height]),a=Math.min(...t),o=Math.max(...t),r=Math.min(...n),s=Math.max(...n);return{x:a,y:r,width:o-a,height:s-r}}function r0(e,t){return{x:e.x-t,y:e.y-t,width:e.width+t*2,height:e.height+t*2}}const s0={x:1,y:0},l0={x:1,y:1};function u0(e,t=0,n=1,a=1){return o=>{const r=o/360-1,s=o+t;return he({rotate:s,translate:je(kt(s0,s*Math.PI/180),e*o/360*Math.pow(n,r)),scale:je(l0,Math.pow(a,r))})}}function i0(e,t,n=0){const a=360/e,o={x:t,y:0};return r=>{const s=r*a;return he({translate:kt(o,(s+n)*Math.PI/180),rotate:s})}}function c0(e,t,n,a,o,r){const s=r?{x:(n-1)*e/2,y:(a-1)*t/2}:void 0,l=[...Array(a)].map((d,p)=>p*t),u=[...Array(n)].map((d,p)=>p*e),i=o*Math.PI/180,c=l.flatMap(d=>u.map(p=>he({translate:kt(s?Oe({x:p,y:d},s):{x:p,y:d},i)})));return d=>c[d]}function mf(e,t,n){const a=vs(n,[{x:0,y:0},t]);if(e<=0||Xa(a))return a;const o=ba(a),r={x:a.x/o,y:a.y/o},s=Math.round(o/e)*e;return je(r,s)}function vf(e,t,n){if(e<=0)return n;const a=kt(n,-t),o={x:Math.round(a.x/e)*e,y:Math.round(a.y/e)*e};return kt(o,t)}function d0(e,t,n){return jr(Oe(t,e),Oe(n,e))<0}function hc(e,t,n){const a=Oe(t,e),o=Oe(n,e),r=yt(a),s=yt(o);return te(e,kt(o,r+Math.PI-s))}function Wo(e){return`rgba(${e.r},${e.g},${e.b},${e.a})`}const p0=Wp(e=>`${e.h},${e.s}${e.v}`,e=>{const t=lo(e);return`rgb(${Kt(-1,t.r)},${Kt(-1,t.g)},${Kt(-1,t.b)})`});function f0(e){return p0.getValue(e)}function Ys(e,t,n,a){const o=(a+e/60)%6;return n-n*t*Math.max(Math.min(o,4-o,1),0)}function lo(e){const t=Sa(0,360,e.h);return{r:ut(0,1,Ys(t,e.s,e.v,5))*255,g:ut(0,1,Ys(t,e.s,e.v,3))*255,b:ut(0,1,Ys(t,e.s,e.v,1))*255,a:e.a}}function yu(e){return he({translate:{x:e.s*100,y:e.v*100},rotate:e.h,scale:{x:e.a,y:1}})}function m0(e,t){return he({translate:Vp(e.translate,t.translate),rotate:(e.rotate+t.rotate)/2,scale:{x:(e.scale.x+t.scale.x)/2,y:1}})}function v0(e,t,n,a){const o=a[t.targetId];if(!o)return a;const r=h0(e,t,a),s=a[t.poleTargetId],l=Do(o);let u=s?hf(Do(s),r,t.smoothJoint?l:void 0):r;for(let i=0;i<t.iterations;i++)u=y0(l,u);return{...a,...ie(u.map((i,c)=>({...i,transform:Of(r[c].transform,i.transform,t.influence)})))}}function h0(e,t,n){return t.chainLength===0?[]:[...Wa(n,e).map(o=>n[o]),n[e]].slice(-t.chainLength)}function y0(e,t){if(t.length===0)return t;let n=e;const a=t.concat().reverse().map(r=>{const[s,l,u]=_0(n,r);return n=u,{...r,transform:{...r.transform,rotate:s,translate:l}}}).reverse(),o=Oe(Fo(t[0]),Fo(a[0]));return a.map(r=>({...r,transform:{...r.transform,translate:te(r.transform.translate,Ta(r).toLocal(o))}}))}function g0(e){return te(e.head,je(Oe(e.tail,e.head),e.transform.scale.y))}function _0(e,t){const n=Ta(t),a=n.toWorld(t.transform.translate),o=te(t.head,a),r=te(g0(t),a),s=yt(e,o)-yt(r,o),l=kt(r,s,o),u=te(t.transform.translate,n.toLocal(Oe(e,l)));return[s/Math.PI*180,u,te(t.head,n.toWorld(u))]}function hf(e,t,n){if(t.length===0)return t;const a=t[0],o=te(a.head,Fo(a));let r=1;if(n){const i=It(o,e)+It(e,n),c=t.reduce((d,p)=>d+It(p.head,p.tail)*p.transform.scale.y,0);r=Math.min(i/c,1)}const s=yt(e,o);let l=a,u={x:0,y:0};return t.map(i=>{const c=Ta(i),d=c.toWorld(i.transform.translate),p=te(i.head,d),f=te(i.tail,d),m=s-yt(f,p),v=m/Math.PI*180,y={...i,transform:{origin:i.transform.origin,rotate:v,translate:te(i.transform.translate,c.toLocal(u)),scale:{x:i.transform.scale.x,y:i.transform.scale.y*r}}};return l=y,u=Oe(kt(l.tail,m,l.head),l.tail),y})}function b0(e,t){return{...t,targetId:e[t.targetId]??t.targetId,poleTargetId:e[t.poleTargetId]??t.poleTargetId}}function S0(e={}){return{targetId:"",poleTargetId:"",iterations:20,chainLength:2,influence:1,...e}}function w0(e){return ef([e.targetId?{[e.targetId]:1}:{},e.poleTargetId?{[e.poleTargetId]:1}:{}])}const k0=Object.freeze(Object.defineProperty({__proto__:null,apply:v0,getDependentCountMap:w0,getOption:S0,immigrate:b0,straightToPoleTarget:hf},Symbol.toStringTag,{value:"Module"}));function E0(e,t,n,a){const o=a[e];if(!o||o.connected)return a;const r=Ta(o);if(t.spaceType==="world"){const s=Do(o),l=yc(t,s);return{...a,[e]:{...o,transform:{...o.transform,translate:r.toLocal(Oe(te(s,l),o.head))}}}}else{const s=n[e];if(!s)return a;const l=s.transform.translate,u=yc(t,l),i=r.toWorld(te(l,u)),c=te(s.head,i),d=a[o.parentId]?ff(a[o.parentId],c):c,p=Oe(d,c);return{...a,[e]:{...o,transform:{...o.transform,translate:r.toLocal(te(i,p))}}}}}function yc(e,t){const n={x:ut(e.useMinX?e.minX:void 0,e.useMaxX?e.maxX:void 0,t.x),y:ut(e.useMinY?e.minY:void 0,e.useMaxY?e.maxY:void 0,t.y)};return je(Oe(n,t),e.influence)}function C0(e,t){return t}function M0(e={}){return{spaceType:"world",influence:1,minX:0,maxX:0,minY:0,maxY:0,useMinX:!1,useMaxX:!1,useMinY:!1,useMaxY:!1,...e}}function O0(e){return{}}const T0=Object.freeze(Object.defineProperty({__proto__:null,apply:E0,getDependentCountMap:O0,getOption:M0,immigrate:C0},Symbol.toStringTag,{value:"Module"}));function A0(e,t,n,a){var r;const o=a[e];if(!o)return a;if(t.spaceType==="world"){const s=hu(o);return{...a,[e]:{...o,transform:{...o.transform,rotate:gc(t,o.transform.rotate-s)}}}}else if(t.spaceType==="local"){const s=gc(t,n[e].transform.rotate);return{...a,[e]:{...o,transform:{...o.transform,rotate:o.inheritRotation?s+((r=a[o.parentId])==null?void 0:r.transform.rotate):s}}}}return a}function gc(e,t){const a=ut(e.useMin?e.min:void 0,e.useMax?e.max:void 0,t)-t;return t+a*e.influence}function $0(e,t){return t}function x0(e={}){return{spaceType:"world",min:0,max:0,useMin:!1,useMax:!1,influence:1,...e}}function I0(e){return{}}const L0=Object.freeze(Object.defineProperty({__proto__:null,apply:A0,getDependentCountMap:I0,getOption:x0,immigrate:$0},Symbol.toStringTag,{value:"Module"}));function P0(e,t,n,a){const o=a[e];if(!o)return a;if(t.spaceType==="world"){const r=o.transform.scale,s=_c(t,r);return{...a,[e]:{...o,transform:{...o.transform,scale:te(r,s)}}}}else{const r=n[e];if(!r)return a;const s=r.transform.scale,l=_c(t,s),u=o.inheritScale&&a[o.parentId]?a[o.parentId].transform.scale:{x:1,y:1};return{...a,[e]:{...o,transform:{...o.transform,scale:Ja(te(s,l),u)}}}}}function _c(e,t){const n={x:ut(e.useMinX?e.minX:void 0,e.useMaxX?e.maxX:void 0,t.x),y:ut(e.useMinY?e.minY:void 0,e.useMaxY?e.maxY:void 0,t.y)};return je(Oe(n,t),e.influence)}function B0(e,t){return t}function R0(e={}){return{spaceType:"world",influence:1,minX:0,maxX:0,minY:0,maxY:0,useMinX:!1,useMaxX:!1,useMinY:!1,useMaxY:!1,...e}}function j0(e){return{}}const N0=Object.freeze(Object.defineProperty({__proto__:null,apply:P0,getDependentCountMap:j0,getOption:R0,immigrate:B0},Symbol.toStringTag,{value:"Module"}));function V0(e,t,n,a){var c,d,p,f,m;const o=a[t.targetId],r=a[e];if(!o||!r)return a;const s=r.inheritRotation?((c=a[r.parentId])==null?void 0:c.transform.rotate)??0:0,l=(t.targetSpaceType==="world"?mc(o):((p=(d=n[t.targetId])==null?void 0:d.transform)==null?void 0:p.rotate)??0)*(t.invert?-1:1),u=t.ownerSpaceType==="world"?mc(r):((m=(f=n[e])==null?void 0:f.transform)==null?void 0:m.rotate)??0,i=(l-u)*t.influence;return{...a,[e]:{...r,transform:{...r.transform,rotate:t.ownerSpaceType==="world"?u+i-hu(r):u+i+s}}}}function D0(e,t){return{...t,targetId:e[t.targetId]??t.targetId}}function F0(e={}){return{targetSpaceType:"world",ownerSpaceType:"world",targetId:"",influence:1,invert:!1,...e}}function G0(e){return{[e.targetId]:1}}const U0=Object.freeze(Object.defineProperty({__proto__:null,apply:V0,getDependentCountMap:G0,getOption:F0,immigrate:D0},Symbol.toStringTag,{value:"Module"}));function K0(e,t,n,a){var d,p,f,m;const o=a[t.targetId],r=a[e];if(!o||!r)return a;const s=a[r.parentId]?Fo(a[r.parentId]):{x:0,y:0},l=Ja(t.targetSpaceType==="world"?Do(o):((p=(d=n[t.targetId])==null?void 0:d.transform)==null?void 0:p.translate)??{x:0,y:0},{x:t.invertX?-1:1,y:t.invertY?-1:1}),u=t.ownerSpaceType==="world"?Do(r):((m=(f=n[e])==null?void 0:f.transform)==null?void 0:m.translate)??{x:0,y:0},i=Ja(Oe(l,u),{x:t.copyX?t.influence:0,y:t.copyY?t.influence:0}),c=Ta(r);return{...a,[e]:{...r,transform:{...r.transform,translate:t.ownerSpaceType==="world"?c.toLocal(Oe(te(u,i),r.head)):te(te(u,i),s)}}}}function z0(e,t){return{...t,targetId:e[t.targetId]??t.targetId}}function Y0(e={}){return{targetSpaceType:"world",ownerSpaceType:"world",targetId:"",influence:1,copyX:!0,copyY:!0,invertX:!1,invertY:!1,...e}}function H0(e){return{[e.targetId]:1}}const X0=Object.freeze(Object.defineProperty({__proto__:null,apply:K0,getDependentCountMap:H0,getOption:Y0,immigrate:z0},Symbol.toStringTag,{value:"Module"}));function W0(e,t,n,a){var c,d,p,f,m;const o=a[t.targetId],r=a[e];if(!o||!r)return a;const s=((c=a[r.parentId])==null?void 0:c.transform.scale)??{x:1,y:1},l=t.targetSpaceType==="world"?o.transform.scale:((p=(d=n[t.targetId])==null?void 0:d.transform)==null?void 0:p.scale)??{x:1,y:1},u=t.ownerSpaceType==="world"?r.transform.scale:((m=(f=n[e])==null?void 0:f.transform)==null?void 0:m.scale)??{x:1,y:1},i=Ja(Oe({x:Math.pow(l.x,t.power),y:Math.pow(l.y,t.power)},u),{x:t.copyX?t.influence:0,y:t.copyY?t.influence:0});return{...a,[e]:{...r,transform:{...r.transform,scale:t.ownerSpaceType==="world"?te(u,i):Ja(te(u,i),s)}}}}function J0(e,t){return{...t,targetId:e[t.targetId]??t.targetId}}function q0(e={}){return{targetSpaceType:"world",ownerSpaceType:"world",targetId:"",influence:1,power:1,copyX:!0,copyY:!0,...e}}function Z0(e){return{[e.targetId]:1}}const Q0=Object.freeze(Object.defineProperty({__proto__:null,apply:W0,getDependentCountMap:Z0,getOption:q0,immigrate:J0},Symbol.toStringTag,{value:"Module"}));function bs(e){switch(e){case"IK":return k0;case"LIMIT_LOCATION":return T0;case"LIMIT_ROTATION":return L0;case"LIMIT_SCALE":return N0;case"COPY_LOCATION":return X0;case"COPY_ROTATION":return U0;case"COPY_SCALE":return Q0}}function e1(e,t,n,a){return bs(n.type).apply(a,n.option,e,t)}function t1(e,t,n,a){const o=t[a];return o?o.constraints.reduce((r,s)=>({...r,...e1(e,r,n[s],o.id)}),t):t}function n1(e,t,n=a=>a.id){return t.map(a=>({...a,id:n(a),option:a1(e,a.type,a.option)}))}function a1(e,t,n){return bs(t).immigrate(e,n)}function yf(e,t=!1){const n=t?We():e.id??"";return{type:e.type,name:(e==null?void 0:e.name)??"",option:o1(e.type,e==null?void 0:e.option),id:n}}function o1(e,t={}){return bs(e).getOption(t)}function r1(e,t){const n=ie(e),a=gf(n,t);return Vr(Z(a,r=>Z(r,()=>!0))).map(r=>n[r])}function gf(e,t){return Z(e,n=>ef(n.constraints.map(a=>s1(t[a])).concat(n.parentId?{[n.parentId]:1}:{})))}function s1(e){return bs(e.type).getDependentCountMap(e.option)}function l1(e){const t=e.head,n=so(e),a=Math.cos(n),o=Math.sin(n),r=e.transform.rotate/180*Math.PI,s=Math.cos(r),l=Math.sin(r);return ro([[1,0,0,1,t.x,t.y],[a,o,-o,a,0,0],[1,0,0,1,e.transform.translate.x,e.transform.translate.y],[s,l,-l,s,0,0],[e.transform.scale.x,0,0,e.transform.scale.y,0,0],[a,-o,o,a,0,0],[1,0,0,1,-t.x,-t.y]])}function qa(e,t){return he({scale:te(e.scale,t.scale),rotate:e.rotate+t.rotate,translate:te(e.translate,t.translate),origin:te(e.origin,t.origin)})}function _f(e,t){return he({scale:Oe(e.scale,t.scale),rotate:e.rotate-t.rotate,translate:Oe(e.translate,t.translate),origin:Oe(e.origin,t.origin)})}function gu(e,t){return he({scale:{x:e.scale.x*t.scale.x,y:e.scale.y*t.scale.y},rotate:e.rotate+t.rotate,translate:te(e.translate,t.translate),origin:te(e.origin,t.origin)})}function u1(e){return he({scale:e0(e.scale),rotate:-e.rotate,translate:je(e.translate,-1),origin:je(e.origin,-1)})}function i1(e){return e.reduce((t,n)=>gu(t,n),he())}function kl(e,t,n){const a=n.head?_n(e.head,t):e.head,o=n.tail?_n(e.tail,t):e.tail;return{...e,head:a,tail:o}}function Aa(e,t){const n=i1(t),a=so(e),o=kt(n.translate,a),r=_n(e.head,he({translate:o})),s=_n(e.tail,he({...n,translate:o,origin:e.head,scale:{x:1,y:1}}));return{...e,head:r,tail:te(je(Oe(s,r),n.scale.y),r),transform:he({scale:{x:n.scale.y===0?0:n.scale.x/n.scale.y,y:1}})}}function bc(e,t=!1){const n=t?e.head:e.tail;return Wn({head:n,tail:n,parentId:t?e.parentId:e.id,connected:t?e.connected:!0},!0)}function Ur(e,t){return e.find(n=>n.id===t)}function c1(e,t,n=!1){return e.filter(a=>a.parentId===t&&(!n||a.connected))}function bf(e,t,n,a=!1){const o=Ur(e,t);if(!o||Object.keys(n).length===0)return{};let r={[t]:n};if(!a){if(n.head&&o.connected){const s=Ur(e,o.parentId);s&&(r={...bf(e,s.id,{tail:!0},a),...r})}n.tail&&c1(e,o.id,!0).forEach(s=>{r[s.id]={head:!0}})}return r}function Sf(e,t){const n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];return Ee(t).reduce((a,o)=>{const r=Aa(o,[o.transform]),s=tc(r.head,n),l=tc(r.tail,n);return(s||l)&&(a[o.id]=M1({head:s,tail:l}),s||delete a[o.id].head,l||delete a[o.id].tail),a},{})}function wf(e){const t=Aa(e,[e.transform]),n=t.head,a=t.tail,o=Math.min(n.x,a.x),r=Math.max(n.x,a.x),s=Math.min(n.y,a.y),l=Math.max(n.y,a.y);return{x:o,y:s,width:r-o,height:l-s}}function d1(e,t){if(!t.parentId&&!t.connected)return t;const n=Ur(e,t.parentId);return n?t.connected?{...t,head:n.tail}:t:{...t,connected:!1,parentId:""}}function Mr(e){return e.reduce((t,n)=>{if(!n.parentId)return t;const a=Ur(e,n.parentId);return a?n.connected&&(t[n.id]={connected:Ka(a.tail,n.head)}):t[n.id]={connected:!1,parentId:""},t},{})}function Jn(e,t){const n=Object.keys(t).map(a=>{const o=[],r=Aa(e[a],[e[a].transform]);return t[a].head&&o.push(r.head),t[a].tail&&o.push(r.tail),o}).flat();return Dp(n)}function _u(e){const t=Object.keys(e).map(n=>Aa(e[n],[e[n].transform]).head);return Dp(t)}function bu(e){const t=[],n=Object.keys(e).reduce((a,o)=>{const r=e[o];return!r.parentId||!e[r.parentId]?t.push(r):a[r.parentId]?a[r.parentId].push(r):a[r.parentId]=[r],a},{});return t.map(a=>({...a,children:kf(n,a.id)}))}function kf(e,t){var n;return((n=e[t])==null?void 0:n.map(a=>({...a,children:kf(e,a.id)})))??[]}function Su(e,t){return r1(Ee(e),t).reduce((n,a)=>Ef(e,n,t,a.id),{})}function Ef(e,t,n,a){if(t[a])return t;let o=t;const r=e[a];return r.parentId?(o[r.parentId]||(o={...o,...Ef(e,o,n,r.parentId)}),o={...o,[a]:p1(o[r.parentId],r)}):o={...o,[a]:r},o={...o,...t1(e,o,n,a)},o}function p1(e,t){const n=Ta(t),a=t.connected?{x:0,y:0}:t.transform.translate,o=te(t.head,n.toWorld(a)),r=ff(e,o),s=Oe(r,o);return{...t,transform:{translate:te(a,n.toLocal(s)),rotate:t.inheritRotation?t.transform.rotate+e.transform.rotate:t.transform.rotate,scale:t.inheritScale?{x:t.transform.scale.x*e.transform.scale.x,y:t.transform.scale.y*e.transform.scale.y}:t.transform.scale,origin:{x:0,y:0}}}}function Cf(e){return e.map(t=>{const{children:n,...a}=t;return a}).concat(e.flatMap(t=>Cf(t.children)))}function f1(e,t){return ie(Mf(bu(e),t))}function Mf(e,t){return e.flatMap(n=>{if(lf(t[n.id])){const{children:a,...o}=n;return[o]}else return Mf(n.children,t)})}function Of(e,t,n){return he({scale:Er(e.scale,t.scale,n),rotate:Nr(e.rotate,t.rotate,n),origin:Er(e.origin,t.origin,n),translate:Er(e.translate,t.translate,n)})}function wu(e,t,n,a={}){const o=Z(ie(t),s=>n1(e,s.constraints.map(l=>n[l]),l=>a.resetConstraintId?We():l.id));return{bones:t.map(s=>({...s,parentId:e[s.parentId]??s.parentId,constraints:o[s.id].map(l=>l.id)})),constraints:Ee(o).flat()}}function Tf(e,t,n){const a=Z(e,()=>We()),o=Object.values(a).reduce((s,l)=>(s[l]=!0,s),{}),r=wu(a,Ee(Z(e,s=>{const l={...s,id:a[s.id],name:qt(s.name,n)};return n.push(l.name),l})).sort((s,l)=>s.name>=l.name?1:-1),t,{resetConstraintId:!0});return{bones:r.bones.map(s=>!s.parentId||o[s.parentId]?s:{...s,connected:!1}),createdConstraints:r.constraints}}function m1(e,t,n){const a=Object.keys(e).reduce((i,c)=>(i[e[c].name]=c,i),{}),o={},r={};n.forEach(i=>{if(h1(e,i)){const c=_l(e[i].name);a[c]?o[i]=a[c]:o[i]=We(),r[i]=c}});const s=Object.keys(o).map(i=>{const c=e[i],d=r[i],p=Wa(e,c.id);return Wn({...y1(c,p[0]?e[p[0]].tail:c.head),id:o[i],name:d})}),l=wu(v1({...e,...ie(s)},!0),s,t,{resetConstraintId:!0}),u=Mr(Ee({...e,...ie(l.bones)}));return{bones:l.bones.map(i=>u[i.id]?{...i,...u[i.id]}:i),createdConstraints:l.constraints}}function v1(e,t=!1){const n=Object.keys(e).reduce((a,o)=>(_l(e[o].name)!==e[o].name&&(a[_l(e[o].name)]=o),a),{});return Object.keys(e).reduce((a,o)=>{const r=n[e[o].name];return r?a[o]=r:t&&(a[o]=o),a},{})}function h1(e,t){return!(!e[t]||!e[t].name||!Zp(e[t].name)||Wa(e,t).length===0)}function y1(e,t){const n={x:Oe(t,e.head).x*2,y:0},a=te(e.head,n),o={x:te(te(e.tail,n),je(Oe(e.head,e.tail),2)).x,y:e.tail.y};return{...e,head:a,tail:o}}function g1(e,t){const n=bu(e[t]?{...e,[t]:{...e[t],parentId:""}}:e);return _1(Cf(n.filter(a=>a.id!==t))).map(a=>a.id)}function _1(e){return Qp(e,"name")}function Af(e,t,n,a){const o={},r=n.reduce((s,l)=>{const u=a(s.bones,s.constraints,l);return Object.keys(u.bones).forEach(i=>{o[i]=!0,s.bones[i]=u.bones[i]}),Object.keys(u.constraints).forEach(i=>{s.constraints[i]=u.constraints[i]}),s},{bones:{...e},constraints:{...t}});return{bones:nt(r.bones,o),constraints:nt(r.constraints,o)}}function b1(e,t,n=We){return Af(e,{},t,(a,o,r)=>({bones:S1(a,r,n),constraints:{}})).bones}function S1(e,t,n=We){const a=e[t];if(!a)return e;const[o,r]=w1(a,Ee(e).map(s=>s.name),n);return{...ie(Ee(e).filter(s=>s.parentId===t).map(s=>({...s,parentId:r.id}))),[o.id]:o,[r.id]:r}}function w1(e,t,n){const a=Vp(e.head,e.tail);return[Wn({...e,tail:a}),Wn({...e,id:n(),name:qt(e.name,t),head:a,parentId:e.id,connected:!0,constraints:[],inheritRotation:!0,inheritScale:!0})]}function k1(e,t,n){return Af(e,t,n,E1)}function E1(e,t,n){const a=e[n];if(!a)return{bones:{},constraints:{}};const o=Ze(gf(e,t),s=>n in s),r=wu({[n]:a.parentId},Ee(e).filter(s=>!!o[s.id]).map(s=>{if(s.parentId!==n||!s.connected)return s;const l=e[n];if(!l.parentId)return{...s,parentId:"",connected:!1};const u=e[l.parentId];return u?{...s,parentId:l.parentId,head:u.tail}:s}),t);return{bones:ie(r.bones),constraints:ie(r.constraints)}}function $f(e){return e.concat().sort((t,n)=>vc(n)-vc(t))}function C1(e,t){const n=Ta(e);if(!t)return o=>n.toLocal(o);const a=u1(t);return o=>n.toLocal(t0(o,a))}function M1(e){const t={};return e.head&&(t.head=!0),e.tail&&(t.tail=!0),t}function le(e={}){return{id:"",type:"scaler",data:{},inputs:{},position:{x:0,y:0},...e}}const w=Z(W,e=>({type:e,struct:Xe.UNIT})),St={createdInputs:{disabled:{value:!1},parent:{value:""},transform:{value:he()},fill:{value:he()},stroke:{value:he()},"stroke-width":{value:1}},inputs:{disabled:{type:w.BOOLEAN,default:!1},parent:{type:w.OBJECT,default:""},transform:{type:w.TRANSFORM,default:he()},fill:{type:w.COLOR,default:he()},stroke:{type:w.COLOR,default:he()},"stroke-width":{type:w.SCALER,default:1}},outputs:{object:w.OBJECT,parent:w.OBJECT},getComputation(e){return(t,n)=>({object:t.disabled?"":e({id:n.id,parent:t.parent,transform:t.transform,fill:t.fill,stroke:t.stroke,"stroke-width":t["stroke-width"]}),parent:t.parent})}};function ln(e){return e.find(t=>!!t&&t.type!==W.GENERICS)}function Yt(e,t){return e===void 0&&t===void 0||(e==null?void 0:e.type)===(t==null?void 0:t.type)&&(e==null?void 0:e.struct)===(t==null?void 0:t.struct)}function O1(e,t){return(n,a)=>{var o;return((o=t.find(r=>r.some(s=>s.key===n&&s.output===a)))==null?void 0:o.map(r=>({...r,id:e})))??void 0}}function Ss(e,t,n,a=!1){const o=e.getTransform(t);return r=>r.map((s,l)=>{const u=e.cloneObject(t,{parent:n},`${n}_${l}`),i={...s,rotate:a?0:s.rotate};return e.setTransform(u,o?gu(o,i):i),u})}function xf(e,t){let n=0;return t.map((a,o)=>{const r=a.relative?n+a.offset:a.offset;return n+=a.offset,{id:`${e}_stop_${o}`,parent:e,attributes:{offset:r,"stop-color":a.color}}})}const T1={create(e={}){return{...le({inputs:{},...e}),type:"get_frame"}},data:{},inputs:{},outputs:{frame:w.SCALER,end_frame:w.SCALER},computation(e,t,n){const a=n.getFrameInfo();return{frame:a.currentFrame,end_frame:a.endFrame}},width:120,color:"#f0e68c",label:"Get Frame"},A1=Object.freeze(Object.defineProperty({__proto__:null,struct:T1},Symbol.toStringTag,{value:"Module"})),$1={create(e={}){return{...le({data:{value:0},inputs:{},...e}),type:"scaler"}},data:{value:{type:w.SCALER,default:0}},inputs:{},outputs:{value:w.SCALER},computation(e,t){return{value:t.data.value}},width:120,color:"#f0e68c",label:"Number"},x1=Object.freeze(Object.defineProperty({__proto__:null,struct:$1},Symbol.toStringTag,{value:"Module"})),I1={create(e={}){return{...le({inputs:{x:{value:0},y:{value:0}},...e}),type:"make_vector2"}},data:{},inputs:{x:{type:w.SCALER,default:0},y:{type:w.SCALER,default:0}},outputs:{vector2:w.VECTOR2},computation(e){return{vector2:e}},width:140,color:"#f0e68c",label:"Make Vector2"},L1=Object.freeze(Object.defineProperty({__proto__:null,struct:I1},Symbol.toStringTag,{value:"Module"})),P1={create(e={}){return{...le({inputs:{vector2:{value:{x:0,y:0}}},...e}),type:"break_vector2"}},data:{},inputs:{vector2:{type:w.VECTOR2,default:{x:0,y:0}}},outputs:{x:w.SCALER,y:w.SCALER},computation(e){return{x:e.vector2.x,y:e.vector2.y}},width:140,color:"#f0e68c",label:"Break Vector2"},B1=Object.freeze(Object.defineProperty({__proto__:null,struct:P1},Symbol.toStringTag,{value:"Module"})),R1={create(e={}){return{...le({inputs:{translate:{value:{x:0,y:0}},rotate:{value:0},scale:{value:{x:1,y:1}},origin:{value:{x:0,y:0}}},...e}),type:"make_transform"}},data:{},inputs:{translate:{type:w.VECTOR2,default:{x:0,y:0}},rotate:{type:w.SCALER,default:0},scale:{type:{type:W.VECTOR2,struct:Xe.UNIT,scale:.1},default:{x:1,y:1}},origin:{type:w.VECTOR2,default:{x:0,y:0}}},outputs:{transform:w.TRANSFORM},computation(e){return{transform:he({translate:e.translate,rotate:e.rotate,scale:e.scale,origin:e.origin})}},width:160,color:"#f0e68c",label:"Make Transform"},j1=Object.freeze(Object.defineProperty({__proto__:null,struct:R1},Symbol.toStringTag,{value:"Module"})),N1={create(e={}){return{...le({inputs:{transform:{value:he()}},...e}),type:"break_transform"}},data:{},inputs:{transform:{type:w.TRANSFORM,default:he()}},outputs:{translate:w.VECTOR2,rotate:w.SCALER,scale:w.VECTOR2,origin:w.VECTOR2},computation(e){return{translate:e.transform.translate,rotate:e.transform.rotate,scale:e.transform.scale,origin:e.transform.origin}},width:160,color:"#f0e68c",label:"Break Transform"},V1=Object.freeze(Object.defineProperty({__proto__:null,struct:N1},Symbol.toStringTag,{value:"Module"})),D1={create(e={}){return{...le({inputs:{transform:{value:he()},vector2:{value:{x:0,y:0}}},...e}),type:"apply_transform"}},data:{},inputs:{transform:{type:w.TRANSFORM,default:he()},vector2:{type:w.VECTOR2,default:{x:0,y:0}}},outputs:{vector2:w.VECTOR2},computation(e){return{vector2:_n(e.vector2,e.transform)}},width:160,color:"#f0e68c",label:"Apply Transform"},F1=Object.freeze(Object.defineProperty({__proto__:null,struct:D1},Symbol.toStringTag,{value:"Module"})),G1={create(e={}){return{...le({data:{color:he()},inputs:{},...e}),type:"color"}},data:{color:{type:w.COLOR,default:he()}},inputs:{},outputs:{color:w.COLOR},computation(e,t){return{color:t.data.color}},width:120,color:"#f0e68c",label:"Color"},U1=Object.freeze(Object.defineProperty({__proto__:null,struct:G1},Symbol.toStringTag,{value:"Module"})),Hs={type:W.SCALER,struct:Xe.UNIT,scale:.1},K1={create(e={}){return{...le({inputs:{h:{value:0},s:{value:0},v:{value:0},a:{value:1}},...e}),type:"make_color"}},data:{},inputs:{h:{type:w.SCALER,default:0},s:{type:Hs,default:0},v:{type:Hs,default:0},a:{type:Hs,default:1}},outputs:{color:w.COLOR},computation(e){return{color:yu({...e})}},width:140,color:"#f0e68c",label:"Make Color"},z1=Object.freeze(Object.defineProperty({__proto__:null,struct:K1},Symbol.toStringTag,{value:"Module"})),Y1={create(e={}){return{...le({inputs:{color:{value:he()}},...e}),type:"break_color"}},data:{},inputs:{color:{type:w.COLOR,default:he()}},outputs:{h:w.SCALER,s:w.SCALER,v:w.SCALER,a:{type:W.SCALER,struct:Xe.UNIT,scale:.1}},computation(e){return{...io(e.color)}},width:140,color:"#f0e68c",label:"Break Color"},H1=Object.freeze(Object.defineProperty({__proto__:null,struct:Y1},Symbol.toStringTag,{value:"Module"})),X1={create(e={}){return{...le({inputs:{a:{value:void 0},b:{value:void 0}},...e}),type:"add_generics"}},data:{},inputs:{a:{type:w.GENERICS,default:void 0},b:{type:w.GENERICS,default:void 0}},outputs:{value:w.GENERICS},computation(e,t){var a;const n=(a=this.getOutputType)==null?void 0:a.call(this,t,"value");return{value:W1(n)(e.a,e.b)}},width:100,color:"#4169e1",textColor:"#fff",label:"a + b",getOutputType(e,t){switch(t){case"value":return ln([e.inputs.a.genericsType,e.inputs.b.genericsType])??w.GENERICS;default:return w.GENERICS}},genericsChains:[[{key:"a"},{key:"b"},{key:"value",output:!0}]],getErrors(e){const t=ln([e.inputs.a.genericsType,e.inputs.b.genericsType]);if(t)switch(t.type){case W.SCALER:case W.VECTOR2:case W.TRANSFORM:case W.COLOR:case W.TEXT:case W.D:return;default:return["invalid type to operate"]}}};function W1(e){if(!e)return Sc;if(e.struct===Xe.ARRAY)return J1;switch(e.type){case W.SCALER:return q1;case W.VECTOR2:return Z1;case W.TRANSFORM:return Q1;case W.COLOR:return eS;case W.TEXT:return tS;case W.D:return nS;default:return Sc}}function Sc(){}function J1(e=[],t=[]){return e.concat(t)}function q1(e=0,t=0){return e+t}const El={x:0,y:0};function Z1(e=El,t=El){return te(e,t)}const Kr=he({scale:El});function Q1(e=Kr,t=Kr){return qa(e,t)}function eS(e=Kr,t=Kr){return m0(e,t)}function tS(e="",t=""){return e+t}function nS(e=[],t=[]){return e.concat(t)}const aS=Object.freeze(Object.defineProperty({__proto__:null,struct:X1},Symbol.toStringTag,{value:"Module"})),oS={create(e={}){return{...le({inputs:{a:{value:void 0},b:{value:void 0}},...e}),type:"sub_generics"}},data:{},inputs:{a:{type:w.GENERICS,default:void 0},b:{type:w.GENERICS,default:void 0}},outputs:{value:w.GENERICS},computation(e,t){var a;const n=(a=this.getOutputType)==null?void 0:a.call(this,t,"value");return{value:rS(n)(e.a,e.b)}},width:100,color:"#4169e1",textColor:"#fff",label:"a - b",getOutputType(e,t){switch(t){case"value":return ln([e.inputs.a.genericsType,e.inputs.b.genericsType])??w.GENERICS;default:return w.GENERICS}},genericsChains:[[{key:"a"},{key:"b"},{key:"value",output:!0}]],getErrors(e){const t=ln([e.inputs.a.genericsType,e.inputs.b.genericsType]);if(t){if(t.struct!==Xe.UNIT)return["invalid type to operate"];switch(t.type){case W.SCALER:case W.VECTOR2:case W.TRANSFORM:return;default:return["invalid type to operate"]}}}};function rS(e){if(!e||e.struct===Xe.ARRAY)return Xs;switch(e.type){case W.SCALER:return lS;case W.VECTOR2:return sS;case W.TRANSFORM:return uS;default:return Xs}}function Xs(){}function sS(e=Cl,t=Cl){return Oe(e,t)}function lS(e=0,t=0){return e-t}const Cl={x:0,y:0},wc=he({scale:Cl});function uS(e=wc,t=wc){return _f(e,t)}const iS=Object.freeze(Object.defineProperty({__proto__:null,struct:oS},Symbol.toStringTag,{value:"Module"})),cS={create(e={}){return{...le({inputs:{a:{value:0},b:{value:1}},...e}),type:"multi_scaler"}},data:{},inputs:{a:{type:w.SCALER,default:0},b:{type:w.SCALER,default:1}},outputs:{value:w.SCALER},computation(e){return{value:e.a*e.b}},width:100,color:"#4169e1",textColor:"#fff",label:"a x b"},dS=Object.freeze(Object.defineProperty({__proto__:null,struct:cS},Symbol.toStringTag,{value:"Module"})),pS={create(e={}){return{...le({inputs:{a:{value:0},b:{value:1}},...e}),type:"divide_scaler"}},data:{},inputs:{a:{type:w.SCALER,default:0},b:{type:w.SCALER,default:1}},outputs:{value:w.SCALER},computation(e){return{value:e.a/(e.b===0?1:e.b)}},width:100,color:"#4169e1",textColor:"#fff",label:"a / b"},fS=Object.freeze(Object.defineProperty({__proto__:null,struct:pS},Symbol.toStringTag,{value:"Module"})),mS={create(e={}){return le({inputs:{a:{value:0},b:{value:1}},...e,type:"remainder"})},data:{},inputs:{a:{type:w.SCALER,default:0},b:{type:w.SCALER,default:1}},outputs:{value:w.SCALER},computation(e){return{value:e.a%(e.b===0?1:e.b)}},width:100,color:"#4169e1",textColor:"#fff",label:"a % b"},vS=Object.freeze(Object.defineProperty({__proto__:null,struct:mS},Symbol.toStringTag,{value:"Module"})),hS={create(e={}){return{...le({inputs:{rotate:{value:0}},...e}),type:"sin"}},data:{},inputs:{rotate:{type:w.SCALER,default:0}},outputs:{value:w.SCALER},computation(e){return{value:Math.sin(e.rotate*Math.PI/180)}},width:100,color:"#4169e1",textColor:"#fff",label:"Sin"},yS=Object.freeze(Object.defineProperty({__proto__:null,struct:hS},Symbol.toStringTag,{value:"Module"})),gS={create(e={}){return{...le({inputs:{rotate:{value:0}},...e}),type:"cos"}},data:{},inputs:{rotate:{type:w.SCALER,default:0}},outputs:{value:w.SCALER},computation(e){return{value:Math.cos(e.rotate*Math.PI/180)}},width:100,color:"#4169e1",textColor:"#fff",label:"Cos"},_S=Object.freeze(Object.defineProperty({__proto__:null,struct:gS},Symbol.toStringTag,{value:"Module"})),bS={create(e={}){return{...le({inputs:{rotate:{value:0},radius:{value:1}},...e}),type:"polar_coord"}},data:{},inputs:{rotate:{type:w.SCALER,default:0},radius:{type:w.SCALER,default:1}},outputs:{vector2:w.VECTOR2},computation(e){const t=e.rotate*Math.PI/180;return{vector2:{x:e.radius*Math.cos(t),y:e.radius*Math.sin(t)}}},width:140,color:"#4169e1",textColor:"#fff",label:"Polar Coord"},SS=Object.freeze(Object.defineProperty({__proto__:null,struct:bS},Symbol.toStringTag,{value:"Module"})),wS={create(e={}){return{...le({inputs:{vector2:{value:{x:1,y:0}}},...e}),type:"invert_polar_coord"}},data:{},inputs:{vector2:{type:w.VECTOR2,default:{x:1,y:0}}},outputs:{rotate:w.SCALER,radius:w.SCALER},computation(e){const t=ba(e.vector2);return{rotate:yt(e.vector2)*180/Math.PI,radius:t}},width:160,color:"#4169e1",textColor:"#fff",label:"Invert Polar Coord"},kS=Object.freeze(Object.defineProperty({__proto__:null,struct:wS},Symbol.toStringTag,{value:"Module"})),ES={create(e={}){return{...le({inputs:{x:{value:0},t:{value:2}},...e}),type:"pow"}},data:{},inputs:{x:{type:w.SCALER,default:0},t:{type:w.SCALER,default:2}},outputs:{value:w.SCALER},computation(e){return{value:Math.pow(e.x,e.t)}},width:100,color:"#4169e1",textColor:"#fff",label:"x ^ t"},CS=Object.freeze(Object.defineProperty({__proto__:null,struct:ES},Symbol.toStringTag,{value:"Module"})),MS={create(e={}){return{...le({inputs:{vector2:{value:{x:0,y:0}},scale:{value:1}},...e}),type:"scale_vector2"}},data:{},inputs:{vector2:{type:w.VECTOR2,default:{x:0,y:0}},scale:{type:w.SCALER,default:1}},outputs:{vector2:w.VECTOR2},computation(e){return{vector2:je(e.vector2,e.scale)}},width:140,color:"#4169e1",textColor:"#fff",label:"Scale Vector2"},OS=Object.freeze(Object.defineProperty({__proto__:null,struct:MS},Symbol.toStringTag,{value:"Module"})),TS={create(e={}){return{...le({inputs:{a:{value:{x:0,y:0}},b:{value:{x:0,y:0}}},...e}),type:"distance"}},data:{},inputs:{a:{type:w.VECTOR2,default:{x:0,y:0}},b:{type:w.VECTOR2,default:{x:0,y:0}}},outputs:{distance:w.SCALER},computation(e){return{distance:It(e.a,e.b)}},width:140,color:"#f0e68c",label:"Distance"},AS=Object.freeze(Object.defineProperty({__proto__:null,struct:TS},Symbol.toStringTag,{value:"Module"})),$S={create(e={}){return{...le({inputs:{vector2:{value:{x:0,y:0}},rotate:{value:0},origin:{value:{x:0,y:0}}},...e}),type:"rotate_vector2"}},data:{},inputs:{vector2:{type:w.VECTOR2,default:{x:0,y:0}},rotate:{type:w.SCALER,default:0},origin:{type:w.VECTOR2,default:{x:0,y:0}}},outputs:{vector2:w.VECTOR2},computation(e){return{vector2:kt(e.vector2,e.rotate*Math.PI/180,e.origin)}},width:140,color:"#f0e68c",label:"Rotate Vector2"},xS=Object.freeze(Object.defineProperty({__proto__:null,struct:$S},Symbol.toStringTag,{value:"Module"})),IS={create(e={}){return{...le({inputs:{a:{value:void 0},b:{value:void 0},alpha:{value:0}},...e}),type:"lerp_generics"}},data:{},inputs:{a:{type:w.GENERICS,default:void 0},b:{type:w.GENERICS,default:void 0},alpha:{type:{type:W.SCALER,struct:Xe.UNIT,scale:.1},default:0}},outputs:{value:w.GENERICS},computation(e,t){var a;const n=(a=this.getOutputType)==null?void 0:a.call(this,t,"value");return{value:LS(n)(e.a,e.b,ut(0,1,e.alpha))}},width:140,color:"#4169e1",textColor:"#fff",label:"Lerp Number",getOutputType(e,t){switch(t){case"value":return ln([e.inputs.a.genericsType,e.inputs.b.genericsType])??w.GENERICS;default:return w.GENERICS}},genericsChains:[[{key:"a"},{key:"b"},{key:"value",output:!0}]],getErrors(e){const t=ln([e.inputs.a.genericsType,e.inputs.b.genericsType]);if(t){if(t.struct!==Xe.UNIT)return["invalid type to operate"];switch(t.type){case W.SCALER:case W.VECTOR2:case W.TRANSFORM:case W.COLOR:return;default:return["invalid type to operate"]}}}};function LS(e){if(!e||e.struct===Xe.ARRAY)return Ws;switch(e.type){case W.SCALER:return PS;case W.VECTOR2:return BS;case W.TRANSFORM:case W.COLOR:return RS;default:return Ws}}function Ws(){}function PS(e=0,t=0,n){return Nr(e,t,n)}const kc={x:0,y:0};function BS(e=kc,t=kc,n){return Er(e,t,n)}const Ec=he();function RS(e=Ec,t=Ec,n){return Of(e,t,n)}const jS=Object.freeze(Object.defineProperty({__proto__:null,struct:IS},Symbol.toStringTag,{value:"Module"})),NS={create(e={}){return{...le({inputs:{number:{value:0},from:{value:0},to:{value:1},loop:{value:!1}},...e}),type:"clamp"}},data:{},inputs:{number:{type:w.SCALER,default:0},from:{type:w.SCALER,default:0},to:{type:w.SCALER,default:1},loop:{type:w.BOOLEAN,default:!1}},outputs:{value:w.SCALER},computation(e){return{value:e.loop?Sa(e.from,e.to,e.number):ut(e.from,e.to,e.number)}},width:140,color:"#4169e1",textColor:"#fff",label:"Clamp"},VS=Object.freeze(Object.defineProperty({__proto__:null,struct:NS},Symbol.toStringTag,{value:"Module"})),DS={create(e={}){return{...le({inputs:{number:{value:0},from:{value:0},to:{value:1}},...e}),type:"round_trip"}},data:{},inputs:{number:{type:w.SCALER,default:0},from:{type:w.SCALER,default:0},to:{type:w.SCALER,default:1}},outputs:{value:w.SCALER},computation(e){return{value:$_(e.from,e.to,e.number)}},width:140,color:"#4169e1",textColor:"#fff",label:"Round Trip"},FS=Object.freeze(Object.defineProperty({__proto__:null,struct:DS},Symbol.toStringTag,{value:"Module"})),GS={create(e={}){return{...le({data:{bone:""},inputs:{},...e}),type:"get_bone"}},data:{bone:{type:w.BONE,default:""}},inputs:{},outputs:{transform:w.TRANSFORM,height:w.SCALER},computation(e,t,n){return n.getBoneSummary(t.data.bone)??{transform:he(),height:0}},width:120,color:"#dc143c",textColor:"#fff",label:"Get Bone"},US=Object.freeze(Object.defineProperty({__proto__:null,struct:GS},Symbol.toStringTag,{value:"Module"})),KS={create(e={}){return{...le({data:{object:""},inputs:{},...e}),type:"get_object"}},data:{object:{type:w.OBJECT,default:""}},inputs:{},outputs:{object:w.OBJECT},computation(e,t,n){return{object:t.data.object}},width:120,color:"#dc143c",textColor:"#fff",label:"Get Object"},zS=Object.freeze(Object.defineProperty({__proto__:null,struct:KS},Symbol.toStringTag,{value:"Module"})),YS={create(e={}){return{...le({inputs:{object:{value:""},index:{value:0}},...e}),type:"get_child"}},data:{},inputs:{object:{type:w.OBJECT,default:""},index:{type:w.SCALER,default:0}},outputs:{child:w.OBJECT},computation(e,t,n){const a=Math.floor(e.index);return e.object?{child:n.getChildId(e.object,a)??""}:{child:""}},width:120,color:"#dc143c",textColor:"#fff",label:"Get Child"},HS=Object.freeze(Object.defineProperty({__proto__:null,struct:YS},Symbol.toStringTag,{value:"Module"})),XS={create(e={}){return{...le({inputs:{object:{value:""}},...e}),type:"get_transform"}},data:{},inputs:{object:{type:w.OBJECT,default:""}},outputs:{transform:w.TRANSFORM},computation(e,t,n){return{transform:n.getTransform(e.object)??he()}},width:140,color:"#dc143c",textColor:"#fff",label:"Get Transform"},WS=Object.freeze(Object.defineProperty({__proto__:null,struct:XS},Symbol.toStringTag,{value:"Module"})),JS={create(e={}){return{...le({inputs:{object:{value:""},transform:{value:he()}},...e}),type:"set_transform"}},data:{},inputs:{object:{type:w.OBJECT,default:""},transform:{type:w.TRANSFORM,default:he()}},outputs:{object:w.OBJECT},computation(e,t,n){return n.setTransform(e.object,e.transform),{object:e.object}},width:140,color:"#dc143c",textColor:"#fff",label:"Set Transform"},qS=Object.freeze(Object.defineProperty({__proto__:null,struct:JS},Symbol.toStringTag,{value:"Module"})),ZS={create(e={}){return{...le({inputs:{object:{value:""},transform:{value:he({scale:{x:0,y:0}})}},...e}),type:"add_transform"}},data:{},inputs:{object:{type:w.OBJECT,default:""},transform:{type:w.TRANSFORM,default:he()}},outputs:{object:w.OBJECT},computation(e,t,n){const a=n.getTransform(e.object);return n.setTransform(e.object,a?qa(a,e.transform):e.transform),{object:e.object}},width:140,color:"#dc143c",textColor:"#fff",label:"Add Transform"},QS=Object.freeze(Object.defineProperty({__proto__:null,struct:ZS},Symbol.toStringTag,{value:"Module"})),ew={create(e={}){return{...le({inputs:{object:{value:""},color:{value:he()}},...e}),type:"set_fill"}},data:{},inputs:{object:{type:w.OBJECT,default:""},color:{type:w.COLOR,default:he()}},outputs:{object:w.OBJECT},computation(e,t,n){return n.setFill(e.object,e.color),{object:e.object}},width:120,color:"#dc143c",textColor:"#fff",label:"Set Fill"},tw=Object.freeze(Object.defineProperty({__proto__:null,struct:ew},Symbol.toStringTag,{value:"Module"})),nw={create(e={}){return{...le({inputs:{object:{value:""},color:{value:he()},linecap:{value:0},linejoin:{value:0}},...e}),type:"set_stroke"}},data:{},inputs:{object:{type:w.OBJECT,default:""},color:{type:w.COLOR,default:he()},linecap:{type:{type:W.SCALER,struct:Xe.UNIT,enumKey:"LINECAP"},default:0},linejoin:{type:{type:W.SCALER,struct:Xe.UNIT,enumKey:"LINEJOIN"},default:0}},outputs:{object:w.OBJECT},computation(e,t,n){return n.setStroke(e.object,e.color),n.setAttributes(e.object,{"stroke-linecap":wa("LINECAP",e.linecap),"stroke-linejoin":wa("LINEJOIN",e.linejoin)}),{object:e.object}},width:120,color:"#dc143c",textColor:"#fff",label:"Set Stroke"},aw=Object.freeze(Object.defineProperty({__proto__:null,struct:nw},Symbol.toStringTag,{value:"Module"})),ow={create(e={}){return{...le({inputs:{object:{value:""},length:{value:0},max_length:{value:100}},...e}),type:"set_stroke_length"}},data:{},inputs:{object:{type:w.OBJECT,default:""},length:{type:w.SCALER,default:0},max_length:{type:w.SCALER,default:0}},outputs:{object:w.OBJECT},computation(e,t,n){return e.object?(n.setAttributes(e.object,{"stroke-dasharray":e.max_length.toString(),"stroke-dashoffset":e.max_length-e.length}),{object:e.object}):{object:""}},width:160,color:"#dc143c",textColor:"#fff",label:"Set Stroke Length"},rw=Object.freeze(Object.defineProperty({__proto__:null,struct:ow},Symbol.toStringTag,{value:"Module"})),sw={create(e={}){return{...le({inputs:{object:{value:""},fill_gradient:{value:""},stroke_gradient:{value:""}},...e}),type:"set_gradient"}},data:{},inputs:{object:{type:w.OBJECT,default:""},fill_gradient:{type:w.OBJECT,default:""},stroke_gradient:{type:w.OBJECT,default:""}},outputs:{object:w.OBJECT},computation(e,t,n){return n.setFill(e.object,e.fill_gradient),n.setStroke(e.object,e.stroke_gradient),{object:e.object}},width:140,color:"#dc143c",textColor:"#fff",label:"Set Gradient"},lw=Object.freeze(Object.defineProperty({__proto__:null,struct:sw},Symbol.toStringTag,{value:"Module"})),uw={create(e={}){return{...le({inputs:{object:{value:""},centered:{value:!1},x:{value:0},y:{value:0},width:{value:400},height:{value:400}},...e}),type:"set_viewbox"}},data:{},inputs:{object:{type:w.OBJECT,default:""},centered:{type:w.BOOLEAN,default:!1},x:{type:w.SCALER,default:0},y:{type:w.SCALER,default:0},width:{type:w.SCALER,default:400},height:{type:w.SCALER,default:400}},outputs:{object:w.OBJECT},computation(e,t,n){return n.setAttributes(e.object,{viewBox:{x:e.centered?e.x-e.width/2:e.x,y:e.centered?e.y-e.height/2:e.y,width:e.width,height:e.height}}),{object:e.object}},width:140,color:"#dc143c",textColor:"#fff",label:"Set Viewbox"},iw=Object.freeze(Object.defineProperty({__proto__:null,struct:uw},Symbol.toStringTag,{value:"Module"})),cw={create(e={}){return{...le({inputs:{disabled:{value:!1},object:{value:""}},...e}),type:"hide_object"}},data:{},inputs:{disabled:{type:w.BOOLEAN,default:!1},object:{type:w.OBJECT,default:""}},outputs:{object:w.OBJECT},computation(e,t,n){if(!e.disabled){const a=he({scale:{x:0,y:1}});n.setStroke(e.object,a),n.setFill(e.object,a)}return{object:e.object}},width:120,color:"#dc143c",textColor:"#fff",label:"Hide Object"},dw=Object.freeze(Object.defineProperty({__proto__:null,struct:cw},Symbol.toStringTag,{value:"Module"})),pw={create(e={}){return{...le({inputs:{object:{value:""}},...e}),type:"clone_object"}},data:{},inputs:{object:{type:w.OBJECT,default:""}},outputs:{origin:w.OBJECT,clone:w.OBJECT},computation(e,t,n){const a=n.cloneObject(e.object,{},t.id);return{origin:e.object,clone:a}},width:140,color:"#dc143c",textColor:"#fff",label:"Clone Object"},fw=Object.freeze(Object.defineProperty({__proto__:null,struct:pw},Symbol.toStringTag,{value:"Module"})),mw={create(e={}){return{...le({inputs:{object:{value:""}},...e}),type:"group_clone_object"}},data:{},inputs:{object:{type:w.OBJECT,default:""}},outputs:{origin:w.OBJECT,group:w.OBJECT,clone:w.OBJECT},computation(e,t,n){const a=n.createCloneGroupObject(e.object,{id:t.id}),o=Ss(n,e.object,a),[r]=o([0].map(()=>he()));return{origin:e.object,group:a,clone:r}},width:180,color:"#dc143c",textColor:"#fff",label:"Group Clone Object"},vw=Object.freeze(Object.defineProperty({__proto__:null,struct:mw},Symbol.toStringTag,{value:"Module"})),hw={create(e={}){return{...le({inputs:{object:{value:""},rotate:{value:0},count:{value:4},radius:{value:100},fix_rotate:{value:!1}},...e}),type:"circle_clone_object"}},data:{},inputs:{object:{type:w.OBJECT,default:""},rotate:{type:w.SCALER,default:0},count:{type:w.SCALER,default:4},radius:{type:w.SCALER,default:100},fix_rotate:{type:w.BOOLEAN,default:!1}},outputs:{origin:w.OBJECT,group:w.OBJECT},computation(e,t,n){if(!e.object)return{origin:"",group:""};const a=Math.floor(e.count);if(a<=0)return{origin:e.object,group:""};const o=n.createCloneGroupObject(e.object,{id:t.id}),r=i0(a,e.radius,e.rotate);return Ss(n,e.object,o,e.fix_rotate)([...Array(a)].map((l,u)=>r(u))),{origin:e.object,group:o}},width:180,color:"#dc143c",textColor:"#fff",label:"Circle Clone Object"},yw=Object.freeze(Object.defineProperty({__proto__:null,struct:hw},Symbol.toStringTag,{value:"Module"})),gw={create(e={}){return{...le({inputs:{object:{value:""},centered:{value:!1},rotate:{value:0},row:{value:3},column:{value:3},width:{value:50},height:{value:50}},...e}),type:"grid_clone_object"}},data:{},inputs:{object:{type:w.OBJECT,default:""},centered:{type:w.BOOLEAN,default:!1},rotate:{type:w.SCALER,default:0},row:{type:w.SCALER,default:3},column:{type:w.SCALER,default:3},width:{type:w.SCALER,default:50},height:{type:w.SCALER,default:50}},outputs:{origin:w.OBJECT,group:w.OBJECT},computation(e,t,n){if(!e.object)return{origin:"",group:""};const a=Math.floor(e.row),o=Math.floor(e.column);if(a<=0||o<=0)return{origin:e.object,group:""};const r=n.createCloneGroupObject(e.object,{id:t.id}),s=Ss(n,e.object,r),l=c0(e.width,e.height,o,a,e.rotate,e.centered);return s([...Array(a*o)].map((u,i)=>l(i))),{origin:e.object,group:r}},width:180,color:"#dc143c",textColor:"#fff",label:"Grid Clone Object"},_w=Object.freeze(Object.defineProperty({__proto__:null,struct:gw},Symbol.toStringTag,{value:"Module"})),bw={create(e={}){return{...le({inputs:{object:{value:""},rotate:{value:0},max_rotate:{value:360*3},interval:{value:30},offset:{value:0},radius:{value:50},radius_grow:{value:1},scale_grow:{value:1},fix_rotate:{value:!1}},...e}),type:"tornado_clone_object"}},data:{},inputs:{object:{type:w.OBJECT,default:""},rotate:{type:w.SCALER,default:0},max_rotate:{type:w.SCALER,default:360*3},interval:{type:w.SCALER,default:60},offset:{type:w.SCALER,default:0},radius:{type:w.SCALER,default:50},radius_grow:{type:{type:W.SCALER,struct:Xe.UNIT,scale:.1},default:1},scale_grow:{type:{type:W.SCALER,struct:Xe.UNIT,scale:.1},default:1},fix_rotate:{type:w.BOOLEAN,default:!1}},outputs:{origin:w.OBJECT,group:w.OBJECT},computation(e,t,n){if(!e.object)return{origin:"",group:""};const a=Math.floor(e.max_rotate/e.interval);if(a<=0||e.interval<=0||e.radius<=0||e.radius_grow<=0||e.scale_grow<=0)return{origin:e.object,group:""};const o=n.createCloneGroupObject(e.object,{id:t.id}),r=u0(e.radius,e.rotate,e.radius_grow,e.scale_grow);return Ss(n,e.object,o,e.fix_rotate)([...Array(a)].map((l,u)=>e.interval*u+e.offset).filter(l=>0<=l&&l<=e.max_rotate).map(r)),{origin:e.object,group:o}},width:200,color:"#dc143c",textColor:"#fff",label:"Tornado Clone Object"},Sw=Object.freeze(Object.defineProperty({__proto__:null,struct:bw},Symbol.toStringTag,{value:"Module"})),ww={create(e={}){return{...le({data:{},inputs:{disabled:{value:!1},parent:{value:""},transform:{value:he()}},...e}),type:"create_object_group"}},data:{},inputs:{disabled:{type:w.BOOLEAN,default:!1},parent:{type:w.OBJECT,default:""},transform:{type:w.TRANSFORM,default:he()}},outputs:St.outputs,computation(e,t,n){return e.disabled?{object:"",parent:e.parent}:{object:n.createObject("g",{id:t.id,parent:e.parent,transform:e.transform,attributes:{}}),parent:e.parent}},width:140,color:"#dc143c",textColor:"#fff",label:"Create Group"},kw=Object.freeze(Object.defineProperty({__proto__:null,struct:ww},Symbol.toStringTag,{value:"Module"})),Ew={create(e={}){return{...le({data:{},inputs:{...St.createdInputs,centered:{value:!1},x:{value:0},y:{value:0},width:{value:100},height:{value:100}},...e}),type:"create_object_rect"}},data:{},inputs:{...St.inputs,centered:{type:w.BOOLEAN,default:!1},x:{type:w.SCALER,default:0},y:{type:w.SCALER,default:0},width:{type:w.SCALER,default:100},height:{type:w.SCALER,default:100}},outputs:St.outputs,computation(e,t,n){return St.getComputation(a=>n.createObject("rect",{...a,attributes:{x:e.centered?e.x-e.width/2:e.x,y:e.centered?e.y-e.height/2:e.y,width:e.width,height:e.height}}))(e,t)},width:140,color:"#dc143c",textColor:"#fff",label:"Create Rect"},Cw=Object.freeze(Object.defineProperty({__proto__:null,struct:Ew},Symbol.toStringTag,{value:"Module"})),Mw={create(e={}){return{...le({data:{},inputs:{...St.createdInputs,cx:{value:0},cy:{value:0},rx:{value:10},ry:{value:10}},...e}),type:"create_object_ellipse"}},data:{},inputs:{...St.inputs,cx:{type:w.SCALER,default:0},cy:{type:w.SCALER,default:0},rx:{type:w.SCALER,default:10},ry:{type:w.SCALER,default:10}},outputs:St.outputs,computation(e,t,n){return St.getComputation(a=>n.createObject("ellipse",{...a,attributes:{cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry}}))(e,t)},width:140,color:"#dc143c",textColor:"#fff",label:"Create Ellipse"},Ow=Object.freeze(Object.defineProperty({__proto__:null,struct:Mw},Symbol.toStringTag,{value:"Module"})),Tw={create(e={}){return{...le({data:{},inputs:{...St.createdInputs,centered:{value:!1},x:{value:0},y:{value:0},dx:{value:0},dy:{value:0},text:{value:"TEXT"},"font-size":{value:10}},...e}),type:"create_object_text"}},data:{},inputs:{...St.inputs,centered:{type:w.BOOLEAN,default:!1},x:{type:w.SCALER,default:0},y:{type:w.SCALER,default:0},dx:{type:w.SCALER,default:0},dy:{type:w.SCALER,default:0},text:{type:w.TEXT,default:"TEXT"},"font-size":{type:w.SCALER,default:100}},outputs:St.outputs,computation(e,t,n){return St.getComputation(a=>n.createObject("text",{...a,attributes:{x:e.x,y:e.y,dx:e.dx,dy:e.dy,"font-size":e["font-size"],...e.centered?{"text-anchor":"middle","dominant-baseline":"middle"}:{}},text:e.text}))(e,t)},width:140,color:"#dc143c",textColor:"#fff",label:"Create Text"},Aw=Object.freeze(Object.defineProperty({__proto__:null,struct:Tw},Symbol.toStringTag,{value:"Module"})),$w={create(e={}){return{...le({data:{},inputs:{...St.createdInputs,d:{value:[]}},...e}),type:"create_object_path"}},data:{},inputs:{...St.inputs,d:{type:w.D,default:[]}},outputs:St.outputs,computation(e,t,n){return St.getComputation(a=>n.createObject("path",{...a,attributes:{d:e.d}}))(e,t)},width:140,color:"#dc143c",textColor:"#fff",label:"Create Path"},xw=Object.freeze(Object.defineProperty({__proto__:null,struct:$w},Symbol.toStringTag,{value:"Module"})),Iw={create(e={}){return{...le({inputs:{disabled:{value:!1},parent:{value:""},relative:{value:!0},spread:{value:0},stop:{value:[]},from:{value:{x:0,y:0}},to:{value:{x:1,y:1}}},...e}),type:"create_linear_gradient"}},data:{},inputs:{disabled:{type:w.BOOLEAN,default:!1},parent:{type:w.OBJECT,default:""},relative:{type:w.BOOLEAN,default:!0},spread:{type:{type:W.SCALER,struct:Xe.UNIT,enumKey:"SPREAD_METHOD"},default:0},stop:{type:w.STOP,default:[]},from:{type:{type:W.VECTOR2,struct:Xe.UNIT,scale:.05},default:{x:0,y:0}},to:{type:{type:W.VECTOR2,struct:Xe.UNIT,scale:.05},default:{x:1,y:1}}},outputs:{gradient:w.OBJECT},computation(e,t,n){if(e.disabled)return{gradient:""};const a=n.createObject("linearGradient",{id:t.id,parent:e.parent,attributes:{id:t.id,x1:e.from.x,y1:e.from.y,x2:e.to.x,y2:e.to.y,gradientUnits:e.relative?"objectBoundingBox":"userSpaceOnUse",spreadMethod:wa("SPREAD_METHOD",e.spread)}});return xf(a,e.stop).forEach(o=>{n.createObject("stop",o)}),{gradient:a}},width:180,color:"#dc143c",textColor:"#fff",label:"Linear Gradient"},Lw=Object.freeze(Object.defineProperty({__proto__:null,struct:Iw},Symbol.toStringTag,{value:"Module"})),Pw={create(e={}){return{...le({inputs:{disabled:{value:!1},parent:{value:""},relative:{value:!0},spread:{value:0},stop:{value:[]},center:{value:{x:0,y:0}},radius:{value:1},focus:{value:{x:0,y:0}}},...e}),type:"create_radial_gradient"}},data:{},inputs:{disabled:{type:w.BOOLEAN,default:!1},parent:{type:w.OBJECT,default:""},relative:{type:w.BOOLEAN,default:!0},spread:{type:{type:W.SCALER,struct:Xe.UNIT,enumKey:"SPREAD_METHOD"},default:0},stop:{type:w.STOP,default:[]},center:{type:{type:W.VECTOR2,struct:Xe.UNIT,scale:.05},default:{x:0,y:0}},radius:{type:{type:W.SCALER,struct:Xe.UNIT,scale:.05},default:1},focus:{type:{type:W.VECTOR2,struct:Xe.UNIT,scale:.05},default:{x:0,y:0}}},outputs:{gradient:w.OBJECT},computation(e,t,n){if(e.disabled)return{gradient:""};const a=n.createObject("radialGradient",{id:t.id,parent:e.parent,attributes:{id:t.id,cx:e.center.x,cy:e.center.y,r:Math.max(e.radius,0),fx:e.focus.x,fy:e.focus.y,gradientUnits:wa("SPACE_UNITS",e.relative?1:0),spreadMethod:wa("SPREAD_METHOD",e.spread)}});return xf(a,e.stop).forEach(o=>{n.createObject("stop",o)}),{gradient:a}},width:180,color:"#dc143c",textColor:"#fff",label:"Radial Gradient"},Bw=Object.freeze(Object.defineProperty({__proto__:null,struct:Pw},Symbol.toStringTag,{value:"Module"})),Rw={create(e={}){return{...le({inputs:{stop:{value:[]},relative:{value:!0},offset:{value:0},color:{value:he()}},...e}),type:"make_stop"}},data:{},inputs:{stop:{type:w.STOP,default:[]},relative:{type:w.BOOLEAN,default:!0},offset:{type:{type:W.SCALER,struct:Xe.UNIT,scale:.1},default:0},color:{type:w.COLOR,default:he()}},outputs:{stop:w.STOP},computation(e,t,n){return{stop:[...e.stop,{offset:e.offset,color:e.color,relative:e.relative}]}},width:140,color:"#8b008b",textColor:"#fff",label:"Make Stop"},jw=Object.freeze(Object.defineProperty({__proto__:null,struct:Rw},Symbol.toStringTag,{value:"Module"})),Nw={create(e={}){return{...le({data:{},inputs:{d:{value:[]},relative:{value:!1},p:{value:{x:0,y:0}}},...e}),type:"make_path_m"}},data:{},inputs:{d:{type:w.D,default:[]},relative:{type:w.BOOLEAN,default:!1},p:{type:w.VECTOR2,default:{x:0,y:0}}},outputs:{d:w.D},computation(e){return{d:[...e.d,`${e.relative?"m":"M"}${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path M"},Vw=Object.freeze(Object.defineProperty({__proto__:null,struct:Nw},Symbol.toStringTag,{value:"Module"})),Dw={create(e={}){return{...le({data:{},inputs:{d:{value:[]},relative:{value:!1},p:{value:{x:0,y:0}}},...e}),type:"make_path_l"}},data:{},inputs:{d:{type:w.D,default:[]},relative:{type:w.BOOLEAN,default:!1},p:{type:w.VECTOR2,default:{x:0,y:0}}},outputs:{d:w.D},computation(e){return{d:[...e.d,`${e.relative?"l":"L"}${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path L"},Fw=Object.freeze(Object.defineProperty({__proto__:null,struct:Dw},Symbol.toStringTag,{value:"Module"})),Gw={create(e={}){return{...le({data:{},inputs:{d:{value:[]},relative:{value:!1},x:{value:0}},...e}),type:"make_path_h"}},data:{},inputs:{d:{type:w.D,default:[]},relative:{type:w.BOOLEAN,default:!1},x:{type:w.SCALER,default:0}},outputs:{d:w.D},computation(e){return{d:[...e.d,`${e.relative?"h":"H"}${e.x}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path H"},Uw=Object.freeze(Object.defineProperty({__proto__:null,struct:Gw},Symbol.toStringTag,{value:"Module"})),Kw={create(e={}){return{...le({data:{},inputs:{d:{value:[]},relative:{value:!1},y:{value:0}},...e}),type:"make_path_v"}},data:{},inputs:{d:{type:w.D,default:[]},relative:{type:w.BOOLEAN,default:!1},y:{type:w.SCALER,default:0}},outputs:{d:w.D},computation(e){return{d:[...e.d,`${e.relative?"v":"V"}${e.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path V"},zw=Object.freeze(Object.defineProperty({__proto__:null,struct:Kw},Symbol.toStringTag,{value:"Module"})),Yw={create(e={}){return{...le({data:{},inputs:{d:{value:[]},relative:{value:!1},c1:{value:{x:0,y:0}},p:{value:{x:0,y:0}}},...e}),type:"make_path_q"}},data:{},inputs:{d:{type:w.D,default:[]},relative:{type:w.BOOLEAN,default:!1},c1:{type:w.VECTOR2,default:{x:0,y:0}},p:{type:w.VECTOR2,default:{x:0,y:0}}},outputs:{d:w.D},computation(e){return{d:[...e.d,`${e.relative?"q":"Q"}${e.c1.x},${e.c1.y} ${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path Q"},Hw=Object.freeze(Object.defineProperty({__proto__:null,struct:Yw},Symbol.toStringTag,{value:"Module"})),Xw={create(e={}){return{...le({data:{},inputs:{d:{value:[]},relative:{value:!1},p:{value:{x:0,y:0}}},...e}),type:"make_path_t"}},data:{},inputs:{d:{type:w.D,default:[]},relative:{type:w.BOOLEAN,default:!1},p:{type:w.VECTOR2,default:{x:0,y:0}}},outputs:{d:w.D},computation(e){return{d:[...e.d,`${e.relative?"t":"T"}${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path T"},Ww=Object.freeze(Object.defineProperty({__proto__:null,struct:Xw},Symbol.toStringTag,{value:"Module"})),Jw={create(e={}){return{...le({data:{},inputs:{d:{value:[]},relative:{value:!1},c1:{value:{x:0,y:0}},c2:{value:{x:0,y:0}},p:{value:{x:0,y:0}}},...e}),type:"make_path_c"}},data:{},inputs:{d:{type:w.D,default:[]},relative:{type:w.BOOLEAN,default:!1},c1:{type:w.VECTOR2,default:{x:0,y:0}},c2:{type:w.VECTOR2,default:{x:0,y:0}},p:{type:w.VECTOR2,default:{x:0,y:0}}},outputs:{d:w.D},computation(e){return{d:[...e.d,`${e.relative?"c":"C"}${e.c1.x},${e.c1.y} ${e.c2.x},${e.c2.y} ${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path Q"},qw=Object.freeze(Object.defineProperty({__proto__:null,struct:Jw},Symbol.toStringTag,{value:"Module"})),Zw={create(e={}){return{...le({data:{},inputs:{d:{value:[]},relative:{value:!1},c1:{value:{x:0,y:0}},p:{value:{x:0,y:0}}},...e}),type:"make_path_s"}},data:{},inputs:{d:{type:w.D,default:[]},relative:{type:w.BOOLEAN,default:!1},c1:{type:w.VECTOR2,default:{x:0,y:0}},p:{type:w.VECTOR2,default:{x:0,y:0}}},outputs:{d:w.D},computation(e){return{d:[...e.d,`${e.relative?"s":"S"}${e.c1.x},${e.c1.y} ${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path S"},Qw=Object.freeze(Object.defineProperty({__proto__:null,struct:Zw},Symbol.toStringTag,{value:"Module"})),ek={create(e={}){return{...le({data:{},inputs:{d:{value:[]},relative:{value:!1},rx:{value:10},ry:{value:10},rotate:{value:0},"large-arc":{value:!1},sweep:{value:!1},p:{value:{x:0,y:0}}},...e}),type:"make_path_a"}},data:{},inputs:{d:{type:w.D,default:[]},relative:{type:w.BOOLEAN,default:!1},rx:{type:w.SCALER,default:1},ry:{type:w.SCALER,default:1},rotate:{type:w.SCALER,default:0},"large-arc":{type:w.BOOLEAN,default:!1},sweep:{type:w.BOOLEAN,default:!1},p:{type:w.VECTOR2,default:{x:0,y:0}}},outputs:{d:w.D},computation(e){return{d:[...e.d,`${e.relative?"a":"A"}${e.rx} ${e.ry} ${e.rotate} ${e["large-arc"]?1:0} ${e.sweep?1:0} ${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path A"},tk=Object.freeze(Object.defineProperty({__proto__:null,struct:ek},Symbol.toStringTag,{value:"Module"})),nk={create(e={}){return{...le({data:{},inputs:{d:{value:[]}},...e}),type:"make_path_z"}},data:{},inputs:{d:{type:w.D,default:[]}},outputs:{d:w.D},computation(e){return{d:[...e.d,"Z"]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path Z"},ak=Object.freeze(Object.defineProperty({__proto__:null,struct:nk},Symbol.toStringTag,{value:"Module"})),ok={create(e={}){return{...le({data:{},inputs:{d:{value:[]}},...e}),type:"get_path_length"}},data:{},inputs:{...St.inputs,d:{type:w.D,default:[]}},outputs:{length:w.SCALER},computation(e,t,n){return{length:n.getPathLength(e.d.join(" "))}},width:140,color:"#dc143c",textColor:"#fff",label:"Get Path Length"},rk=Object.freeze(Object.defineProperty({__proto__:null,struct:ok},Symbol.toStringTag,{value:"Module"})),sk={create(e={}){return{...le({data:{},inputs:{d:{value:[]},distance:{value:0}},...e}),type:"get_path_point_at"}},data:{},inputs:{d:{type:w.D,default:[]},distance:{type:w.SCALER,default:0}},outputs:{vector2:w.VECTOR2},computation(e,t,n){return{vector2:n.getPathPointAt(e.d.join(" "),e.distance)}},width:140,color:"#dc143c",textColor:"#fff",label:"Get Path Point At"},lk=Object.freeze(Object.defineProperty({__proto__:null,struct:sk},Symbol.toStringTag,{value:"Module"})),uk={create(e={}){return{...le({data:{},inputs:{d:{value:[]},transform:{value:he()}},...e}),type:"transform_path"}},data:{},inputs:{d:{type:w.D,default:[]},transform:{type:w.TRANSFORM,default:he()}},outputs:{d:w.D},computation(e){return{d:oc(V_(j_(oc(du(e.d.join(" ")),je(e.transform.origin,-1)),e.transform.scale),e.transform.rotate*Math.PI/180),te(e.transform.origin,e.transform.translate)).map(Gp)}},width:140,color:"#fff5ee",textColor:"#000",label:"Transform Path"},ik=Object.freeze(Object.defineProperty({__proto__:null,struct:uk},Symbol.toStringTag,{value:"Module"})),ck={create(e={}){return le({inputs:{d:{value:[]}},...e,type:"reverse_path"})},data:{},inputs:{d:{type:w.D,default:[]}},outputs:{d:w.D},computation(e){return{d:R_(du(e.d.join(" "))).map(Gp)}},width:120,color:"#fff5ee",textColor:"#000",label:"Reverse Path"},dk=Object.freeze(Object.defineProperty({__proto__:null,struct:ck},Symbol.toStringTag,{value:"Module"})),pk={create(e={}){return{...le({data:{},inputs:{a:{value:[]},b:{value:[]}},...e}),type:"join_path"}},data:{},inputs:{a:{type:w.D,default:[]},b:{type:w.D,default:[]}},outputs:{d:w.D},computation(e){return{d:e.a.concat(e.b)}},width:120,color:"#fff5ee",textColor:"#000",label:"Join Path"},fk=Object.freeze(Object.defineProperty({__proto__:null,struct:pk},Symbol.toStringTag,{value:"Module"})),mk={create(e={}){return{...le({data:{},inputs:{disabled:{value:!1},parent:{value:""},relative:{value:!1}},...e}),type:"create_object_clip_path"}},data:{},inputs:{disabled:{type:w.BOOLEAN,default:!1},parent:{type:w.OBJECT,default:""},relative:{type:w.BOOLEAN,default:!1}},outputs:St.outputs,computation(e,t,n){return e.disabled?{object:"",parent:e.parent}:{object:n.createObject("clipPath",{id:t.id,parent:e.parent,attributes:{clipPathUnits:wa("SPACE_UNITS",e.relative?1:0)}}),parent:e.parent}},width:160,color:"#dc143c",textColor:"#fff",label:"Create Clip Path"},vk=Object.freeze(Object.defineProperty({__proto__:null,struct:mk},Symbol.toStringTag,{value:"Module"})),hk={create(e={}){return{...le({inputs:{object:{value:""},clip_path:{value:""}},...e}),type:"set_clip_path"}},data:{},inputs:{object:{type:w.OBJECT,default:""},clip_path:{type:w.OBJECT,default:""}},outputs:{object:w.OBJECT},computation(e,t,n){return n.setAttributes(e.object,{"clip-path":`url(#${e.clip_path})`}),n.setAttributes(e.clip_path,{id:e.clip_path}),{object:e.object}},width:140,color:"#dc143c",textColor:"#fff",label:"Set Clip Path"},yk=Object.freeze(Object.defineProperty({__proto__:null,struct:hk},Symbol.toStringTag,{value:"Module"})),gk={create(e={}){return{...le({inputs:{a:{value:0},b:{value:0}},...e}),type:"greater_than"}},data:{},inputs:{a:{type:w.SCALER,default:0},b:{type:w.OBJECT,default:0}},outputs:{value:w.BOOLEAN},computation(e){return{value:e.a>e.b}},width:100,color:"#b0c4de",textColor:"#000",label:"a > b"},_k=Object.freeze(Object.defineProperty({__proto__:null,struct:gk},Symbol.toStringTag,{value:"Module"})),bk={create(e={}){return{...le({inputs:{a:{value:0},b:{value:0}},...e}),type:"greater_than_or_equal"}},data:{},inputs:{a:{type:w.SCALER,default:0},b:{type:w.SCALER,default:0}},outputs:{value:w.BOOLEAN},computation(e){return{value:e.a>=e.b}},width:100,color:"#b0c4de",textColor:"#000",label:"a >= b"},Sk=Object.freeze(Object.defineProperty({__proto__:null,struct:bk},Symbol.toStringTag,{value:"Module"})),wk={create(e={}){return{...le({inputs:{a:{value:0},b:{value:0}},...e}),type:"less_than"}},data:{},inputs:{a:{type:w.SCALER,default:0},b:{type:w.SCALER,default:0}},outputs:{value:w.BOOLEAN},computation(e){return{value:e.a<e.b}},width:100,color:"#b0c4de",textColor:"#000",label:"a < b"},kk=Object.freeze(Object.defineProperty({__proto__:null,struct:wk},Symbol.toStringTag,{value:"Module"})),Ek={create(e={}){return{...le({inputs:{a:{value:0},b:{value:0}},...e}),type:"less_than_or_equal"}},data:{},inputs:{a:{type:w.SCALER,default:0},b:{type:w.SCALER,default:0}},outputs:{value:w.BOOLEAN},computation(e){return{value:e.a<=e.b}},width:100,color:"#b0c4de",textColor:"#000",label:"a <= b"},Ck=Object.freeze(Object.defineProperty({__proto__:null,struct:Ek},Symbol.toStringTag,{value:"Module"})),Mk={create(e={}){return{...le({inputs:{number:{value:0},from:{value:0},to:{value:1}},...e}),type:"between"}},data:{},inputs:{number:{type:w.SCALER,default:0},from:{type:w.SCALER,default:0},to:{type:w.SCALER,default:1}},outputs:{value:w.BOOLEAN},computation(e){return{value:e.from<=e.number&&e.number<=e.to}},width:120,color:"#b0c4de",textColor:"#000",label:"Between"},Ok=Object.freeze(Object.defineProperty({__proto__:null,struct:Mk},Symbol.toStringTag,{value:"Module"})),Tk={create(e={}){return{...le({inputs:{condition:{value:!0}},...e}),type:"not"}},data:{},inputs:{condition:{type:w.BOOLEAN,default:!0}},outputs:{value:w.BOOLEAN},computation(e){return{value:!e.condition}},width:130,color:"#b0c4de",textColor:"#000",label:"Not"},Ak=Object.freeze(Object.defineProperty({__proto__:null,struct:Tk},Symbol.toStringTag,{value:"Module"})),$k={create(e={}){return{...le({inputs:{a:{value:!1},b:{value:!1}},...e}),type:"and"}},data:{},inputs:{a:{type:w.BOOLEAN,default:!0},b:{type:w.BOOLEAN,default:!0}},outputs:{value:w.BOOLEAN},computation(e){return{value:e.a&&e.b}},width:100,color:"#b0c4de",textColor:"#000",label:"And"},xk=Object.freeze(Object.defineProperty({__proto__:null,struct:$k},Symbol.toStringTag,{value:"Module"})),Ik={create(e={}){return{...le({inputs:{a:{value:!1},b:{value:!1}},...e}),type:"or"}},data:{},inputs:{a:{type:w.BOOLEAN,default:!0},b:{type:w.BOOLEAN,default:!0}},outputs:{value:w.BOOLEAN},computation(e){return{value:e.a||e.b}},width:100,color:"#b0c4de",textColor:"#000",label:"Or"},Lk=Object.freeze(Object.defineProperty({__proto__:null,struct:Ik},Symbol.toStringTag,{value:"Module"})),Pk={create(e={}){return{...le({inputs:{a:{value:void 0},b:{value:void 0},threshold:{value:0}},...e}),type:"equal_generics"}},data:{},inputs:{a:{type:w.GENERICS,default:void 0},b:{type:w.GENERICS,default:void 0},threshold:{type:{type:W.SCALER,struct:Xe.UNIT,scale:.1},default:0}},outputs:{value:w.BOOLEAN},computation(e,t){const n=ln([t.inputs.a.genericsType,t.inputs.b.genericsType])??w.GENERICS;return{value:Bk(n)(e.a,e.b,e.threshold)}},width:120,color:"#b0c4de",textColor:"#000",label:"a = b",genericsChains:[[{key:"a"},{key:"b"},{key:"value",output:!0}]],getErrors(e){const t=ln([e.inputs.a.genericsType,e.inputs.b.genericsType]);if(t)switch(t.type){case W.SCALER:case W.VECTOR2:case W.TEXT:case W.OBJECT:case W.BOOLEAN:return;default:return["invalid type to operate"]}}};function Bk(e){if(!e||e.struct===Xe.ARRAY)return Js;switch(e.type){case W.SCALER:return Rk;case W.VECTOR2:return jk;case W.TEXT:case W.OBJECT:return Nk;case W.BOOLEAN:return Vk;default:return Js}}function Js(){return!1}function Rk(e=0,t=0,n){return Math.abs(e-t)<=n}const Cc={x:0,y:0};function jk(e=Cc,t=Cc,n){return It(e,t)<=n}function Nk(e="",t=""){return e===t}function Vk(e=!1,t=!1){return e===t}const Dk=Object.freeze(Object.defineProperty({__proto__:null,struct:Pk},Symbol.toStringTag,{value:"Module"})),Fk={create(e={}){return{...le({inputs:{condition:{value:!0},if_true:{value:void 0},if_false:{value:void 0}},...e}),type:"switch_generics"}},data:{},inputs:{condition:{type:w.BOOLEAN,default:!0},if_true:{type:w.GENERICS,default:void 0},if_false:{type:w.GENERICS,default:void 0}},outputs:{value:w.GENERICS},computation(e){return{value:e.condition?e.if_true:e.if_false}},width:130,color:"#afeeee",textColor:"#000",label:"Switch",getOutputType(e,t){switch(t){case"value":return ln([e.inputs.if_true.genericsType,e.inputs.if_false.genericsType])??w.GENERICS;default:return w.GENERICS}},genericsChains:[[{key:"if_true"},{key:"if_false"},{key:"value",output:!0}]]},Gk=Object.freeze(Object.defineProperty({__proto__:null,struct:Fk},Symbol.toStringTag,{value:"Module"})),Uk={create(e={}){return{...le({inputs:{value:{value:void 0}},...e}),type:"reroute"}},data:{},inputs:{value:{type:w.GENERICS,default:void 0}},outputs:{value:w.GENERICS},computation(e){return{value:e.value}},width:18,label:"",getOutputType(e){return ln([e.inputs.value.genericsType])??w.GENERICS},genericsChains:[[{key:"value"},{key:"value",output:!0}]]},Kk=Object.freeze(Object.defineProperty({__proto__:null,struct:Uk},Symbol.toStringTag,{value:"Module"})),zk={create(e={}){return le({...e,type:"custom_begin_input"})},data:{},inputs:{},outputs:{input:w.INPUT},computation(e,t){return{input:t.id}},width:130,color:"#ff7f50",textColor:"#fff",label:"Begin Input"},Yk=Object.freeze(Object.defineProperty({__proto__:null,struct:zk},Symbol.toStringTag,{value:"Module"})),Hk={create(e={}){return{...le({data:{name:"input",default:{value:void 0}},inputs:{input:{value:void 0},output:{value:void 0}},...e}),type:"custom_input"}},data:{name:{type:w.TEXT,default:"input"},default:{type:w.GENERICS,default:void 0}},inputs:{input:{type:w.INPUT,default:""},output:{type:w.OUTPUT,default:""}},outputs:{value:w.GENERICS,input:w.INPUT},computation(e,t){return{value:t.data.default.value,input:e.input}},width:110,color:"#ff7f50",textColor:"#fff",label:"Input",getOutputType(e,t){switch(t){case"value":return ln([e.data.default.genericsType])??w.GENERICS;case"input":return w.INPUT;default:return w.GENERICS}},genericsChains:[[{key:"default",data:!0},{key:"value",output:!0}]],getErrors(e){const t=e.data.default.genericsType;if(t)switch(t.type){case W.INPUT:case W.OUTPUT:return["invalid type to operate"];default:return}}},Xk=Object.freeze(Object.defineProperty({__proto__:null,struct:Hk},Symbol.toStringTag,{value:"Module"})),Wk={create(e={}){return le({data:{max_loop:10},inputs:{loop:{value:!1}},...e,type:"custom_begin_output"})},data:{max_loop:{type:w.SCALER,default:10}},inputs:{loop:{type:w.BOOLEAN,default:!1}},outputs:{output:w.OUTPUT},computation(e,t){return{output:t.id}},width:130,color:"#df7698",textColor:"#fff",label:"Begin Output"},Jk=Object.freeze(Object.defineProperty({__proto__:null,struct:Wk},Symbol.toStringTag,{value:"Module"})),qk={create(e={}){return{...le({data:{name:"output"},inputs:{output:{value:""},value:{value:void 0}},...e}),type:"custom_output"}},data:{name:{type:w.TEXT,default:"output"}},inputs:{output:{type:w.OUTPUT,default:""},value:{type:w.GENERICS,default:void 0}},outputs:{output:w.OUTPUT},computation(e){return{output:e.output}},width:110,color:"#df7698",textColor:"#fff",label:"Output",genericsChains:[[{key:"value"}]],getErrors(e){const t=e.inputs.value.genericsType;if(t)switch(t.type){case W.INPUT:case W.OUTPUT:return["invalid type to operate"];default:return}}},Zk=Object.freeze(Object.defineProperty({__proto__:null,struct:qk},Symbol.toStringTag,{value:"Module"})),ku={get_frame:A1,scaler:x1,make_vector2:L1,break_vector2:B1,make_transform:j1,break_transform:V1,apply_transform:F1,color:U1,make_color:z1,break_color:H1,add_generics:aS,sub_generics:iS,multi_scaler:dS,divide_scaler:fS,remainder:vS,sin:yS,cos:_S,polar_coord:SS,invert_polar_coord:kS,pow:CS,scale_vector2:OS,distance:AS,rotate_vector2:xS,lerp_generics:jS,clamp:VS,round_trip:FS,get_bone:US,get_object:zS,get_child:HS,get_transform:WS,set_transform:qS,add_transform:QS,set_fill:tw,set_stroke:aw,set_stroke_length:rw,set_gradient:lw,set_clip_path:yk,set_viewbox:iw,hide_object:dw,clone_object:fw,group_clone_object:vw,circle_clone_object:yw,grid_clone_object:_w,tornado_clone_object:Sw,create_object_group:kw,create_object_rect:Cw,create_object_ellipse:Ow,create_object_text:Aw,create_object_path:xw,create_linear_gradient:Lw,create_radial_gradient:Bw,make_stop:jw,create_object_clip_path:vk,make_path_m:Vw,make_path_l:Fw,make_path_h:Uw,make_path_v:zw,make_path_q:Hw,make_path_t:Ww,make_path_c:qw,make_path_s:Qw,make_path_a:tk,make_path_z:ak,get_path_length:rk,get_path_point_at:lk,transform_path:ik,reverse_path:dk,join_path:fk,not:Ak,and:xk,or:Lk,equal_generics:Dk,greater_than:_k,greater_than_or_equal:Sk,less_than:kk,less_than_or_equal:Ck,between:Ok,switch_generics:Gk,reroute:Kk,custom_begin_input:Yk,custom_input:Xk,custom_begin_output:Jk,custom_output:Zk},Mc=[{label:"Primitive",children:[{label:"Get Frame",type:"get_frame"},{label:"Number",type:"scaler"},{label:"Make Vector2",type:"make_vector2"},{label:"Break Vector2",type:"break_vector2"},{label:"Make Transform",type:"make_transform"},{label:"Break Transform",type:"break_transform"},{label:"Apply Transform",type:"apply_transform"},{label:"Color",type:"color"},{label:"Make Color",type:"make_color"},{label:"Break Color",type:"break_color"}]},{label:"Math",children:[{label:"(+)",type:"add_generics"},{label:"(-)",type:"sub_generics"},{label:"(x) Number",type:"multi_scaler"},{label:"(/) Number",type:"divide_scaler"},{label:"(%) Number",type:"remainder"},{label:"Sin",type:"sin"},{label:"Cos",type:"cos"},{label:"Polar Coord",type:"polar_coord"},{label:"Invert Polar Coord",type:"invert_polar_coord"},{label:"Pow",type:"pow"},{label:"Scale Vector2",type:"scale_vector2"},{label:"Distance",type:"distance"},{label:"Rotate Vector2",type:"rotate_vector2"},{label:"Lerp",type:"lerp_generics"},{label:"Clamp",type:"clamp"},{label:"Round Trip",type:"round_trip"}]},{label:"Boolean",children:[{label:"Not",type:"not"},{label:"And",type:"and"},{label:"Or",type:"or"},{label:"(=)",type:"equal_generics"},{label:"(>) Number",type:"greater_than"},{label:"(>=) Number",type:"greater_than_or_equal"},{label:"(<) Number",type:"less_than"},{label:"(<=) Number",type:"less_than_or_equal"},{label:"Between",type:"between"},{label:"Switch",type:"switch_generics"}]},{label:"Object",children:[{label:"Get Bone",type:"get_bone"},{label:"Get Object",type:"get_object"},{label:"Get Child",type:"get_child"},{label:"Clone Object",type:"clone_object"},{label:"Group Clone Object",type:"group_clone_object"},{label:"Circle Clone Object",type:"circle_clone_object"},{label:"Grid Clone Object",type:"grid_clone_object"},{label:"Tornado Clone Object",type:"tornado_clone_object"}]},{label:"Attribute",children:[{label:"Hide Object",type:"hide_object"},{label:"Get Transform",type:"get_transform"},{label:"Set Transform",type:"set_transform"},{label:"Add Transform",type:"add_transform"},{label:"Set Fill",type:"set_fill"},{label:"Set Stroke",type:"set_stroke"},{label:"Set Stroke Length",type:"set_stroke_length"},{label:"Set Gradient",type:"set_gradient"},{label:"Set Clip Path",type:"set_clip_path"},{label:"Set Viewbox",type:"set_viewbox"}]},{label:"Create",children:[{label:"Group",type:"create_object_group"},{label:"Rect",type:"create_object_rect"},{label:"Ellipse",type:"create_object_ellipse"},{label:"Text",type:"create_object_text"},{label:"Path",type:"create_object_path"},{label:"Linear Gradient",type:"create_linear_gradient"},{label:"Radial Gradient",type:"create_radial_gradient"},{label:"Stop",type:"make_stop"},{label:"Clip Path",type:"create_object_clip_path"}]},{label:"Path",children:[{label:"M (Move)",type:"make_path_m"},{label:"L (Line)",type:"make_path_l"},{label:"H (Horizon)",type:"make_path_h"},{label:"V (Vertical)",type:"make_path_v"},{label:"Q (Bezier2)",type:"make_path_q"},{label:"T (Bezier2)",type:"make_path_t"},{label:"C (Bezier3)",type:"make_path_c"},{label:"S (Bezier3)",type:"make_path_s"},{label:"A (Arc)",type:"make_path_a"},{label:"Z (Close)",type:"make_path_z"},{label:"Transform Path",type:"transform_path"},{label:"Reverse Path",type:"reverse_path"},{label:"Join Path",type:"join_path"},{label:"Get Path Length",type:"get_path_length"},{label:"Get Path Point At",type:"get_path_point_at"}]},{label:"Etc",children:[{label:"Reroute",type:"reroute"}]}];function Qk(e,t,n,a){const o=Ml(e,t,n,!0);return Ml(e,o,a)}function Ml(e,t,n,a=!1){const o=Yt(n,w.GENERICS);return t.map(r=>{const s=r.children.map(l=>{var i;const u=(i=e(l.type))==null?void 0:i.struct;if(u)if(a){const c=Tc(u,n)??Tc(u,w.GENERICS)??(o?Object.keys(u.inputs)[0]:void 0);return c?{...l,inputKey:c}:void 0}else{const c=Oc(u,n)??Oc(u,w.GENERICS)??(o?Object.keys(u.outputs)[0]:void 0);return c?{...l,outputKey:c}:void 0}}).filter(bl);return s.length>0?{label:r.label,children:s}:void 0}).filter(bl)}function Oc(e,t){const n=Object.entries(e.outputs).find(([,a])=>Yt(a,t));return n?n[0]:void 0}function Tc(e,t){const n=Object.entries(e.inputs).find(([,a])=>Yt(a.type,t));return n?n[0]:void 0}function zr(e){return ku[e]}function Eu(e,t,n){return Object.keys(n).reduce((a,o)=>a[o]?a:{...a,...If(e,t,n,a,o,{})},{})}function If(e,t,n,a,o,r={}){if(a[o]||r[o])return a;const s=n[o];if(!s)return a;const l={...r,[o]:!0},u=Pf(s.inputs??{}).reduce((i,c)=>If(e,t,n,i,c,l),a);return{...u,[o]:tE(e,t,u,s)}}function eE(e){const t={},n=a=>{a.forEach(o=>{t[o]=!0})};return Object.keys(e).reduce((a,o)=>a[o]?a:{...a,...Lf(e,a,o,{},n)},{}),t}function Lf(e,t,n,a={},o){if(t[n])return t;if(a[n])return o==null||o(Object.keys(a)),t;const r=e[n];if(!r)return t;const s={...a,[n]:!0};return{...Pf(rE(r)).reduce((u,i)=>Lf(e,u,i,s,o),t),[n]:!0}}function tE(e,t,n,a){var s;const o=(s=e(a.type))==null?void 0:s.struct;if(!o)return n;const r=nE(n,a.inputs);return o.computation(Z(r,(l,u)=>{var i;return l!==void 0?l:(i=o.inputs[u])==null?void 0:i.default}),a,t,e)}function nE(e,t){return Object.keys(t).reduce((n,a)=>(n[a]=aE(e,t,a),n),{})}function aE(e,t,n){const a=t[n].from;return a&&e[a.id]&&e[a.id][a.key]!==void 0?oE(e,a.id,a.key):t[n].value}function oE(e,t,n){return e[t][n]}function Pf(e){return Object.values(e).map(t=>{var n;return(n=t.from)==null?void 0:n.id}).filter(t=>!!t)}function rE(e){if(e.type!=="custom_input")return e.inputs;const t={...e.inputs};return delete t.output,t}function Bf(e,t,n){var r;const a=t[n];if(!a)return{};const o=(r=e(a.type))==null?void 0:r.struct;return Object.keys(a.inputs).reduce((s,l)=>{var i;const u=a.inputs[l];if(!u.from)s[l]=!0;else if(!t[u.from.id])s[l]=!1;else{const c=(i=e(t[u.from.id].type))==null?void 0:i.struct;o&&c?s[l]=Yt(un(o,a,l),uo(c,t[u.from.id],u.from.key)):s[l]=!1}return s},{})}function Rf(e,t,n={},a=!1){return jf(e[t]?e[t]:ku[t],n,a)}function At(e,t={},n=!1){return jf(ku[e],t,n)}function jf(e,t={},n=!1){const{inputs:a,data:o,...r}=t,s=e.struct.create(r);return a&&(s.inputs={...s.inputs,...t.inputs}),o&&(s.data={...s.data,...t.data}),n&&(s.id=We()),s}function sE(e,t,n){const a=e(n.node.type),o=e(t.node.type);return!o||!a?!1:lE(un(a.struct,n.node,n.key),uo(o.struct,t.node,t.key))}function lE(e,t){return e.type==="GENERICS"||t.type==="GENERICS"?!0:Yt(e,t)}function Or(e,t,n){const a=t.inputs[n],o=Nf(e==null?void 0:e.inputs[n],a);if(!o){const s={...t.inputs};return delete s[n],{...t,inputs:s}}return{...t,inputs:{...t.inputs,[n]:o}}}function Nf(e,t){return e?e.type.type===W.GENERICS&&(t!=null&&t.genericsType)?{genericsType:t.genericsType,value:To(t.genericsType)}:{value:e.default}:void 0}function Vf(e,t,n={},a=o=>o.id){const o=uE(Z(t,a),t),r=Jo(e,{...n,...o});return{...o,...r}}function uE(e,t){return Object.entries(t).reduce((n,[a,o])=>(n[e[a]]={...o,id:e[a],inputs:iE(e,o.inputs)},n),{})}function iE(e,t){return Z(t,n=>!n.from||!e[n.from.id]?n:{...n,from:{id:e[n.from.id],key:n.from.key}})}function Cu(e){return e==="custom_begin_input"||e==="custom_begin_output"}function cE(e){return Cu(e)||e==="custom_input"||e==="custom_output"}function dE(e,t,n){const a={};return{nodes:t.filter(r=>!n[r.id]||Cu(r.type)).map(r=>({...r,inputs:Z(r.inputs,(s,l)=>{var u;return!s.from||!n[s.from.id]?s:(a[r.id]=!0,{value:((u=e(r.type))==null?void 0:u.struct.inputs[l].default)??void 0})})})),updatedIds:a}}function pE(e,t){const n=new Set(t.map(s=>s.id)),a={},o=t.map(s=>{const l=Object.entries(s.inputs).reduce((u,[i,c])=>{var p;if(!c.from||n.has(c.from.id))return u[i]=c,u;a[s.id]=!0;const d=Nf((p=e(s.type))==null?void 0:p.struct.inputs[i],c);return d&&(u[i]=d),u},{});return{...s,inputs:l}}),r=Jo(e,ie(o));return{nodes:o.map(s=>r[s.id]??s),updatedIds:{...a,...Z(r,()=>!0)}}}function Df(e,t){const n=e(t.type);return{inputs:Ou(n==null?void 0:n.struct,t),outputs:hE(n==null?void 0:n.struct,t)}}function fE(e,t){var r,s;if(e.node.id===t.node.id)return;const n=t.node.inputs[t.key];if(((r=n.from)==null?void 0:r.id)===e.node.id&&((s=n.from)==null?void 0:s.key)===e.key)return;const a={from:{id:e.node.id,key:e.key}};return{...t.node,inputs:{...t.node.inputs,[t.key]:a}}}function Mu(e){const t={};return Object.entries(e).forEach(([n,a])=>{t[n]??(t[n]={inputs:{},outputs:{}}),Object.entries(a.inputs).forEach(([o,r])=>{var s,l,u;r.from&&(t[n].inputs[o]=r.from,t[s=r.from.id]??(t[s]={inputs:{},outputs:{}}),(l=t[r.from.id].outputs)[u=r.from.key]??(l[u]=[]),t[r.from.id].outputs[r.from.key].push({id:n,key:o}))})}),t}function Ol(e){return!!e&&e.type!==W.GENERICS}function Ff(e,t){return!!e&&e.data[t].type.type===W.GENERICS}function mE(e,t,n,a,o){var r;return Ff((r=e(t))==null?void 0:r.struct,n)?{...a,value:o}:o}function Gf(e,t,n){var r,s,l;const a=t.data[n],o=(r=e(t.type))==null?void 0:r.struct;return Ff(o,n)?{type:a.genericsType??((s=o==null?void 0:o.data[n])==null?void 0:s.type)??w.UNKNOWN,value:a.value}:{type:((l=o==null?void 0:o.data[n])==null?void 0:l.type)??w.UNKNOWN,value:a}}function un(e,t,n){var a;return t.inputs[n].genericsType??((a=e==null?void 0:e.inputs[n])==null?void 0:a.type)??w.UNKNOWN}function Ou(e,t){return Z(t.inputs,(n,a)=>un(e,t,a))}function vE(e,t,n){var o;const a=e(t);return((o=a==null?void 0:a.struct.inputs[n])==null?void 0:o.type)??w.UNKNOWN}function uo(e,t,n){var a;return((a=e==null?void 0:e.getOutputType)==null?void 0:a.call(e,t,n))??(e==null?void 0:e.outputs[n])??w.UNKNOWN}function hE(e,t){return e?Z(e.outputs,(n,a)=>{var o;return((o=e.getOutputType)==null?void 0:o.call(e,t,a))??e.outputs[a]}):{}}function Tu(e,t,n,a){const o={};return Uf(e,t,n,a,{saveDoneItem:l=>{var u;o[u=l.id]??(o[u]={inputs:{},outputs:{}}),l.output?o[l.id].outputs[l.key]=!0:o[l.id].inputs[l.key]=!0},isDoneItem:l=>{var u,i;return l.output?!!((u=o[l.id])!=null&&u.outputs[l.key]):!!((i=o[l.id])!=null&&i.inputs[l.key])}})}function Uf(e,t,n,a,o){const r=t[a.id];if(!r)return[];if(o.isDoneItem(a))return[];const s=e(r.type);if(!s)return[];const l=O1(r.id,s.struct.genericsChains??[])(a.key,a.output)??[{...a,type:a.output?uo(s.struct,r,a.key):un(s.struct,r,a.key)}];l.forEach(o.saveDoneItem);const u=n[r.id].inputs,i=n[r.id].outputs;return[...l,...l.flatMap(c=>{const d=[];if(c.output){const p=i[c.key];p&&p.forEach(f=>{d.push({id:f.id,key:f.key})})}else{const p=u[c.key];p&&d.push({id:p.id,key:p.key,output:!0})}return d.filter(p=>!o.isDoneItem(p)).flatMap(p=>Uf(e,t,n,p,o))})]}function Kf(e){var t;return(t=e.find(n=>Ol(n.type)))==null?void 0:t.type}function Tl(e,t,n){const a=Mu(t),o=Tu(e,t,a,n),r=Kf(o);return zf(e,t,o,r)}function zf(e,t,n,a){const o={};return n.forEach(r=>{var l,u,i;if(r.output)return;const s=o[r.id]??t[r.id];if(s)if(r.data){if(((u=(l=e(s.type))==null?void 0:l.struct.data[r.key])==null?void 0:u.type.type)!==W.GENERICS)return;const c=s.data[r.key];if(Yt(c==null?void 0:c.genericsType,a))return;o[r.id]={...s,data:{...s.data,[r.key]:{genericsType:a,value:To(a)}}}}else{const c=s.inputs[r.key];if(!c)return;if(vE(e,s.type,r.key).type===W.GENERICS){if(Yt(c.genericsType,a))return;o[r.id]={...s,inputs:{...s.inputs,[r.key]:{...c,genericsType:a,value:To(a)}}}}else{const p=un((i=e(s.type))==null?void 0:i.struct,s,r.key);if(Yt(p,a))return;o[r.id]={...s,inputs:{...s.inputs,[r.key]:{value:To(a)}}}}}}),o}function To(e){if(e)switch(e.struct){case Xe.UNIT:case Xe.UNIT_OR_ARRAY:return Ac(e.type);case Xe.ARRAY:return[Ac(e.type)]}}function Ac(e){switch(e){case W.SCALER:return 0;case W.VECTOR2:return{x:0,y:0};case W.BOOLEAN:return!1;case W.TRANSFORM:case W.COLOR:return he();case W.STOP:return yE();case W.TEXT:case W.BONE:case W.OBJECT:case W.INPUT:case W.OUTPUT:return"";case W.D:return[];case W.GENERICS:case W.UNKNOWN:return;default:{const t=e;throw new Error(`Unexpected value type: ${t}`)}}}function yE(){return{offset:0,color:he(),relative:!1}}function Jo(e,t){const n=Mu(t),a={},o={},r=Ee(t).reduce((s,l)=>{var c;const u=(c=e(l.type))==null?void 0:c.struct;return u!=null&&u.genericsChains?u.genericsChains.filter(d=>d.length>0).reduce((d,p)=>{var E,h;const f={...p[0],id:l.id};if(f.output&&((E=a[l.id])!=null&&E.outputs[f.key])||(h=a[l.id])!=null&&h.inputs[f.key])return d;const m=Tu(e,d,n,f);m.forEach(S=>{var $;a[$=S.id]??(a[$]={inputs:{},outputs:{}}),S.output?a[S.id].outputs[S.key]=!0:a[S.id].inputs[S.key]=!0});const v=Kf(m),y=zf(e,d,m,v);return Ee(y).forEach(S=>o[S.id]=!0),{...d,...y}},s):s},t);return nt(r,o)}function gE(e,t){const n=eE(t);return Ee(t).reduce((a,o)=>{var l,u;const r=(l=e(o.type))==null?void 0:l.struct,s=r?[...((u=r.getErrors)==null?void 0:u.call(r,o))??[],...Object.entries(Bf(e,t,o.id)).filter(([i,c])=>!c).map(([i])=>{var c;return`Invalid input: ${((c=r.inputs[i])==null?void 0:c.label)??i}`}),...n[o.id]?["Circular connection is found"]:[]]:["Unknown node"];return s.length>0&&(a[o.id]=s),a},{})}function Yf(e,t,n){const a=t,o=new Set;return Object.entries(n).forEach(([r,s])=>{Object.keys(s).forEach(l=>{const u=Au(e,a,r,l);Object.entries(u).forEach(([i,c])=>{a[i]=c,o.add(i)})})}),Array.from(o).reduce((r,s)=>(r[s]=a[s],r),{})}function Au(e,t,n,a){var i;const o=t[n],r=Or((i=e(o.type))==null?void 0:i.struct,o,a),s=o.inputs[a],l=Tl(e,{...t,[r.id]:r},{id:r.id,key:a}),u=s!=null&&s.from?Tl(e,{...t,[r.id]:r,...l},{id:s.from.id,key:s.from.key,output:!0}):{};return{[o.id]:r,...l,...u}}function $c(e,t,n,a){var c;const o=(c=e(n))==null?void 0:c.struct;if(!o)return{};const r=Ze(t,d=>d.type===n),s=new Set,l=Z(r,d=>{const p=Object.keys(d.inputs).reduce((f,m)=>{var E;const v=f.inputs[m],y=(E=a.inputs[m])==null?void 0:E.type;return a.inputs[m]&&Yt(y,un(o,f,m))?y.type!==W.GENERICS&&v.genericsType?(s.add(d.id),{...f,inputs:{...f.inputs,[m]:v.from?{from:v.from}:{value:To(y)}}}):f:(s.add(d.id),Or(a,f,m))},d);return Object.keys(a.inputs).reduce((f,m)=>f.inputs[m]?f:(s.add(d.id),Or(a,f,m)),p)}),u=Z({...t,...l},d=>{var f;const p=(f=e(d.type))==null?void 0:f.struct;return p?Object.entries(d.inputs).reduce((m,[v,y])=>!y.from||!r[y.from.id]||Yt(a.outputs[y.from.key],un(p,m,v))?m:(s.add(m.id),Or(p,m,v)),d):d}),i=d=>{const p=e(d);return d!==n?p:{...p,struct:{...p==null?void 0:p.struct,...a}}};return{...Ze(u,(d,p)=>s.has(p)),...Jo(i,u)}}function xc(e,t){const n=Object.keys(e.inputs),a=Object.keys(t.inputs);if(n.length!==a.length||n.some((s,l)=>s!==a[l]))return!0;const o=Object.keys(e.outputs),r=Object.keys(t.outputs);return o.length!==r.length||o.some((s,l)=>s!==r[l])?!0:Object.entries(e.inputs).some(([s,l])=>{const u=t.inputs[s];return!u||!Yt(l.type,u.type)})||Object.entries(e.outputs).some(([s,l])=>{const u=t.outputs[s];return!u||!Yt(l,u)})}function _E(e,t,n){return Z(t,a=>{var s;if(!n[a.id])return a;const o=(s=e(a.type))==null?void 0:s.struct;if(!o)return a;const r=Bf(e,t,a.id);return{...a,inputs:Z(a.inputs,(l,u)=>{var i;return r[u]?l:{value:(i=o.inputs[u])==null?void 0:i.default}})}})}function bE(e,t){switch(e){case"scaler":return{data:{value:t}};case"make_vector2":{const n=t;return{inputs:{x:{value:n.x},y:{value:n.y}}}}case"make_transform":{const n=t;return{inputs:{translate:{value:n.translate},rotate:{value:n.rotate},scale:{value:n.scale},origin:{value:n.origin}}}}case"color":return{data:{color:t}};case"make_color":{const n=t;return{inputs:{h:{value:n.rotate},s:{value:n.translate.x},v:{value:n.translate.y},a:{value:n.scale.x}}}}case"get_object":return{data:{object:t}};default:return{}}}function Hf(e,t,n){const a={};return Object.values(e).forEach(o=>{var r;for(const s in o.inputs){const l=o.inputs[s];l.from&&l.from.id===t&&l.from.key===n&&(a[r=o.id]??(a[r]={}),a[o.id][s]=!0)}}),a}function ta(e,t,n,a,o,r){if(!t[o]||!t[n])return{};const s=fE({node:t[o],key:r},{node:t[n],key:a});return s?{[s.id]:s,...Tl(e,{...t,[s.id]:s},{id:s.id,key:a})}:{}}function Xf(e,t,n,a,o){if(o.length===0)return{};const r=new Set,s={...t};return o.forEach(l=>{const u=ta(e,s,l.nodeId,l.key,n,a);for(const i in u)s[i]=u[i],r.add(i)}),Ze(s,(l,u)=>r.has(u))}function SE(){return gs({id:"svg",tag:"svg",attributes:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 400 400","font-family":"sans-serif"}})}function wE(e){const a=new DOMParser().parseFromString(e,"image/svg+xml").getElementsByTagName("svg");if(!a||a.length===0)throw new Error("Not found SVG tag.");const o=a[0],r=CE(o),s=Jf(o),l=ws(s);return{actor:mu({svgTree:s,viewBox:r,elements:l.map(u=>u.id)},!0),elements:l}}function kE(e,t){const n=ie(t);return ws(e).map(o=>({...n[o.id]??{},...o}))}function ws(e,t,n=0){return ht(e)?[]:[Wf(e,t,n),...e.children.flatMap((a,o)=>ws(a,e.id,o))]}function Wf(e,t,n=0){return Xb({id:e.id,tag:e.tag,parentId:t,index:n})}function Jf(e){const t=e.id;return gs({id:t,tag:e.tagName,attributes:Array.from(e.attributes).reduce((n,a)=>({...n,[a.name]:a.value}),{}),children:EE(e.childNodes)},!t)}function EE(e){return Array.from(e).map(t=>{var n;return t.nodeName==="#text"?((n=t.nodeValue)==null?void 0:n.trim())||"":Jf(t)}).filter(t=>!!t)}function CE(e){const t=e.getAttribute("viewBox");return ks(t||void 0)}function ks(e){if(!e)return;const t=e.split(/ +/).map(n=>parseFloat(n));if(!(t.length<4))return{x:t[0],y:t[1],width:t[2],height:t[3]}}function ME(e,t,n,a){const o=ie(t),r=ie(n),s=ie(a),l=Z(r,c=>ie(c.bones.map(d=>s[d]))),u=e.map(c=>r[c.armatureId]?c:{...c,armatureId:""}),i=u.flatMap(c=>{const d=c.armatureId?l[c.armatureId]:{};return c.elements.map(p=>{const f=o[p];return f.boneId?d[f.boneId]?f:{...f,boneId:""}:f})});return{actors:u,elements:i}}function OE(e,t){const n=ie(e.elements),a=ie(t.elements),o=Ee({...ie(t.elements),...nt(n,a)});return{actor:{...t.actor,armatureId:e.actor.armatureId},elements:o}}function qo(e){const t=e.filter(n=>!ht(n));return t.concat(t.flatMap(n=>qo(n.children)))}function qf(e){return!/defs|metadata|namedview|script|style|tspan/.test(e.toLowerCase())}function Zf(e){return`${e.tag} #${e.id}`}function Qf(e){return{id:e.id,name:Zf(e),children:e.children.filter(t=>!ht(t)).filter(t=>qf(t.tag)).map(Qf)}}function TE(e){return Cr({id:e.id,elementId:e.id,tag:e.tag,parent:e.parentId,index:e.index})}function AE(e){if(!e)return;const t=Aa(e,[e.transform]);return{id:t.id,transform:he({translate:t.head,rotate:so(t)*180/Math.PI,scale:e.transform.scale}),height:It(e.head,e.tail)}}function em(e,t,n){const a=Z(e,TE),o=kb(t,AE),r=wb(()=>Oa(Ee(a),"parent"));function s(h){const S=r.getValue()[h];return S?S.length:0}function l(h,S){var _;if(S<0)return;const $=r.getValue()[h];if($)return(_=$[S])==null?void 0:_.id}function u(h){a[h.id]=h,r.update()}function i(h,S){const $=r.getValue()[h];$&&$.forEach(_=>{S(_),i(_.id,S)})}function c(h){const S=r.getValue()[h];return S?[...S,...S.flatMap($=>c($.id))]:[]}function d(h,S={}){const $=a[h];if(!$)return;const _=S.id?m(S.id):void 0;return Cr($.create?{...$,...S,id:_}:{...$,...S,id:_,clone:!0},!_)}function p(h,S){const $=h.reduce((_,A,O)=>{const T=d(A.id,S?{id:`${S}_clone_${O}`}:void 0);return T&&(_[A.id]=T),_},{});return Ee($).map(_=>!_.parent||!$[_.parent]?_:{..._,parent:$[_.parent].id})}const f=[];function m(h=""){return f.length>0?`${f.join("-")}-${h}`:h}const v=Wp(h=>h,h=>L_(h,100));function y(h){return h?P_(v.getValue(h)):0}function E(h,S){return h?B_(v.getValue(h),S):{x:0,y:0}}return{beginNamespace(h,S){f.push(h);const $=S();return f.pop(),$},setTransform(h,S,$=!1){const _=a[h];_&&($&&_.transform&&S?_.transform=gu(_.transform,S):_.transform=S)},getTransform(h){if(a[h])return a[h].transform},setFill(h,S){a[h]&&(a[h].fill=S,i(h,$=>{$.fill=S}))},setStroke(h,S){a[h]&&(a[h].stroke=S,i(h,$=>{$.stroke=S}))},setAttributes(h,S,$=!1){a[h]&&(a[h].attributes=$?S:{...a[h].attributes,...S})},getFrameInfo(){return n},getBoneSummary(h){return o.getValue(h)},getObjectMap(){return a},getChildId:l,getChildrenSize:s,cloneObject(h,S={},$){const _=a[h];if(!_)return"";const A=p([_,...c(h)],$),O=A[0];return Object.entries(S).forEach(([T,L])=>{O[T]=L}),O.index=_.parent?s(_.parent):0,A.forEach(u),O.id},createCloneGroupObject(h,S={}){const $=a[h];if(!$)return"";const _=S.id?m(S.id):void 0,A=$.parent,O=A?s(A):0,T=Cr({...S,id:_,tag:"g",elementId:$.elementId,clone:!1,create:!0,index:O,parent:A},!_);return u(T),T.id},createObject(h,S={}){const $=S.id?m(S.id):void 0,_=S.parent,A=_?s(_):0,O=Cr({...S,id:$,tag:h,create:!0,index:A},!$);return u(O),O.id},getPathLength:y,getPathPointAt:E}}function Ic(e,t,n,a,o){const r=em(t,n,a);return Eu(e,r,o),r.getObjectMap()}function ht(e){return typeof e=="string"}function $E(e,t,n){const a={};if(t.viewBoxBoneId){const o=e[t.viewBoxBoneId];if(o){const r=IE(n,o);r&&(a.viewBox=r)}}if(t.fillBoneId){const o=e[t.fillBoneId];if(o){const r=Ao(o.transform);r&&(a.fill=r.color,a["fill-opacity"]=r.opacity)}}if(t.strokeBoneId){const o=e[t.strokeBoneId];if(o){const r=Ao(o.transform);r&&(a.stroke=r.color,a["stroke-opacity"]=r.opacity)}}return tm(a)}const xE=["fill","stroke","fill-opacity","stroke-opacity"];function tm(e){if(!e.style)return e;const t=nm(e.style);xE.filter(o=>t[o]&&e[o]).forEach(o=>delete t[o]);const n=am(t),a={...e};return n?a.style=n:delete a.style,a}function IE(e,t){const n=ks(e.attributes.viewBox);if(n)return $u(n0(n,{...t.transform,origin:t.head}))}function Ao(e){const t=io(e);return{color:f0(t),opacity:t.a.toString()}}function LE(e){const t=io(e);return Wo(lo({...t,h:Sa(0,360,t.h)}))}function io(e){return{h:e.rotate,s:ut(0,1,e.translate.x/100),v:ut(0,1,e.translate.y/100),a:ut(0,1,e.scale.x)}}function PE(e,t){return e.x===1&&e.y===1?"":[Xa(t)?"":`translate(${t.x},${t.y})`,`scale(${e.x},${e.y})`,Xa(t)?"":`translate(${-t.x},${-t.y})`].filter(n=>!!n).join(" ")}function BE(e){return[Xa(e.translate)?"":`translate(${e.translate.x},${e.translate.y})`,PE(e.scale,e.origin),e.rotate===0?"":`rotate(${e.rotate} ${e.origin.x} ${e.origin.y})`].filter(t=>!!t).join(" ")}function Lc(e,t=!1){if(e.length===0)return"";const[n,...a]=e;return`M${n.x},${n.y}`+a.map(o=>`L${o.x},${o.y}`).join("")+(t?"z":"")}function RE(e,t,n){const a=Math.max(n.width,n.height)*2,o=je(t,a);return{from:Oe(e,o),to:te(e,o)}}function $u(e){return[Kt(-1,e.x),Kt(-1,e.y),Kt(-1,e.width),Kt(-1,e.height)].join(" ")}function nm(e=""){return e.split(";").map(t=>t.split(":")).reduce((t,n)=>(n.length===2&&(t[n[0].trim()]=n[1].trim()),t),{})}function am(e){return Object.entries(e).filter(t=>t[1]).map(t=>`${t[0]}:${t[1]};`).join("")}function om(e){return jE(tm(e))}function jE(e){if(e.transform!=="matrix(1,0,0,1,0,0)")return e;const t={...e};return delete t.transform,t}function rm(e,t,n){return Object.keys(n).reduce((a,o)=>(a[o]=t+e*(n[o]+1),a),{})}const NE=["translateX","translateY","rotate","scaleX","scaleY"];function sm(e,t){return t.filter(n=>e[n]).reduce((n,a,o)=>(n[a]=o,n),{})}function VE(e,t={}){return{id:e.id,name:e.name,children:sm(t,NE)}}const DE=["influence"];function FE(e,t,n={}){return{id:t.id,name:`${e.name}:${t.name}`,children:sm(n,DE)}}function GE(e,t,n,a=0){let o=a*n;return e.reduce((r,s)=>(r[s.id]=o,o=o+n*(t[s.id]?Object.keys(s.children).length+1:1),r),{})}const An=30,na=20;function xu(e,t){return{x:t.position.x,y:t.position.y,...Iu(e,t)}}function Iu(e,t){const n=UE(Object.keys(t.inputs).length),a=e(t.type);if(!a)return{width:100,height:An+n};const o=lm(a.struct),r=Lu(Object.keys(a.struct.outputs).length);return{width:a.struct.width,height:An+Math.max(r+o+n,20)}}function lm(e){const t=Object.values(e.data);return t.length===0?0:t.reduce((n,a)=>n+im(a.type),0)}function UE(e){return e===0?0:na*(.3+e)}function Lu(e){return e===0?0:na*(.5+e)}function KE(e,t){const n=e(t.type);if(!n)return{};const a=Lu(Object.keys(n.struct.outputs).length);let o=An+a;return Object.entries(n.struct.data).reduce((r,[s,l])=>(r[s]={x:8,y:o},o=o+im(l.type),r),{})}function zE(e,t){const n=e(t.type),a=n?lm(n.struct):0,o=n?Lu(Object.keys(n.struct.outputs).length):0,r={x:0,y:t.type==="reroute"?na/2:An+o+a+na/2};return um(n==null?void 0:n.struct,Object.entries(Df(e,t).inputs).map(([s,l])=>({key:s,type:l})),r)}function YE(e,t){const n=e(t.type);if(!n)return{};const a={x:Iu(e,t).width,y:t.type==="reroute"?na/2:An+na*2/3};return um(n.struct,Object.entries(Df(e,t).outputs).map(([o,r])=>({key:o,type:r})),a,!0)}function HE(e,t){const n=zE(e,t),a=YE(e,t);return{inputs:n,outputs:a}}function um(e,t,n={x:0,y:0},a=!1){return t.reduce((o,{key:r,type:s},l)=>(o[r]={p:te(n,{x:0,y:na*l}),type:s,label:XE(e,r,a)??r},o),{})}function XE(e,t,n=!1){return n?e!=null&&e.outputs[t]?e.outputs[t].label:"UNKNOWN":e!=null&&e.inputs[t]?e.inputs[t].label:"UNKNOWN"}function im(e){switch(e){case"SCALER":return 48;default:return 48}}const cm={BOOLEAN:"#b22222",SCALER:"#aaa",VECTOR2:"#daa520",TRANSFORM:"#a0522d",BONE:"#4b0082",OBJECT:"#ee82ee",COLOR:"#32cd32",TEXT:"#808000",D:"#00bfff",STOP:"#8b008b",GENERICS:"#b0c4de",INPUT:"#ff7f50",OUTPUT:"#df7698",UNKNOWN:"#fff"};function WE(e,t){switch(e.type){case W.OBJECT:return Tn(t,6);case W.SCALER:{const n=e.enumKey;return n?wa(n,t):Tn(t,6)}case W.VECTOR2:return`${Tn(t.x,4)}, ${Tn(t.y,4)}`;case W.BOOLEAN:return t?"true":"false";case W.COLOR:return Wo(lo(io(t)));case W.D:return Tn(t.join(" "),6);default:return""}}function Tn(e,t){const n=e.toString();return n.length<=t?n:n.slice(0,t)+".."}function dm(e,t){const n=Math.sqrt(Math.abs(e.x-t.x))*8;return`M${e.x+5},${e.y} C${e.x+n},${e.y} ${t.x-n},${t.y} ${t.x-5},${t.y}`}function Pc(e,t,n=a=>a){const a=t.width/e.width,o=t.height/e.height,r=a<o?n(1/a):n(1/o);return{viewOrigin:{x:e.x+(e.width/r-t.width)/2*r,y:e.y+(e.height/r-t.height)/2*r},scale:r}}function Pu(e){oo("getScale",e)}function kn(){return Ma("getScale",()=>1)}function JE(){const e=g(kn());return t=>{if(t.getBBox)return t.getBBox();const n=t.getBoundingClientRect();return{width:n.width*e.value,height:n.height*e.value}}}function $o(e={}){const t=e.scaleMin??.1,n=e.scaleMax??10,a=e.scale??H(1),o=e.viewOrigin??H({x:0,y:0}),r=e.viewSize??H({width:600,height:100});function s(I){r.value=I}const l=H(),u=g(()=>l.value==="drag"),i=g(()=>!!l.value),c=H(),d=H();function p(){l.value=void 0}function f(){l.value="move",c.value=v.value,d.value=o.value}function m(){l.value="drag",c.value=v.value,d.value=o.value}const v=H({x:0,y:0});function y(I){v.value=I}const E=g(()=>({x:o.value.x,y:o.value.y,width:r.value.width*a.value,height:r.value.height*a.value})),h=g(()=>f_({x:0,y:0,...r.value})),S=g(()=>$u(E.value)),$=H(!1);function _(I=!1){$.value=I}const A=g(()=>{if(!$.value||!v.value||!c.value)return;const I=Oe(v.value,c.value);return Qb({...c.value,width:I.x,height:I.y})}),O=g(()=>{if(A.value)return{...T(A.value),width:A.value.width*a.value,height:A.value.height*a.value}});function T(I){return te(o.value,je(I,a.value))}function L(I){return je(Oe(I,o.value),1/a.value)}function N(I){return e.ignoreNegativeY?{x:I.x,y:Math.max(I.y,0)}:I}function U(){const I=r.value,R=Pc({x:-I.width/2,y:-I.height/2,...I},I);o.value=N(R.viewOrigin),a.value=R.scale}return{viewSize:r,setViewSize:s,editStartPoint:c,mousePoint:v,setMousePoint:y,scale:a,viewOrigin:o,moving:i,dragged:u,endMoving:p,startMoving:f,startDragging:m,viewCenter:h,viewBox:S,viewCanvasRect:E,viewToCanvas:T,canvasToView:L,wheel(I,R=!1){const B=!R&&v.value?v.value:h.value,Y=T(B);a.value=Math.min(Math.max(a.value*Math.pow(vu,I.deltaY>0?1:-1),t),n),e.scaleAtFixY?o.value=N(te(o.value,Oe(Y,{...T(B),y:Y.y}))):o.value=N(te(o.value,Oe(Y,T(B))))},viewMove(I){d.value&&(o.value=N(te(d.value,Oe(I.start,I.current))))},adjustToCenter:U,setViewport(I){if(!I){U();return}const R=Pc(r0(I,10/a.value),r.value,B=>ut(1,n,B));a.value=R.scale,o.value=N(R.viewOrigin)},setRectangleDragging:_,draggedRectangle:O}}const qE={class:"fill-text stroke-text"},ZE=["transform"],QE=C("circle",{r:"2"},null,-1),eC=[QE],tC=["x1","y1","x2","y2","stroke-width","stroke-dasharray"],nC=q({__name:"CursorLine",props:{origin:{},current:{}},setup(e){const t=e,n=kn(),a=g(n),o=g(()=>yt(t.current,t.origin)/Math.PI*180);return(r,s)=>(b(),M("g",qE,[C("g",{transform:`translate(${r.origin.x}, ${r.origin.y}) rotate(${o.value}) scale(${a.value})`},eC,8,ZE),C("line",{x1:r.origin.x,y1:r.origin.y,x2:r.current.x,y2:r.current.y,"stroke-width":a.value,"stroke-dasharray":`${2*a.value} ${2*a.value}`},null,8,tC)]))}}),aC=["x","y","width","height"],Bu=q({__name:"SelectRectangle",props:{x:{default:0},y:{default:0},width:{default:100},height:{default:100}},setup(e){return(t,n)=>(b(),M("rect",{x:t.x,y:t.y,width:t.width,height:t.height,fill:"#1e90ff","fill-opacity":"0.2",stroke:"none"},null,8,aC))}}),oC=q({__name:"FocusableBlock",emits:["copy","paste","keydown","keyup"],setup(e,{emit:t}){const n=t,a=H();function o(){document.addEventListener("copy",s),document.addEventListener("paste",l)}function r(){document.removeEventListener("copy",s),document.removeEventListener("paste",l)}Ca(r);function s(m){n("copy",m)}function l(m){n("paste",m)}function u(){var m;(m=a.value)==null||m.focus()}function i(){var m,v;(m=document.activeElement)!=null&&m.getAttribute("data-keep-focus")||(v=a.value)==null||v.focus()}function c(m){sc(Vo(m))||m.preventDefault(),n("keydown",m)}function d(m){sc(Vo(m))||m.preventDefault(),n("keyup",m)}function p(){o()}function f(){r()}return(m,v)=>(b(),M("div",{ref_key:"root",ref:a,tabindex:"-1",onMousedown:u,onMouseenter:i,onKeydown:c,onKeyup:d,onFocus:p,onBlur:f},[ot(m.$slots,"default",{},void 0,!0)],544))}});const Ru=Te(oC,[["__scopeId","data-v-4134718f"]]);function rC(){return{selectedColor:"orange",historyMax:64,showBoneName:!1,boneOpacity:1,showViewbox:!0,showAxis:!0,graphValueWidth:5,animationExportingSettings:{fps:30,interpolation:"discrete",range:"auto",customRange:{from:0,to:60},size:"auto",customSize:{width:200,height:200},duration:"auto",customDuration:1e3},colorTheme:"auto"}}const pm="blendic-app-settings";function sC(){const e=rC();try{const t=localStorage.getItem(pm),n=t?JSON.parse(t):{};return{...e,...n,animationExportingSettings:{...e.animationExportingSettings,...n.animationExportingSettings??{}}}}catch{return e}}const ju=_a(sC());function Mt(){return{settings:ju}}rn(()=>{const e=ju.colorTheme;e==="light"?document.documentElement.classList.add("theme-light"):document.documentElement.classList.remove("theme-light"),e==="dark"?document.documentElement.classList.add("theme-dark"):document.documentElement.classList.remove("theme-dark")});rn(()=>{localStorage.setItem(pm,JSON.stringify(ju))});/*! okahistory v0.1.0, License MIT, undefined */var lC=Object.defineProperty,uC=Object.defineProperties,iC=Object.getOwnPropertyDescriptors,Bc=Object.getOwnPropertySymbols,cC=Object.prototype.hasOwnProperty,dC=Object.prototype.propertyIsEnumerable,Rc=(e,t,n)=>t in e?lC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,jc=(e,t)=>{for(var n in t||(t={}))cC.call(t,n)&&Rc(e,n,t[n]);if(Bc)for(var n of Bc(t))dC.call(t,n)&&Rc(e,n,t[n]);return e},Nc=(e,t)=>uC(e,iC(t));function pC(e={}){var t,n,a;const o=(t=e.max)!=null?t:64,r=(n=e==null?void 0:e.onUpdated)!=null?n:()=>{},s=(a=e==null?void 0:e.avoidOverriding)!=null?a:!1,l={};let u=[],i=-1;function c(L){u=L,r()}function d(L,N){if(s&&l[L])throw new Error(`The name of this reducer has been defined already. name: ${L}Rename it or see \`avoidOverriding\` option.`);l[L]=N}function p(L,N){d(L,N)}function f(L){for(const N in L)d(N,L[N]);return{dispatch:m,createAction:(N,U)=>({name:N,args:U})}}function m(L,N){var U;if(!L)return;const I=qs(l,L.name);if(I.ignoreDuplication&&i!==-1){const R=u[i];if(R.name===L.name&&((U=I.checkDuplicationFn)!=null?U:vC)(L.args,R.redoArgs))return}v({name:L.name,redoArgs:L.args,undoArgs:I.redo(L.args),seriesKey:L.seriesKey,children:N==null?void 0:N.filter(R=>!!R).map(R=>{const B=qs(l,R.name);return{name:R.name,redoArgs:R.args,undoArgs:B.redo(R.args)}})})}function v(L){var N;if(i<u.length-1&&u.splice(i+1,u.length-i),L.seriesKey){const U=mC(u,I=>fC(I,L));if(U.isTrue.length>0){const I=U.isTrue[0];if(hC(I,L)){const R=Nc(jc({},L),{undoArgs:I.undoArgs,children:(N=L.children)==null?void 0:N.map((B,Y)=>Nc(jc({},B),{undoArgs:I.children[Y].undoArgs}))});c(U.isFalse.concat(R))}else u.push(L)}else u.push(L)}else u.push(L);u.length>o&&u.shift(),i=u.length-1,r()}function y(){i<u.length-1&&(E(),r())}function E(){var L;const N=u[i+1];l[N.name].redo(N.redoArgs),(L=N.children)==null||L.forEach(U=>l[U.name].redo(U.redoArgs)),i=i+1}function h(){-1<i&&(S(),r())}function S(){var L;const N=u[i];(L=N.children)==null||L.concat().reverse().forEach(U=>l[U.name].undo(U.undoArgs)),l[N.name].undo(N.undoArgs),i=i-1}function $(L){const N=Math.min(u.length-1,Math.max(-1,L));N<i?([...Array(i-N)].forEach(()=>S()),r()):N>i&&([...Array(N-i)].forEach(()=>E()),r())}function _(){return u.map((L,N)=>{var U,I;const R=qs(l,L.name);return{name:L.name,label:(I=(U=R.getLabel)==null?void 0:U.call(R,{name:L.name,args:L.redoArgs}))!=null?I:L.name,done:N<=i}})}function A(){return{version:"0",stack:u,currentStackIndex:i}}function O(L){c(L.stack.concat()),i=L.currentStackIndex}function T(){c([]),i=-1}return{defineReducer:p,defineReducers:f,dispatch:m,redo:y,undo:h,jump:$,getCurrentIndex:()=>i,getActionSummaries:_,serialize:A,deserialize:O,clear:T}}function qs(e,t){const n=e[t];if(!n)throw new Error(`not found a reducer for the action: ${t}`);return n}function fC(e,t){return!!e.seriesKey&&!!t.seriesKey&&e.seriesKey===t.seriesKey}function mC(e,t){const n={isTrue:[],isFalse:[]};return e.forEach(a=>t(a)?n.isTrue.push(a):n.isFalse.push(a)),n}function vC(e,t){return e===t}function hC(e,t){return e.name===t.name&&(e.children===t.children||!!e.children&&!!t.children&&e.children.length===t.children.length&&e.children.every((n,a)=>n.name===t.children[a].name))}function yC(e=()=>64){const t=pC({max:e(),onUpdated:o}),n=H(-1),a=H([]);function o(){n.value=t.getCurrentIndex(),a.value=t.getActionSummaries()}return{historySummaries:g(()=>a.value),currentItemIndex:g(()=>n.value),clear:t.clear,dispatch:t.dispatch,undo:t.undo,redo:t.redo,defineReducers:t.defineReducers}}const{settings:gC}=Mt(),_C=yC(()=>gC.historyMax);function ra(){return _C}function bC(e,t,n){const a=Array.isArray(n)?In(n,()=>!0):n,o=ie(t),r={created:[],updated:[],deleted:[]};e.allIds.forEach((i,c)=>{a[i]&&(o[i]?(r.updated.push(e.byId[i]),e.byId[i]=o[i]):(r.deleted.push({entity:e.byId[i],index:c}),delete e.byId[i]))});const s=ie(r.deleted.map(i=>i.entity));e.allIds=e.allIds.filter(i=>!s[i]);const l=t.filter(i=>!e.byId[i.id]),u=l.map(i=>i.id);return Object.assign(e.byId,ie(l)),e.allIds.push(...u),r.created.push(...u),r}function SC(e,t){t.created.forEach(a=>{delete e.byId[a]});const n=In(t.created,()=>!0);e.allIds=e.allIds.filter(a=>!n[a]),t.deleted.concat().sort((a,o)=>a.index-o.index).forEach(a=>{e.byId[a.entity.id]=a.entity,e.allIds.splice(a.index,0,a.entity.id)}),t.updated.forEach(a=>{e.byId[a.id]=a})}function nn(e){return e.allIds.map(t=>e.byId[t])}function Dt(e){return{byId:ie(e),allIds:e.map(t=>t.id)}}/*! okaselect v0.1.0, License MIT, undefined */var wC=Object.defineProperty,Vc=Object.getOwnPropertySymbols,kC=Object.prototype.hasOwnProperty,EC=Object.prototype.propertyIsEnumerable,Dc=(e,t,n)=>t in e?wC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fc=(e,t)=>{for(var n in t||(t={}))kC.call(t,n)&&Dc(e,n,t[n]);if(Vc)for(var n of Vc(t))EC.call(t,n)&&Dc(e,n,t[n]);return e};function fm(e){return e instanceof Map?Array.from(e.entries()):Object.entries(e)}function mm(e){const t=Array.from(e.keys());return t.length===0?void 0:t[t.length-1]}function Al(e,t){return e.every(n=>t[n])}function CC(e,t){return e?Object.keys(e).reduce((n,a)=>(t[a]||(n[a]=!0),n),{}):{}}function MC(e,t){return e?Fc(Fc({},e),t):t}function OC(e){return e.reduce((t,n)=>(t[n]=!0,t),{})}function TC(e,t={}){var n;const a=(n=t.onUpdated)!=null?n:()=>{};let o=new Map;function r(){return Array.from(o.keys())}function s(){return r().reduce((S,$)=>(S[$]=!0,S),{})}function l(){const S=e();return r().map($=>S[$])}function u(){const S=e();return r().reduce(($,_)=>($[_]=S[_],$),{})}function i(){return mm(o)}function c(){const S=Object.keys(e());return S.length>0&&S.every($=>o.has($))}function d(){return!!i()}function p(S,$=!1){AC(o,S,$),a()}function f(S,$=!1){const _=S.filter(A=>o.has(A));$?(_.length===S.length?_.forEach(A=>o.delete(A)):S.forEach(A=>o.set(A,!0)),a()):(o=new Map(S.map(A=>[A,!0])),a())}function m(S=!1){S&&c()?o.clear():o=new Map(Object.keys(e()).map($=>[$,!0])),a()}function v(S){o.delete(S),a()}function y(){o.clear(),a()}function E(){return Array.from(o.entries())}function h(S){o=new Map(S),a()}return{getSelected:s,getSelectedList:r,getSelectedItemList:l,getSelectedItems:u,getLastSelected:i,isAllSelected:c,isAnySelected:d,select:p,multiSelect:f,selectAll:m,clear:v,clearAll:y,createSnapshot:E,restore:h}}function AC(e,t,n=!1){n?e.has(t)?e.delete(t):e.set(t,!0):(e.clear(),e.set(t,!0))}var $C=Object.defineProperty,xC=Object.defineProperties,IC=Object.getOwnPropertyDescriptors,Gc=Object.getOwnPropertySymbols,LC=Object.prototype.hasOwnProperty,PC=Object.prototype.propertyIsEnumerable,Uc=(e,t,n)=>t in e?$C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Go=(e,t)=>{for(var n in t||(t={}))LC.call(t,n)&&Uc(e,n,t[n]);if(Gc)for(var n of Gc(t))PC.call(t,n)&&Uc(e,n,t[n]);return e},BC=(e,t)=>xC(e,IC(t));function RC(e,t,n={}){var a;const o=(a=n.onUpdated)!=null?a:()=>{};let r=new Map;function s(){return Array.from(r.entries()).reduce((h,[S,$])=>(h[S]=$,h),{})}function l(){return mm(r)}function u(){return Array.from(r.entries()).filter(([,h])=>Al(t,h)).map(([h])=>h)}function i(){const h=Object.keys(e());return h.length>0&&h.every(S=>{const $=r.get(S);return $&&Al(t,$)})}function c(){return!!l()}function d(h,S,$=!1){jC(r,h,S,$),o()}function p(h,S=!1){NC(r,h,S),o()}function f(h=!1){h&&i()?r.clear():r=new Map(Object.keys(e()).map(S=>[S,OC(t)])),o()}function m(h,S){VC(r,h,S),o()}function v(){r.clear(),o()}function y(){return Array.from(r.entries())}function E(h){r=new Map(h),o()}return{getSelected:s,getLastSelected:l,getAllAttrsSelected:u,isAllSelected:i,isAnySelected:c,isAttrsSelected:h=>hm(r,h),select:d,multiSelect:p,selectAll:f,clear:m,clearAll:v,createSnapshot:y,restore:E}}function jC(e,t,n,a=!1){if(!a)e.clear(),e.set(t,{[n]:!0});else{const o=e.get(t);if(o)if(o[n]){const r=Go({},o);delete r[n],vm(e,t,r)}else e.delete(t),e.set(t,BC(Go({},o),{[n]:!0}));else e.set(t,{[n]:!0})}}function NC(e,t,n=!1){const a=fm(t);n?hm(e,t)?a.forEach(([o,r])=>{vm(e,o,CC(e.get(o),r))}):a.forEach(([o,r])=>{e.set(o,MC(e.get(o),r))}):(e.clear(),a.forEach(([o,r])=>{var s;e.set(o,Go(Go({},(s=e.get(o))!=null?s:{}),r))}))}function vm(e,t,n){Object.keys(n).length>0?e.set(t,n):e.delete(t)}function hm(e,t){return fm(t).every(([n,a])=>{const o=e.get(n);return o&&Al(Object.keys(a),o)})}function VC(e,t,n){const a=e.get(t);if(a)if(Object.keys(a).length===1)e.delete(t);else{const o=Go({},a);delete o[n],e.set(t,o)}}function ga(e,t){const n=H({}),a=H(),o=TC(t,{onUpdated:r});function r(){n.value=o.getSelected(),a.value=o.getLastSelected()}const s={select:`${e}_SELECT`,multiSelect:`${e}_MULTI_SELECT`,selectAll:`${e}_SELECT_ALL`,clearAll:`${e}_CLEAR_ALL`},l={getLabel:()=>`Select ${e}`,redo(E){const h=o.createSnapshot();return E.id?o.select(E.id,E.shift):o.clearAll(),h.map(([S])=>S)},undo(E){o.restore(E.map(h=>[h,!0]))}};function u(E,h=!1){return{name:s.select,args:{id:E,shift:h}}}function i(E,h=!1){const S=Object.keys(n.value).length;return!E&&S===0?!1:h?!0:!(a.value===E&&S===1)}const c={getLabel:()=>`Select ${e}`,redo(E){const h=o.createSnapshot();return o.multiSelect(E.ids,E.shift),h.map(([S])=>S)},undo(E){o.restore(E.map(h=>[h,!0]))}};function d(E,h=!1){return{name:s.multiSelect,args:{ids:E,shift:h}}}function p(E,h=!1){const S=Object.keys(n.value).sort(),$=S.length;return!(E.length===0&&$===0||!h&&E.length===$&&E.concat().sort().join(",")===S.join(","))}const f={getLabel:()=>`Select ${e}`,redo(E){const h=o.createSnapshot();return o.selectAll(E),h.map(([S])=>S)},undo(E){o.restore(E.map(h=>[h,!0]))}};function m(E=!1){return{name:s.selectAll,args:E}}const v={getLabel:()=>`Select ${e}`,redo(){const E=o.createSnapshot();return o.clearAll(),E.map(([h])=>h)},undo(E){o.restore(E.map(h=>[h,!0]))}};function y(){return{name:s.clearAll,args:void 0}}return{selectedMap:g(()=>n.value),lastSelectedId:g(()=>a.value),restore:o.restore,createSnapshot:o.createSnapshot,getSelectHistoryDryRun:i,getMultiSelectHistoryDryRun:p,reducers:{[s.select]:l,[s.multiSelect]:c,[s.selectAll]:f,[s.clearAll]:v},createSelectAction:u,createMultiSelectAction:d,createSelectAllAction:m,createClearAllAction:y}}function DC(e,t,n){const a=H({}),o=H(),r=H([]),s=RC(t,n,{onUpdated:l});function l(){a.value=s.getSelected(),o.value=s.getLastSelected(),r.value=s.getAllAttrsSelected()}const u={select:`${e}_SELECT`,multiSelect:`${e}_MULTI_SELECT`,selectAll:`${e}_SELECT_ALL`,clearAll:`${e}_CLEAR_ALL`},i={getLabel:()=>`Select ${e}`,redo(h){const S=s.createSnapshot();return h.id?s.select(h.id,h.attrKey,h.shift):s.clearAll(),S},undo(h){s.restore(h)}};function c(h,S,$=!1){return{name:u.select,args:{id:h,attrKey:S,shift:$}}}function d(h,S,$=!1){const _=Object.keys(a.value).length;if(!h&&_===0)return!1;if($)return!0;if(o.value===h&&_===1){const A=a.value[h];if(Object.keys(A).length===1&&A[S])return!1}return!0}const p={getLabel:()=>`Select ${e}`,redo(h){const S=s.createSnapshot();return s.multiSelect(new Map(h.val),h.shift),S},undo(h){s.restore(h)}};function f(h,S=!1){return h=Array.isArray(h)?h:Object.entries(h),{name:u.multiSelect,args:{val:h,shift:S}}}const m={getLabel:()=>`Select ${e}`,redo(h){const S=s.createSnapshot();return s.selectAll(h),S},undo(h){s.restore(h)}};function v(h=!1){return{name:u.selectAll,args:h}}const y={getLabel:()=>`Select ${e}`,redo(){const h=s.createSnapshot();return s.clearAll(),h},undo(h){s.restore(h)}};function E(){return{name:u.clearAll,args:void 0}}return{selectedMap:g(()=>a.value),lastSelectedId:g(()=>o.value),allAttrsSelectedIds:g(()=>r.value),restore:s.restore,createSnapshot:s.createSnapshot,isAttrsSelected:s.isAttrsSelected,getSelectHistoryDryRun:d,reducers:{[u.select]:i,[u.multiSelect]:p,[u.selectAll]:m,[u.clearAll]:y},createSelectAction:c,createMultiSelectAction:f,createSelectAllAction:v,createClearAllAction:E}}function bn(e){const t=_a({byId:{},allIds:[]});function n(p){t.byId={...p.byId},t.allIds=p.allIds.concat()}const a={add:`${e}_ADD`,delete:`${e}_DELETE`,update:`${e}_UPDATE`,replace:`${e}_REPLACE`},o={getLabel:()=>`Add ${e}`,redo(p){return p.forEach(f=>{t.byId[f.id]=f,t.allIds.push(f.id)}),p.map(f=>f.id)},undo(p){p.forEach(m=>delete t.byId[m]);const f=In(p,()=>!0);t.allIds=t.allIds.filter(m=>!f[m])}};function r(p){return{name:a.add,args:p}}const s={getLabel:()=>`Delete ${e}`,redo(p){const f=p.map(v=>({entity:t.byId[v],index:t.allIds.indexOf(v)})).sort((v,y)=>v.index-y.index);p.forEach(v=>delete t.byId[v]);const m=In(p,()=>!0);return t.allIds=t.allIds.filter(v=>!m[v]),f},undo(p){p.forEach(f=>{t.byId[f.entity.id]=f.entity,t.allIds.splice(f.index,0,f.entity.id)})}};function l(p){return{name:a.delete,args:p}}const u={getLabel:()=>`Update ${e}`,redo:p=>{const f=nt(t.byId,p);return Object.entries(f).forEach(([m,v])=>t.byId[m]={...v,...p[m]}),f},undo:p=>{Object.entries(p).forEach(([f,m])=>t.byId[f]=m)}};function i(p,f){return{name:a.update,args:p,seriesKey:f}}const c={getLabel:()=>`Replace ${e}`,redo:p=>bC(t,p.val,p.targets),undo:p=>{SC(t,p)}};function d(p,f,m){return{name:a.replace,args:{val:p,targets:f},seriesKey:m}}return{init:n,entities:g(()=>t),reducers:{[a.add]:o,[a.delete]:s,[a.update]:u,[a.replace]:c},createAddAction:r,createDeleteAction:l,createUpdateAction:i,createReplaceAction:d}}function FC(e){const t=bn("Armature"),n=bn("Bone"),a=bn("Constraint"),o=ga("Armature",()=>t.entities.value.byId),r=DC("Bone",()=>i.value,["head","tail"]);e.defineReducers(t.reducers),e.defineReducers(n.reducers),e.defineReducers(a.reducers),e.defineReducers(o.reducers),e.defineReducers(r.reducers);const s=g(()=>nn(t.entities.value)),l=o.lastSelectedId,u=g(()=>l.value?t.entities.value.byId[l.value]:void 0),i=g(()=>{if(!u.value)return{};const K=n.entities.value.byId;return ie(u.value.bones.map(fe=>K[fe]))}),c=r.selectedMap,d=r.lastSelectedId,p=g(()=>d.value?n.entities.value.byId[d.value]:void 0),f=g(()=>{const K=n.entities.value.byId;return ie(r.allAttrsSelectedIds.value.map(fe=>K[fe]))}),m=g(()=>Jn(i.value,c.value)),v=g(()=>{const K=a.entities.value.byId;return ie((Ee(i.value)??[]).flatMap(fe=>fe.constraints.map(ke=>K[ke])))}),y=g(()=>{const K=n.entities.value.byId;return Z(ie(s.value),fe=>fe.bones.map(ke=>K[ke]))});function E(K,fe,ke,Se,ne){t.init(Dt(K)),n.init(Dt(fe)),a.init(Dt(ke)),o.restore(Se),r.restore(ne),t.entities.value.allIds.length===0&&S(),l.value||o.restore([[t.entities.value.allIds[0],!0]])}function h(){return{armatures:s.value,bones:nn(n.entities.value),constraints:nn(a.entities.value),armatureSelected:o.createSnapshot(),boneSelected:r.createSnapshot()}}function S(){const K=Wn({id:"initial-bone",name:"bone",tail:{x:0,y:100}}),fe=Sl({id:"initial-armature",name:"armature",bones:[K.id]});t.init(Dt([fe])),n.init(Dt([K])),o.restore([[fe.id,!0]]),r.restore([])}function $(K=""){l.value!==K&&e.dispatch(o.createSelectAction(K),[r.createClearAllAction()])}function _(){if(l.value)$();else{const K=t.entities.value.allIds[0];K&&$(K)}}function A(K,fe){const ke=Wn({id:fe,name:"bone",tail:{x:0,y:100}},!fe),Se=Sl({id:K,name:qt("armature",Ee(t.entities.value.byId).map(ne=>ne.name)),bones:[ke.id]},!K);e.dispatch(t.createAddAction([Se]),[o.createSelectAction(Se.id),n.createAddAction([ke]),r.createMultiSelectAction([[ke.id,{head:!0,tail:!0}]])])}function O(){const K=u.value;if(!K)return;const fe=n.entities.value.byId;e.dispatch(t.createDeleteAction([K.id]),[n.createDeleteAction(K.bones),a.createDeleteAction(K.bones.flatMap(ke=>fe[ke].constraints)),r.createClearAllAction()])}function T(K){!K||!u.value||u.value.name===K||e.dispatch(t.createUpdateAction({[u.value.id]:{name:qt(K,Ee(t.entities.value.byId).map(fe=>fe.name))}}))}function L(K){const fe=n.entities.value.byId;return t.entities.value.byId[K].bones.map(ke=>fe[ke])}function N(){Object.keys(i.value).length!==0&&e.dispatch(r.createSelectAllAction(!0))}function U(K="",fe={head:!0,tail:!0},ke=!1,Se=!1){if(u.value&&!(!p.value&&!K)&&!(r.lastSelectedId.value===K&&Object.keys(c.value).length===1&&!ke&&af(c.value[K],fe)))if(!K)e.dispatch(r.createClearAllAction());else{let ne={};if(ke){const we=c.value[K]??{};pc(we.head,fe.head)&&(ne.head=!0),pc(we.tail,fe.tail)&&(ne.tail=!0)}else ne=fe;e.dispatch(r.createMultiSelectAction(Kb(Fr({...ke?_t(r.selectedMap.value,{[K]:!0}):{},...Object.keys(ne).length>0?{[K]:ne}:{}},bf(Ee(i.value),K,ne,Se)),K)))}}function I(K,fe=!1){Object.keys(K).length===0&&!r.lastSelectedId.value||e.dispatch(r.createMultiSelectAction(K,fe))}function R(K,fe={head:!0,tail:!0},ke,Se=!1){K&&(ke!=null&&ke.ctrl)&&p.value?I(In(Rb(i.value,p.value.id,K),()=>({head:!0,tail:!0})),!0):U(K,fe,ke==null?void 0:ke.shift,Se)}function B(K){u.value&&Y([Wn({id:K,name:qt("bone",Ee(i.value).map(fe=>fe.name)),tail:{x:0,y:100}},!K)],{head:!0,tail:!0})}function Y(K,fe,ke){const Se=u.value;Se&&e.dispatch(n.createAddAction(K),[t.createUpdateAction({[Se.id]:{bones:Se.bones.concat(K.map(ne=>ne.id))}}),r.createMultiSelectAction(fe?Z(ie(K),()=>fe):{}),...ke?[a.createAddAction(ke)]:[]])}function Ce(){const K=u.value;if(!K)return;const fe=f.value,ke=Object.keys(fe);e.dispatch(n.createDeleteAction(ke),[n.createUpdateAction(Mr(Ee(i.value).filter(Se=>!fe[Se.id]))),t.createUpdateAction({[K.id]:{bones:K.bones.filter(Se=>!fe[Se])}}),a.createDeleteAction(ke.flatMap(Se=>fe[Se].constraints)),r.createClearAllAction()])}function Le(){const K=u.value;if(!K)return;const fe=f.value,ke=Object.keys(fe),Se=k1(i.value,v.value,Object.keys(fe));e.dispatch(n.createDeleteAction(ke),[n.createUpdateAction(Se.bones),t.createUpdateAction({[K.id]:{bones:K.bones.filter(ne=>!fe[ne])}}),a.createDeleteAction(ke.flatMap(ne=>fe[ne].constraints)),a.createUpdateAction(Se.constraints),r.createClearAllAction()])}function Fe(K,fe){u.value&&e.dispatch(n.createUpdateAction(Fr(K,Mr(Ee(i.value).map(ke=>({...ke,...K[ke.id]})))),fe))}function Qe(K,fe){!u.value||!p.value||e.dispatch(n.createUpdateAction({[p.value.id]:d1(Ee(i.value),{...p.value,...K})},fe))}function Me(K){!K||!p.value||p.value.name===K||e.dispatch(n.createUpdateAction({[p.value.id]:{name:qt(K,Ee(i.value).map(fe=>fe.name))}}))}function re(K,fe){if(!u.value||!p.value)return;const ke=v.value,Se=In(p.value.constraints,V=>ke[V]),ne=ie(K),we=K.filter(V=>!Se[V.id]),Ke=p.value.constraints.filter(V=>!ne[V]),x=K.filter(V=>Se[V.id]),P=p.value.constraints,F=K.map(V=>V.id);e.dispatch(a.createUpdateAction(ie(x),fe),[P.join(":")!==F.join(":")?n.createUpdateAction({[p.value.id]:{constraints:K.map(V=>V.id)}}):void 0,we.length>0?a.createAddAction(we):void 0,Ke.length>0?a.createDeleteAction(Ke):void 0].filter(V=>!!V))}function _e(K,fe={},ke){const Se=u.value;if(!Se)return;const[ne,we]=Ub(K,V=>!!i.value[V.id]),Ke=Mr(Ee({...i.value,...ie(K)})),x=we.map(V=>Ke[V.id]?{...V,...Ke[V.id]}:V),P=ne.map(V=>Ke[V.id]?{...V,...Ke[V.id]}:V),F=v.value;e.dispatch(n.createAddAction(x),[t.createUpdateAction({[Se.id]:{bones:Se.bones.concat(x.map(V=>V.id))}}),n.createUpdateAction(ie(P)),r.createMultiSelectAction(fe),ke?a.createAddAction(ke.filter(V=>!F[V.id])):void 0,ke?a.createUpdateAction(ie(ke.filter(V=>F[V.id]))):void 0].filter(V=>!!V))}const Ve=H();function ft(K){var fe,ke,Se;K?((fe=K.onstart)==null||fe.call(K),Ve.value=K):((Se=(ke=Ve.value)==null?void 0:ke.oncancel)==null||Se.call(ke),Ve.value=void 0)}function Ot(K){var fe,ke,Se;K?(fe=Ve.value)==null||fe.callback(K):(Se=(ke=Ve.value)==null?void 0:ke.oncancel)==null||Se.call(ke),Ve.value=void 0}return{armatures:s,lastSelectedArmatureId:l,lastSelectedArmature:u,boneMap:i,selectedBones:c,lastSelectedBoneId:d,lastSelectedBone:p,allSelectedBones:f,selectedBonesOrigin:m,constraintMap:v,bonesByArmatureId:y,initState:E,exportState:h,createDefaultEntities:S,selectArmature:$,selectAllArmature:_,addArmature:A,deleteArmature:O,updateArmatureName:T,getBonesByArmatureId:L,selectAllBones:N,selectBone:R,selectBones:I,addBone:B,addBones:Y,deleteBone:Ce,dissolveBone:Le,updateBones:Fe,updateBone:Qe,updateBoneName:Me,updateBoneConstraints:re,upsertBones:_e,bonePicker:g(()=>Ve.value),setBonePicker:ft,pickBone:Ot}}const GC=FC(ra());function Rt(){return GC}function ym(e={},t=!1){const n=t?We():e.id??"";return{frame:0,targetId:"",name:"bone",points:{},...e,id:n}}function UC(e){return e.name==="bone"}function gm(e={},t=!1){const n=t?We():e.id??"";return{frame:0,targetId:"",name:"constraint",points:{},...e,id:n}}function Ra(e={}){return{value:0,curve:_m("linear"),...e}}function _m(e){return KC(e)}function KC(e){return{name:e,controlIn:{x:-10,y:0},controlOut:{x:10,y:0}}}const bm=[{label:"Constant",name:"constant"},{label:"Linear",name:"linear"},{label:"Bezier",name:"bezier3"}];function zC(e,t){if(e.length===0)return[];const n=e.findIndex(r=>t<=r.frame);if(n===-1)return[e[e.length-1]];const a=e[n];if(a.frame===t||n===0)return[a];const o=e[n-1];return o.frame===t?[o]:[o,a]}function YC(e,t,n){return HC(e,t)(n)}function Kc(e){return{x:e.frame,y:e.keyframePoint.value}}function HC(e,t){const n=Kc(e),a=Kc(t);switch(e.keyframePoint.curve.name){case"constant":return XC(n);case"linear":return WC(n,a);case"bezier3":return JC(n,e.keyframePoint.curve.controlOut,t.keyframePoint.curve.controlIn,a)}}function XC(e){return()=>e.y}function WC(e,t){const n=t.x-e.x;return n===0?a=>a:a=>(a-e.x)/n*(t.y-e.y)+e.y}function JC(e,t,n,a){if(a.x-e.x===0)return s=>s;const r=wm(e,t,n,a);return s=>E_(r,s)}function Sm(e,t,n,a){const o=te(t,e),r=te(n,a);return[e,o,r,a]}function wm(e,t,n,a){const o=Sm(e,t,n,a);return[o[0],{x:Math.min(o[1].x,o[3].x),y:o[1].y},{x:Math.max(o[2].x,o[0].x),y:o[2].y},o[3]]}function ja(e,t,n){const a=e.filter(r=>n(r)),o=zC(a,t);if(o.length!==0)return o.length===1?n(o[0]).value:YC({frame:o[0].frame,keyframePoint:n(o[0])},{frame:o[1].frame,keyframePoint:n(o[1])},t)}function Nu(e,t){return Z(e,n=>km(n,t))}function km(e,t){const n=ja(e,t,qC)??0,a=ja(e,t,ZC)??0,o=ja(e,t,QC)??0,r=ja(e,t,eM)??1,s=ja(e,t,tM)??1;return{translate:{x:n,y:a},rotate:o,scale:{x:r,y:s},origin:{x:0,y:0}}}function qC(e){return e.points.translateX}function ZC(e){return e.points.translateY}function QC(e){return e.points.rotate}function eM(e){return e.points.scaleX}function tM(e){return e.points.scaleY}function nM(e){return{props:{translateX:e(),translateY:e(),rotate:e(),scaleX:e(),scaleY:e()}}}function Em(e,t,n,a={},o=!1){return ym({frame:e,targetId:t,points:{...a.translateX?{translateX:Ra({value:n.translate.x})}:{},...a.translateY?{translateY:Ra({value:n.translate.y})}:{},...a.rotate?{rotate:Ra({value:n.rotate})}:{},...a.scaleX?{scaleX:Ra({value:n.scale.x})}:{},...a.scaleY?{scaleY:Ra({value:n.scale.y})}:{}}},o)}const aM=Object.freeze(Object.defineProperty({__proto__:null,getInterpolatedTransformMapByTargetId:Nu,getKeyframeDefaultPropsMap:nM,interpolateKeyframe:km,makeKeyframe:Em},Symbol.toStringTag,{value:"Module"}));function $l(e,t,n){const a=Vu(t,n);return Z(e,o=>a[o.id]?{...o,option:{...o.option,...a[o.id]}}:o)}function Vu(e,t){return Z(e,n=>Cm(n,t))}function Cm(e,t){return{influence:ut(0,1,ja(e,t,oM)??1)}}function oM(e){return e.points.influence}function rM(e){return{props:{influence:e()}}}function Mm(e,t,n,a={},o=!1){return gm({frame:e,targetId:t,points:{...a.influence?{influence:Ra({value:n.option.influence})}:{}}},o)}const sM=Object.freeze(Object.defineProperty({__proto__:null,getInterpolatedConstraintMap:$l,getInterpolatedOptionMapByTargetId:Vu,getKeyframeDefaultPropsMap:rM,interpolateKeyframe:Cm,makeKeyframe:Mm},Symbol.toStringTag,{value:"Module"}));function lM(e){switch(e){case"bone":return aM;case"constraint":return sM}}function Yr(e){return{props:Z(e.points,()=>!0)}}function Om(e){return e?Object.values(e.props).some(t=>t):!1}function Du(e,t){return t?Object.keys(e.points).every(n=>t.props[n]):!1}function uM(e,t){if(Du(e,t))return{selected:e};if(!Om(t))return{notSelected:e};const n={...e,points:{...e.points}},a={...e,points:{...e.points}};return Object.keys(e.points).forEach(o=>{t.props[o]?delete a.points[o]:delete n.points[o]}),{selected:n,notSelected:a}}function iM(e,t,n=!1){const a={...t,points:{...t.points},id:n?e.id:t.id};return Object.keys(e.points).forEach(o=>{e.points[o]&&!t.points[o]&&(a.points[o]=e.points[o])}),a}function zc(e,t){if(!t)return e;if(Du(e,t))return;const n={...e,points:{...e.points}};return Object.keys(e.points).forEach(a=>{t.props[a]&&delete n.points[a]}),n}function Tm(e,t="bone"){const n=Am(()=>[],t);return e.forEach(a=>{Object.keys(a.points).forEach(o=>{a.points[o]&&n.props[o]&&n.props[o].push(a)})}),n}function Uo(e){const t={props:{}};return e.forEach(n=>{Object.keys(n.points).forEach(a=>{var o;n.points[a]&&((o=t.props)[a]??(o[a]=[])).push(n)})}),t}function Am(e,t="bone"){return lM(t).getKeyframeDefaultPropsMap(e)}function cM(e){return Object.keys(e).reduce((t,n)=>(t[n]=e[n].reduce((a,o,r)=>(a[o.frame]={props:dM(e[n],r)},a),{}),t),{})}function dM(e,t){const n=e.slice(t);if(n.length<1)return{};const a=n[0],o=Tm(n,a.name),r={};return Object.keys(a.points).forEach(s=>{r[s]=pM(o.props[s],l=>l.points[s])}),r}function pM(e,t){if(e.length<2)return 0;const n=e[0],a=e[1],o=t(n),r=t(a);return o&&r&&fM(o,r)?a.frame-n.frame:0}function fM(e,t){return e.value===t.value}function mM(e,t,n){return Z(e,(a,o)=>{const r=t[o];return r?$m(a,r,n):a})}function $m(e,t,n){return{...e,points:Z(e.points,(a,o)=>t.props[o]?n(a):a)}}function xm(e={name:"bone"},t=!1){switch(e.name){case"bone":return ym({...e,name:"bone"},t);case"constraint":return gm({...e,name:"constraint"},t)}}function Im(e,t){const n={},a={};return Object.keys(t).forEach(o=>{const r=t[o],s=e[o];if(!s)return;const l=uM(s,r);l.selected&&(n[o]=l.selected),l.notSelected&&(a[o]=l.notSelected)}),{selected:n,notSelected:a}}function vM(e,t){return{...e,frame:e.frame+t.x,points:{...Z(e.points,n=>({...n,value:n.value+t.y}))}}}function hM(e,t){const n={},a={};return Object.keys(e).forEach(o=>{const r=e[o],s={},l={};Object.keys(r.props).forEach(u=>{(t(o,u)?s:l)[u]=r.props[u]}),Object.keys(s).length>0&&(n[o]={...r,props:s}),Object.keys(l).length>0&&(a[o]={...r,props:l})}),{trueMap:n,falseMap:a}}function Lm(e){const t={},n={};return Object.keys(e).forEach(a=>{const o=e[a][0];if(o)switch(o.name){case"bone":t[a]=e[a];return;case"constraint":n[a]=e[a];return}}),{bone:t,constraint:n}}function yM(e,t,n){const a={};return Object.entries(e).forEach(([o,r])=>{if(t[0]<=r.frame&&r.frame<=t[1]){const s={};Object.entries(r.points).forEach(([l,u])=>{n[0]<=u.value&&u.value<=n[1]&&(s[l]=!0)}),Object.keys(s).length>0&&(a[o]={props:s})}}),a}function Pm(e){return Math.round(Math.log(e)/Math.log(vu))}function gM(e){const t=Math.round(Pm(e)/2)+1;return Math.round(t/5)*5+5}function _M(e,t){const n=Math.round(Pm(t)/2)+1;return(Math.round(n/3)+1)*bM(e)}function bM(e){return e>7?5:e>5?10:e>3?15:e>2?20:e>1.5?25:e>1?50:100}function xl(e){return Math.round(Fu(e))}function Fu(e){return e/vn}function Bm(e){return e*vn}function SM(e,t){return e/t}function Rm(e,t,n=!1){return{x:n?Fu(e.x):xl(e.x),y:SM(e.y,t)}}function wM(e,t){const n=Math.floor(Math.max(t,0)/vn);return n-n%(e*2)}function kM(e,t,n){const a=Math.floor(n/e);return a-a%t-(a>0?0:t)}function aa(e){return Oa(e,"frame")}function Za(e){return EM(Oa(e,"targetId"))}function jm(e){return e.concat().sort((t,n)=>t.frame-n.frame)}function EM(e){return Z(e,jm)}function CM(e,t){if(e.length===0)return e;const n=jm(e)[0].frame;return e.map(a=>({...a,frame:a.frame+(t-n)}))}function MM(e){const t=aa(e);return Object.values(t).map(n=>{const a=Oa(n,"targetId");return Object.values(a).map(o=>{const[r,...s]=o;return s.reduce((l,u)=>(Object.assign(l.points,u.points),l),{...r,points:{...r.points}})})}).flat()}function Nm(e,t,n=!1){const a=MM(t),o=ie(e),r=ie(a),s=aa(Ee(_t(o,r))),l=aa(a),u=_t(l,s),i=nt(o,r),c=Ee(i);return{merged:Ee({...Z(s,(p,f)=>{c.push(...Bb(p,l[f]??[],"targetId",!0));const m=wn(p,"targetId"),v=wn(l[f]??[],"targetId");return n?Object.keys({...m,...v}).reduce((y,E)=>{if(!v[E])y.push(m[E]);else if(!m[E])y.push(v[E]);else{const h=iM(m[E],v[E]);y.push(h)}return y},[]):l[f]?Pb(p,l[f]??[],"targetId"):p}),...u}).flat(),dropped:c}}function OM(e,t,n,a){const o=ie(t),r=Z(ie(e),f=>f.keyframes.map(m=>o[m])),s=ie(n),l=ie(a),u=Z(s,f=>f.bones.map(m=>l[m])),i=e.filter(f=>!!s[f.armatureId]),c=i.flatMap(f=>TM(r[f.id],[...u[f.armatureId],...u[f.armatureId].flatMap(m=>m.constraints.map(v=>({id:v})))])),d=ie(c);return{actions:i.map(f=>({...f,keyframes:f.keyframes.filter(m=>d[m])})),keyframes:c}}function TM(e,t){return Ee(nt(Za(e),ie(t))).flat()}function AM(e,t){const n=Object.keys(aa(e)).map(a=>parseInt(a)).filter(a=>t<a);return n.length>0?n[0]:t}function $M(e,t){const n=Object.keys(aa(e)).map(a=>parseInt(a)).filter(a=>a<t);return n.length>0?n[n.length-1]:t}function xM(e){return e.reduce((t,n)=>Math.max(t,n.frame),0)}function IM(e,t,n,a=!1){return t===0?0:Sa(0,t,e+(a?-1:1)*n)}function LM(e,t){return Object.keys(e).reduce((n,a)=>{const o=t(a);return o&&(n[a]=_f(e[a],o)),n},{})}function PM(e,t){return t?{...e,option:{...e.option,influence:t.influence??e.option.influence}}:e}function BM(e,t){return t?{...e,points:Z(e.points,(n,a)=>{if(n)return{...n,value:t[a]??n.value}})}:e}function RM(e,t){return Object.keys(e).reduce((n,a)=>{const o=jM(e[a],t[a]);return qb(o)||(n[a]=o),n},{})}function jM(e,t){if(!t||!UC(t))return e;const n=t.points.translateX?0:e.translate.x,a=t.points.translateY?0:e.translate.y,o=t.points.scaleX?0:e.scale.x,r=t.points.scaleY?0:e.scale.y,s=t.points.rotate?0:e.rotate;return he({translate:{x:n,y:a},scale:{x:o,y:r},rotate:s,origin:e.origin})}function Hr(e,t,n=(a,o)=>a===o){const a=H(t());function o(i){a.value=i}function r(){return a.value}const s={update:`${e}_UPDATE`},l={getLabel:()=>`Update ${e}`,redo(i){const c=a.value;return a.value=i,c},undo(i){a.value=i}};function u(i,c){if(!n(a.value,i))return{name:s.update,args:i,seriesKey:c}}return{state:g(()=>a.value),restore:o,createSnapshot:r,reducers:{[s.update]:l},createUpdateAction:u}}function NM(e=0,t=60){const n=Hr("Frame",()=>e),a=Hr("End Frame",()=>t),o=H("pause");function r(f=0,m=60){n.restore(f),a.restore(m)}function s(f){o.value=f}function l(){o.value=o.value==="pause"?"play":"pause"}function u(){return n.createUpdateAction(0)}function i(){return n.createUpdateAction(a.state.value)}function c(f,m=!1,v){return n.createUpdateAction(IM(n.state.value,a.state.value,f,m),v)}function d(f){return n.createUpdateAction(AM(f,n.state.value))}function p(f){return n.createUpdateAction($M(f,n.state.value))}return{currentFrame:n.state,endFrame:a.state,restore:r,createUpdateCurrentFrameAction:n.createUpdateAction,createUpdateEndFrameAction:a.createUpdateAction,playing:g(()=>o.value),setPlaying:s,togglePlaying:l,createJumpStartFrameAction:u,createJumpEndFrameAction:i,createStepFrameAction:c,createJumpNextKeyAction:d,createJumpPrevKeyAction:p,reducers:{...n.reducers,...a.reducers}}}function VM(e,t){const a=H({}),o=H("");function r(O){o.value=O.length>0?O[O.length-1][0]:"",l(O.reduce((T,[L,N])=>(T[L]=N,T),{}))}function s(){const O=o.value,T=Object.entries(a.value);return O?T.filter(([L])=>L!==O).concat([[O,a.value[O]]]):T}function l(O){a.value=O}function u(O){a.value=_t({...a.value,...O.toUpsert},In(O.toDelete,()=>!0)),o.value=O.lastSelectedId}function i(O={}){l(O);const T=Object.keys(O);o.value=T.length>0?T[0]:""}const c={select:`${e}_SELECT`,multiSelect:`${e}_MULTI_SELECT`,selectAll:`${e}_SELECT_ALL`,filter:`${e}_FILTER`,drop:`${e}_DROP`,clearAll:`${e}_CLEAR_ALL`},d={getLabel:()=>`Select ${e}`,redo(O){var N;const T=a.value,L={lastSelectedId:o.value,...T[O.id]?{toUpsert:{[O.id]:T[O.id]},toDelete:[]}:{toUpsert:{},toDelete:[O.id]}};if(O.shift){const U=tf((N=T[O.id])==null?void 0:N.props,O.propsState.props);l(nf(T,O.id,U?{props:U}:void 0)),o.value=U?O.id:""}else l(Dr(T,t(),()=>O.id?{[O.id]:O.propsState}:{})),o.value=O.id;return L},undo(O){u(O)}};function p(O,T,L=!1){return{name:c.select,args:{id:O,propsState:T,shift:L}}}const f={getLabel:()=>`Select ${e}`,redo(O){var L,N;const T={map:{...a.value},lastSelectedId:o.value};return O.shift?GM(a.value,O.selectedTargetMap)?(l(_t(a.value,O.selectedTargetMap)),o.value=""):(l({...a.value,...Z(O.selectedTargetMap,(U,I)=>{var R;return{props:{...((R=a.value[I])==null?void 0:R.props)??{},...Zs(U).props}}})}),o.value=((L=dc(O.selectedTargetMap))==null?void 0:L.id)??""):(l({..._t(a.value,t()),...Z(O.selectedTargetMap,Zs)}),o.value=((N=dc(O.selectedTargetMap))==null?void 0:N.id)??""),T},undo(O){l(O.map),o.value=O.lastSelectedId}};function m(O,T=!1){return{name:c.multiSelect,args:{selectedTargetMap:O,shift:T}}}const v={getLabel:()=>`Select ${e}`,redo(O){const T={map:{...a.value},lastSelectedId:o.value},L=_t(a.value,t());return l(Z({...O,...L},(N,U)=>O[U]?DM(Zs(O[U]),a.value[U]):a.value[U])),o.value=Object.keys(O)[0]??"",T},undo(O){l(O.map),o.value=O.lastSelectedId}};function y(O){return{name:c.selectAll,args:O}}const E={getLabel:()=>`Filter ${e}`,redo(O){const T={map:{...a.value},lastSelectedId:o.value};return l(Dr(a.value,t(),L=>nt(L,O))),T},undo(O){l(O.map),o.value=O.lastSelectedId}};function h(O={}){return{name:c.filter,args:O}}const S={getLabel:()=>`Drop ${e}`,redo(O){const T=o.value,L=nt(a.value,O);return l(_t(a.value,O)),O[o.value]&&(o.value=""),{toUpsert:L,toDelete:[],lastSelectedId:T}},undo(O){u(O)}};function $(O={}){return{name:c.drop,args:O}}const _={getLabel:()=>`Select ${e}`,redo(){const O={map:{...a.value},lastSelectedId:o.value};return l({}),o.value="",O},undo(O){l(O.map),o.value=O.lastSelectedId}};function A(){return{name:c.clearAll,args:void 0}}return{init:i,selectedStateMap:g(()=>a.value),lastSelectedId:g(()=>o.value),restore:r,createSnapshot:s,reducers:{[c.select]:d,[c.multiSelect]:f,[c.selectAll]:v,[c.filter]:E,[c.drop]:S,[c.clearAll]:_},createSelectAction:p,createMultiSelectAction:m,createSelectAllAction:y,createFilterAction:h,createDropAction:$,createClearAllAction:A}}function Zs(e){return{props:Z(e.points,()=>!0)}}function DM(e,t){return t?{props:{...e.props,...t.props}}:e}function FM(e,t){return t?Vb(Z(e.points,()=>!0),t.props):!1}function GM(e,t={}){return Object.keys(e).length===0?!1:Object.keys(t).every(n=>FM(t[n],e[n]))}function Yc(e){const t=H({});function n(u={}){t.value=u}const a={upsert:`${e}_UPSERT`,set:`${e}_SET`},o={getLabel:()=>`Upsert ${e}`,redo(u){const i=Object.keys(_t(u,t.value)),c=nt(t.value,u);return t.value={...t.value,...u},{created:i,updated:c}},undo(u){t.value=_t({...t.value,...u.updated},In(u.created,()=>!0))}};function r(u,i){return{name:a.upsert,args:u,seriesKey:i}}const s={getLabel:()=>`Set ${e}`,redo(u){const i=t.value;return t.value=u,i},undo(u){t.value=u}};function l(u,i){return{name:a.set,args:u,seriesKey:i}}return{state:g(()=>t.value),init:n,reducers:{[a.upsert]:o,[a.set]:s},createUpsertAction:r,createSetAction:l}}function UM(e,t){const a=H({});function o(_){a.value=_}function r(_){o(_.reduce((A,[O,T])=>(A[O]=T,A),{}))}function s(){return Object.entries(a.value)}function l(_){a.value=_t({...a.value,..._.toUpsert},In(_.toDelete,()=>!0))}function u(_={}){o(_)}const i={select:`${e}_SELECT`,selectAll:`${e}_SELECT_ALL`,filter:`${e}_FILTER`,drop:`${e}_DROP`,clearAll:`${e}_CLEAR_ALL`};function c(_,A,O=!1,T=!1){const L=Object.keys(a.value).length;return L===0?!!_:L===1&&_&&a.value[_]&&af(a.value[_].props,A.props)?O&&!T:!0}const d={getLabel:()=>`Select ${e}`,redo(_){var T,L;const A=a.value,O=A[_.id]?{toUpsert:{[_.id]:A[_.id]},toDelete:[]}:{toUpsert:{},toDelete:[_.id]};if(_.shift){const N=_.notToggle?{...((T=A[_.id])==null?void 0:T.props)??{},..._.propsState.props}:tf((L=A[_.id])==null?void 0:L.props,_.propsState.props);o(nf(A,_.id,N?{props:N}:void 0))}else o(Dr(A,t(),()=>_.id?{[_.id]:_.propsState}:{}));return O},undo(_){l(_)}};function p(_,A,O=!1,T=!1){return{name:i.select,args:{id:_,propsState:A,shift:O,notToggle:T}}}const f={getLabel:()=>`Select ${e}`,redo(_){const A={...a.value};return o(Z({...a.value,..._},(O,T)=>_[T]?zM(KM(_[T]),a.value[T]):a.value[T])),A},undo(_){o(_)}};function m(_){return{name:i.selectAll,args:_}}const v={getLabel:()=>`Filter ${e}`,redo(_){const A={...a.value};return o(Dr(a.value,t(),O=>nt(O,_))),A},undo(_){o(_)}};function y(_={}){return{name:i.filter,args:_}}const E={getLabel:()=>`Drop ${e}`,redo(_){const A=nt(a.value,_);return o(_t(a.value,_)),{toUpsert:A,toDelete:[]}},undo(_){l(_)}};function h(_={}){return{name:i.drop,args:_}}const S={getLabel:()=>`Select ${e}`,redo(){const _={...a.value};return o({}),_},undo(_){o(_)}};function $(){return{name:i.clearAll,args:void 0}}return{init:u,restore:r,createSnapshot:s,selectedStateMap:g(()=>a.value),selectDryRun:c,reducers:{[i.select]:d,[i.selectAll]:f,[i.filter]:v,[i.drop]:E,[i.clearAll]:S},createSelectAction:p,createSelectAllAction:m,createFilterAction:y,createDropAction:h,createClearAllAction:$}}function KM(e){return{props:Z(e.props,()=>"selected")}}function zM(e,t){return t?{props:{...e.props,...t.props}}:e}function YM(e,t,n){const a=bn("Action"),o=bn("Keyframe"),r=ga("Action",()=>a.entities.value.byId),s=NM(),l=Yc("BonePose"),u=Yc("ConstraintPose"),i=UM("PoseTarget",()=>S.value),c=VM("Keyframe",()=>O.value);e.defineReducers(a.reducers),e.defineReducers(o.reducers),e.defineReducers(r.reducers),e.defineReducers(s.reducers),e.defineReducers(l.reducers),e.defineReducers(u.reducers),e.defineReducers(i.reducers),e.defineReducers(c.reducers);const d=g(()=>nn(a.entities.value)),p=r.lastSelectedId,f=g(()=>p.value?a.entities.value.byId[p.value]:void 0),m=l.state,v=u.state,y=g(()=>{var ge;const z=o.entities.value.byId;return((ge=f.value)==null?void 0:ge.keyframes.map(xe=>z[xe]))??[]}),E=g(()=>aa(y.value)),h=g(()=>Za(y.value)),S=g(()=>({...t.boneMap.value,...t.constraintMap.value})),$=g(()=>nt(h.value,S.value)),_=g(()=>nt(h.value,{...re.value,...K.value})),A=g(()=>({...Z(re.value,()=>({type:"bone"})),...Z(K.value,()=>({type:"constraint"}))})),O=g(()=>ie(qp(_.value)));function T(z,ge,xe,Re,Ye,gt,jt){s.setPlaying("pause"),s.restore(z,ge),a.init(Dt(xe)),o.init(Dt(Re)),r.restore(Ye),l.init(),u.init(),c.restore(gt),i.restore(jt)}function L(){return{currentFrame:s.currentFrame.value,endFrame:s.endFrame.value,actions:d.value,keyframes:nn(o.entities.value),actionSelected:r.createSnapshot(),keyframeState:c.createSnapshot(),targetPropsState:i.createSnapshot()}}const N=g(()=>nt(O.value,c.selectedStateMap.value)),U=g(()=>Object.keys(N.value).length>0),I=g(()=>N.value[c.lastSelectedId.value]),R=g(()=>nt(i.selectedStateMap.value,A.value)),B=g(()=>Lm(h.value)),Y=g(()=>$l(t.constraintMap.value,B.value.constraint,s.currentFrame.value)),Ce=g(()=>Object.keys(v.value).length===0?Y.value:$l(t.constraintMap.value,Z(B.value.constraint,z=>z.map(ge=>BM(ge,v.value[ge.targetId]))),s.currentFrame.value)),Le=g(()=>Nu($.value,s.currentFrame.value)),Fe=g(()=>Db(Object.keys(m.value).concat(Object.keys(h.value)))),Qe=g(()=>Fe.value.reduce((z,ge)=>(z[ge]=qa(Ke(ge),x(ge)),z),{})),Me=g(()=>t.lastSelectedArmature.value?Su(Z(t.boneMap.value,z=>({...z,transform:P(z.id)})),Ce.value):{}),re=g(()=>Z(Ze(t.selectedBones.value,z=>lf(z)),()=>!0)),_e=g(()=>Z(re.value,(z,ge)=>t.boneMap.value[ge])),Ve=g(()=>f1(Me.value,t.selectedBones.value)),ft=g(()=>t.lastSelectedArmature.value?_u(Ve.value):{x:0,y:0}),Ot=g(()=>{const z=t.constraintMap.value;return Z(_e.value,ge=>ge.constraints.map(xe=>({...z[xe],boneId:ge.id})))}),K=g(()=>ie(Ee(Ot.value).flat().filter(z=>h.value[z.id])));function fe(z){e.dispatch(l.createSetAction(z))}function ke(z){fe(Z({...m.value,...z},(ge,xe)=>z[xe]?qa(x(xe),z[xe]):x(xe)))}function Se(z,ge){e.dispatch(u.createSetAction(z,ge))}function ne(z,ge){Se(Fr(v.value,z),ge)}function we(z,ge){e.dispatch(l.createSetAction({...m.value,...LM(z,xe=>{if(A.value[xe])return Ke(xe)})},ge))}function Ke(z){return Le.value[z]??he()}function x(z){return m.value[z]??he({scale:{x:0,y:0}})}function P(z){return Qe.value[z]??he()}function F(z){z&&e.dispatch(z,[l.createSetAction({}),u.createSetAction({})])}function V(z,ge){F(s.createUpdateCurrentFrameAction(z,ge))}function J(){F(s.createJumpStartFrameAction())}function oe(){F(s.createJumpEndFrameAction())}function de(z,ge=!1,xe){F(s.createStepFrameAction(z,ge,xe))}function ee(){F(s.createJumpNextKeyAction(y.value))}function se(){F(s.createJumpPrevKeyAction(y.value))}function Q(z,ge){e.dispatch(s.createUpdateEndFrameAction(z,ge))}function ye(z){p.value!==z&&e.dispatch(r.createSelectAction(z),[c.createClearAllAction()])}function Ae(z){if(!t.lastSelectedArmature.value)return;const ge=sf({id:z,name:qt("action",d.value.map(xe=>xe.name)),armatureId:t.lastSelectedArmature.value.id},!z);e.dispatch(a.createAddAction([ge]),[c.createClearAllAction(),r.createSelectAction(ge.id)])}function j(z){p.value&&e.dispatch(a.createUpdateAction({[p.value]:z}))}function X(){const z=f.value;z&&e.dispatch(a.createDeleteAction([z.id]),[o.createDeleteAction(z.keyframes),c.createClearAllAction()])}function ae(z,ge,xe=!1){if(!(!z&&!U.value))if(z){const[Re,...Ye]=ah(z,ge,xe);e.dispatch(Re,Ye)}else{const[Re,...Ye]=ni();e.dispatch(Re,Ye)}}function pe(z={},ge=!1){const xe=Object.keys(z).length>0;if(!(!xe&&!U.value))if(xe)e.dispatch(c.createMultiSelectAction(Z(z,(Re,Ye)=>({id:Ye,points:Z(Re.props,()=>!0)})),ge),[i.createClearAllAction()]);else{const[Re,...Ye]=ni();e.dispatch(Re,Ye)}}function Be(){Object.keys(N.value).length===Object.keys(O.value).length&&Object.keys(N.value).every(z=>Du(O.value[z],c.selectedStateMap.value[z]))?U.value&&ae(""):e.dispatch(nh())}function De(z={}){f.value||Ae();const ge=Object.keys(re.value).map(Ye=>Em(s.currentFrame.value,Ye,P(Ye),z,!0)),[xe,...Re]=Is(ge);e.dispatch(xe,Re)}function tt(){if(!U.value)return;const[z,...ge]=ai(c.selectedStateMap.value);e.dispatch(z,ge)}function mt(z,ge){const[xe,...Re]=oh(z,s.currentFrame.value,ge);e.dispatch(xe,Re)}function lt(z){const ge=Ce.value[z];if(ge)return PM(ge,v.value[ge.id])}function Je(z,ge={}){if(Object.keys(re.value).length===0)return;f.value||Ae();const xe=lt(z);if(!xe)return;const Re=Mm(s.currentFrame.value,z,xe,ge,!0),[Ye,...gt]=Is([Re]);e.dispatch(Ye,gt)}function Cn(z,ge={}){if(!U.value)return;const[xe,...Re]=ai({[z]:{props:ge}});e.dispatch(xe,Re)}function Tt(z,ge){const[xe,...Re]=Ls(Ee(z),!0,ge);e.dispatch(xe,Re)}function Xt(z){const[ge,...xe]=Is(CM(z.filter(Re=>t.boneMap.value[Re.targetId]).map(Re=>Fb(Re)),s.currentFrame.value));e.dispatch(ge,xe)}function co(z,ge=[]){if(z.length===0){Tt(ie(ge));return}const[xe,...Re]=Ls([...z,...ge],!0),Ye=Oa(z,"frame"),gt={};ge.forEach(jt=>{const mo=wn(Ye[jt.frame]??[],"targetId")[jt.targetId];gt[(mo==null?void 0:mo.id)??jt.id]=jt}),e.dispatch(xe,[...Re,c.createMultiSelectAction(gt)])}function qv(z,ge,xe=!1){i.selectDryRun(z,ge,xe)&&e.dispatch(i.createSelectAction(z,ge,xe))}const po=H(),fo=H(),ti=g(()=>{const z=Im(O.value,nt(c.selectedStateMap.value,O.value));return{selected:z.selected,notSelected:Nb(z.notSelected)}}),Qo=g(()=>{if(po.value){const z=Rm(Oe(po.value.current,po.value.start),(n==null?void 0:n.graphValueWidth())??1);return{selected:Z(ti.value.selected,ge=>vM(ge,z)),notSelected:{...ti.value.notSelected,...fo.value??{}}}}else return fo.value?{selected:fo.value,notSelected:{}}:void 0});function Zv(){return po.value}function Qv(z){po.value=z}function eh(){Qo.value&&co(Ee(Qo.value.notSelected),Ee(Qo.value.selected)),fo.value=void 0}function th(z){fo.value=z}return{initState:T,exportState:L,actions:d,actionMap:g(()=>ie(d.value)),keyframes:y,selectedKeyframeMap:c.selectedStateMap,lastSelectedKeyframe:I,keyframeMapByFrame:E,keyframeMapByTargetId:h,visibledKeyframeMap:O,visibledSelectedKeyframeMap:N,selectedConstraintMap:K,selectedTargetIdMap:A,visibledTargetPropsStateMap:R,posedTargetIds:Fe,currentPosedBones:Me,selectedBoneIdMap:re,selectedBoneMap:_e,selectedBones:Ve,selectedPosedBoneOrigin:ft,getBoneEditedTransforms:x,getCurrentSelfTransforms:P,currentInterpolatedConstraintMap:Ce,originalInterpolatedConstraintMap:Y,applyEditedTransforms:ke,applyEditedConstraint:ne,pastePoses:we,playing:s.playing,setPlaying:s.setPlaying,togglePlaying:s.togglePlaying,currentFrame:s.currentFrame,setCurrentFrame:V,jumpStartFrame:J,jumpEndFrame:oe,jumpNextKey:ee,jumpPrevKey:se,stepFrame:de,endFrame:s.endFrame,setEndFrame:Q,selectedAction:f,selectAction:ye,addAction:Ae,updateAction:j,deleteAction:X,selectKeyframe:ae,selectKeyframes:pe,selectAllKeyframes:Be,execInsertKeyframe:De,execDeleteKeyframes:tt,execDeleteTargetKeyframe:mt,execInsertKeyframeConstraint:Je,execDeleteKeyframeConstraint:Cn,execUpdateKeyframes:Tt,pasteKeyframes:Xt,upsertKeyframes:co,selectTargetProp:qv,editedKeyframeMap:Qo,getEditMovement:Zv,setEditMovement:Qv,completeEdit:eh,setTmpKeyframes:th};function nh(){return c.createSelectAllAction(O.value)}function ni(){return[c.createFilterAction(),i.createDropAction(zs(Ee(O.value)))]}function ah(z,ge,xe=!1){const Re=O.value[z],Ye=ge??Yr(Re);return[c.createSelectAction(z,Ye,xe),i.createSelectAction(Re.targetId,{props:Z(Ye.props,()=>"selected")},xe,!0)]}function Is(z,ge=!1){return[...Ls(z,!ge),l.createSetAction(RM(m.value,zs(z))),c.createSelectAllAction(ie(z)),i.createDropAction(zs(Ee(O.value)))]}function Ls(z,ge=!1,xe){const Re=O.value,{merged:Ye,dropped:gt}=Nm(Ee(Re),z,ge),jt=ie(Ye),oi=_t(jt,Re),mo=nt(jt,Re),Ps=_t(ie(gt),jt),ri=Ee(oi);return[{...o.createAddAction(ri),seriesKey:xe},o.createDeleteAction(Ee(Ps).map(vo=>vo.id)),o.createUpdateAction(mo),a.createUpdateAction({[f.value.id]:{keyframes:f.value.keyframes.filter(vo=>!Ps[vo]).concat(ri.map(vo=>vo.id))}}),c.createDropAction(Ps)]}function ai(z){const ge=O.value,xe=nt(ge,z),Re={},Ye={};return Ee(xe).forEach(gt=>{const jt=zc(gt,z[gt.id]);jt?Re[jt.id]=jt:Ye[gt.id]=!0}),[o.createUpdateAction(Re),o.createDeleteAction(Object.keys(Ye)),a.createUpdateAction({[f.value.id]:{keyframes:f.value.keyframes.filter(gt=>!Ye[gt])}}),c.createClearAllAction()]}function oh(z,ge,xe){const Re=Ee(O.value).find(gt=>gt.targetId===z&&gt.frame===ge);if(!Re)return[];const Ye=zc(Re,{props:{[xe]:!0}});return Ye?[o.createUpdateAction({[Ye.id]:Ye}),c.createClearAllAction()]:[o.createDeleteAction([Re.id]),a.createUpdateAction({[f.value.id]:{keyframes:f.value.keyframes.filter(gt=>gt!==Re.id)}}),c.createClearAllAction()]}}const{settings:HM}=Mt(),XM=YM(ra(),Rt(),{graphValueWidth:()=>HM.graphValueWidth});function cn(){return XM}function WM(e){const t=bn("Actor"),n=bn("Element"),a=ga("Element",()=>n.entities.value.byId),o=ga("Actor",()=>t.entities.value.byId);e.defineReducers(t.reducers),e.defineReducers(n.reducers),e.defineReducers(o.reducers),e.defineReducers(a.reducers);const r=g(()=>nn(t.entities.value)),s=o.lastSelectedId,l=g(()=>s.value?t.entities.value.byId[s.value]:void 0),u=a.selectedMap,i=a.lastSelectedId,c=g(()=>{var A;const _=n.entities.value.byId;return ie(((A=l.value)==null?void 0:A.elements.map(O=>_[O]))??[])}),d=g(()=>{if(i.value)return c.value[i.value]});function p(_,A,O,T){t.init(Dt(_)),n.init(Dt(A)),o.restore(O),a.restore(T)}function f(){return{actors:r.value,elements:nn(n.entities.value),actorSelected:o.createSnapshot(),elementSelected:a.createSnapshot()}}function m(){const _=SE(),A=Wf(_),O=mu({id:"initial-actor",armatureId:"initial-armature",svgTree:_,elements:[A.id]});t.init(Dt([O])),n.init(Dt([A])),o.restore([[O.id,!0]]),a.restore([])}function v(_,A){e.dispatch(t.createDeleteAction(r.value.map(O=>O.id)),[t.createAddAction([_]),n.createAddAction(A),o.createSelectAction(_.id)])}function y(_=""){o.getSelectHistoryDryRun(_)&&e.dispatch(o.createSelectAction(_),[a.createClearAllAction()])}function E(_){const A=l.value;A&&e.dispatch(t.createUpdateAction({[A.id]:{armatureId:_}}))}function h(_="",A){!l.value||!a.getSelectHistoryDryRun(_,A==null?void 0:A.shift)||e.dispatch(a.createSelectAction(_,A==null?void 0:A.shift))}function S(){l.value&&e.dispatch(a.createSelectAllAction(!0))}function $(_){const A=d.value;A&&e.dispatch(n.createUpdateAction({[A.id]:_}))}return{actors:r,lastSelectedActor:l,elementMap:c,selectedElements:u,lastSelectedElement:d,lastSelectedElementId:i,initState:p,exportState:f,createDefaultEntities:m,importActor:v,selectActor:y,updateArmatureId:E,selectElement:h,selectAllElement:S,updateElement:$}}const JM=WM(ra());function Pn(){return JM}const qM=he(),Hc=he({scale:{x:0,y:0}});function ZM(e,t,n,a){const o=Hr("Canvas Mode",()=>"edit");e.defineReducers(o.reducers);const r=H("pose"),s=H(),l=H(),u=H(),i=H({}),c=H(""),d=o.state;vt(d,(re,_e)=>{r.value=_e});function p(re){o.restore(re),r.value=re!=="edit"?"edit":"pose",s.value=void 0,l.value=void 0}function f(){return{canvasMode:o.createSnapshot()}}const m=g(()=>d.value==="edit"?t.selectedBonesOrigin.value:a.selectedPosedBoneOrigin.value),v=H();function y(re=[]){v.value=re}const E=H();function h(re){E.value=re}const S=H([]);function $(re=[]){S.value=re}const _=g(()=>{if(!t.lastSelectedArmature.value)return{};if(Object.keys(i.value).length>0){const re=a.currentInterpolatedConstraintMap.value;return Su(ie(Ee(t.boneMap.value).map(_e=>({..._e,transform:qa(a.getCurrentSelfTransforms(_e.id),I(_e.id))}))),re)}else return a.currentPosedBones.value}),A=g(()=>t.lastSelectedArmature.value?d.value==="edit"?ie(Ee(t.boneMap.value).map(re=>kl(re,U(re.id),t.selectedBones.value[re.id]||{}))):Object.keys(_.value).reduce((re,_e)=>{const Ve=_.value[_e];return re[_e]=Aa(Ve,[Ve.transform]),re},{}):{}),O=g(()=>s.value);function T(re=!1){return d.value==="edit"?R(r.value):R("edit")}function L(re){e.dispatch(o.createUpdateAction(re))}function N(re){s.value=re}function U(re){const _e=u.value;return _e&&t.selectedBones.value[re]?_e:qM}function I(re){return d.value!=="pose"?Hc:i.value[re]??Hc}function R(re){return re==="weight"?n.lastSelectedActor.value&&L(re):L(re),re===o.state.value}function B(){const re=u.value;re&&(t.updateBones(Object.keys(t.selectedBones.value).reduce((_e,Ve)=>(_e[Ve]=kl(t.boneMap.value[Ve],re,t.selectedBones.value[Ve]),_e),{})),Y())}function Y(re,_e=""){u.value=re,c.value=_e}function Ce(){a.applyEditedTransforms(i.value),Le()}function Le(re,_e=""){i.value=re??{},c.value=_e}const Fe=H();function Qe(re){Fe.value=re}function Me(re){var _e;(_e=Fe.value)==null||_e.call(Fe,re)}return{initState:p,exportState:f,canvasMode:d,editTransformType:g(()=>c.value),selectedBonesOrigin:m,changeCanvasMode:R,toggleCanvasMode:T,axisGridLine:O,setAxisGridInfo:N,getEditTransforms:U,getEditPoseTransforms:I,commandExamList:g(()=>v.value),setCommandExams:y,popupMenuList:g(()=>{var re;return((re=E.value)==null?void 0:re.items)??[]}),popupMenuInfo:g(()=>E.value),setPopupMenuList:h,toolMenuGroupList:g(()=>S.value),setToolMenuGroups:$,posedBoneMap:_,visibledBoneMap:A,lastSelectedBoneSpace:g(()=>l.value),setEditTransform:Y,completeEditTransform:B,completePoseTransforms:Ce,setPoseTransforms:Le,setEventDispatcher:Qe,dispatchCanvasEvent:Me}}const QM=ZM(ra(),Rt(),Pn(),cn());function dn(){return QM}function sa(e,t,n=!1){let a=!1,o;function r(...s){o=s,!a&&(a=!0,n&&e(...o),setTimeout(()=>{n||e(...o),a=!1},t))}return r}function Gu(e){const t=H(),n=H(),a=pu();Gt(o),vt(()=>a.state.size,o);function o(){if(!n.value)return;const l=n.value.getBoundingClientRect();e().setViewSize({width:l.width,height:l.height})}function r(l){if(!t.value)return;const u=t.value.getBoundingClientRect();return Oe(l,{x:u.left,y:u.top})}function s(l){if(!t.value)return;const u=t.value.getBoundingClientRect();return te(l,{x:u.left,y:u.top})}return{wrapper:n,svg:t,addRootPosition:s,removeRootPosition:r}}function za(e,t){var c,d;const n=[{state:t()}];function a(){return n[n.length-1]}const o=((d=(c=a().state).onStart)==null?void 0:d.call(c,e))??Promise.resolve();function r(){return{label:a().state.getLabel()}}async function s(p){const f=await a().state.handleEvent(e,p);f&&(typeof f=="function"?await u(e,f()):f.type!=="break"?await u(e,f.getState(),f.type):await l(e))}async function l(p){var v,y,E,h;const f=a();await((y=(v=f.state).onEnd)==null?void 0:y.call(v,p)),n.pop(),n.length===0&&n.push({state:t()});const m=a();f.type!=="stack-resume"&&await((h=(E=m.state).onStart)==null?void 0:h.call(E,p))}async function u(p,f,m){var E,h,S,$,_;const v=a();v.state.shouldRequestPointerLock&&!f.shouldRequestPointerLock?p.exitPointerLock():!v.state.shouldRequestPointerLock&&f.shouldRequestPointerLock&&p.requestPointerLock();const y={state:f,type:m};switch(m){case"stack-restart":await((h=(E=v.state).onEnd)==null?void 0:h.call(E,p)),n.push(y);break;case"stack-resume":n.push(y);break;default:await(($=(S=v.state).onEnd)==null?void 0:$.call(S,p)),n[n.length-1]={...y,type:v.type};break}await((_=f.onStart)==null?void 0:_.call(f,p))}async function i(){var f,m;await((m=(f=a().state).onEnd)==null?void 0:m.call(f,e)),n.length=0}return{getStateSummary:r,handleEvent:s,dispose:i,ready:o}}function Uu(e,t,n){let a;const o=e();return{getLabel:()=>o.getLabel()+(a?`:${a.getStateSummary().label}`:""),onStart:async r=>{var s;await((s=o.onStart)==null?void 0:s.call(o,r)),a=za({...r,...n(r)},t),await a.ready},onEnd:async r=>{var s;await a.dispose(),await((s=o.onEnd)==null?void 0:s.call(o,r))},handleEvent:async(r,s)=>(await a.handleEvent(s),await o.handleEvent(r,s))}}function Es(e,t){function n(o){o.clipboardData&&(Object.entries(e()).forEach(([r,s])=>o.clipboardData.setData(r,s)),o.preventDefault())}async function a(o){if(!o.clipboardData)return;o.preventDefault();const r=Array.from(o.clipboardData.items).map(eO);r.length>0&&await t(r)}return{onCopy:n,onPaste:a}}function eO(e){return e.kind==="string"?{kind:"string",type:e.type,getAsString:()=>tO(e)}:{kind:"file",type:e.type,getAsFile:()=>nO(e)}}function tO(e){return e.kind==="string"?new Promise(t=>{e.getAsString(t)}):Promise.reject(`Can not read "${e.kind}" as string`)}function nO(e){if(e.kind==="file"){const t=e.getAsFile();return t?Promise.resolve(t):Promise.reject("Failed to read read the file")}else return Promise.reject(`Can not read "${e.kind}" as file`)}const Xc="blendic-svg";function Cs(e){return{serialize(t){return JSON.stringify({app:Xc,appVersion:"0.18.1",type:e,data:t})},deserialize(t){const n=JSON.parse(t);if(n.app!==Xc||n.type!==e)throw new Error("Invalid data");return n.data}}}const Wc=Cs("bones");function Jc(e){return Es(()=>{const t=e.getDuplicateBones();return{"text/plain":Wc.serialize(t)}},async t=>{const n=t.find(r=>r.kind==="string");if(!n)return;const a=await n.getAsString(),o=Wc.deserialize(a);if(o.bones.length>0){const r=e.getBones(),s=Ee(r).map(p=>p.name),l=Tf(ie(o.bones),ie(o.createdConstraints),s),u=qc(Ee(Z(Ze(e.getSelectedBones(),p=>!!(p.head&&p.tail)),(p,f)=>r[f]))),i=qc(l.bones),c={x:u[0]-i[0]+20,y:u[1]-i[1]+20},d=l.bones.map(p=>({...p,head:te(p.head,c),tail:te(p.tail,c)}));e.addBones(d,{head:!0,tail:!0},l.createdConstraints)}})}function qc(e){if(e.length===0)return[0,0];const[t,...n]=e;return n.reduce((a,o)=>(a[0]=Math.min(a[0],Math.min(o.head.x,o.tail.x)),a[1]=Math.min(a[1],Math.min(o.head.y,o.tail.y)),a),[Math.min(t.head.x,t.tail.x),Math.min(t.head.y,t.tail.y)])}function Ut(){return aO}const aO={getLabel:()=>"Panning",shouldRequestPointerLock:!0,handleEvent:async(e,t)=>{switch(t.type){case"pointermove":e.panView(t.data);return;case"pointerup":return{type:"break"}}}};function Qs(){return oO}const oO={getLabel:()=>"Grabbing",shouldRequestPointerLock:!0,onStart:async e=>{e.setEditTransform(he(),"grab")},onEnd:async e=>{e.setAxisGridInfo(),e.setEditTransform()},handleEvent:async(e,t)=>{var n,a;switch(t.type){case"pointermove":{const o=rO(e,t.data.ctrl?cf(t.data.scale):0,Oe(t.data.current,t.data.start));e.setEditTransform(he({translate:o}),"grab");return}case"pointerup":return t.data.options.button===0&&e.completeEditTransform(),zt;case"keydown":switch(t.data.key){case"Escape":return zt;case"x":((n=e.getAxisGridInfo())==null?void 0:n.axis)==="x"?e.setAxisGridInfo():e.setAxisGridInfo({axis:"x",local:!1,vec:{x:1,y:0},origin:Jn(e.getBones(),e.getSelectedBones())});return;case"y":((a=e.getAxisGridInfo())==null?void 0:a.axis)==="y"?e.setAxisGridInfo():e.setAxisGridInfo({axis:"y",local:!1,vec:{x:0,y:1},origin:Jn(e.getBones(),e.getSelectedBones())});return;default:return}default:return}}};function rO(e,t,n){const a=e.getAxisGridInfo();return a?mf(t,a.vec,n):vf(t,0,n)}function sO(){return lO}const lO={getLabel:()=>"Rotating",shouldRequestPointerLock:!0,onStart:async e=>{e.setEditTransform(he(),"rotate")},onEnd:async e=>{e.setAxisGridInfo(),e.setEditTransform()},handleEvent:async(e,t)=>{switch(t.type){case"pointermove":{const n=Jn(e.getBones(),e.getSelectedBones()),a=(yt(t.data.current,n)-yt(t.data.start,n))/Math.PI*180,o=t.data.ctrl?df(a):a;e.setEditTransform(he({rotate:o,origin:n}),"rotate");return}case"pointerup":return t.data.options.button===0&&e.completeEditTransform(),zt;case"keydown":switch(t.data.key){case"Escape":return zt;default:return}default:return}}};function uO(){return iO}const iO={getLabel:()=>"Scaling",shouldRequestPointerLock:!0,onStart:async e=>{e.setEditTransform(he(),"scale")},onEnd:async e=>{e.setAxisGridInfo(),e.setEditTransform()},handleEvent:async(e,t)=>{var n,a;switch(t.type){case"pointermove":{const o=Jn(e.getBones(),e.getSelectedBones()),r=d0(o,t.data.start,t.data.current),s=je(je({x:1,y:1},r?-1:1),It(t.data.current,o)/It(t.data.start,o)),l=t.data.ctrl?pf(s):s,u=cO(e,l);e.setEditTransform(he({scale:u,origin:o}),"scale");return}case"pointerup":return t.data.options.button===0&&e.completeEditTransform(),zt;case"keydown":switch(t.data.key){case"Escape":return zt;case"x":((n=e.getAxisGridInfo())==null?void 0:n.axis)==="x"?e.setAxisGridInfo():e.setAxisGridInfo({axis:"x",local:!1,vec:{x:1,y:0},origin:Jn(e.getBones(),e.getSelectedBones())});return;case"y":((a=e.getAxisGridInfo())==null?void 0:a.axis)==="y"?e.setAxisGridInfo():e.setAxisGridInfo({axis:"y",local:!1,vec:{x:0,y:1},origin:Jn(e.getBones(),e.getSelectedBones())});return;default:return}default:return}}};function cO(e,t){const n=e.getAxisGridInfo();return n?{x:n.axis==="y"?1:t.x,y:n.axis==="x"?1:t.y}:t}function dO(e){return{getLabel:()=>"Deleting",onStart:async t=>{pO(t,e)},onEnd:async t=>{t.setPopupMenuList()},handleEvent:async(t,n)=>{switch(n.type){case"pointerdown":switch(n.data.options.button){case 1:return Ut;default:return zt}case"keydown":switch(n.data.key){case"Escape":return zt;default:return}case"popupmenu":switch(n.data.key){case"delete":return t.deleteBones(),zt;case"dissolve":return t.dissolveBones(),zt;default:return}}}}}function pO(e,t){e.setPopupMenuList({items:[{label:"Dissolve",key:"dissolve"},{label:"Delete",key:"delete"}],point:t.point})}function fO(){return mO}const mO={getLabel:()=>"RectangleSelecting",onStart:async e=>{e.startDragging(),e.setRectangleDragging(!0)},onEnd:async e=>{e.setRectangleDragging()},handleEvent:async(e,t)=>{switch(t.type){case"pointerup":{const n=e.getDraggedRectangle();return n&&e.selectBones(Sf(n,e.getBones()),t.data.options.shift),zt}case"keydown":switch(t.data.key){case"Escape":return zt}return}}};function Ku(e){return{getLabel:()=>"PickingBone",onStart:async t=>{t.setCommandExams([{title:"Pick a bone"}]),t.startPickBone(e)},handleEvent:async(t,n)=>{switch(n.type){case"pointerdown":switch(n.data.options.button){case 0:switch(n.target.type){case"bone-body":case"bone-head":case"bone-tail":return t.pickBone(n.target.id),{type:"break"};default:return t.pickBone(),{type:"break"}}case 1:return{getState:Ut,type:"stack-resume"};default:return}case"keydown":switch(n.data.key){case"Escape":return t.pickBone(),{type:"break"};default:return}case"state":return t.pickBone(),{type:"break"};default:return}}}}function zt(){return vO}const vO={getLabel:()=>"Default",onStart:async e=>{Zc(e)},handleEvent:async(e,t)=>{switch(t.type){case"pointerdown":switch(t.data.options.button){case 0:switch(t.target.type){case"bone-body":case"bone-head":case"bone-tail":e.selectBone(t.target.id,hO(t.target.type),t.data.options);return;default:return t.data.options.shift||e.selectBones({}),fO}case 1:return Ut;default:return}case"keydown":switch(t.data.key){case"a":e.selectAllBones();return;case"A":e.addBone();return;case"x":{if(e.getLastSelectedBoneId()){const n=t.point;return n?()=>dO({point:n}):void 0}return}case"e":return e.getLastSelectedBoneId()?(e.extrudeBones(),Qs):void 0;case"g":return e.getLastSelectedBoneId()?Qs:void 0;case"r":return e.getLastSelectedBoneId()?sO:void 0;case"s":return e.getLastSelectedBoneId()?uO:void 0;case"D":return e.getLastSelectedBoneId()?(e.duplicateBones(),Qs):void 0;case"!":case"Home":{const n=Object.values(e.getBones());e.setViewport(n.length>0?_s(n.map(a=>wf(a))):void 0);return}default:return}case"popupmenu":switch(t.data.key){case"delete":e.deleteBones();return;case"dissolve":e.dissolveBones();return;case"subdivide":e.subdivideBones();return;case"symmetrize":e.symmetrizeBones();return;default:return}case"copy":{Jc(e).onCopy(t.nativeEvent);return}case"paste":{await Jc(e).onPaste(t.nativeEvent);return}case"selection":Zc(e);return;case"state":switch(t.data.name){case"pick-bone":return()=>Ku(t.data.options);default:return}default:return}}};function Zc(e){e.getLastSelectedBoneId()?(e.setCommandExams([{command:"e",title:"Extrude"},{command:"g",title:"Grab"},{command:"r",title:"Rotate"},{command:"s",title:"Scale"},{command:"a",title:"All Select"},{command:"A",title:"Add Bone"},{command:"x",title:"Delete"},{command:"D",title:"Duplicate"},{command:`${tn()} + c`,title:"Clip"},{command:`${tn()} + v`,title:"Paste"}]),e.setToolMenuGroups([{label:"Armature",items:[{label:"Subdivide",key:"subdivide"},{label:"Symmetrize",key:"symmetrize",underline:!0},{label:"Dissolve",key:"dissolve"},{label:"Delete",key:"delete"}]}])):(e.setCommandExams([{command:"a",title:"All Select"},{command:"A",title:"Add Bone"},{command:`${tn()} + v`,title:"Paste"}]),e.setToolMenuGroups([]))}function hO(e){switch(e){case"bone-head":return{head:!0};case"bone-tail":return{tail:!0};default:return{head:!0,tail:!0}}}const Qc=Cs("bone-poses");function ed(e){return Es(()=>({"text/plain":Qc.serialize(e.getPosesToClip())}),async t=>{const n=t.find(r=>r.kind==="string");if(!n)return;const a=await n.getAsString(),o=Qc.deserialize(a);Object.keys(o).length>0&&e.pastePoses(o)})}function Vm(e){const t=e.getLastSelectedBoneId();if(!t)return{origin:{x:0,y:0},radian:0};const n=e.getBones(),a=n[t],o=a.parentId?n[a.parentId]:void 0,r=(o==null?void 0:o.transform.rotate)??0;return{origin:Aa(a,[a.transform]).head,radian:so(a)+r*Math.PI/180}}function td(e,t){var a,o;const n=t==="x"?{x:1,y:0}:{x:0,y:1};if(((a=e.getAxisGridInfo())==null?void 0:a.axis)===t)if((o=e.getAxisGridInfo())!=null&&o.local)e.setAxisGridInfo();else{const r=Vm(e);e.setAxisGridInfo({axis:t,local:!0,vec:kt(n,r.radian),origin:r.origin})}else e.setAxisGridInfo({axis:t,local:!1,vec:n,origin:Jn(e.getBones(),Z(e.getSelectedBones(),()=>({head:!0})))})}function nd(e,t){var n;if(((n=e.getAxisGridInfo())==null?void 0:n.axis)===t)e.setAxisGridInfo();else{const a=t==="x"?{x:1,y:0}:{x:0,y:1},o=Vm(e);e.setAxisGridInfo({axis:t,local:!0,vec:kt(a,o.radian),origin:o.origin})}}function zu(e={}){return he({scale:{x:0,y:0},...e})}function yO(e,t,n){const a=t[n],o=t[a.parentId];return C1(a,o==null?void 0:o.transform)(e)}function gO(){return _O}const _O={getLabel:()=>"Grabbing",shouldRequestPointerLock:!0,onStart:async e=>{e.setEditTransforms({},"grab"),e.setCommandExams([{command:"x",title:"On Axis X"},{command:"y",title:"On Axis Y"}])},onEnd:async e=>{e.setAxisGridInfo(),e.setEditTransforms(),e.setCommandExams()},handleEvent:async(e,t)=>{switch(t.type){case"pointermove":{const n=bO(e,t.data.ctrl?cf(t.data.scale):0,Oe(t.data.current,t.data.start)),a=e.getBones(),o=e.getSelectedBones(),r=Ze(o,(s,l)=>a[l]&&!a[l].connected);e.setEditTransforms(Z(r,(s,l)=>zu({translate:yO(n,a,l)})),"grab");return}case"pointerup":return t.data.options.button===0&&e.completeEditTransforms(),Et;case"keydown":switch(t.data.key){case"Escape":return Et;case"x":{td(e,"x");return}case"y":{td(e,"y");return}default:return}default:return}}};function bO(e,t,n){const a=e.getAxisGridInfo();return a?mf(t,a.vec,n):vf(t,0,n)}function SO(e){return{getLabel:()=>"Inserting",onStart:async t=>{wO(t,e)},onEnd:async t=>{t.setPopupMenuList()},handleEvent:async(t,n)=>{switch(n.type){case"pointerdown":switch(n.data.options.button){case 1:return{getState:Ut,type:"stack-resume"};default:return Et}case"keydown":switch(n.data.key){case"Escape":return Et;default:return}case"popupmenu":switch(n.data.key){case"location":return t.insertKeyframe({translateX:!0,translateY:!0}),Et;case"rotation":return t.insertKeyframe({rotate:!0}),Et;case"scale":return t.insertKeyframe({scaleX:!0,scaleY:!0}),Et;case"location-rotation":return t.insertKeyframe({translateX:!0,translateY:!0,rotate:!0}),Et;case"location-scale":t.insertKeyframe({translateX:!0,translateY:!0,scaleX:!0,scaleY:!0});break;case"rotation-scale":return t.insertKeyframe({rotate:!0,scaleX:!0,scaleY:!0}),Et;case"all":return t.insertKeyframe({translateX:!0,translateY:!0,rotate:!0,scaleX:!0,scaleY:!0}),Et;default:return}}}}}function wO(e,t){e.setPopupMenuList({items:[{label:"Location",key:"location"},{label:"Rotation",key:"rotation"},{label:"Scale",key:"scale"},{label:"Location & Rotation",key:"location-rotation"},{label:"Location & Scale",key:"location-scale"},{label:"Rotation & Scale",key:"rotation-scale"},{label:"All Transforms",key:"all"}],point:t.point})}function kO(){return EO}const EO={getLabel:()=>"RectangleSelecting",onStart:async e=>{e.startDragging(),e.setRectangleDragging(!0)},onEnd:async e=>{e.setRectangleDragging()},handleEvent:async(e,t)=>{switch(t.type){case"pointerup":{const n=e.getDraggedRectangle();return n&&e.selectBones(Sf(n,e.getBones()),t.data.options.shift),Et}case"keydown":switch(t.data.key){case"Escape":return Et}return}}};function CO(){let e=0,t=0;return{getLabel:()=>"Rotating",shouldRequestPointerLock:!0,onStart:async n=>{n.setEditTransforms({},"rotate")},onEnd:async n=>{n.setAxisGridInfo(),n.setEditTransforms()},handleEvent:async(n,a)=>{switch(a.type){case"pointermove":{const o=n.getSelectedBones(),r=_u(o),s=yt(a.data.current,r)-yt(a.data.start,r),l=t+uf(e,s),u=l/Math.PI*180;e=s,t=l;const i=a.data.ctrl?df(u):u;n.setEditTransforms(Z(o,c=>zu({rotate:i*MO(c)})),"rotate");return}case"pointerup":return a.data.options.button===0&&n.completeEditTransforms(),Et;case"keydown":switch(a.data.key){case"Escape":return Et;default:return}default:return}}}}function MO(e){const t=e.transform.scale;return Math.sign(t.x*t.y)}function OO(){return TO}const TO={getLabel:()=>"Scaling",shouldRequestPointerLock:!0,onStart:async e=>{e.setEditTransforms({},"scale"),e.setCommandExams([{command:"x",title:"On Axis X"},{command:"y",title:"On Axis Y"}])},onEnd:async e=>{e.setAxisGridInfo(),e.setEditTransforms(),e.setCommandExams()},handleEvent:async(e,t)=>{switch(t.type){case"pointermove":{const n=e.getSelectedBones(),a=_u(n),o=je({x:1,y:1},It(t.data.current,a)/It(t.data.start,a)-1),r=t.data.ctrl?pf(o):o,s=AO(e,r),l=zu({scale:s});e.setEditTransforms(Z(n,()=>l),"scale");return}case"pointerup":return t.data.options.button===0&&e.completeEditTransforms(),Et;case"keydown":switch(t.data.key){case"Escape":return Et;case"x":{nd(e,"x");return}case"y":{nd(e,"y");return}default:return}default:return}}};function AO(e,t){const n=e.getAxisGridInfo();return n?{x:n.axis==="y"?0:t.x,y:n.axis==="x"?0:t.y}:t}function Et(){return $O}const $O={getLabel:()=>"Default",onStart:async e=>{ad(e)},handleEvent:async(e,t)=>{switch(t.type){case"pointerdown":switch(t.data.options.button){case 0:switch(t.target.type){case"bone-body":case"bone-head":case"bone-tail":e.selectBone(t.target.id,{head:!0,tail:!0},t.data.options,!0);return;default:return t.data.options.shift||e.selectBones({}),kO}case 1:return Ut;default:return}case"keydown":switch(t.data.key){case"a":e.selectAllBones();return;case"g":return e.getLastSelectedBoneId()?gO:void 0;case"r":return e.getLastSelectedBoneId()?CO:void 0;case"s":return e.getLastSelectedBoneId()?OO:void 0;case"i":{const n=t.point;return e.getLastSelectedBoneId()&&n?()=>SO({point:n}):void 0}case"!":case"Home":{const n=Object.values(e.getBones());e.setViewport(n.length>0?_s(n.map(a=>wf(a))):void 0);return}default:return}case"copy":{ed(e).onCopy(t.nativeEvent);return}case"paste":{await ed(e).onPaste(t.nativeEvent);return}case"selection":ad(e);return;case"state":switch(t.data.name){case"pick-bone":return()=>Ku(t.data.options);default:return}default:return}}};function ad(e){e.getLastSelectedBoneId()?e.setCommandExams([{command:"i",title:"Insert Keyframe"},{command:"g",title:"Grab"},{command:"r",title:"Rotate"},{command:"s",title:"Scale"},{command:"a",title:"All Select"},{command:`${tn()} + c`,title:"Clip"},{command:`${tn()} + v`,title:"Paste"}]):e.setCommandExams([{command:"a",title:"All Select"},{command:`${tn()} + v`,title:"Paste"}]),e.setToolMenuGroups([])}function xO(){return IO}const IO={getLabel:()=>"Default",onStart:async e=>{e.setCommandExams()},handleEvent:async(e,t)=>{switch(t.type){case"pointerdown":switch(t.data.options.button){case 0:switch(t.target.type){case"element":e.selectElement(t.target.id,t.data.options);return;default:e.selectElement();return}case 1:return Ut;default:return}case"keydown":switch(t.data.key){case"!":case"Home":{e.setViewport();return}default:return}case"state":switch(t.data.name){case"pick-bone":return()=>Ku(t.data.options);default:return}default:return}}};function Dm(){return Uu(()=>LO,xO,e=>e.getWeightContext())}const LO={getLabel:()=>"Weight",handleEvent:async(e,t)=>{switch(t.type){case"state":switch(t.data.name){case"edit":return Yu;case"pose":return Fm;default:return}case"keydown":switch(t.data.key){case"Tab":e.toggleMode(t.data.shift);return;default:return}}}};function Fm(){return Uu(()=>PO,Et,e=>e.getPoseContext())}const PO={getLabel:()=>"Pose",handleEvent:async(e,t)=>{switch(t.type){case"state":switch(t.data.name){case"edit":return Yu;case"weight":return Dm;default:return}case"keydown":switch(t.data.key){case"Tab":e.toggleMode(t.data.shift);return;default:return}}}};function Yu(){return Uu(()=>BO,zt,e=>e.getEditContext())}const BO={getLabel:()=>"Edit",handleEvent:async(e,t)=>{switch(t.type){case"state":switch(t.data.name){case"pose":return Fm;case"weight":return Dm;default:return}case"keydown":switch(t.data.key){case"Tab":e.toggleMode(t.data.shift);return;default:return}}}};function RO(e){const t=jO(e),n=NO(e),a=VO(e),o={...Ms(e),getEditContext:()=>t,getPoseContext:()=>n,getWeightContext:()=>a,toggleMode:e.canvasStore.toggleCanvasMode};return{sm:za(o,Yu)}}function Ms(e){return{requestPointerLock:e.requestPointerLock,exitPointerLock:e.exitPointerLock,getTimestamp:()=>Date.now()}}function jO(e){const{indexStore:t,canvasStore:n}=e;function a(){const o=t.allSelectedBones.value,r=Ee(t.boneMap.value).map(s=>s.name);return Tf(o,t.constraintMap.value,r)}return{...Ms(e),generateUuid:We,setViewport:e.setViewport,panView:e.panView,startDragging:e.startDragging,setRectangleDragging:e.setRectangleDragging,getDraggedRectangle:e.getDraggedRectangle,setPopupMenuList:n.setPopupMenuList,setCommandExams:n.setCommandExams,pickBone:t.pickBone,startPickBone:t.setBonePicker,getBones:()=>t.boneMap.value,getLastSelectedBoneId:()=>t.lastSelectedBoneId.value,getSelectedBones:()=>t.selectedBones.value,selectBone:t.selectBone,selectBones:t.selectBones,selectAllBones:t.selectAllBones,addBone:t.addBone,addBones:t.addBones,updateBones:t.updateBones,deleteBones:t.deleteBone,extrudeBones:()=>{const o=t.boneMap.value,r=t.selectedBones.value,s=Object.values(o).map(i=>i.name),l={},u=[];Object.keys(r).forEach(i=>{const c=r[i],d=o[i],p=[];c.tail&&p.push(bc(d)),c.head&&p.push(bc(d,!0)),p.forEach(f=>{l[f.parentId]||(f.name=qt(d.name,s),u.push(f),s.push(f.name),l[f.parentId]=!0)})}),t.addBones(u,{tail:!0})},dissolveBones:t.dissolveBone,subdivideBones:()=>{const o=b1(t.boneMap.value,Object.keys(t.allSelectedBones.value)),r=Object.keys(o).reduce((s,l)=>(t.boneMap.value[l]||(s[l]={head:!0,tail:!0},s[o[l].parentId]={head:!0,tail:!0}),s),{});t.upsertBones(Ee(o),r)},symmetrizeBones:()=>{const o=m1(t.boneMap.value,t.constraintMap.value,Object.keys(t.allSelectedBones.value));t.upsertBones(o.bones,Z(ie(o.bones),()=>({head:!0,tail:!0})),o.createdConstraints)},duplicateBones:()=>{const o=a();t.addBones(o.bones,{head:!0,tail:!0},o.createdConstraints)},getDuplicateBones:a,setEditTransform:n.setEditTransform,completeEditTransform:n.completeEditTransform,setAxisGridInfo:n.setAxisGridInfo,getAxisGridInfo:()=>n.axisGridLine.value,setToolMenuGroups:n.setToolMenuGroups}}function NO(e){const{indexStore:t,canvasStore:n,animationStore:a}=e;return{...Ms(e),generateUuid:We,setViewport:e.setViewport,panView:e.panView,startDragging:e.startDragging,setRectangleDragging:e.setRectangleDragging,getDraggedRectangle:e.getDraggedRectangle,setPopupMenuList:n.setPopupMenuList,setCommandExams:n.setCommandExams,pickBone:t.pickBone,startPickBone:t.setBonePicker,getBones:()=>a.currentPosedBones.value,getLastSelectedBoneId:()=>t.lastSelectedBoneId.value,getSelectedBones:()=>a.selectedBones.value,selectBone:t.selectBone,selectBones:t.selectBones,selectAllBones:t.selectAllBones,setEditTransforms:n.setPoseTransforms,completeEditTransforms:n.completePoseTransforms,setAxisGridInfo:n.setAxisGridInfo,getAxisGridInfo:()=>n.axisGridLine.value,insertKeyframe:a.execInsertKeyframe,getPosesToClip:()=>Z(t.selectedBones.value,(o,r)=>a.getCurrentSelfTransforms(r)),pastePoses:a.pastePoses,setToolMenuGroups:n.setToolMenuGroups}}function VO(e){const{indexStore:t,canvasStore:n,elementStore:a}=e;return{...Ms(e),generateUuid:We,setViewport:e.setViewport,panView:e.panView,startDragging:e.startDragging,setRectangleDragging:e.setRectangleDragging,getDraggedRectangle:e.getDraggedRectangle,setPopupMenuList:n.setPopupMenuList,setCommandExams:n.setCommandExams,pickBone:t.pickBone,startPickBone:t.setBonePicker,selectElement:a.selectElement}}const od={id:"",type:"empty"};function Qa(e){if(!e.target)return od;const t=DO(e.target);if(!t)return od;const n=t.dataset.id??"",a=t.dataset.type??"",o=t.dataset?Object.entries(t.dataset).reduce((r,[s,l])=>(r[s]=l??"true",r),{}):void 0;return{id:n,type:a,data:o}}function DO(e){const t=e.closest("[data-type]");return t||void 0}function Hu(e){const t=H(),n=H(),a=g(()=>e().map(r=>{var s;return{...r,focus:r.label===t.value,opened:r.label===n.value,hover(){r.children&&(n.value=r.label)},exec(){r.exec?(t.value=r.label,n.value="",r.exec()):r.children&&(n.value=n.value===r.label?"":r.label)},children:(s=r.children)==null?void 0:s.map(l=>({...l,exec(){var u;(u=l.exec)==null||u.call(l),t.value=r.label}}))}}));function o(){n.value=t.value}return{list:a,clearOpened:o}}const Gm=e=>(dt("data-v-ba148ec0"),e=e(),pt(),e),FO=["viewBox","width","height"],GO=["stroke-width"],UO=Gm(()=>C("line",{x1:"-20000",x2:"20000",stroke:"red"},null,-1)),KO=Gm(()=>C("line",{y1:"-20000",y2:"20000",stroke:"green"},null,-1)),zO=[UO,KO],YO=["x1","y1","x2","y2","stroke","stroke-width"],HO={class:"left-top-space"},XO=q({__name:"AppCanvas",props:{originalViewBox:{}},setup(e){const t=e,n=Rt(),a=dn(),o=cn(),r=Pn(),{settings:s}=Mt(),l=$o(),{wrapper:u,svg:i,addRootPosition:c,removeRootPosition:d}=Gu(()=>l);Pu(()=>l.scale.value);const p=sa(R,1e3/60,!0),f=hs({onMove:p,onGlobalMove:ne=>{if(!i.value)return;const we=d(ne.p);we&&l.setMousePoint(we)},onEscape:()=>{m.sm.handleEvent({type:"keydown",data:{key:"Escape"},point:l.viewToCanvas(l.mousePoint.value)})}}),m=RO({indexStore:n,canvasStore:a,animationStore:o,elementStore:r,requestPointerLock:()=>{i.value&&(l.startMoving(),f.requestPointerLockFromElement(i.value))},exitPointerLock:()=>{f.exitPointerLock(),l.endMoving()},setViewport:ne=>l.setViewport(ne),panView:ne=>l.viewMove(ne),startDragging:()=>l.startDragging(),setRectangleDragging:ne=>l.setRectangleDragging(ne),getDraggedRectangle:()=>l.draggedRectangle.value});a.setEventDispatcher(m.sm.handleEvent),vt(a.canvasMode,ne=>{m.sm.handleEvent({type:"state",data:{name:ne}})}),vt([n.lastSelectedArmature,n.selectedBones,r.selectedElements],()=>{m.sm.handleEvent({type:"selection"})});function v(){t.originalViewBox&&l.setViewport(t.originalViewBox)}vt(()=>t.originalViewBox,v),Gt(v);const y=g(()=>{if(l.editStartPoint.value&&a.axisGridLine.value)return{...RE(a.axisGridLine.value.origin,a.axisGridLine.value.vec,l.viewCanvasRect.value),color:a.axisGridLine.value.axis==="x"?"red":"green"}});function E(){if(!u.value)return;const ne=u.value.getBoundingClientRect();l.setViewSize({width:ne.width,height:ne.height})}const h=pu();Gt(E),vt(()=>h.state.size,E);const S=g(()=>a.popupMenuInfo.value?c(l.canvasToView(a.popupMenuInfo.value.point)):void 0),$=Hu(()=>{var ne;return((ne=a.popupMenuInfo.value)==null?void 0:ne.items.map(({label:we,children:Ke,key:x,data:P})=>({label:we,exec:x?()=>Ce(x,P):void 0,children:Ke==null?void 0:Ke.map(({label:F,key:V,data:J})=>({label:F,exec:V?()=>Ce(V,J):void 0}))})))??[]}),_=g(()=>a.toolMenuGroupList.value.map(({label:ne,items:we})=>({label:ne,items:we.map(({label:Ke,key:x})=>({label:Ke,exec:x?()=>Ce(x):void 0}))}))??[]),A=g(()=>{if(["scale","rotate"].includes(a.editTransformType.value))return{origin:a.selectedBonesOrigin.value,current:l.viewToCanvas(l.mousePoint.value)}}),O=g(()=>A.value?yt(A.value.current,A.value.origin)*180/Math.PI:0),T=g(()=>{switch(a.editTransformType.value){case"rotate":return"move-v";case"scale":return"move-h";default:return"move"}}),L=g(()=>a.editTransformType.value?c(l.mousePoint.value):void 0),N=g(()=>!!n.bonePicker.value);function U(ne){m.sm.handleEvent({type:"pointerdown",target:Qa(ne),data:{point:l.viewToCanvas(l.mousePoint.value),options:gn(ne)}})}function I(ne){l.endMoving(),m.sm.handleEvent({type:"pointerup",target:Qa(ne),data:{point:l.viewToCanvas(l.mousePoint.value),options:gn(ne)}})}function R(ne){l.editStartPoint.value&&m.sm.handleEvent({type:"pointermove",data:{start:l.viewToCanvas(l.editStartPoint.value),current:l.viewToCanvas(l.mousePoint.value),ctrl:ne.ctrl,scale:l.scale.value}})}function B(ne){l.dragged.value&&l.editStartPoint.value&&m.sm.handleEvent({type:"pointerdrag",data:{start:l.viewToCanvas(l.editStartPoint.value),current:l.viewToCanvas(l.mousePoint.value),ctrl:Xn(ne),scale:l.scale.value}})}function Y(ne){m.sm.handleEvent({type:"keydown",data:Vo(ne),point:l.viewToCanvas(l.mousePoint.value)})}function Ce(ne,we={}){m.sm.handleEvent({type:"popupmenu",data:{key:ne,...we}})}function Le(ne){m.sm.handleEvent({type:"copy",nativeEvent:ne})}function Fe(ne){m.sm.handleEvent({type:"paste",nativeEvent:ne})}function Qe(ne){a.changeCanvasMode(ne)}const Me=g(()=>s.showAxis),re=l.scale,_e=l.viewSize,Ve=l.viewBox,ft=l.draggedRectangle,Ot=a.canvasMode,K=g(()=>$.list.value),fe=l.wheel,ke=Qe,Se=a.commandExamList;return(ne,we)=>(b(),M("div",{ref_key:"wrapper",ref:u,class:"app-canvas-root"},[k(Ru,{onKeydown:Y,onCopy:Le,onPaste:Fe},{default:D(()=>[(b(),M("svg",{ref_key:"svg",ref:i,xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none","font-family":"sans-serif",viewBox:G(Ve),width:G(_e).width,height:G(_e).height,class:qe({"picking-bone":N.value}),onWheel:we[0]||(we[0]=ze((...Ke)=>G(fe)&&G(fe)(...Ke),["prevent"])),onMousedown:ze(U,["prevent"]),onMouseup:ze(I,["prevent"]),onMousemove:B,onContextmenu:we[1]||(we[1]=ze(()=>{},["prevent"]))},[Me.value?(b(),M("g",{key:0,"stroke-width":1*G(re),"stroke-opacity":"0.3"},zO,8,GO)):ce("",!0),y.value?(b(),M("line",{key:1,x1:y.value.from.x,y1:y.value.from.y,x2:y.value.to.x,y2:y.value.to.y,stroke:y.value.color,"stroke-width":2*G(re)},null,8,YO)):ce("",!0),ot(ne.$slots,"default",{scale:G(re)},void 0,!0),G(ft)?(b(),be(Bu,{key:2,x:G(ft).x,y:G(ft).y,width:G(ft).width,height:G(ft).height,class:"view-only"},null,8,["x","y","width","height"])):ce("",!0),A.value?(b(),be(nC,{key:3,origin:A.value.origin,current:A.value.current},null,8,["origin","current"])):ce("",!0)],42,FO))]),_:3}),C("div",HO,[k(xg,{class:"mode-panel","canvas-mode":G(Ot),onChangeMode:G(ke)},null,8,["canvas-mode","onChangeMode"]),G(Ot)==="edit"?(b(),be(Np,{key:0,class:"armature-menu",groups:_.value},null,8,["groups"])):ce("",!0)]),k(iu,{class:"command-exam-panel","available-command-list":G(Se)},null,8,["available-command-list"]),K.value.length>0&&S.value?(b(),be(cu,{key:0,class:"popup-menu-list","popup-menu-list":K.value,style:st({left:`${S.value.x-20}px`,top:`${S.value.y-10}px`})},null,8,["popup-menu-list","style"])):ce("",!0),k(hb,{p:L.value,rotate:O.value,cursor:T.value},null,8,["p","rotate","cursor"])],512))}});const WO=Te(XO,[["__scopeId","data-v-ba148ec0"]]),JO={class:"tab-panel-root"},qO=["onClick"],ZO={class:"panels"},QO=q({__name:"TabPanel",props:{tabs:{default:()=>[]},initialTab:{default:void 0}},setup(e){var o;const t=e,n=H(t.initialTab??((o=t.tabs[0])==null?void 0:o.key)??""),a=r=>n.value=r;return(r,s)=>(b(),M("div",JO,[C("ul",null,[(b(!0),M(ve,null,Ie(r.tabs,l=>(b(),M("li",{key:l.key,class:qe({current:l.key===n.value})},[C("a",{href:"#",onClick:ze(u=>a(l.key),["prevent"])},Ne(l.label),9,qO)],2))),128))]),C("div",ZO,[(b(!0),M(ve,null,Ie(r.tabs,l=>oa((b(),M("div",{key:l.key},[ot(r.$slots,l.key,{},void 0,!0)])),[[Rp,l.key===n.value]])),128))])]))}});const eT=Te(QO,[["__scopeId","data-v-9e8d880e"]]),tT=e=>(dt("data-v-6bcf6e10"),e=e(),pt(),e),nT=tT(()=>C("h3",null,"history",-1)),aT=q({__name:"HistoryStack",setup(e){const n=ra().historySummaries;return(a,o)=>(b(),M("div",null,[nT,C("ul",null,[(b(!0),M(ve,null,Ie(G(n),(r,s)=>(b(),M("li",{key:s,class:qe({done:r.done})},Ne(r.name),3))),128))])]))}});const oT=Te(aT,[["__scopeId","data-v-6bcf6e10"]]);const rT={},sT={class:"row-block"};function lT(e,t){return b(),M("div",sT,[ot(e.$slots,"default",{},void 0,!0)])}const Um=Te(rT,[["render",lT],["__scopeId","data-v-513b7a6f"]]),uT={class:"inline-content"},iT=q({__name:"InlineField",props:{label:{default:""},labelWidth:{default:void 0},between:{type:Boolean,default:!1}},setup(e){return(t,n)=>(b(),be(Um,{class:qe(["inline-field",{between:t.between}])},{default:D(()=>[t.label?(b(),M("label",{key:0,style:st({width:t.labelWidth})},Ne(t.label),5)):ce("",!0),C("div",uT,[ot(t.$slots,"default",{},void 0,!0)])]),_:3},8,["class"]))}});const ue=Te(iT,[["__scopeId","data-v-64e5a967"]]),cT=["disabled"],dT={key:0},pT=q({__name:"CheckboxInput",props:{modelValue:{type:Boolean,default:!1},label:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,a=t,o=g({get(){return n.modelValue},set(r){a("update:model-value",r)}});return(r,s)=>(b(),M("label",{class:qe({disabled:r.disabled})},[oa(C("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>o.value=l),disabled:r.disabled,type:"checkbox"},null,8,cT),[[bg,o.value]]),r.label?(b(),M("span",dT,Ne(r.label),1)):ce("",!0)],2))}});const it=Te(pT,[["__scopeId","data-v-585a0f61"]]),fT=["disabled","onClick"],mT=q({__name:"ToggleButtons",props:{modelValue:{},options:{},disabled:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,a=t;function o(s){const l=r.value[s]?n.modelValue.filter(u=>u!==s):[...n.modelValue,s];a("update:model-value",l)}const r=g(()=>n.modelValue.reduce((s,l)=>(s[l]=!0,s),{}));return(s,l)=>(b(),M("div",{class:qe(["toggle-buttons",{disabled:s.disabled}])},[(b(!0),M(ve,null,Ie(s.options,u=>(b(),M("button",{key:u.value,type:"button",class:qe({selected:r.value[u.value]}),disabled:s.disabled,onClick:i=>o(u.value)},Ne(u.label),11,fT))),128))],2))}});const Xr=Te(mT,[["__scopeId","data-v-39541ccc"]]),Kn=q({__name:"ToggleRadioButtons",props:{modelValue:{},options:{},disabled:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,a=t,o=g({get(){return n.modelValue!==void 0?[n.modelValue]:[]},set(r){const s=r.filter(l=>l!==n.modelValue);a("update:model-value",s.length>0?s[0]:n.modelValue)}});return(r,s)=>(b(),be(Xr,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=l=>o.value=l),options:r.options},null,8,["modelValue","options"]))}}),vT={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10"},hT={key:0,width:"10",height:"10",stroke:"none",class:"fill-background-second"},Os=q({__name:"DeleteIcon",props:{float:{type:Boolean,default:!1}},setup(e){return(t,n)=>(b(),M("svg",vT,[t.float?ce("",!0):(b(),M("rect",hT)),C("path",{d:"M2.5 2.5L7.5 7.5M2.5 7.5L7.5 2.5","stroke-linejoin":"round",fill:"none",class:qe(t.float?"stroke-background-second":"stroke-background")},null,2)]))}}),yT=e=>(dt("data-v-69deda17"),e=e(),pt(),e),gT={key:0,class:"dialog-wrapper"},_T=yT(()=>C("div",{class:"overlay"},null,-1)),bT={class:"body-innter"},ST={class:"body-content"},wT={key:0,class:"buttons"},kT=q({__name:"DialogBase",props:{open:{type:Boolean}},emits:["update:open"],setup(e,{emit:t}){const n=t,a=()=>n("update:open",!1);return(o,r)=>o.open?(b(),M("div",gT,[_T,C("div",{class:"body-outer",onClick:ze(a,["self"])},[C("div",bT,[C("button",{type:"button",class:"close-button",onClick:a},[k(Os,{float:""})]),C("div",ST,[ot(o.$slots,"default",{},void 0,!0),o.$slots.buttons?(b(),M("div",wT,[ot(o.$slots,"buttons",{},void 0,!0)])):ce("",!0)])])])])):ce("",!0)}});const Km=Te(kT,[["__scopeId","data-v-69deda17"]]),ET=["disabled"],CT=q({__name:"DialogButton",props:{type:{default:"default"},disabled:{type:Boolean,default:!1}},setup(e){return(t,n)=>(b(),M("button",{type:"button",class:qe({[t.type]:!0}),disabled:t.disabled},[ot(t.$slots,"default",{},void 0,!0)],10,ET))}});const xo=Te(CT,[["__scopeId","data-v-738a9523"]]),MT=C("h3",null,"Select Actions",-1),OT=q({__name:"BakingConfigDialog",props:{open:{type:Boolean},actions:{},initialActionIds:{default:()=>[]}},emits:["update:open","execute"],setup(e,{emit:t}){const n=e,a=t,o=H(Lb(n.initialActionIds,!0)),r=g(()=>n.actions.filter(u=>o.value[u.id]).map(u=>u.id));function s(u){a("update:open",u)}function l(){a("execute",Object.keys(Ze(o.value,u=>u)))}return(u,i)=>(b(),be(ru,{to:"body"},[k(Km,{open:u.open,"onUpdate:open":s},{default:D(()=>[MT,(b(!0),M(ve,null,Ie(u.actions,c=>(b(),be(it,{key:c.id,modelValue:o.value[c.id],"onUpdate:modelValue":d=>o.value[c.id]=d,label:c.name},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),buttons:D(()=>[k(xo,{onClick:i[0]||(i[0]=c=>s(!1))},{default:D(()=>[$t("Cancel")]),_:1}),k(xo,{type:"primary",disabled:r.value.length===0,onClick:l},{default:D(()=>[$t("Export")]),_:1},8,["disabled"])]),_:1},8,["open"])]))}}),TT=["disabled"],AT=q({__name:"SliderInput",props:{modelValue:{default:0},integer:{type:Boolean,default:!1},min:{default:void 0},max:{default:void 0},step:{default:1},disabled:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,a=t,o=H(),r=H(),s=H(0),l=H(!1),u=H(!1),i=H(),c=g(()=>{if(n.min!==void 0&&n.max!==void 0)return n.max-n.min}),d=g(()=>Math.round(Math.log(n.step)/Math.log(10))),p=H("0");rn(()=>{p.value=n.modelValue.toString()});const f=g(()=>n.integer?parseInt(p.value):parseFloat(p.value));function m(U){return!c.value||n.max===n.min?0:(U-n.min)/(n.max-n.min)}const v=g(()=>m(n.modelValue)),y=g(()=>m(s.value)),E=g(()=>ut(0,1,v.value));function h(){var U;document.exitPointerLock(),u.value||(l.value=!0,(U=r.value)==null||U.select())}function S(U){if(!o.value)return;const I=o.value.getBoundingClientRect().width;if(I===0)return;const R=(U.p.x-U.base.x)/I;if(Math.abs(R)>0&&(u.value=!0),c.value){const B=Kt(-2,ut(0,1,y.value+R)*c.value+n.min);p.value=A(n.integer?Math.round(B):B).toString()}else{const B=(U.p.x-U.base.x)*.4;p.value=Kt(d.value,A(s.value+B*n.step)).toString()}O()}const $=sa(S,1e3/60,!0),_=hs({onMove:$,onEscape:()=>{u.value=!1,i.value=void 0}});function A(U){let I=U;return n.min!==void 0&&(I=Math.max(I,n.min)),n.max!==void 0&&(I=Math.min(I,n.max)),I}function O(){if(isNaN(f.value)){p.value=n.modelValue.toString();return}f.value!==n.modelValue&&a("update:model-value",A(f.value),i.value)}const T=()=>l.value=!0,L=()=>l.value=!1,N=U=>{u.value=!1,i.value=`slider_${Date.now()}`,s.value=n.modelValue,_.requestPointerLock(U,"move-h")};return(U,I)=>(b(),M("div",{ref_key:"el",ref:o,class:"slider-wrapper"},[C("div",{class:"slider-background",style:st({transform:`scaleX(${E.value})`})},null,4),oa(C("input",{ref_key:"inputEl",ref:r,"onUpdate:modelValue":I[0]||(I[0]=R=>p.value=R),type:"text",disabled:U.disabled,onChange:O,onFocus:T,onBlur:L},null,40,TT),[[ms,p.value]]),!l.value&&!U.disabled?(b(),M("div",{key:0,class:"slider-forward",onMouseup:h,onMousedown:ze(N,["prevent"])},null,32)):ce("",!0)],512))}});const $e=Te(AT,[["__scopeId","data-v-300dad0d"]]);function rd(e){return e[0]*e[3]-e[1]*e[2]===0?[0,0,0,0,0,0]:M_(e)}function $T(e,t,n){return ro([n?rd(n):void 0,e?rd(e):void 0,t].filter(a=>!!a))}function xT(e,t){return ro([e,t].filter(n=>!!n))}function zm(e,t,n){const a=Xu(e,t,n,void 0,void 0);return Hm(e,a,t,n)}function Xu(e,t,n,a="",o=rt){const r=t[n.id],s=sd(e,a)??rt,l=(r==null?void 0:r.boneId)||a,u=sd(e,l),i=IT(n,o),c=ro([$T(s,u,o),i].filter(d=>!!d));return{[n.id]:c,...n.children.reduce((d,p)=>(ht(p)||(d={...d,...Xu(e,t,p,l,i)}),d),{})}}function Ym(e,t,n,a){const o=$E(e,n,a);return t&&(o.transform=Wu(t)),o}function Wu(e){return G_([xa(6,e[0]),xa(6,e[1]),xa(6,e[2]),xa(6,e[3]),xa(6,e[4]),xa(6,e[5])])}function Hm(e,t,n,a){const o=Ym(e,t[a.id],n[a.id],a);return{...a,attributes:{...a.attributes,...o},children:a.children.map(r=>ht(r)?r:Hm(e,t,n,r))}}function sd(e,t){const n=e[t];return n?l1(n):void 0}function IT(e,t){return xT(t,e.attributes.transform?U_(e.attributes.transform):void 0)}function LT(e,t,n,a,o,r){return[...Array(r+1)].map((s,l)=>BT(e,t,n,a,o,l))}function PT(e,t,n,a){const o=Lm(e),r=Nu(o.bone,a),s=Z(t,(u,i)=>({...u,transform:r[i]??he()})),l=Vu(o.constraint,a);return{bones:s,constraints:Z(n,u=>{const i=l[u.id];return i?{...u,option:i}:u})}}function BT(e,t,n,a,o,r){return Xm(Wm(e,t,n,r),a,o)}function Xm(e,t,n){const a=Xu(e,t,n),o=ie(qo([n]));return Z(a,(r,s)=>Ym(e,r,t[s],o[s]))}function Wm(e,t,n,a){const o=PT(e,t,n,a);return Su(o.bones,o.constraints)}function RT(e,t){return Z(t,(n,a)=>Ts(e[a],n))}function Jm(e,t){return qm(e,VT(e,zT(e,t)))}function qm(e,t){const n=e[t.id],a=!n||t.attributes[Zm];return{...t,attributes:a?t.attributes:Ts(n,t.attributes),children:t.children.map(o=>ht(o)?o:qm(e,o))}}const jT={x:!0,y:!0,dx:!0,dy:!0,width:!0,height:!0,cx:!0,cy:!0,r:!0,rx:!0,ry:!0,fx:!0,fy:!0,"font-size":!0,"stroke-dashoffset":!0,x1:!0,y1:!0,x2:!0,y2:!0,offset:!0},NT={id:!0,"text-anchor":!0,"dominant-baseline":!0,"stroke-dasharray":!0,gradientUnits:!0,spreadMethod:!0,clipPathUnits:!0,"clip-path":!0,"stroke-linecap":!0,"stroke-linejoin":!0};function Ts(e,t){var a,o;if(e.disabled)return{fill:"none",stroke:"none"};const n={...t};if(e.transform?n.transform=Wu(a0(e.transform)):t.transform&&(n.transform=t.transform),e.fill)if(typeof e.fill=="string")n.fill=`url(#${e.fill})`;else{const r=Ao(e.fill);n.fill=r.color,n["fill-opacity"]=r.opacity}if(e.stroke)if(typeof e.stroke=="string")n.stroke=`url(#${e.stroke})`;else{const r=Ao(e.stroke);n.stroke=r.color,n["stroke-opacity"]=r.opacity}if(e["stroke-width"]&&(n["stroke-width"]=e["stroke-width"].toString()),e.attributes){const r=e.attributes;if(Object.entries(r).forEach(([s,l])=>{l!==void 0&&(jT[s]?n[s]=l.toString():NT[s]&&(n[s]=l))}),e.attributes.viewBox&&(n.viewBox=$u(e.attributes.viewBox)),e.attributes.d){const s=(o=(a=e.attributes.d[0])==null?void 0:a.trim())==null?void 0:o.toLowerCase()[0];(s==="m"||s==="l")&&(n.d=e.attributes.d.join(" "))}if(e.attributes["stop-color"]){const s=Ao(e.attributes["stop-color"]);n["stop-color"]=s.color,n["stop-opacity"]=s.opacity}}return nv(e)&&(n[Qm]=e.elementId),n}function VT(e,t){const n=Object.values(e).filter(u=>u.clone),a={},{tree:o,clonedElementIds:r}=FT(n,t,a),s=KT(e,o),l=Object.keys(r).map(u=>e[u]).concat(n);return DT(l,s,a)}function DT(e,t,n){const a=e.reduce((o,r)=>(r.elementId&&(o[r.elementId]=o[r.elementId]?[...o[r.elementId],r]:[r]),o),{});return ev(a,t,n)}const Zm="data-blendic-use-origin-id",Ko="data-blendic-use-id",Qm="data-blendic-use-id-for-g";function ld(e,t,n){return{id:`clone_${e.id}`,tag:"use",attributes:{href:`#${t}`,"xlink:href":`#${t}`,...Ts(e,n)},children:[]}}function ev(e,t,n,a={}){const o=t.attributes[Ko]||t.attributes[Qm],r=!!t.attributes[Ko],s=e[o]??[];a[o]||(a[o]=Oa(s,"parent"));const l=a[o],u=t.children.map(i=>{var p;if(ht(i))return i;const c=ev(e,i,n,a),d=(r?l[c.id]:(p=l[c.id])==null?void 0:p.filter(f=>f.id!==o))??[];return{...c,children:[...c.children,...d.map(f=>ld(f,o,n[o]))]}});return r?{...t,children:[...u,...s.filter(i=>!i.parent).map(i=>ld(i,o,n[o]))]}:{...t,children:u}}function FT(e,t,n){const a=e.map(o=>o.elementId).reduce((o,r)=>(r&&(o[r]=!0),o),{});return{tree:tv(a,t,n),clonedElementIds:a}}const GT=["transform","fill","stroke","fill-opacity","stroke-opacity","x","y"];function UT(e){const t={...e};GT.forEach(a=>{delete t[a]});const n=e.style;if(n){const a=nm(n);delete a.fill,delete a.stroke,delete a["fill-opacity"],delete a["stroke-opacity"];const o=am(a);o?t.style=o:delete t.style}return t}function tv(e,t,n){const a=t.children.map(o=>ht(o)?o:tv(e,o,n));if(e[t.id]){n[t.id]=t.attributes;const o=UT(t.attributes);return{id:`blendic_group_${t.id}`,tag:"g",attributes:{[Ko]:t.id},children:[{id:"",tag:"defs",attributes:{},children:[{id:t.id,tag:t.tag,attributes:{...o,[Zm]:t.id,id:t.id},children:a}]}]}}else return{...t,children:a}}function nv(e){return!!e.create&&!!e.elementId}function KT(e,t){const n=Ze(e,nv),a={},o=av(n,t,r=>{const s=e[r.id].elementId;a[s]||(a[s]=[]),a[s].push(r)});return ov(a,o)}function av(e,t,n){if(e[t.id]){n(t);return}else{const a=t.children.map(o=>ht(o)?o:av(e,o,n)).filter(o=>!!o);return{...t,children:a}}}function ov(e,t){const n=t.children.map(a=>ht(a)?a:ov(e,a));if(t.attributes[Ko]){const a=e[t.attributes[Ko]]??[];return{...t,children:[...n,...a]}}else return{...t,children:n}}function zT(e,t){const n=Object.values(e).filter(r=>r.create&&r.tag).map(r=>r.parent?r:{...r,parent:t.id}),a=Oa(n,"parent"),o=Z(a,r=>r.map(YT));return rv(t,o)}function YT(e){return gs({id:e.id,tag:e.tag??"rect",attributes:Ts(e,{}),children:e.text?[e.text]:[]})}function rv(e,t){const n=t[e.id]?[...e.children,...t[e.id]]:e.children;return{...e,children:[...n.map(a=>ht(a)?a:rv(a,t))]}}function el(e){return{...e,attributes:{...e.attributes,"xmlns:xlink":"http://www.w3.org/1999/xlink"}}}function HT(e){var i,c;const t=ie(e.keyframes),n=Z(ie(e.actions),d=>d.keyframes.map(p=>t[p])),a=ie(e.elements),o=Z(ie(e.actors),d=>d.elements.map(p=>a[p])),r=ie(e.nodes??[]),s=((i=e.graphs)==null?void 0:i.map(d=>eA(d,r)))??[],l=((c=e.customGraphs)==null?void 0:c.map(d=>tA(d,r)))??[],u=aA(e.nodes??[]);return{armatures:e.armatures.map(XT),bones:e.bones.map(WT),constraints:e.constraints.map(JT),armatureSelected:e.armatureSelected??[],boneSelected:e.boneSelected??[],canvasMode:e.canvasMode??"object",currentFrame:e.currentFrame??0,endFrame:e.endFrame??60,actions:e.actions.map(qT),keyframes:e.actions.flatMap(d=>n[d.id].map(ZT)),actionSelected:e.actionSelected??[],keyframeState:e.keyframeState??[],targetPropsState:e.targetPropsState??[],actors:e.actors.map(QT),elements:e.actors.flatMap(d=>kE(d.svgTree,o[d.id])),actorSelected:e.actorSelected??[],elementSelected:e.elementSelected??[],graphs:s,customGraphs:l,nodes:u,graphSelected:e.graphSelected??[],customGraphSelected:e.customGraphSelected??[],nodeSelected:e.nodeSelected??[],graphType:e.graphType??"graph"}}function XT(e){return Sl(e)}function WT(e){return Wn(e)}function JT(e){return yf(e)}function qT(e){return sf(e)}function ZT(e){return xm({name:"bone",...e})}function QT(e){return mu(e)}function eA(e,t){const n=rf(e);return{...n,nodes:n.nodes.filter(a=>!!t[a])}}function tA(e,t){const n=fu(e);return{...n,nodes:n.nodes.filter(a=>!!t[a])}}function nA(e){var a;const t=(a=zr(e.type))==null?void 0:a.struct;if(!t)return e;const n=t.create();return{...n,...e,inputs:nt({...n.inputs,...e.inputs},t.inputs),data:nt({...n.data,...e.data},t.data)}}function aA(e){return e.filter(oA).map(nA)}function oA(e){return!0}function Tr(e,t,n){var v;const a=rA(t,n),o=Math.max(((v=a.beginOutputNode)==null?void 0:v.data.max_loop)??1,1),r=Object.entries(a.inputNodes).reduce((y,[E,h])=>{var $;const S=($=h.inputs.output.from)==null?void 0:$.id;return S&&(y[E]=S),y},{}),s=Z(n,y=>{if(y.type!=="custom_input")return y;const E={...y,inputs:{...y.inputs}};return delete E.inputs.output,E}),l=sA(a),u=lA(a),i=Mu(s),c=new Set([...Object.keys(l),...Object.keys(u)]),d=Object.keys(l).map(y=>Tu(e,s,i,{id:y,key:"value",output:!0}).map(E=>{const h={...E,key:E.id};return!E.output&&!E.data?h.output=!0:E.output&&delete h.output,h})).filter(y=>y.every(E=>!Ol(E.type))).map(y=>y.filter(E=>!E.data&&c.has(E.id))).map(y=>y.map(E=>{const h={key:E.key};return E.output&&(h.output=!0),h})),p=new Map(d.filter(y=>y.some(E=>E.output)).map(y=>{const E=y.find(S=>S.output),h=y.find(S=>!S.output);return[E.key,h.key]})),f=p.size>0?(y,E)=>{const S=s[E].inputs.value.genericsType;if(Ol(S))return S;const $=p.get(E);return $?y.inputs[$].genericsType:w.UNKNOWN}:void 0,m=(y,E,h)=>Yt((f==null?void 0:f(y,h))??u[h],l[E].type??y.inputs[E].genericsType);return{struct:{create:(y={})=>({position:{x:0,y:0},...y,type:t.id,data:{max_loop:o},inputs:Z(l,E=>({value:E.default}))}),data:{max_loop:{type:w.SCALER,default:o}},inputs:l,outputs:u,computation:(y,E,h,S)=>{const $=E.data.max_loop??1;let _,A,O=y,T=!0,L=0;const N=Ze(r,(U,I)=>m(E,I,U));for(;T&&L<$;)_=h.beginNamespace(`${E.id}-l${L}`,()=>(A=Eu(S,h,uA(s,O)),iA(a.outputNodes,A))),T=a.beginOutputNode?cA(a.beginOutputNode,A):!1,O=Z(O,(U,I)=>{const R=N[I];return R?_[R]:U}),L++;return _},width:140,color:"#ff6347",textColor:"#fff",label:`${t.name}`,getOutputType:f,genericsChains:d.length>0?d:void 0,getErrors:y=>{const E=Object.entries(r).filter(([h,S])=>!m(y,h,S)).map(([h,S])=>`Type of "${l[h].label??h}" doesn't match "${u[S].label??S}"`);return E.length>0?E:void 0},custom:!0}}}function rA(e,t){return e.nodes.reduce((n,a)=>{const o=t[a];switch(o.type){case"custom_begin_input":n.beginInputNode=o;break;case"custom_input":n.inputNodes[o.id]=o;break;case"custom_begin_output":n.beginOutputNode=o;break;case"custom_output":n.outputNodes[o.id]=o;break}return n},{beginInputNode:void 0,inputNodes:{},beginOutputNode:void 0,outputNodes:{}})}function sA({beginInputNode:e,inputNodes:t}){if(!e)return{};const n=Ee(t).reduce((a,o)=>(o.inputs.input.from&&(a[o.inputs.input.from.id]=o.id),a),{});return sv(n,e.id).reduce((a,o)=>{const r=t[o];return a[o]={label:r.data.name,type:r.data.default.genericsType??w.GENERICS,default:r.data.default.value},a},{})}function lA({beginOutputNode:e,outputNodes:t}){if(!e)return{};const n=Ee(t).reduce((a,o)=>(o.inputs.output.from&&(a[o.inputs.output.from.id]=o.id),a),{});return sv(n,e.id).reduce((a,o)=>{const r=t[o];return a[o]={...r.inputs.value.genericsType??w.GENERICS,label:r.data.name},a},{})}function sv(e,t){const n=[];let a=e[t];for(;a;)n.push(a),a=e[a];return n}function uA(e,t){const n=Object.entries(t).reduce((a,[o,r])=>{const s=e[o];return s&&(a[s.id]={...s,data:{...s.data,default:{...s.data.default,value:r}}}),a},{});return{...e,...n}}function iA(e,t){return Ee(e).reduce((n,a)=>{if(a.inputs.value.from){const o=t[a.inputs.value.from.id];o&&(n[a.id]=o[a.inputs.value.from.key])}return n},{})}function cA(e,t){const n=e.inputs.loop;return n.from?!!t[n.from.id][n.from.key]:!!n.value}function lv(e,t,n){return n.nodes.reduce((a,o)=>{const r=e[o];return r&&t.has(r.type)&&(a[r.type]=!0),a},{})}function dA(e,t){const n=new Set(t.map(a=>a.id));return t.reduce((a,o)=>(a[o.id]=lv(e,n,o),a),{})}function pA(e,t){return Vr(dA(e,t))}function fA(e,t,n){const a=new Set(t.map(s=>s.id)),o=t.reduce((s,l)=>(s[l.id]=lv(e,a,l),s),{}),r=new Set(Ib(o,n));return r.add(n),t.filter(s=>!r.has(s.id)).map(s=>s.id)}function mA(e,t,n,a){const o=new Set(n),r=Ze(t,v=>o.has(v.id)&&yA(v)),s=a(),l=vA(e,t,Object.keys(r),s,a),u=hA(e,{...t,...l.customGraphNodes},Object.keys({...r,...l.customGraphNodes}),a),i={...u.customGraphNodes,...Jo(e,u.customGraphNodes)},c=fu({id:a(),nodes:Object.keys(i).sort()}),d=Tr(e,c,i),p=v=>v===c.id?d:e(v);let m=Rf({[c.id]:d},c.id,{id:s});return Object.entries(u.inputMap).forEach(([v,y])=>{m=ta(p,{[m.id]:m,[y.id]:t[y.id]},m.id,v,y.id,y.key)[m.id]??m}),{customGraph:c,customGraphNodes:i,customNode:m,updatedNodes:l.updatedNodes,deletedNodeIds:Object.keys(r)}}function vA(e,t,n,a,o){const r=n.map(p=>t[p]).sort((p,f)=>p.position.y-f.position.y).map(p=>p.id),s=new Set(r),l=Ze(t,(p,f)=>!s.has(f)),u={},i=Ze(t,(p,f)=>s.has(f)),c=At("custom_begin_output",{id:o()});i[c.id]=c;let d=c.id;return r.forEach(p=>{var v;const f=t[p],m=(v=e(f.type))==null?void 0:v.struct;m&&Object.keys(m.outputs).forEach(y=>{const E=Object.entries(Hf(l,p,y));if(E.length===0)return;const h=At("custom_output",{id:o(),inputs:{output:{from:{id:d,key:"output"}}},data:{name:m.outputs[y].label??y}});d=h.id,i[h.id]=h,Object.values(ta(e,i,h.id,"value",p,y)).forEach(S=>{i[S.id]=S}),E.forEach(([S,$])=>{const _=u[S]??t[S],A={..._,inputs:{..._.inputs,...Z($,(O,T)=>({..._.inputs[T],value:_.inputs[T].value,from:{id:a,key:h.id}}))}};u[A.id]=A})})}),{customGraphNodes:i,updatedNodes:u}}function hA(e,t,n,a){const o=n.map(d=>t[d]),r=ie(o),s={},l={};o.forEach(d=>{Object.entries(d.inputs).forEach(([p,f])=>{var m,v,y;!f.from||r[f.from.id]||(l[m=f.from.id]??(l[m]={}),(v=l[f.from.id])[y=f.from.key]??(v[y]=[]),l[f.from.id][f.from.key].push({id:d.id,key:p}))})});const u=At("custom_begin_input",{id:a()});r[u.id]=u;const i=Object.keys(l).map(d=>t[d]).sort((d,p)=>d.position.y-p.position.y).map(d=>d.id);let c=u.id;return i.forEach(d=>{const p=l[d];Object.entries(p).forEach(([f,m])=>{const v=At("custom_input",{id:a(),inputs:{input:{from:{id:c,key:"input"}}}});r[v.id]=v,c=v.id,s[v.id]={id:d,key:f},m.forEach(y=>{Object.values(Au(e,r,y.id,y.key)).forEach(E=>{r[E.id]=E}),Object.values(ta(e,r,y.id,y.key,v.id,"value")).forEach(E=>{r[E.id]=E})})})}),{customGraphNodes:r,inputMap:s}}function yA(e){return!["custom_begin_input","custom_input","custom_begin_output","custom_output","get_bone","get_object"].includes(e.type)}function gA(e,t){const n=Ee(e),a=n.length>0?n.map(i=>i.position):[{x:0,y:0}],o=Math.min(...a.map(i=>i.x)),r=Math.max(...a.map(i=>i.x)),s=Math.min(...a.map(i=>i.y)),l=Math.max(...a.map(i=>i.y)),u={x:(o+r)/2,y:(s+l)/2};return{...t,position:te(t.position,u)}}function _A(e){const t=[],n=[],a=[];Object.values(e).forEach(f=>{switch(f.type){case"custom_begin_input":case"custom_begin_output":return;case"custom_input":t.push(f);return;case"custom_output":n.push(f);return;default:a.push(f);return}});const o=new Map(Vr(t.reduce((f,m)=>{const v=m.inputs.input.from;return v&&(f[m.id]={[v.id]:!0}),f},{})).map((f,m)=>[f,m])),r=new Map(Vr(n.reduce((f,m)=>{const v=m.inputs.output.from;return v&&(f[m.id]={[v.id]:!0}),f},{})).map((f,m)=>[f,m])),s=a.length>0?a.map(f=>f.position):[{x:0,y:0}],l=Math.min(...s.map(f=>f.x)),u=Math.max(...s.map(f=>f.x)),i=Math.min(...s.map(f=>f.y)),c={x:-(l+u)/2,y:-i},d=Gr(10,l+c.x-250),p=Gr(10,u+c.x+300);return Z(e,f=>{let m;return f.type==="custom_begin_input"?m={x:d,y:0}:f.type==="custom_begin_output"?m={x:p,y:0}:o.has(f.id)?m={x:d,y:210*o.get(f.id)+100}:r.has(f.id)?m={x:p,y:160*r.get(f.id)+100}:m=te(f.position,c),{...f,position:m}})}function bA(e,t){const n=bn("Graph"),a=bn("Node"),o=bn("CustomGraph"),r=ga("Graph",()=>n.entities.value.byId),s=ga("Node",()=>_.value),l=ga("CustomGraph",()=>o.entities.value.byId),u=Hr("Graph Type",()=>"graph");e.defineReducers(n.reducers),e.defineReducers(a.reducers),e.defineReducers(o.reducers),e.defineReducers(r.reducers),e.defineReducers(s.reducers),e.defineReducers(l.reducers),e.defineReducers(u.reducers);const i=g(()=>nn(n.entities.value)),c=r.lastSelectedId,d=g(()=>r.lastSelectedId.value?n.entities.value.byId[r.lastSelectedId.value]:void 0),p=g(()=>nn(o.entities.value)),f=l.lastSelectedId,m=g(()=>l.lastSelectedId.value?o.entities.value.byId[l.lastSelectedId.value]:void 0),v=g(()=>u.state.value);function y(j){e.dispatch(u.createUpdateAction(j),[s.createClearAllAction()])}function E(){return v.value==="graph"?n:o}function h(){return v.value==="graph"?r:l}function S(){const j=h().lastSelectedId.value;return j?E().entities.value.byId[j]:void 0}const $=g(S),_=g(()=>{const j=S();if(!j)return{};const X=a.entities.value.byId;return ie(j.nodes.map(ae=>X[ae]))}),A=s.selectedMap,O=s.lastSelectedId,T=g(()=>O.value?a.entities.value.byId[O.value]:void 0),L=g(t.getArmatureId),N=g(()=>pA(a.entities.value.byId,p.value)),U=g(()=>{const j=a.entities.value.byId,X=ie(p.value);return N.value.reduce((ae,pe)=>{const Be=X[pe];return ae[pe]=Tr(I(ae),Be,ie(Be.nodes.map(De=>j[De]))),ae},{})});function I(j){return X=>j[X]?j[X]:zr(X)}const R=g(()=>()=>I(U.value)),B=g(()=>{const j=m.value;if(v.value==="graph"||!j)return p.value;const X=new Set(fA(a.entities.value.byId,p.value,j.id));return p.value.filter(ae=>X.has(ae.id))}),Y=g(()=>ie(B.value)),Ce=g(()=>{const j=B.value.length>0?[{label:"Custom",children:B.value.map(X=>({label:X.name,type:X.id}))}]:[];return v.value==="graph"?Mc.concat(j):Mc.concat([{label:"Input/Output",children:[{type:"custom_input",label:"Input"},{type:"custom_output",label:"Output"}]},...j])}),Le=g(()=>gE(R.value(),_.value)),Fe=g(()=>_E(R.value(),_.value,Le.value)),Qe=g(()=>{const j=S();if(!j)return;const X=j==null?void 0:j.armatureId,ae=em(X?t.getElementMap(X):{},t.getPosedBoneMap(),{currentFrame:t.getCurrentFrame(),endFrame:t.getEndFrame()}),pe=Eu(R.value(),ae,Fe.value);return{context:ae,nodeMap:pe}});function Me(j,X,ae,pe,Be,De,tt){n.init(Dt(j)),o.init(Dt(X)),a.init(Dt(ae)),r.restore(pe),l.restore(Be),s.restore(De),u.restore(tt)}function re(){return{graphs:i.value,customGraphs:p.value,nodes:nn(a.entities.value),graphSelected:r.createSnapshot(),customGraphSelected:l.createSnapshot(),nodeSelected:s.createSnapshot(),graphType:u.createSnapshot()}}function _e(j=""){const X=[s.createClearAllAction()],ae=j?n.entities.value.byId[j]?"graph":"custom":v.value;j&&(ae==="graph"?X.push(u.createUpdateAction("graph")):X.push(u.createUpdateAction("custom"))),ae==="graph"?e.dispatch(r.createSelectAction(j),X):e.dispatch(l.createSelectAction(j),X)}function Ve(j={}){if(!L.value)return;const X=rf({id:j.id,name:qt(j.name??"Graph",i.value.map(ae=>ae.name)),armatureId:L.value},!j.id);e.dispatch(n.createAddAction([X]),[s.createClearAllAction(),r.createSelectAction(X.id)])}function ft(){const j=d.value;j&&e.dispatch(n.createDeleteAction([j.id]),[a.createDeleteAction(j.nodes),s.createClearAllAction(),r.createClearAllAction()])}function Ot(j){c.value&&e.dispatch(n.createUpdateAction({[c.value]:j}))}function K(j="",X){!S()||!s.getSelectHistoryDryRun(j,X==null?void 0:X.shift)||e.dispatch(s.createSelectAction(j,X==null?void 0:X.shift))}function fe(j,X){const ae=Object.keys(j);s.getMultiSelectHistoryDryRun(ae,X==null?void 0:X.shift)&&e.dispatch(s.createMultiSelectAction(ae,X==null?void 0:X.shift))}function ke(){Object.keys(_.value).length!==0&&e.dispatch(s.createSelectAllAction(!0))}function Se(j,X={}){S()||(v.value==="graph"?Ve():J());const ae=S();if(!ae)return;const pe=Rf(U.value,j,X,!X.id);return e.dispatch(a.createAddAction([pe]),[E().createUpdateAction({[ae.id]:{nodes:[...ae.nodes,pe.id]}}),s.createSelectAction(pe.id)]),pe}function ne(j){return v.value==="graph"?!cE(j.type):!!Y.value[j.type]||!!zr(j.type)&&!Cu(j.type)}function we(j){const X=S(),ae=j.filter(pe=>ne(pe));!X||ae.length===0||e.dispatch(a.createAddAction(ae),[E().createUpdateAction({[X.id]:{nodes:X.nodes.concat(ae.map(pe=>pe.id))}}),s.createMultiSelectAction(ae.map(pe=>pe.id))])}function Ke(){const j=S();if(!j)return;const X=dE(R.value(),Ee(_.value),A.value),ae=ie(X.nodes),pe=nt(ae,X.updatedIds),Be=Jo(R.value(),{...ae,...pe}),De=_t(A.value,ae),tt={...pe,...Be},mt=lt=>{e.dispatch(a.createDeleteAction(Object.keys(De)),[a.createUpdateAction(lt),E().createUpdateAction({[j.id]:{nodes:j.nodes.filter(Je=>!De[Je])}}),s.createClearAllAction()])};if(v.value==="custom"&&m.value){const lt={..._t(_.value,De),...tt},Je=Tr(R.value(),{...m.value,nodes:Object.keys(lt)},lt).struct;if(xc(U.value[m.value.id].struct,Je)){const Cn=$c(R.value(),{..._t(a.entities.value.byId,De),...lt},m.value.id,Je);mt(Cn)}else mt(tt)}else mt(tt)}function x(j,X,ae){S()&&e.dispatch(a.createUpdateAction({[j]:X},ae))}function P(j){if(S())if(v.value==="custom"&&m.value){const ae=Fr(_.value,j),pe=Tr(R.value(),m.value,ae).struct;if(xc(U.value[m.value.id].struct,pe)){const Be=$c(R.value(),{...a.entities.value.byId,...ae},m.value.id,pe);e.dispatch(a.createUpdateAction({...j,...Be}))}else e.dispatch(a.createUpdateAction(j))}else e.dispatch(a.createUpdateAction(j))}function F(){const j=S();if(!j)return;const X=_.value,ae=Object.keys(A.value),pe=mA(R.value(),X,ae,We),Be=gA(Ze(X,(lt,Je)=>A.value[Je]),pe.customNode),De=_A(pe.customGraphNodes),tt={...pe.customGraph,name:V()},mt=new Set(ae);e.dispatch(a.createAddAction(Ee(De).filter(lt=>!mt.has(lt.id))),[o.createAddAction([tt]),a.createAddAction([Be]),s.createSelectAction(Be.id),E().createUpdateAction({[j.id]:{nodes:[...j.nodes.filter(lt=>!De[lt]),Be.id]}}),a.createUpdateAction({...pe.updatedNodes,...Ze(De,(lt,Je)=>mt.has(Je))})])}function V(j){return qt(j??"Custom",p.value.map(X=>X.name))}function J(j={}){const X=At("custom_begin_input",{position:{x:-200,y:0}},!0),ae=At("custom_begin_output",{position:{x:200,y:0}},!0),pe=fu({id:j.id,name:V(j.name),nodes:[X.id,ae.id]},!j.id);e.dispatch(o.createAddAction([pe]),[a.createAddAction([X,ae]),l.createSelectAction(pe.id)])}function oe(){const j=m.value;j&&e.dispatch(o.createDeleteAction([j.id]),[a.createDeleteAction(j.nodes),s.createClearAllAction(),l.createClearAllAction()])}function de(j){f.value&&e.dispatch(o.createUpdateAction({[f.value]:j}))}const ee=H(),se=H(),Q=g(()=>{if(!ee.value)return _.value;const j=Oe(ee.value.current,ee.value.start),X=A.value;return Z(_.value,(ae,pe)=>X[pe]?{...ae,position:te(ae.position,j)}:ae)}),ye=g(()=>Z(Q.value,j=>HE(R.value(),j))),Ae=g(()=>{var ae;const j=((ae=se.value)==null?void 0:ae.type)==="draft-output"?se.value.inputs.reduce((pe,Be)=>(pe[Be.nodeId]={[Be.key]:!0},pe),{}):{},X=Q.value;return Z(X,pe=>{var tt;const Be=ye.value[pe.id].inputs,De=(tt=R.value()(pe.type))==null?void 0:tt.struct;return Object.entries(pe.inputs).reduce((mt,[lt,Je])=>{var Cn;return!Je.from||!ye.value[Je.from.id]||!ye.value[Je.from.id].outputs[Je.from.key]||(Cn=j[pe.id])!=null&&Cn[lt]||(mt[lt]={from:te(X[Je.from.id].position,ye.value[Je.from.id].outputs[Je.from.key].p),to:te(pe.position,Be[lt].p),inputId:pe.id,inputKey:lt,outputId:Je.from.id,outputKey:Je.from.key,type:un(De,pe,lt)}),mt},{})})});return{initState:Me,exportState:re,graphType:v,setGraphType:y,parentGraphs:g(()=>nn(E().entities.value)),parentGraph:g(S),graphs:i,lastSelectedGraph:d,customGraphs:p,lastSelectedCustomGraph:m,selectedGraphByType:$,nodeMap:_,lastSelectedNode:T,selectedNodes:A,targetArmatureId:L,getGraphNodeModuleFn:R,nodeItemList:Ce,nodeErrorMessagesMap:Le,completedNodeMap:Fe,resolvedGraph:Qe,switchGraph:_e,addGraph:Ve,deleteGraph:ft,updateGraph:Ot,selectNode:K,selectNodes:fe,selectAllNode:ke,addNode:Se,deleteNodes:Ke,pasteNodes:we,updateNode:x,updateNodes:P,makeCustomGraphFromSelectedNodes:F,addCustomGraph:J,deleteCustomGraph:oe,updateCustomGraph:de,editMovement:g(()=>ee.value),setEditMovement:j=>{ee.value=j},draftEdge:g(()=>se.value),setDraftEdge:j=>{se.value=j},editedNodeMap:Q,edgePositionMap:ye,edgeSummaryMap:Ae}}const SA=bA(ra(),{getArmatureId:()=>Rt().lastSelectedArmatureId.value,getPosedBoneMap:()=>dn().posedBoneMap.value,getCurrentFrame:()=>cn().currentFrame.value,getEndFrame:()=>cn().endFrame.value,getElementMap:e=>{var n;const t=Pn();return((n=t.lastSelectedActor.value)==null?void 0:n.armatureId)===e?t.elementMap.value:{}}});function Zo(){return SA}function uv(e,t,n){return iv(e,t,n)}function iv(e,t,n){if(ht(e))return e;const a=Il(e.tag,om({...e.attributes,...(n==null?void 0:n[e.id])??{}}),e.children.map(o=>iv(o,t,n)));return t!=null&&t[e.id]&&a.classList.add(t[e.id]),a}const wA="http://www.w3.org/2000/svg";function Il(e,t=null,n=[]){const a=document.createElementNS(wA,e);return kA(a,t,n)}function kA(e,t=null,n=[]){for(const a in t)e.setAttribute(a,t[a].toString());return Array.isArray(n)?EA(e,n):e.textContent=n,e}function EA(e,t){const n=document.createDocumentFragment();for(let a=0;a<t.length;a++){const o=t[a];ht(o)?n.appendChild(new Text(o)):n.appendChild(o)}e.appendChild(n)}const cv="blendic-viewbox-g",CA="blendic-anim-group";function MA(e,t,n,a,o="infinite",r="discrete",s=1,l){const u=Hb(n,s,!0),i=OA(t,l),c=TA(i.id,u,l),d=qo([i]),p=d.map(T=>T.id),f=p.reduce((T,L)=>(T[L]=c.map(N=>N[L]),T),{}),m=Z(f,T=>BA(Yb(T))),v=IA(m),y=Z(m,(T,L)=>T.map(N=>{const U=v[L];return!U||!N?N:Ze(N,(I,R)=>!U[R])}).map(N=>!N||Object.keys(N).length===0?void 0:N)),E=d.reduce((T,L,N)=>{var U;return(L.id===i.id||(U=y[L.id])!=null&&U.some(I=>!!I))&&(T[L.id]=`${e}-${N}`),T},{}),h=Il("g"),S=new Map(p.map(T=>[T,NA(T,y[T],a,o,r)]).filter(([,T])=>!!T));h.classList.add(CA),h.innerHTML=p.map(T=>S.get(T)??"").join("");const $=Il("style");$.innerHTML=p.map(T=>LA(E[T],y[T])).join("")+`.${E[i.id]} * {animation-duration:${a/1e3}s;animation-iteration-count:${o};animation-timing-function:${FA(r)};}`;const _=new Set([...S.keys(),...Object.keys(v)]),A=Array.from(_).reduce((T,L)=>(T[L]=v[L]??{},S.has(L)&&(T[L].id=L),T),{}),O=uv(i,E,A);return O.prepend(h),O.prepend($),O}function OA(e,t){return{...e,attributes:dv(e.attributes,t),children:[{id:cv,tag:"g",attributes:{},children:e.children}]}}function TA(e,t,n){return t.map(a=>{var o;return{...a,[e]:dv(a[e],n),[cv]:{transform:AA((o=a[e])==null?void 0:o.viewBox,n)}}})}const Wr=100;function dv(e,t={width:Wr,height:Wr}){const n={...e};return n.viewBox=`0 0 ${t.width} ${t.height}`,delete n.width,delete n.height,n}function AA(e,t={width:Wr,height:Wr}){const n=ks(e);if(!n)return"";const a=t.width/n.width,o=t.height/n.height,r=Math.min(a,o),s=(t.width-n.width*r)/2,l=(t.height-n.height*r)/2;return Wu([r,0,0,r,s-n.x*r,l-n.y*r])}function $A(e){return e[0]===e[e.length-1]&&e.filter(t=>!!t).length===2}function Ju(e){return Array.from(new Set(e.flatMap(n=>n?Object.keys(n):[]))).reduce((n,a)=>(n[a]=e.map(o=>o==null?void 0:o[a]),n),{})}function xA(e){const t=Object.keys(e);return t.length===0?[]:e[t[0]].map((n,a)=>t.reduce((o,r)=>{const s=e[r][a];return s&&(o[r]=s),o},{}))}function IA(e){return Object.keys(e).reduce((t,n)=>{const a=Ju(e[n]),o=Object.keys(a).reduce((r,s)=>{const l=a[s];return $A(l)&&(r[s]=l[0]),r},{});return Object.keys(o).length>0&&(t[n]=o),t},{})}function LA(e,t){const n=Ze(Ju(t),(o,r)=>vv(r)),a=PA(e,xA(n));return a?a+jA(e):""}function PA(e,t){const n=Math.ceil(Math.log10(t.length)),a=fv(t.length,100).map(r=>Kt(-n,r)),o=t.map((r,s)=>RA(r,a[s])).filter(r=>r);return o.length===0?"":`@keyframes ${pv(e)} {${o.join(" ")}}`}function BA(e){const t=Array.from(new Set(e.flatMap(r=>r?Object.keys(r):[]))),n=ud(e,t),a=ud(e.concat().reverse(),t),o=e.concat();return o[0]=n,o[o.length-1]=a,o}function ud(e,t){return t.reduce((n,a)=>{const o=e.find(r=>(r==null?void 0:r[a])!==void 0);return o&&(n[a]=o[a]),n},{})}function RA(e,t){const n=Object.entries(e??{}).filter(([o])=>vv(o));if(n.length===0)return"";const a=n.map(([o,r])=>`${o}:${r};`).join("");return`${t}%{${a}}`}function jA(e){return`.${e}{animation-name:${pv(e)};}`}function pv(e){return`ba-${e}`}function NA(e,t,n,a="infinite",o="discrete"){const r=Ze(Ju(t),(s,l)=>GA(l));return Object.keys(r).map(s=>VA(e,s,r[s],n,a,o)).join("")}function fv(e,t=1){if(e===0)return[];if(e===1)return[0,t];const n=t/(e-1),a=[...Array(e)].map((o,r)=>n*r);return a[a.length-1]=t,a}function VA(e,t,n,a,o="infinite",r="discrete"){const s=fv(n.length),l=[],u=[];return n.forEach((c,d)=>{c!==void 0&&(l.push(`${s[d]}`),u.push(`${c}`))}),l.length===0?"":`<animate ${[...r!=="linear"?[["calcMode",r]]:[],["repeatCount",typeof o=="string"?"indefinite":o],["dur",`${a/1e3}s`],["href",`#${e}`],["xlink:href",`#${e}`],["attributeName",`${t}`],["keyTimes",l.join(";")],["values",u.join(";")]].map(([c,d])=>`${c}="${d}"`).join(" ")}/>`}function DA(e,t=!1){let n;return e.forEach(a=>{n?n=mv(n,a,t):n=a}),n}function mv(e,t,n=!1){const a=new Map;t.children.forEach((s,l)=>{ht(s)||a.set(s.id,[l,s])});const o=[];let r=-1;return e.children.forEach(s=>{if(ht(s))o.push(s);else{const l=a.get(s.id);if(l){const u=l[0];u-r>1&&o.push(...t.children.slice(r+1,u).filter(i=>!ht(i)).map(i=>n?Ll(i):i)),r=u,o.push(mv(s,l[1],n))}else o.push(s)}}),r<t.children.length&&o.push(...t.children.slice(r+1,t.children.length).filter(s=>!ht(s)).map(s=>n?Ll(s):s)),{id:e.id,tag:e.tag,attributes:e.attributes,children:o}}function Ll(e){return{...e,attributes:{...e.attributes,fill:"none",stroke:"none"},children:e.children.map(t=>ht(t)?t:Ll(t))}}function FA(e="discrete"){switch(e){case"linear":return"linear";default:return"step-start"}}function vv(e){return UA.has(e)}function GA(e){return KA.has(e)}const UA=new Set(["transform","fill","fill-opacity","stroke","stroke-opacity","stroke-width","stroke-dashoffset","stroke-dasharray","font-size","text-anchor","dominant-baseline","x","y","dx","dy","width","height","cx","cy","r","rx","ry","fx","fy","x1","y1","x2","y2","gradientUnits","spreadMethod","stop-color","stop-opacity","stroke-linecap","stroke-linejoin"]),KA=new Set(["d","offset"]),tl="showOpenFilePicker"in window,Pl="blendic.json";let Nn;function qu(){const e=Rt(),t=cn(),n=ra(),a=dn(),o=Pn(),r=Zo();function s(){const{armatures:h,bones:S,constraints:$,armatureSelected:_,boneSelected:A}=e.exportState(),O=t.exportState(),{actions:T,keyframes:L}=OM(O.actions,O.keyframes,h,S),{canvasMode:N}=a.exportState(),U=o.exportState(),{actors:I,elements:R}=ME(U.actors,U.elements,h,S),B=r.exportState(),Y=B.graphs,Ce=B.nodes,Le={armatures:h,bones:S,constraints:$,armatureSelected:_,boneSelected:A,canvasMode:N,currentFrame:O.currentFrame,endFrame:O.endFrame,actions:T,keyframes:L,actionSelected:O.actionSelected,keyframeState:O.keyframeState,targetPropsState:O.targetPropsState,actors:I,elements:R,actorSelected:U.actorSelected,elementSelected:U.elementSelected,graphs:Y,customGraphs:B.customGraphs,nodes:Ce,graphSelected:B.graphSelected,customGraphSelected:B.customGraphSelected,nodeSelected:B.nodeSelected,graphType:B.graphType};return JSON.stringify(Le)}function l(h){try{const S=HT(JSON.parse(h));n.clear(),e.initState(S.armatures,S.bones,S.constraints,S.armatureSelected,S.boneSelected),a.initState(S.canvasMode),t.initState(S.currentFrame,S.endFrame,S.actions,S.keyframes,S.actionSelected,S.keyframeState,S.targetPropsState),o.initState(S.actors,S.elements,S.actorSelected,S.elementSelected),r.initState(S.graphs,S.customGraphs,S.nodes,S.graphSelected,S.customGraphSelected,S.nodeSelected,S.graphType)}catch(S){console.error(S),alert("Failed to load: Invalid file.")}}async function u(){let h;try{if(tl){const S=await XA();if(!S)return;Nn=S.handle,h=S.content}else{const S=await cd();h=await dd(S)}}catch{alert("Failed to open a file.")}if(h)try{l(h)}catch{Nn=void 0,alert("Failed to load: Invalid file.")}}async function i(){const h=s();nl(h,(Nn==null?void 0:Nn.name)??Pl)}async function c(){const h=s();Nn?await gv(Nn,h):tl?Nn=await WA(h):nl(h,Pl)}async function d(h=!1){try{const S=await cd(".svg, image/svg+xml"),$=await dd(S),{actor:_,elements:A}=wE($);if(h&&o.lastSelectedActor.value){const O=OE({actor:o.lastSelectedActor.value,elements:Ee(o.elementMap.value)},{actor:_,elements:A});o.importActor(O.actor,O.elements)}else o.importActor(_,A)}catch{alert("Failed to load: Invalid file.")}}function p(h){const S=e.lastSelectedArmature.value,$=o.lastSelectedActor.value;if(!S||!$)return;const _=el($.svgTree),A=t.exportState(),O=ie(A.actions),T=ie(A.keyframes),L=h.filter(U=>O[U]).map(U=>{const I=O[U],R=I.keyframes.map(Y=>T[Y]),B=LT(Za(R),e.boneMap.value,e.constraintMap.value,o.elementMap.value,_,xM(R));return{name:I.name,attributesMapPerFrame:B}});nl(JSON.stringify({version:"1.0.0",appVersion:"0.18.1",actions:L,svgTree:_}),L.map(U=>U.name).join("_")+".json")}function f(h){return{id:h.id,tag:h.tag,index:h.index,parentId:h.parentId}}function m(h,S,$,_=!1){const A=o.lastSelectedActor.value,O=o.elementMap.value,T=_?Z(O,f):O,L=el(zm($,T,A.svgTree)),N=Ic(r.getGraphNodeModuleFn.value(),T,$,{currentFrame:h,endFrame:S},r.completedNodeMap.value);return Jm(N,L)}function v(){if(!o.lastSelectedActor.value)return;const S=m(t.currentFrame.value,t.endFrame.value,t.currentPosedBones.value),$=t.selectedAction.value,_=r.lastSelectedGraph.value,A=[$==null?void 0:$.name,_==null?void 0:_.name].filter(O=>!!O).join("_");id(new XMLSerializer().serializeToString(uv(S)),`${A}.svg`)}function y(h){if(!o.lastSelectedActor.value)return;const[$,_]=h.range==="auto"?[0,t.endFrame.value]:[h.customRange.from,Math.max(h.customRange.from,h.customRange.to)],A=_-$+1,O=[...Array(A)].map((_e,Ve)=>$+Ve),T=t.selectedAction.value,L=ie(t.keyframes.value),N=Za((T==null?void 0:T.keyframes.map(_e=>L[_e]))??[]),U=new Map(O.map(_e=>[_e,Wm(N,e.boneMap.value,e.constraintMap.value,_e)])),I=O.map(_e=>m(_e,_,U.get(_e),!0)),R=DA(I,!0);if(!R)return;const B={...ie(ws(R)),...o.elementMap.value},Y=el(R),Ce=new Map(O.map(_e=>[_e,Xm(U.get(_e),B,Y)])),Le=Z(ie(qo([R])),_e=>_e.attributes),Fe=O.map(_e=>{const Ve=Ic(r.getGraphNodeModuleFn.value(),B,U.get(_e),{currentFrame:_e,endFrame:_},r.completedNodeMap.value),ft=Ce.get(_e);return RT(Ve,Z(Le,(Ot,K)=>({...Ot,...ft[K]})))}),Qe=r.lastSelectedGraph.value,Me=h.duration==="auto"?(A-1)*100/6:h.customDuration,re=MA([T==null?void 0:T.id,Qe==null?void 0:Qe.id].filter(_e=>!!_e).join("-")??"bsvg",Y,Fe,Me,"infinite",h.interpolation,h.fps/60,h.size==="custom"?h.customSize:void 0);return h.size==="custom"&&(re.setAttribute("width",`${h.customSize.width}px`),re.setAttribute("height",`${h.customSize.height}px`)),re}function E(h){const S=y(h);if(!S)return;const $=t.selectedAction.value,_=r.lastSelectedGraph.value,A=[$==null?void 0:$.name,_==null?void 0:_.name,"anim"].filter(O=>!!O).join("-");id(new XMLSerializer().serializeToString(S),`${A}.svg`)}return{fileSystemEnable:tl,loadProjectFile:u,saveProjectFile:i,overrideProjectFile:c,loadSvgFile:d,bakeAction:p,bakeSvg:v,bakeAnimatedSvg:y,bakeAndSaveAnimatedSvg:E}}function nl(e,t){hv(URL.createObjectURL(new Blob([e],{type:"text/plain"})),t)}const zA='<?xml version = "1.0" standalone = "no"?>';function id(e,t){hv(URL.createObjectURL(new Blob([`${zA}
${e}`],{type:"image/svg+xml"})),t)}function hv(e,t){const n=document.createElement("a");n.href=e,n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function cd(e=".json, application/json"){return new Promise((t,n)=>{const a=document.createElement("input");a.type="file",a.accept=e,a.onchange=o=>{const r=o==null?void 0:o.target;r!=null&&r.files?t(r.files[0]):n()},a.click()})}function dd(e){return new Promise((t,n)=>{const a=new FileReader;a.onload=()=>{t(a.result)},a.onerror=n,a.readAsText(e)})}const yv={types:[{description:"JSON File",accept:{"text/plain":[".json"]}}]};async function YA(e){var t;try{const[n]=await window.showOpenFilePicker(e);return n}catch(n){if(n instanceof Error&&((t=n.message)!=null&&t.includes("aborted")))return;throw n}}async function HA(e){var t;try{return await window.showSaveFilePicker({...e,suggestedName:Pl})}catch(n){if(n instanceof Error&&((t=n.message)!=null&&t.includes("aborted")))return;throw n}}async function XA(){const e=await YA(yv);if(!e)return;const n=await(await e.getFile()).text();return{handle:e,content:n}}async function WA(e){const t=await HA(yv);if(t)return await gv(t,e),t}async function gv(e,t){var n;try{const a=await e.createWritable();await a.write(t),await a.close()}catch(a){if(a instanceof Error&&((n=a.message)!=null&&n.includes("not allowed")))return;throw a}}const As=e=>(dt("data-v-94cf5f9e"),e=e(),pt(),e),JA=As(()=>C("h3",null,"Animation Settings",-1)),qA={class:"content"},ZA={class:"settings"},QA=As(()=>C("span",{class:"slider-between"},"to",-1)),e$=As(()=>C("span",{class:"slider-between"},"x",-1)),t$={class:"preview"},n$={class:"preview-outer"},a$=["src"],o$={key:1},r$=As(()=>C("span",null,"Size(b): ",-1)),s$=qu(),l$=q({__name:"AnimatedSvgSettingDialog",props:{open:{type:Boolean},settings:{}},emits:["update:open","execute"],setup(e,{emit:t}){const n=e,a=H({...n.settings,customRange:{...n.settings.customRange},customSize:{...n.settings.customSize}}),o=t,r=[5,10,20,30,60].map(f=>({value:f,label:`${f}`})),s=[{value:"discrete",label:"Discrete"},{value:"linear",label:"Linear"}],l=[{value:"auto",label:"Auto"},{value:"custom",label:"Custom"}];function u(f){o("update:open",f)}function i(){o("execute",a.value)}const c=g({get(){return a.value.customDuration/1e3},set(f){a.value.customDuration=f*1e3}}),d=H();function p(){const f=s$.bakeAnimatedSvg(a.value);if(!f)return;const m=new XMLSerializer().serializeToString(f);d.value={src:"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(m))),size:new Blob([m]).size}}return vt(()=>n.open,()=>{d.value=void 0}),(f,m)=>(b(),be(ru,{to:"body"},[k(Km,{open:f.open,"onUpdate:open":u},{default:D(()=>[JA,C("div",qA,[C("div",ZA,[k(ue,{label:"FPS",between:""},{default:D(()=>[k(Kn,{modelValue:a.value.fps,"onUpdate:modelValue":m[0]||(m[0]=v=>a.value.fps=v),options:G(r)},null,8,["modelValue","options"])]),_:1}),k(ue,{label:"FPS(Custom)",between:""},{default:D(()=>[k($e,{modelValue:a.value.fps,"onUpdate:modelValue":m[1]||(m[1]=v=>a.value.fps=v),min:1,max:60,integer:"",class:"inline-slider"},null,8,["modelValue"])]),_:1}),k(ue,{label:"Interpolation",between:""},{default:D(()=>[k(Kn,{modelValue:a.value.interpolation,"onUpdate:modelValue":m[2]||(m[2]=v=>a.value.interpolation=v),options:s},null,8,["modelValue"])]),_:1}),k(ue,{label:"Range",between:""},{default:D(()=>[k(Kn,{modelValue:a.value.range,"onUpdate:modelValue":m[3]||(m[3]=v=>a.value.range=v),options:l},null,8,["modelValue"])]),_:1}),k(ue,{label:"Custom Range",between:""},{default:D(()=>[k($e,{modelValue:a.value.customRange.from,"onUpdate:modelValue":m[4]||(m[4]=v=>a.value.customRange.from=v),min:0,disabled:a.value.range!=="custom",class:"inline-slider"},null,8,["modelValue","disabled"]),QA,k($e,{modelValue:a.value.customRange.to,"onUpdate:modelValue":m[5]||(m[5]=v=>a.value.customRange.to=v),min:0,disabled:a.value.range!=="custom",class:"inline-slider"},null,8,["modelValue","disabled"])]),_:1}),k(ue,{label:"Duration",between:""},{default:D(()=>[k(Kn,{modelValue:a.value.duration,"onUpdate:modelValue":m[6]||(m[6]=v=>a.value.duration=v),options:l},null,8,["modelValue"])]),_:1}),k(ue,{label:"Custom Duration (s)",between:""},{default:D(()=>[k($e,{modelValue:c.value,"onUpdate:modelValue":m[7]||(m[7]=v=>c.value=v),min:0,step:.1,disabled:a.value.duration!=="custom",class:"inline-slider"},null,8,["modelValue","disabled"])]),_:1}),k(ue,{label:"Size",between:""},{default:D(()=>[k(Kn,{modelValue:a.value.size,"onUpdate:modelValue":m[8]||(m[8]=v=>a.value.size=v),options:l},null,8,["modelValue"])]),_:1}),k(ue,{label:"Custom Size (px)",between:""},{default:D(()=>[k($e,{modelValue:a.value.customSize.width,"onUpdate:modelValue":m[9]||(m[9]=v=>a.value.customSize.width=v),min:0,disabled:a.value.size!=="custom",class:"inline-slider"},null,8,["modelValue","disabled"]),e$,k($e,{modelValue:a.value.customSize.height,"onUpdate:modelValue":m[10]||(m[10]=v=>a.value.customSize.height=v),min:0,disabled:a.value.size!=="custom",class:"inline-slider"},null,8,["modelValue","disabled"])]),_:1})]),C("div",t$,[C("div",null,[k(xo,{onClick:p},{default:D(()=>[$t(Ne(d.value?"Reset":"Preview"),1)]),_:1})]),C("div",n$,[d.value?(b(),M("img",{key:0,src:d.value.src,alt:"Preview"},null,8,a$)):(b(),M("p",o$,"None"))]),C("p",null,[r$,C("span",null,Ne(d.value?d.value.size.toLocaleString():"-"),1)])])])]),buttons:D(()=>[k(xo,{onClick:m[11]||(m[11]=v=>u(!1))},{default:D(()=>[$t("Cancel")]),_:1}),k(xo,{type:"primary",onClick:i},{default:D(()=>[$t("Export")]),_:1})]),_:1},8,["open"])]))}});const u$=Te(l$,[["__scopeId","data-v-94cf5f9e"]]),$s=e=>(dt("data-v-ba382ba6"),e=e(),pt(),e),i$={class:"file-panel"},c$=$s(()=>C("h3",null,"Project",-1)),d$={class:"menu-list"},p$=$s(()=>C("h3",null,"Import",-1)),f$={class:"menu-list"},m$=$s(()=>C("h3",null,"Export",-1)),v$={class:"menu-list"},h$=["disabled"],y$=$s(()=>C("h3",null,"App",-1)),pr=qu(),g$=Rt(),_$=cn(),b$=q({__name:"FilePanel",setup(e){const t=H(!0),n=H(!1),a=H([]),o=g(()=>_$.actions.value.filter($=>{var _;return((_=g$.lastSelectedArmature.value)==null?void 0:_.id)===$.armatureId}));function r($){n.value=!1,a.value=$,pr.bakeAction($)}const s=H(!1),{settings:l}=Mt();function u($){l.animationExportingSettings=$,pr.bakeAndSaveAnimatedSvg($),s.value=!1}const i=[{value:"auto",label:"Auto"},{value:"light",label:"Light"},{value:"dark",label:"Dark"}],c=g({get(){return l.colorTheme},set($){l.colorTheme=$}}),d="0.18.1",{fileSystemEnable:p,loadProjectFile:f,saveProjectFile:m,overrideProjectFile:v,bakeSvg:y}=pr;function E(){pr.loadSvgFile(t.value)}function h(){n.value=!0}function S(){s.value=!0}return($,_)=>(b(),M("div",i$,[c$,C("div",d$,[C("button",{type:"button",onClick:_[0]||(_[0]=(...A)=>G(f)&&G(f)(...A))},"Open"),C("button",{type:"button",onClick:_[1]||(_[1]=(...A)=>G(v)&&G(v)(...A))},"Save"),G(p)?(b(),M("button",{key:0,type:"button",onClick:_[2]||(_[2]=(...A)=>G(m)&&G(m)(...A))}," Save as.. ")):ce("",!0)]),p$,C("div",f$,[C("button",{type:"button",onClick:E},"SVG"),k(it,{modelValue:t.value,"onUpdate:modelValue":_[3]||(_[3]=A=>t.value=A),label:"Inherit weight"},null,8,["modelValue"])]),m$,C("div",v$,[C("button",{type:"button",disabled:o.value.length===0,onClick:h}," Baked Action ",8,h$),C("button",{type:"button",onClick:_[4]||(_[4]=(...A)=>G(y)&&G(y)(...A))},"Posed SVG"),C("button",{type:"button",onClick:S}," Animated SVG ")]),y$,k(ue,{label:"Theme",between:""},{default:D(()=>[k(Kn,{modelValue:c.value,"onUpdate:modelValue":_[5]||(_[5]=A=>c.value=A),options:i},null,8,["modelValue"])]),_:1}),k(ue,{label:"Version",between:""},{default:D(()=>[C("span",null,Ne(G(d)),1)]),_:1}),k(OT,{open:n.value,"onUpdate:open":_[6]||(_[6]=A=>n.value=A),actions:o.value,onExecute:r},null,8,["open","actions"]),k(u$,{open:s.value,"onUpdate:open":_[7]||(_[7]=A=>s.value=A),settings:G(l).animationExportingSettings,onExecute:u},null,8,["open","settings"])]))}});const S$=Te(b$,[["__scopeId","data-v-ba382ba6"]]),Ia={};function _v(e,t){const n=t.provide??oo;t.getSelectedMap&&n("getSelectedMap",t.getSelectedMap),t.getEditable&&n("getEditable",t.getEditable),t.updateName&&n("updateName",t.updateName),t.onClickElement&&n("onClickElement",t.onClickElement),Ia[e]??(Ia[e]=H({})),n("getClosedMap",()=>Ia[e].value),n("setClosed",(a,o)=>{o?Ia[e].value[a]=o:delete Ia[e].value[a]})}function w$(e=Ma){return{getSelectedMap:e("getSelectedMap",()=>({})),getEditable:e("getEditable",()=>!1),updateName:e("updateName",()=>{}),onClickElement:e("onClickElement",()=>{}),getClosedMap:e("getClosedMap",()=>({})),setClosed:e("setClosed",()=>{})}}const k$=["data-scroll_anchor"],E$={key:1,class:"spacer",style:{width:"16px"}},C$={class:"children-space"},M$={name:"TreeNodeVue"},O$=q({...M$,props:{node:{},nestIndex:{default:0}},emits:["expand-all"],setup(e,{emit:t}){const n=e,a=t,o=g(()=>n.node.children),{getEditable:r,getSelectedMap:s,updateName:l,onClickElement:u,getClosedMap:i,setClosed:c}=w$(),d=g(()=>!!s()[n.node.id]);vt(d,(A,O)=>{A&&!O&&a("expand-all")});function p(){c(n.node.id,!1),a("expand-all")}const f=g(()=>!!i()[n.node.id]);function m(){c(n.node.id,!f.value)}const v=H(!1),y=g(r),E=g(()=>n.node.children.length>0),h=A=>u(n.node.id,gn(A));function S(){y.value&&(v.value=!0)}function $(){v.value=!1}function _(A){y.value&&(l(n.node.id,A),v.value=!1)}return(A,O)=>{const T=eu("TreeNodeVue");return b(),M("div",{class:qe(["tree-node",{"has-children":E.value}])},[C("div",{"data-scroll_anchor":A.node.id,class:"node-view"},[C("div",{class:"spacer",style:st({width:`${A.nestIndex*8}px`})},null,4),E.value?(b(),M("button",{key:0,type:"button",class:"toggle-closed",onClick:m},[k(Rr,{flipped:!f.value,right:f.value},null,8,["flipped","right"])])):(b(),M("div",E$)),v.value?(b(),be(Hn,{key:2,"model-value":A.node.name,autofocus:"","onUpdate:modelValue":_,onBlur:$},null,8,["model-value"])):(b(),M("a",{key:3,class:qe(["node-name",{selected:d.value}]),onClick:ze(h,["left","prevent"]),onDblclick:ze(S,["prevent"])},Ne(A.node.name),35))],8,k$),oa(C("div",C$,[(b(!0),M(ve,null,Ie(o.value,L=>(b(),be(T,{key:L.id,node:L,"nest-index":A.nestIndex+1,onExpandAll:p},null,8,["node","nest-index"]))),128))],512),[[Rp,!f.value]])],2)}}});const bv=Te(O$,[["__scopeId","data-v-6f8af9f5"]]),Sv=q({__name:"TreeContainer",props:{scrollTarget:{}},setup(e){const t=e,n=H();return rn(async()=>{var a,o;t.scrollTarget&&n.value&&(await Ea(),(o=(a=n.value)==null?void 0:a.querySelector(`[data-scroll_anchor="${t.scrollTarget}"]`))==null||o.scrollIntoView({behavior:"smooth",block:"center"}))}),(a,o)=>(b(),M("div",{ref_key:"scrollContainer",ref:n},[ot(a.$slots,"default")],512))}}),Nt=Rt(),T$=dn(),A$=q({__name:"ArmatureTreePanel",setup(e){const t=g(()=>{if(Nt.lastSelectedArmature.value)return{id:Nt.lastSelectedArmature.value.id,name:Nt.lastSelectedArmature.value.name,children:bu(Nt.boneMap.value)}}),n=g(()=>Nt.lastSelectedBoneId.value);function a(r,s){Nt.lastSelectedArmature.value&&(r===Nt.lastSelectedArmature.value.id?Nt.selectAllBones():Nt.selectBone(r,{head:!0,tail:!0},s,T$.canvasMode.value==="pose"))}function o(r,s){Nt.lastSelectedArmature.value&&(r===Nt.lastSelectedArmature.value.id?Nt.updateArmatureName(s):Nt.updateBone({name:s}))}return _v("armature",{onClickElement:a,getSelectedMap:()=>Z(Nt.selectedBones.value,()=>!0),getEditable:()=>!0,updateName:o}),(r,s)=>t.value?(b(),be(Sv,{key:0,"scroll-target":n.value,class:"tree-view"},{default:D(()=>[k(bv,{node:t.value},null,8,["node"])]),_:1},8,["scroll-target"])):ce("",!0)}}),fr=Pn(),$$=q({__name:"ElementTreePanel",setup(e){const t=g(()=>{const a=fr.lastSelectedActor.value;if(a)return Qf(a.svgTree)}),n=g(()=>fr.lastSelectedElementId.value);return _v("element",{onClickElement:fr.selectElement,getSelectedMap:()=>fr.selectedElements.value}),(a,o)=>t.value?(b(),be(Sv,{key:0,"scroll-target":n.value,class:"tree-view"},{default:D(()=>[k(bv,{node:t.value},null,8,["node"])]),_:1},8,["scroll-target"])):ce("",!0)}}),x$=dn(),I$=q({__name:"TreePanel",setup(e){const t=x$.canvasMode,n=g(()=>{switch(t.value){case"weight":return"Element Tree";default:return"Armature Tree"}});return(a,o)=>(b(),M("div",null,[C("h3",null,Ne(n.value),1),G(t)==="weight"?(b(),be($$,{key:0})):(b(),be(A$,{key:1}))]))}});const L$=Te(I$,[["__scopeId","data-v-bb8aed9a"]]),P$={class:"select-root"},B$=["disabled"],R$={key:0,value:""},j$=["value"],N$=q({__name:"SelectField",props:{options:{type:Array,default:()=>[]},modelValue:{type:[Number,String],default:""},placeholder:{type:String,default:"None"},noPlaceholder:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,a=t,o=g({get(){return n.modelValue},set(r){a("update:model-value",r)}});return(r,s)=>(b(),M("span",P$,[oa(C("select",{"onUpdate:modelValue":s[0]||(s[0]=l=>o.value=l),disabled:e.disabled},[e.noPlaceholder?ce("",!0):(b(),M("option",R$,"-- "+Ne(e.placeholder)+" --",1)),(b(!0),M(ve,null,Ie(e.options,l=>(b(),M("option",{key:l.value,value:l.value},Ne(l.label),9,j$))),128))],8,B$),[[Sg,o.value]])]))}});const Lt=Te(N$,[["__scopeId","data-v-fdeefc82"]]),V$=q({__name:"SelectButton",props:{options:{default:()=>[]}},emits:["select"],setup(e,{emit:t}){const n=t,a=H();async function o(){n("select",a.value),await Ea(),a.value=void 0}return(r,s)=>(b(),be(Lt,{modelValue:a.value,"onUpdate:modelValue":[s[0]||(s[0]=l=>a.value=l),o],options:r.options,placeholder:"Add"},null,8,["modelValue","options"]))}});const D$={},F$={class:"field-with-button"},G$={class:"field"},U$={class:"button"};function K$(e,t){return b(),M("div",F$,[C("div",G$,[ot(e.$slots,"default",{},void 0,!0)]),C("div",U$,[ot(e.$slots,"button",{},void 0,!0)])])}const z$=Te(D$,[["render",K$],["__scopeId","data-v-4d2495ef"]]),Y$={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},H$={transform:"rotate(45 10 10)"},X$=q({__name:"EyedropperIcon",props:{highlight:{type:Boolean,default:!1}},setup(e){return(t,n)=>(b(),M("svg",Y$,[C("g",H$,[C("path",{d:"M8 2 A2 2 0 0 1 12 2 L12 5 L13 5 L13 7 L7 7 L7 5 L8 5z","stroke-linejoin":"round",stroke:"none",class:qe(t.highlight?"fill-highlight":"fill-text")},null,2),C("path",{d:"M11.5 7 L11.5 17 L10 19 L8.5 17 L8.5 7","stroke-linejoin":"round",fill:"none",class:qe(t.highlight?"stroke-highlight":"stroke-text")},null,2)])]))}}),an=q({__name:"SelectWithPicker",props:{modelValue:{},name:{},options:{}},emits:["update:model-value","start-pick"],setup(e,{emit:t}){const n=e,a=t,o=g({get:()=>n.modelValue,set:l=>{a("update:model-value",l)}}),r=H(!1);function s(){r.value?a("start-pick"):a("start-pick",{name:n.name,callback:l=>{n.options.some(u=>u.value===l)&&a("update:model-value",l),r.value=!1},onstart:()=>{r.value=!0},oncancel:()=>{r.value=!1}})}return(l,u)=>(b(),be(z$,null,{button:D(()=>[C("button",{type:"button",onClick:s},[k(X$,{highlight:r.value},null,8,["highlight"])])]),default:D(()=>[k(Lt,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=i=>o.value=i),options:l.options},null,8,["modelValue","options"])]),_:1}))}}),W$={xmlns:"http://www.w3.org/2000/svg",viewBox:"-8 -8 16 16"},J$=["fill"],q$=["fill"],Z$=["stroke"],Q$=q({__name:"KeyDot",props:{status:{default:"none"},updated:{type:Boolean,default:!1}},emits:["create","delete"],setup(e,{emit:t}){const n=e,a=t;function o(){if(n.updated){a("create");return}switch(n.status){case"none":case"others":a("create");return;case"self":a("delete");return}}const r=g(()=>n.updated?"#ffc0cb":"#aaa");return(s,l)=>(b(),M("button",{type:"button",onClick:o},[(b(),M("svg",W$,[s.status==="none"?(b(),M("circle",{key:0,r:"2.5",fill:r.value},null,8,J$)):s.status==="others"?(b(),M("path",{key:1,d:"M0,-5 L5,0 L0,5 L-5,0z",stroke:"none",fill:r.value},null,8,q$)):(b(),M("path",{key:2,d:"M0,-5 L5,0 L0,5 L-5,0z","stroke-linejoin":"round","stroke-width":"1.5",stroke:r.value,fill:"none"},null,8,Z$))]))]))}});const Jt=Te(Q$,[["__scopeId","data-v-f75d19ff"]]),go="100px",ex=q({__name:"IKOptionField",props:{modelValue:{},propsUpdatedStatus:{default:()=>({})},boneOptions:{default:()=>[]},keyframeStatusMap:{default:()=>({})},createKeyframe:{type:Function,default:()=>{}},deleteKeyframe:{type:Function,default:()=>{}}},emits:["update:model-value","start-pick-bone"],setup(e,{emit:t}){const n=e,a=t;function o(p,f){a("update:model-value",{...n.modelValue,...p},f)}function r(p){o({targetId:p})}function s(p){o({poleTargetId:p})}function l(p){o({smoothJoint:p})}function u(p,f){o({chainLength:p},f)}function i(p,f){o({iterations:p},f)}function c(p,f){o({influence:p},f)}function d(p){a("start-pick-bone",p)}return(p,f)=>(b(),M("div",null,[k(ue,{label:"Target","label-width":go},{default:D(()=>[k(an,{"model-value":p.modelValue.targetId,options:p.boneOptions,name:"targetId","onUpdate:modelValue":r,onStartPick:d},null,8,["model-value","options"])]),_:1}),k(ue,{label:"Pole Target","label-width":go},{default:D(()=>[k(an,{"model-value":p.modelValue.poleTargetId,options:p.boneOptions,name:"poleTargetId","onUpdate:modelValue":s,onStartPick:d},null,8,["model-value","options"])]),_:1}),k(ue,null,{default:D(()=>[k(it,{"model-value":p.modelValue.smoothJoint,label:"Smooth Joint","onUpdate:modelValue":l},null,8,["model-value"])]),_:1}),k(ue,{label:"Chain Length","label-width":go},{default:D(()=>[k($e,{"model-value":p.modelValue.chainLength,integer:"",min:0,"onUpdate:modelValue":u},null,8,["model-value"])]),_:1}),k(ue,{label:"Iterations","label-width":go},{default:D(()=>[k($e,{"model-value":p.modelValue.iterations,integer:"",min:0,max:500,"onUpdate:modelValue":i},null,8,["model-value"])]),_:1}),k(ue,{label:"Influence","label-width":go},{default:D(()=>[k($e,{"model-value":p.modelValue.influence,min:0,max:1,"onUpdate:modelValue":c},null,8,["model-value"]),k(Jt,{status:p.keyframeStatusMap.influence,updated:p.propsUpdatedStatus.influence,onCreate:f[0]||(f[0]=m=>p.createKeyframe("influence")),onDelete:f[1]||(f[1]=m=>p.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1})]))}}),Ln=[{value:"world",label:"World"},{value:"local",label:"Local"}],tx={class:"inline"},nx={class:"inline"},ax={class:"inline"},ox={class:"inline"},La="90px",rx=q({__name:"LimitLocationOptionField",props:{modelValue:{},propsUpdatedStatus:{default:()=>({})},boneOptions:{default:()=>[]},keyframeStatusMap:{default:()=>({})},createKeyframe:{type:Function,default:()=>{}},deleteKeyframe:{type:Function,default:()=>{}}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,a=t;function o(v,y){a("update:model-value",{...n.modelValue,...v},y)}function r(v){o({spaceType:v})}function s(v,y){o({minX:v},y)}function l(v,y){o({maxX:v},y)}function u(v,y){o({minY:v},y)}function i(v,y){o({maxY:v},y)}function c(v,y){o({useMinX:v},y)}function d(v,y){o({useMaxX:v},y)}function p(v,y){o({useMinY:v},y)}function f(v,y){o({useMaxY:v},y)}function m(v,y){o({influence:v},y)}return(v,y)=>(b(),M("div",null,[k(ue,{label:"Space Type","label-width":La},{default:D(()=>[k(Lt,{"model-value":v.modelValue.spaceType,options:G(Ln),"no-placeholder":"","onUpdate:modelValue":r},null,8,["model-value","options"])]),_:1}),k(ue,{label:"Min X","label-width":La},{default:D(()=>[C("div",tx,[k(it,{"model-value":v.modelValue.useMinX,"onUpdate:modelValue":c},null,8,["model-value"]),k($e,{"model-value":v.modelValue.minX,"onUpdate:modelValue":s},null,8,["model-value"])])]),_:1}),k(ue,{label:"Min Y","label-width":La},{default:D(()=>[C("div",nx,[k(it,{"model-value":v.modelValue.useMinY,"onUpdate:modelValue":p},null,8,["model-value"]),k($e,{"model-value":v.modelValue.minY,"onUpdate:modelValue":u},null,8,["model-value"])])]),_:1}),k(ue,{label:"Max X","label-width":La},{default:D(()=>[C("div",ax,[k(it,{"model-value":v.modelValue.useMaxX,"onUpdate:modelValue":d},null,8,["model-value"]),k($e,{"model-value":v.modelValue.maxX,"onUpdate:modelValue":l},null,8,["model-value"])])]),_:1}),k(ue,{label:"Max Y","label-width":La},{default:D(()=>[C("div",ox,[k(it,{"model-value":v.modelValue.useMaxY,"onUpdate:modelValue":f},null,8,["model-value"]),k($e,{"model-value":v.modelValue.maxY,"onUpdate:modelValue":i},null,8,["model-value"])])]),_:1}),k(ue,{label:"Influence","label-width":La},{default:D(()=>[k($e,{"model-value":v.modelValue.influence,min:0,max:1,"onUpdate:modelValue":m},null,8,["model-value"]),k(Jt,{status:v.keyframeStatusMap.influence,updated:v.propsUpdatedStatus.influence,onCreate:y[0]||(y[0]=E=>v.createKeyframe("influence")),onDelete:y[1]||(y[1]=E=>v.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1})]))}});const sx=Te(rx,[["__scopeId","data-v-05ba7f77"]]),lx={class:"inline"},ux={class:"inline"},mr="100px",ix=q({__name:"LimitRotationOptionField",props:{modelValue:{},propsUpdatedStatus:{default:()=>({})},boneOptions:{default:()=>[]},keyframeStatusMap:{default:()=>({})},createKeyframe:{type:Function,default:()=>{}},deleteKeyframe:{type:Function,default:()=>{}}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,a=t;function o(d,p){a("update:model-value",{...n.modelValue,...d},p)}function r(d){o({spaceType:d})}function s(d,p){o({min:d},p)}function l(d,p){o({max:d},p)}function u(d,p){o({useMin:d},p)}function i(d,p){o({useMax:d},p)}function c(d,p){o({influence:d},p)}return(d,p)=>(b(),M("div",null,[k(ue,{label:"Space Type","label-width":mr},{default:D(()=>[k(Lt,{"model-value":d.modelValue.spaceType,options:G(Ln),"no-placeholder":"","onUpdate:modelValue":r},null,8,["model-value","options"])]),_:1}),k(ue,{label:"Min","label-width":mr},{default:D(()=>[C("div",lx,[k(it,{"model-value":d.modelValue.useMin,"onUpdate:modelValue":u},null,8,["model-value"]),k($e,{"model-value":d.modelValue.min,"onUpdate:modelValue":s},null,8,["model-value"])])]),_:1}),k(ue,{label:"Max","label-width":mr},{default:D(()=>[C("div",ux,[k(it,{"model-value":d.modelValue.useMax,"onUpdate:modelValue":i},null,8,["model-value"]),k($e,{"model-value":d.modelValue.max,"onUpdate:modelValue":l},null,8,["model-value"])])]),_:1}),k(ue,{label:"Influence","label-width":mr},{default:D(()=>[k($e,{"model-value":d.modelValue.influence,min:0,max:1,"onUpdate:modelValue":c},null,8,["model-value"]),k(Jt,{status:d.keyframeStatusMap.influence,updated:d.propsUpdatedStatus.influence,onCreate:p[0]||(p[0]=f=>d.createKeyframe("influence")),onDelete:p[1]||(p[1]=f=>d.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1})]))}});const cx=Te(ix,[["__scopeId","data-v-915f3e2c"]]),dx={class:"inline"},px={class:"inline"},fx={class:"inline"},mx={class:"inline"},vx=q({__name:"LimitScaleOptionField",props:{modelValue:{},propsUpdatedStatus:{default:()=>({})},boneOptions:{default:()=>[]},keyframeStatusMap:{default:()=>({})},createKeyframe:{type:Function,default:()=>{}},deleteKeyframe:{type:Function,default:()=>{}}},emits:["update:model-value"],setup(e,{emit:t}){const n=t,a="90px";function o(v,y){n("update:model-value",v,y)}function r(v){o({spaceType:v})}function s(v,y){o({minX:v},y)}function l(v,y){o({maxX:v},y)}function u(v,y){o({minY:v},y)}function i(v,y){o({maxY:v},y)}function c(v,y){o({useMinX:v},y)}function d(v,y){o({useMaxX:v},y)}function p(v,y){o({useMinY:v},y)}function f(v,y){o({useMaxY:v},y)}function m(v,y){o({influence:v},y)}return(v,y)=>(b(),M("div",null,[k(ue,{label:"Space Type","label-width":a},{default:D(()=>[k(Lt,{"model-value":v.modelValue.spaceType,options:G(Ln),"no-placeholder":"","onUpdate:modelValue":r},null,8,["model-value","options"])]),_:1}),k(ue,{label:"Min X","label-width":a},{default:D(()=>[C("div",dx,[k(it,{"model-value":v.modelValue.useMinX,"onUpdate:modelValue":c},null,8,["model-value"]),k($e,{"model-value":v.modelValue.minX,step:.1,"onUpdate:modelValue":s},null,8,["model-value"])])]),_:1}),k(ue,{label:"Min Y","label-width":a},{default:D(()=>[C("div",px,[k(it,{"model-value":v.modelValue.useMinY,"onUpdate:modelValue":p},null,8,["model-value"]),k($e,{"model-value":v.modelValue.minY,step:.1,"onUpdate:modelValue":u},null,8,["model-value"])])]),_:1}),k(ue,{label:"Max X","label-width":a},{default:D(()=>[C("div",fx,[k(it,{"model-value":v.modelValue.useMaxX,"onUpdate:modelValue":d},null,8,["model-value"]),k($e,{"model-value":v.modelValue.maxX,step:.1,"onUpdate:modelValue":l},null,8,["model-value"])])]),_:1}),k(ue,{label:"Max Y","label-width":a},{default:D(()=>[C("div",mx,[k(it,{"model-value":v.modelValue.useMaxY,"onUpdate:modelValue":f},null,8,["model-value"]),k($e,{"model-value":v.modelValue.maxY,step:.1,"onUpdate:modelValue":i},null,8,["model-value"])])]),_:1}),k(ue,{label:"Influence","label-width":a},{default:D(()=>[k($e,{"model-value":v.modelValue.influence,min:0,max:1,"onUpdate:modelValue":m},null,8,["model-value"]),k(Jt,{status:v.keyframeStatusMap.influence,updated:v.propsUpdatedStatus.influence,onCreate:y[0]||(y[0]=E=>v.createKeyframe("influence")),onDelete:y[1]||(y[1]=E=>v.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1})]))}});const hx=Te(vx,[["__scopeId","data-v-316eaf35"]]),Pa="100px",yx=q({__name:"CopyLocationOptionField",props:{modelValue:{},propsUpdatedStatus:{default:()=>({})},boneOptions:{default:()=>[]},keyframeStatusMap:{default:()=>({})},createKeyframe:{type:Function,default:()=>{}},deleteKeyframe:{type:Function,default:()=>{}}},emits:["update:model-value","start-pick-bone"],setup(e,{emit:t}){const n=e,a=t;function o(f,m){a("update:model-value",{...n.modelValue,...f},m)}function r(f){o({targetId:f})}function s(f){o({targetSpaceType:f})}function l(f){o({ownerSpaceType:f})}function u(f,m){o({influence:f},m)}const i=[{value:"x",label:"X"},{value:"y",label:"Y"}],c=g({get(){return[n.modelValue.copyX?"x":"",n.modelValue.copyY?"y":""].filter(f=>f)},set(f){o({copyX:f.includes("x"),copyY:f.includes("y")})}}),d=g({get(){return[n.modelValue.invertX?"x":"",n.modelValue.invertY?"y":""].filter(f=>f)},set(f){o({invertX:f.includes("x"),invertY:f.includes("y")})}});function p(f){a("start-pick-bone",f)}return(f,m)=>(b(),M("div",null,[k(ue,{label:"Target","label-width":Pa},{default:D(()=>[k(an,{"model-value":f.modelValue.targetId,options:f.boneOptions,name:"targetId","onUpdate:modelValue":r,onStartPick:p},null,8,["model-value","options"])]),_:1}),k(ue,{label:"Target Space","label-width":Pa},{default:D(()=>[k(Lt,{"model-value":f.modelValue.targetSpaceType,options:G(Ln),"no-placeholder":"","onUpdate:modelValue":s},null,8,["model-value","options"])]),_:1}),k(ue,{label:"Owner Space","label-width":Pa},{default:D(()=>[k(Lt,{"model-value":f.modelValue.ownerSpaceType,options:G(Ln),"no-placeholder":"","onUpdate:modelValue":l},null,8,["model-value","options"])]),_:1}),k(ue,{label:"Axis","label-width":Pa},{default:D(()=>[k(Xr,{modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=v=>c.value=v),options:i},null,8,["modelValue"])]),_:1}),k(ue,{label:"Invert Axis","label-width":Pa},{default:D(()=>[k(Xr,{modelValue:d.value,"onUpdate:modelValue":m[1]||(m[1]=v=>d.value=v),options:i},null,8,["modelValue"])]),_:1}),k(ue,{label:"Influence","label-width":Pa},{default:D(()=>[k($e,{"model-value":f.modelValue.influence,min:0,max:1,"onUpdate:modelValue":u},null,8,["model-value"]),k(Jt,{status:f.keyframeStatusMap.influence,updated:f.propsUpdatedStatus.influence,onCreate:m[2]||(m[2]=v=>f.createKeyframe("influence")),onDelete:m[3]||(m[3]=v=>f.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1})]))}}),vr="100px",gx=q({__name:"CopyRotationOptionField",props:{modelValue:{},propsUpdatedStatus:{default:()=>({})},boneOptions:{default:()=>[]},keyframeStatusMap:{default:()=>({})},createKeyframe:{type:Function,default:()=>{}},deleteKeyframe:{type:Function,default:()=>{}}},emits:["update:model-value","start-pick-bone"],setup(e,{emit:t}){const n=e,a=t;function o(d,p){a("update:model-value",{...n.modelValue,...d},p)}function r(d){o({targetId:d})}function s(d){o({targetSpaceType:d})}function l(d){o({ownerSpaceType:d})}function u(d,p){o({influence:d},p)}function i(d){o({invert:d})}function c(d){a("start-pick-bone",d)}return(d,p)=>(b(),M("div",null,[k(ue,{label:"Target","label-width":vr},{default:D(()=>[k(an,{"model-value":d.modelValue.targetId,options:d.boneOptions,name:"targetId","onUpdate:modelValue":r,onStartPick:c},null,8,["model-value","options"])]),_:1}),k(ue,{label:"Target Space","label-width":vr},{default:D(()=>[k(Lt,{"model-value":d.modelValue.targetSpaceType,options:G(Ln),"no-placeholder":"","onUpdate:modelValue":s},null,8,["model-value","options"])]),_:1}),k(ue,{label:"Owner Space","label-width":vr},{default:D(()=>[k(Lt,{"model-value":d.modelValue.ownerSpaceType,options:G(Ln),"no-placeholder":"","onUpdate:modelValue":l},null,8,["model-value","options"])]),_:1}),k(ue,null,{default:D(()=>[k(it,{"model-value":d.modelValue.invert,label:"Invert","onUpdate:modelValue":i},null,8,["model-value"])]),_:1}),k(ue,{label:"Influence","label-width":vr},{default:D(()=>[k($e,{"model-value":d.modelValue.influence,min:0,max:1,"onUpdate:modelValue":u},null,8,["model-value"]),k(Jt,{status:d.keyframeStatusMap.influence,updated:d.propsUpdatedStatus.influence,onCreate:p[0]||(p[0]=f=>d.createKeyframe("influence")),onDelete:p[1]||(p[1]=f=>d.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1})]))}}),Ba="100px",_x=q({__name:"CopyScaleOptionField",props:{modelValue:{},propsUpdatedStatus:{default:()=>({})},boneOptions:{default:()=>[]},keyframeStatusMap:{default:()=>({})},createKeyframe:{type:Function,default:()=>{}},deleteKeyframe:{type:Function,default:()=>{}}},emits:["update:model-value","start-pick-bone"],setup(e,{emit:t}){const n=e,a=t;function o(f,m){a("update:model-value",{...n.modelValue,...f},m)}function r(f){o({targetId:f})}function s(f){o({targetSpaceType:f})}function l(f){o({ownerSpaceType:f})}function u(f,m){o({influence:f},m)}function i(f,m){o({power:f},m)}const c=[{value:"x",label:"X"},{value:"y",label:"Y"}],d=g({get(){return[n.modelValue.copyX?"x":"",n.modelValue.copyY?"y":""].filter(f=>f)},set(f){o({copyX:f.includes("x"),copyY:f.includes("y")})}});function p(f){a("start-pick-bone",f)}return(f,m)=>(b(),M("div",null,[k(ue,{label:"Target","label-width":Ba},{default:D(()=>[k(an,{"model-value":f.modelValue.targetId,options:f.boneOptions,name:"targetId","onUpdate:modelValue":r,onStartPick:p},null,8,["model-value","options"])]),_:1}),k(ue,{label:"Target Space","label-width":Ba},{default:D(()=>[k(Lt,{"model-value":f.modelValue.targetSpaceType,options:G(Ln),"no-placeholder":"","onUpdate:modelValue":s},null,8,["model-value","options"])]),_:1}),k(ue,{label:"Owner Space","label-width":Ba},{default:D(()=>[k(Lt,{"model-value":f.modelValue.ownerSpaceType,options:G(Ln),"no-placeholder":"","onUpdate:modelValue":l},null,8,["model-value","options"])]),_:1}),k(ue,{label:"Axis","label-width":Ba},{default:D(()=>[k(Xr,{modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=v=>d.value=v),options:c},null,8,["modelValue"])]),_:1}),k(ue,{label:"Power","label-width":Ba},{default:D(()=>[k($e,{"model-value":f.modelValue.power,step:.1,"onUpdate:modelValue":i},null,8,["model-value"])]),_:1}),k(ue,{label:"Influence","label-width":Ba},{default:D(()=>[k($e,{"model-value":f.modelValue.influence,min:0,max:1,"onUpdate:modelValue":u},null,8,["model-value"]),k(Jt,{status:f.keyframeStatusMap.influence,updated:f.propsUpdatedStatus.influence,onCreate:m[1]||(m[1]=v=>f.createKeyframe("influence")),onDelete:m[2]||(m[2]=v=>f.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1})]))}}),bx={class:"constraint-header"},Sx=["disabled","onClick"],wx=["disabled","onClick"],kx=["onClick"],al={IK:"IK",LIMIT_LOCATION:"Limit Location",LIMIT_ROTATION:"Limit Rotation",LIMIT_SCALE:"Limit Scale",COPY_LOCATION:"Copy Location",COPY_ROTATION:"Copy Rotation",COPY_SCALE:"Copy Scale"},Ex={IK:ex,LIMIT_LOCATION:sx,LIMIT_ROTATION:cx,LIMIT_SCALE:hx,COPY_LOCATION:yx,COPY_ROTATION:gx,COPY_SCALE:_x},Cx=q({__name:"ConstraintList",props:{constraints:{},originalConstraints:{default:()=>({})},boneOptions:{},pickBone:{type:Function,default:void 0},constraintKeyframeMap:{default:()=>({})},currentFrame:{default:0}},emits:["update","update-item","add-keyframe","remove-keyframe","start-pick-bone"],setup(e,{emit:t}){const n=e,a=t,o=g(()=>ie(n.constraints)),r=g(()=>Object.keys(al).map($=>({value:$,label:al[$]})));function s($){const _=n.constraintKeyframeMap[$];if(_)return Z(Uo(_).props,A=>A.some(O=>O.frame===n.currentFrame)?"self":"others")}function l($){const _=n.originalConstraints[$],A=o.value[$];return!_||!A?{}:{influence:_.option.influence!==A.option.influence}}function u($){$&&c($)}function i($,_){a("update",$,_)}function c($){const _=yf({type:$},!0);_.name=qt(al[_.type],n.constraints.map(A=>A.name)),i([...n.constraints,_])}function d($,_,A){const O=n.constraints[$];a("update-item",{...O,option:_},A)}function p($){const _=n.constraints.concat();_.splice($,1),i(_)}function f($,_){i(Tb(n.constraints,$,_))}function m($){i(Ab(n.constraints,$))}function v($){i($b(n.constraints,$))}function y($,_){const A=n.constraints[$];A&&a("add-keyframe",A.id,_)}function E($,_){const A=n.constraints[$];A&&a("remove-keyframe",A.id,_)}function h($){return _=>{y($,_)}}function S($){return _=>{E($,_)}}return($,_)=>(b(),M(ve,null,[k(ue,{label:"Constraints"},{default:D(()=>[k(V$,{options:r.value,onSelect:u},null,8,["options"])]),_:1}),(b(!0),M(ve,null,Ie($.constraints,(A,O)=>(b(),M("div",{key:A.id,class:"constraints-item"},[C("div",bx,[k(Hn,{"model-value":A.name,"onUpdate:modelValue":T=>f(O,T)},null,8,["model-value","onUpdate:modelValue"]),C("button",{disabled:O===0,type:"button",onClick:T=>m(O)},[k(Rr,{class:"icon"})],8,Sx),C("button",{disabled:O===$.constraints.length-1,type:"button",onClick:T=>v(O)},[k(Rr,{class:"icon",flipped:""})],8,wx),C("button",{type:"button",onClick:T=>p(O)},[k(Os,{class:"icon"})],8,kx)]),(b(),be(tu(Ex[A.type]),{"model-value":A.option,"props-updated-status":l(A.id),"keyframe-status-map":s(A.id),"bone-options":$.boneOptions,"pick-bone":$.pickBone,"create-keyframe":h(O),"delete-keyframe":S(O),"onUpdate:modelValue":(T,L)=>d(O,T,L),onAddKeyframe:T=>y(O,T),onRemoveKeyframe:T=>E(O,T),onStartPickBone:_[0]||(_[0]=T=>$.$emit("start-pick-bone",T))},null,40,["model-value","props-updated-status","keyframe-status-map","bone-options","pick-bone","create-keyframe","delete-keyframe","onUpdate:modelValue","onAddKeyframe","onRemoveKeyframe"]))]))),128))],64))}});const Mx=Te(Cx,[["__scopeId","data-v-9e42e5a4"]]),wv=e=>(dt("data-v-a606d27e"),e=e(),pt(),e),Ox=wv(()=>C("h3",null,"Armature",-1)),Tx=wv(()=>C("h3",null,"Bone",-1)),Ax=q({__name:"DetailPanel",setup(e){const t=Rt(),n=cn(),a=dn(),o=g(()=>t.lastSelectedBone.value),r=n.keyframeMapByTargetId,s=n.currentFrame,l=g(()=>{if(!o.value)return[];const T=t.boneMap.value;return g1(T,o.value.id).map(L=>({value:L,label:T[L].name}))}),u=g(()=>o.value?o.value.constraints.map(T=>n.currentInterpolatedConstraintMap.value[T]):[]),i=g(()=>o.value&&a.canvasMode.value!=="object"?"bone":t.lastSelectedArmature.value?"armature":"");function c(T){return r.value[T].find(L=>L.frame===s.value)}function d(T,L){o.value&&t.updateBoneConstraints(T,L)}function p(T,L){if(!o.value)return;const N=u.value.findIndex(R=>R.id===T.id),U=u.value[N];if((Uo(r.value[T.id]??[]).props??{}).influence&&U.option.influence!==T.option.influence)n.applyEditedConstraint({[T.id]:{influence:T.option.influence}},L);else{const R=u.value.concat();R[N]=T,t.updateBoneConstraints(R,L)}}function f(T,L){n.execInsertKeyframeConstraint(T,{[L]:!0})}function m(T,L){const N=c(T);N&&n.execDeleteKeyframeConstraint(N.id,{[L]:!0})}function v(T){a.dispatchCanvasEvent({type:"state",data:{name:"pick-bone",options:T}})}const y=t.lastSelectedArmature,E=g({get(){var T;return((T=o.value)==null?void 0:T.connected)??!1},set(T){t.updateBone({connected:T})}}),h=g({get(){var T;return((T=o.value)==null?void 0:T.inheritRotation)??!1},set(T){t.updateBone({inheritRotation:T})}}),S=g({get(){var T;return((T=o.value)==null?void 0:T.inheritScale)??!1},set(T){t.updateBone({inheritScale:T})}}),$=g({get(){var T;return((T=o.value)==null?void 0:T.parentId)??""},set(T){t.updateBone({parentId:T})}});function _(T){t.updateArmatureName(T)}function A(T){t.updateBoneName(T)}const O=n.originalInterpolatedConstraintMap;return(T,L)=>(b(),M("div",null,[i.value==="armature"&&G(y)?(b(),M("form",{key:0,onSubmit:L[0]||(L[0]=ze(()=>{},["prevent"]))},[Ox,k(ue,{label:"Name","label-width":"50px"},{default:D(()=>[k(Hn,{"model-value":G(y).name,"onUpdate:modelValue":_},null,8,["model-value"])]),_:1})],32)):ce("",!0),i.value==="bone"&&o.value?(b(),M("form",{key:1,onSubmit:L[5]||(L[5]=ze(()=>{},["prevent"]))},[Tx,k(ue,{label:"Name","label-width":"50px"},{default:D(()=>[k(Hn,{"model-value":o.value.name,"onUpdate:modelValue":A},null,8,["model-value"])]),_:1}),k(ue,{label:"Parent","label-width":"50px"},{default:D(()=>[k(an,{modelValue:$.value,"onUpdate:modelValue":L[1]||(L[1]=N=>$.value=N),options:l.value,name:"targetId",onStartPick:v},null,8,["modelValue","options"])]),_:1}),k(ue,null,{default:D(()=>[k(it,{modelValue:E.value,"onUpdate:modelValue":L[2]||(L[2]=N=>E.value=N),disabled:!$.value,label:"Connect"},null,8,["modelValue","disabled"])]),_:1}),k(ue,null,{default:D(()=>[k(it,{modelValue:h.value,"onUpdate:modelValue":L[3]||(L[3]=N=>h.value=N),label:"Inherit Rotation"},null,8,["modelValue"])]),_:1}),k(ue,null,{default:D(()=>[k(it,{modelValue:S.value,"onUpdate:modelValue":L[4]||(L[4]=N=>S.value=N),label:"Inherit Scale"},null,8,["modelValue"])]),_:1}),k(Mx,{constraints:u.value,"original-constraints":G(O),"bone-options":l.value,"constraint-keyframe-map":G(r),"current-frame":G(s),onUpdate:d,onUpdateItem:p,onAddKeyframe:f,onRemoveKeyframe:m,onStartPickBone:v},null,8,["constraints","original-constraints","bone-options","constraint-keyframe-map","current-frame"])],32)):ce("",!0)]))}});const $x=Te(Ax,[["__scopeId","data-v-a606d27e"]]),pd=q({__name:"SidePanel",props:{initialTab:{default:"file"}},setup(e){return(t,n)=>(b(),be(eT,{tabs:[{key:"file",label:"File"},{key:"detail",label:"Detail"},{key:"tree",label:"Tree"},{key:"history",label:"History"}],"initial-tab":t.initialTab},{detail:D(()=>[k($x)]),history:D(()=>[k(oT)]),file:D(()=>[k(S$)]),tree:D(()=>[k(L$)]),_:1},8,["initial-tab"]))}}),xx=["x","y","width","height"],Ix=q({__name:"DotBackground",props:{x:{default:0},y:{default:0},width:{default:100},height:{default:100},size:{default:100}},setup(e){return(t,n)=>(b(),M("foreignObject",{x:t.x,y:t.y,width:t.width,height:t.height},[C("div",{xmlns:"http://www.w3.org/1999/xhtml",style:st({"background-position":`${t.size/2-t.x}px ${t.size/2-t.y}px`,"background-size":`${t.size}px ${t.size}px`})},null,4)],8,xx))}});const Lx=Te(Ix,[["__scopeId","data-v-e99b1201"]]),Px={class:"edge-cutter","data-type":"edge-cutter"},Bx=["d","stroke-width"],Rx=q({__name:"EdgeCutter",props:{from:{},to:{}},setup(e){const t=e,n=g(()=>`M${t.from.x},${t.from.y} L${t.to.x},${t.to.y}`),a=g(kn());return(o,r)=>(b(),M("g",Px,[C("path",{d:n.value,stroke:"lime","stroke-width":3*a.value,fill:"none"},null,8,Bx)]))}});function jx(e){return zp(e).map(n=>{const[a,o]=Nx(n);switch(Vx(a,o),a){case"M":case"m":case"L":case"l":return{command:a,p:{x:o[0],y:o[1]}};case"H":case"h":return{command:a,x:o[0]};case"V":case"v":return{command:a,y:o[0]};case"Q":case"q":return{command:a,c1:{x:o[0],y:o[1]},p:{x:o[2],y:o[3]}};case"T":case"t":return{command:a,p:{x:o[0],y:o[1]}};case"C":case"c":return{command:a,c1:{x:o[0],y:o[1]},c2:{x:o[2],y:o[3]},p:{x:o[4],y:o[5]}};case"S":case"s":return{command:a,c1:{x:o[0],y:o[1]},p:{x:o[2],y:o[3]}};case"A":case"a":return{command:a,rx:o[0],ry:o[1],rotate:o[2],"large-arc":!!o[3],sweep:!!o[4],p:{x:o[5],y:o[6]}};case"Z":case"z":return{command:a};default:throw new Error(`Unknown command: ${n.join(" ")}`)}})}function Nx(e){const[t,...n]=e,a=n.map(o=>{const r=parseFloat(o);if(isNaN(r))throw new Error(`Invalid command: ${e.join(" ")}`);return r});return[t,a]}function Vx(e,t){let n=-1;switch(e){case"M":case"m":case"L":case"l":case"T":case"t":n=2;break;case"H":case"h":case"V":case"v":n=1;break;case"Q":case"q":case"S":case"s":n=4;break;case"C":case"c":n=6;break;case"A":case"a":n=7;break;case"Z":case"z":n=0;break}if(t.length!==n)throw new Error(`Unknown command: ${[e,...t].join(" ")}`)}function Dx(e,t=We){const n=jx(e);let a="";return n.map(o=>{const r=t(),s=a?{from:{id:a,key:"d"}}:{value:[]};switch(a=r,o.command){case"M":case"m":return At("make_path_m",{id:r,inputs:{d:s,relative:{value:o.command==="m"},p:{value:o.p}}});case"L":case"l":return At("make_path_l",{id:r,inputs:{d:s,relative:{value:o.command==="l"},p:{value:o.p}}});case"H":case"h":return At("make_path_h",{id:r,inputs:{d:s,relative:{value:o.command==="h"},x:{value:o.x}}});case"V":case"v":return At("make_path_v",{id:r,inputs:{d:s,relative:{value:o.command==="v"},y:{value:o.y}}});case"Q":case"q":return At("make_path_q",{id:r,inputs:{d:s,relative:{value:o.command==="q"},c1:{value:o.c1},p:{value:o.p}}});case"T":case"t":return At("make_path_t",{id:r,inputs:{d:s,relative:{value:o.command==="t"},p:{value:o.p}}});case"C":case"c":return At("make_path_c",{id:r,inputs:{d:s,relative:{value:o.command==="c"},c1:{value:o.c1},c2:{value:o.c2},p:{value:o.p}}});case"S":case"s":return At("make_path_s",{id:r,inputs:{d:s,relative:{value:o.command==="s"},c1:{value:o.c1},p:{value:o.p}}});case"A":case"a":return At("make_path_a",{id:r,inputs:{d:s,relative:{value:o.command==="a"},rx:{value:o.rx},ry:{value:o.ry},rotate:{value:o.rotate},"large-arc":{value:o["large-arc"]},sweep:{value:o.sweep},p:{value:o.p}}});case"Z":case"z":return At("make_path_z",{id:r,inputs:{d:s}})}})}function Fx(e,t){let n={x:-20,y:-50};return e.map(a=>(a.type==="make_path_m"?n={x:0,y:n.y+50}:n=te(n,{x:20,y:50}),{...a,position:te(t,n)}))}function kv(e,t,n){const a=Gx(e,t,n);return Object.keys(a).reduce((o,r)=>{const s=e[r];return o[r]={...s,position:te(s.position,a[r].translate)},o},{})}function Gx(e,t,n){const a=Zu(Oe(n.current,n.start)),o=te(a,Ux(e[t].position)),r=he({translate:o});return Z(e,()=>r)}function Ev(e){const t=Zu(Oe(e.current,e.start));return{...e,current:te(t,e.start)}}function Zu(e){return{x:Gr(10,e.x),y:Gr(10,e.y)}}function Ux(e){return Oe(Zu(e),e)}function Cv(e){var a,o;const t=(a=e.data)==null?void 0:a.node_id,n=(o=e.data)==null?void 0:o.edge_key;if(!t||!n)throw new Error("Invalid node edge data.");return{id:t,key:n}}function Kx(e){var r,s,l,u;const t=(r=e.data)==null?void 0:r.input_id,n=(s=e.data)==null?void 0:s.input_key,a=(l=e.data)==null?void 0:l.output_id,o=(u=e.data)==null?void 0:u.output_key;if(!t||!n||!a||!o)throw new Error("Invalid edge data.");return{inputId:t,inputKey:n,outputId:a,outputKey:o}}const Mn={add:{command:"A",title:"Add"},selectAll:{command:"a",title:"All Select"},delete:{command:"x",title:"Delete"},grab:{command:"g",title:"Grab"},duplicate:{command:"D",title:"Duplicate"},reconnect:{command:`${tn()} + Drag`,title:"Reconnect"},cutEdge:{command:`${tn()} + R-Drag`,title:"Disconnect"},clip:{command:`${tn()} + c`,title:"Clip"},paste:{command:`${tn()} + v`,title:"Paste"}};function Bl(e,t,n,a,o,r){const s=t[o],l=t[n];return s&&l&&sE(e,{node:s,key:r},{node:l,key:a})}function fd(e,t,n,a,o){return o.every(r=>Bl(e,t,r.nodeId,r.key,n,a))}const md=Cs("graph-nodes");function vd(e){return Es(()=>({"text/plain":md.serialize(ie(pE(e.getGraphNodeModule,Ee(e.getSelectedNodeMap())).nodes))}),async t=>{const n=t.find(o=>o.kind==="string");if(!n)return;const a=await n.getAsString();try{const o=Ze(md.deserialize(a),c=>!!e.getGraphNodeModule(c.type));if(Object.keys(o).length===0)return;const r=e.getCursorPoint(),s=Ee(o).map(c=>c.position),l=Math.min(...s.map(c=>c.x)),u=Math.min(...s.map(c=>c.y)),i={x:r.x-l,y:r.y-u};e.pasteNodes(Ee(Vf(e.getGraphNodeModule,o,e.getNodeMap(),e.generateUuid)).map(c=>({...c,position:te(i,c.position)})))}catch{e.pasteNodes(Fx(Dx(a),e.getCursorPoint()))}})}function zx(e){let t=0;return{getLabel:()=>"MovingNode",onStart:n=>(n.startEditMovement(),n.startDragging(),t=n.getTimestamp(),Promise.resolve()),handleEvent:async(n,a)=>{switch(a.type){case"pointerdrag":n.getTimestamp()-t>100&&n.setEditMovement(Ev(a.data));return;case"pointerup":{if(a.data.options.button===0){const o=n.getEditMovement();o&&It(o.start,o.current)>0&&n.updateNodes(kv(n.getSelectedNodeMap(),e.nodeId,o))}return n.setEditMovement(),wt}case"keydown":switch(a.data.key){case"Escape":return n.setEditMovement(),wt}return}}}}function Mv(){return Yx}const Yx={getLabel:()=>"GrabbingNodeState",shouldRequestPointerLock:!0,onStart:async e=>{e.startEditMovement()},handleEvent:async(e,t)=>{switch(t.type){case"pointermove":e.setEditMovement(Ev(t.data));return;case"pointerup":{if(t.data.options.button===0){const n=e.getEditMovement(),a=e.getLastSelectedNodeId();n&&a&&e.updateNodes(kv(e.getSelectedNodeMap(),a,n))}return e.setEditMovement(),wt}case"keydown":switch(t.data.key){case"Escape":return e.setEditMovement(),wt}return}}};function Jr(e){return{getLabel:()=>"AddingNewNodeState",onStart:async t=>{e.insertion?Xx(t,e):Hx(t,e)},onEnd:async t=>{t.setDraftEdge(),t.setPopupMenuList()},handleEvent:async(t,n)=>{switch(n.type){case"pointerdown":switch(n.data.options.button){case 1:return{getState:Ut,type:"stack-resume"}}return;case"pointerup":if(n.data.options.button!==1)return wt;break;case"keydown":switch(n.data.key){case"Escape":return wt}return;case"popupmenu":return e.insertion?Jx(t,n,e):Wx(t,n,e)}}}}function Hx(e,t){var c;const n=e.getDraftEdge();if(!n){Ov(e,t);return}const a=n.type==="draft-input",[o,r]=a?[n.output,n.input]:[n.inputs[0],n.output],s=(c=e.getGraphNodeModule(e.getNodeMap()[o.nodeId].type))==null?void 0:c.struct,l=e.getNodeMap()[o.nodeId],i=Ml(e.getGraphNodeModule,e.getNodeItemList(),a?uo(s,l,o.key):un(s,l,o.key),a).map(({label:d,children:p})=>({label:d,children:p.map(f=>({label:f.label,key:`${f.type}`,data:of({inputKey:f.inputKey,outputKey:f.outputKey})}))}));e.setPopupMenuList({point:r,items:i})}function Ov(e,t){const n=e.getNodeItemList().map(({label:a,children:o})=>({label:a,children:o.map(({label:r,type:s})=>({label:r,key:s}))}));e.setPopupMenuList({point:t.point,items:n})}function Xx(e,t){var c,d;const n=t.insertion;if(!n){Ov(e,t);return}const a=e.getNodeMap(),o=a[n.inputId],r=a[n.outputId];if(!o||!r)return;const s=(c=e.getGraphNodeModule(o.type))==null?void 0:c.struct,l=(d=e.getGraphNodeModule(r.type))==null?void 0:d.struct,i=Qk(e.getGraphNodeModule,e.getNodeItemList(),uo(l,r,n.outputKey),un(s,o,n.inputKey)).map(({label:p,children:f})=>({label:p,children:f.map(m=>({label:m.label,key:`${m.type}`,data:of({inputKey:m.inputKey,outputKey:m.outputKey})}))}));e.setPopupMenuList({point:t.point,items:i})}function Wx(e,t,n){var f,m,v;const a=t.data.key,o=(f=e.getGraphNodeModule(a))==null?void 0:f.struct,r=e.getDraftEdge();if(!o)return wt;const s=r&&r.type==="draft-input",l=s?{x:n.point.x,y:n.point.y-10}:{x:n.point.x-o.width,y:n.point.y-10},u=(r==null?void 0:r.type)==="draft-output"?(v=(m=e.getNodeMap()[r.inputs[0].nodeId])==null?void 0:m.inputs[r.inputs[0].key])==null?void 0:v.value:void 0,i=u?bE(a,u):{},c=e.addNode(a,{...i,position:l});if(!c||!r)return wt;const{inputKey:d,outputKey:p}=t.data;return s&&d?e.updateNodes(ta(e.getGraphNodeModule,e.getNodeMap(),c.id,d,r.output.nodeId,r.output.key)):!s&&p&&e.updateNodes(Xf(e.getGraphNodeModule,e.getNodeMap(),c.id,p,r.inputs)),wt}function Jx(e,t,n){var p;const a=t.data.key,o=(p=e.getGraphNodeModule(a))==null?void 0:p.struct;if(!o)return wt;const r={x:n.point.x-o.width/2,y:n.point.y-10},s=e.addNode(a,{position:r});if(!s||!n.insertion)return wt;const{inputKey:l,outputKey:u}=t.data,i=e.getNodeMap(),c=ta(e.getGraphNodeModule,i,s.id,l,n.insertion.outputId,n.insertion.outputKey),d=ta(e.getGraphNodeModule,{...i,...c},n.insertion.inputId,n.insertion.inputKey,s.id,u);return e.updateNodes({...c,...d}),wt}function qx(){return Zx}const Zx={getLabel:()=>"RectangleSelectingState",onStart:async e=>{e.startDragging(),e.setRectangleDragging(!0)},onEnd:async e=>{e.setRectangleDragging()},handleEvent:async(e,t)=>{switch(t.type){case"pointerup":{const n=e.getDraggedRectangle();if(n){const a=o0(n);e.selectNodes(Z(Ze(e.getNodeMap(),o=>a(xu(e.getGraphNodeModule,o))),()=>!0),t.data.options)}return wt}case"keydown":switch(t.data.key){case"Escape":return wt}return}}};function Tv(e){return{getLabel:()=>"ConnectingInputEdgeState",onStart:async t=>{t.startDragging(),t.setDraftEdge({type:"draft-output",inputs:e.inputs,output:e.point})},handleEvent:async(t,n)=>{switch(n.type){case"pointerdown":switch(n.data.options.button){case 1:return{getState:Ut,type:"stack-restart"}}return;case"pointerdrag":{const a=hd(t,n.data.current);a&&fd(t.getGraphNodeModule,t.getNodeMap(),a.id,a.key,e.inputs)?t.setDraftEdge({type:"draft-output",inputs:e.inputs,output:a?a.p:n.data.current,connected:!0}):t.setDraftEdge({type:"draft-output",inputs:e.inputs,output:n.data.current});return}case"pointerup":if(n.data.options.button===0){const a=t.getNodeMap(),o=hd(t,n.data.point);if(o&&fd(t.getGraphNodeModule,t.getNodeMap(),o.id,o.key,e.inputs))t.updateNodes(Xf(t.getGraphNodeModule,a,o.id,o.key,e.inputs));else if(!o){const r=t.getDraftEdge();if((r==null?void 0:r.type)==="draft-output"){const s=t.getNodeMap();return s[r.inputs[0].nodeId].inputs[r.inputs[0].key].from&&t.updateNodes(Yf(t.getGraphNodeModule,s,r.inputs.reduce((u,i)=>(u[i.nodeId]={[i.key]:!0},u),{}))),()=>Jr({point:r.output})}}}return t.setDraftEdge(),wt;case"keydown":switch(n.data.key){case"escape":return t.setDraftEdge(),wt}return}}}}function hd(e,t){const n=e.getNodeMap(),a=e.getEdgePositionMap(),o=12*Math.max(1,e.getScale()),r=Object.entries(a).flatMap(([l,u])=>Object.entries(u.outputs).map(([i,c])=>{const d=te(c.p,n[l].position);return[l,i,d,It(d,t)]}).filter(([,,,i])=>i<=o));if(r.length===0)return;r.sort((l,u)=>l[3]-u[3]);const s=r[0];return{id:s[0],key:s[1],p:s[2]}}function Av(e){return{getLabel:()=>"ConnectingOutputEdgeState",onStart:async t=>{t.startDragging(),t.setDraftEdge({type:"draft-input",output:{nodeId:e.nodeId,key:e.outputKey},input:e.point})},handleEvent:async(t,n)=>{switch(n.type){case"pointerdown":switch(n.data.options.button){case 1:return{getState:Ut,type:"stack-restart"}}return;case"pointerdrag":{const a=yd(t,n.data.current);a&&Bl(t.getGraphNodeModule,t.getNodeMap(),a.id,a.key,e.nodeId,e.outputKey)?t.setDraftEdge({type:"draft-input",output:{nodeId:e.nodeId,key:e.outputKey},input:a?a.p:n.data.current,connected:!0}):t.setDraftEdge({type:"draft-input",output:{nodeId:e.nodeId,key:e.outputKey},input:n.data.current});return}case"pointerup":if(n.data.options.button===0){const a=t.getNodeMap(),o=yd(t,n.data.point);if(o&&Bl(t.getGraphNodeModule,t.getNodeMap(),o.id,o.key,e.nodeId,e.outputKey))t.updateNodes(ta(t.getGraphNodeModule,a,o.id,o.key,e.nodeId,e.outputKey));else if(!o){const r=t.getDraftEdge();if((r==null?void 0:r.type)==="draft-input")return()=>Jr({point:r.input})}}return t.setDraftEdge(),wt;case"keydown":switch(n.data.key){case"escape":return t.setDraftEdge(),wt}return}}}}function yd(e,t){const n=e.getNodeMap(),a=e.getEdgePositionMap(),o=12*Math.max(1,e.getScale()),r=Object.entries(a).flatMap(([l,u])=>Object.entries(u.inputs).map(([i,c])=>{const d=te(c.p,n[l].position);return[l,i,d,It(d,t)]}).filter(([,,,i])=>i<=o));if(r.length===0)return;r.sort((l,u)=>l[3]-u[3]);const s=r[0];return{id:s[0],key:s[1],p:s[2]}}function Qx(e){const t=Z(e,a=>D_(a));function n(a){return Object.entries(t).reduce((o,[r,s])=>(s.some((u,i)=>{if(i<s.length-1)return h_(a,[u,s[i+1]])})&&(o[r]=!0),o),{})}return{getHitPathMap:n}}function eI(e){let t;return{getLabel:()=>"EdgeCutting",onStart:async n=>{t=Z(n.getEdgeSummaryMap(),a=>Qx(Z(a,o=>dm(o.from,o.to)))),n.setEdgeCutter({from:e.point,to:e.point}),n.startDragging()},onEnd:async n=>{n.setEdgeCutter(void 0)},handleEvent:async(n,a)=>{switch(a.type){case"pointerdrag":{const o=n.getEdgeCutter();if(o){n.setEdgeCutter({...o,to:a.data.current});return}else return{type:"break"}}case"pointerup":{const o=n.getEdgeCutter();if(o&&t){const r=[o.from,o.to],s=Z(t,u=>u.getHitPathMap(r)),l=Yf(n.getGraphNodeModule,n.getNodeMap(),s);Object.keys(l).length>0&&n.updateNodes(l)}return{type:"break"}}}}}}function wt(){return tI}const tI={getLabel:()=>"Default",onStart:async e=>{gd(e),_d(e)},handleEvent:async(e,t)=>{switch(t.type){case"pointerdown":switch(t.data.options.button){case 0:switch(t.target.type){case"node-body":return aI(e,t);case"node-edge-input":return oI(e,t);case"node-edge-output":return rI(e,t);case"edge":return;case"node-custom-anchor":return sI(e,t);default:return nI(e,t)}case 1:return Ut;case 2:if(t.data.options.ctrl)return()=>eI({point:t.data.point})}return;case"pointerup":switch(t.data.options.button){case 0:switch(t.target.type){case"edge":return()=>Jr({point:t.data.point,insertion:Kx(t.target)})}return}return;case"keydown":switch(t.data.key){case"A":{const n=t.point;return n?()=>Jr({point:n}):void 0}case"a":e.selectAllNode();return;case"g":return e.getLastSelectedNodeId()?Mv:void 0;case"D":return lI(e);case"x":e.deleteNodes();return;case"!":case"Home":{const n=Object.values(e.getNodeMap());e.setViewport(n.length?_s(n.map(a=>xu(e.getGraphNodeModule,a))):void 0);return}}return;case"popupmenu":{switch(t.data.key){case"create_custom_graph":{e.makeCustomGraphFromSelectedNodes();return}}return}case"copy":{vd(e).onCopy(t.nativeEvent);return}case"paste":{await vd(e).onPaste(t.nativeEvent);return}case"selection":gd(e),_d(e);return}}};function gd(e){const t=e.getLastSelectedNodeId();e.setCommandExams([Mn.add,Mn.selectAll,Mn.reconnect,Mn.cutEdge,...t?[Mn.delete,Mn.grab,Mn.duplicate,Mn.clip]:[],Mn.paste])}function _d(e){const t=e.getLastSelectedNodeId();e.setToolMenuList([...t?[{label:"Node",items:[{label:"Create custom graph",key:"create_custom_graph"}]}]:[]])}function nI(e,t){return e.selectNodes({},t.data.options),qx}function aI(e,t){var a;const n=(a=t.target.data)==null?void 0:a.node_id;if(n)if(t.data.options.shift)e.selectNodes({[n]:!0},t.data.options);else return e.getSelectedNodeMap()[n]||e.selectNodes({[n]:!0},t.data.options),()=>zx({nodeId:n})}function oI(e,t){var a;const n=Cv(t.target);if(t.data.options.ctrl){const r=(a=e.getNodeMap()[n.id].inputs[n.key])==null?void 0:a.from;if(r)return e.updateNodes(Au(e.getGraphNodeModule,e.getNodeMap(),n.id,n.key)),()=>Av({nodeId:r.id,outputKey:r.key,point:t.data.point})}return()=>Tv({point:t.data.point,inputs:[{nodeId:n.id,key:n.key}]})}function rI(e,t){const n=Cv(t.target);if(t.data.options.ctrl){const a=Hf(e.getNodeMap(),n.id,n.key);return()=>Tv({point:t.data.point,inputs:Object.entries(a).flatMap(([o,r])=>Object.keys(r).map(s=>({nodeId:o,key:s}))).flat()})}else return()=>Av({nodeId:n.id,outputKey:n.key,point:t.data.point})}function sI(e,t){var a;const n=(a=t.target.data)==null?void 0:a.node_type;n&&e.switchGraph(n)}function lI(e){return e.pasteNodes(Ee(Vf(e.getGraphNodeModule,e.getSelectedNodeMap(),e.getNodeMap(),e.generateUuid)).map(t=>({...t,position:te(t.position,{x:20,y:20})}))),Mv}function uI(e){const t=e.graphStore,n={generateUuid:We,requestPointerLock:e.requestPointerLock,exitPointerLock:e.exitPointerLock,getTimestamp:()=>Date.now(),getGraphNodeModule:o=>t.getGraphNodeModuleFn.value()(o),getNodeMap:()=>t.nodeMap.value,getEdgePositionMap:()=>t.edgePositionMap.value,updateNodes:t.updateNodes,getSelectedNodeMap:()=>Z(t.selectedNodes.value,(o,r)=>t.nodeMap.value[r]),getLastSelectedNodeId:()=>{var o;return(o=t.lastSelectedNode.value)==null?void 0:o.id},selectNodes:t.selectNodes,selectAllNode:t.selectAllNode,deleteNodes:t.deleteNodes,addNode:t.addNode,pasteNodes:t.pasteNodes,getEditMovement:()=>t.editMovement.value,setEditMovement:t.setEditMovement,switchGraph:t.switchGraph,getDraftEdge:()=>t.draftEdge.value,setDraftEdge:t.setDraftEdge,makeCustomGraphFromSelectedNodes:t.makeCustomGraphFromSelectedNodes,getScale:e.getScale,startEditMovement:e.startEditMovement,startDragging:e.startDragging,getCursorPoint:e.getCursorPoint,setPopupMenuList:e.setPopupMenuList,getNodeItemList:e.getNodeItemList,setToolMenuList:e.setToolMenuList,setViewport:e.setViewport,panView:e.panView,setRectangleDragging:e.setRectangleDragging,getDraggedRectangle:e.getDraggedRectangle,setCommandExams:e.setCommandExams,setEdgeCutter:e.setEdgeCutter,getEdgeCutter:e.getEdgeCutter,getEdgeSummaryMap:()=>t.edgeSummaryMap.value};return{sm:za(n,wt)}}const iI=e=>(dt("data-v-f4cf9991"),e=e(),pt(),e),cI=["viewBox","width","height"],dI=iI(()=>C("g",{"stroke-width":"2","stroke-dasharray":"3",stroke:"#000"},[C("line",{x1:"-20",x2:"20"}),C("line",{y1:"-20",y2:"20"})],-1)),pI=q({__name:"AnimationGraphCanvas",props:{canvas:{}},setup(e){const t=e,{wrapper:n,svg:a,addRootPosition:o,removeRootPosition:r}=Gu(()=>t.canvas);Pu(()=>t.canvas.scale.value),Gt(()=>{t.canvas.adjustToCenter()});const s=H(),l=g(()=>s.value?o(t.canvas.canvasToView(s.value.point)):void 0),u=sa(S,1e3/60,!0),i=hs({onMove:u,onGlobalMove:Me=>{if(!a.value)return;const re=r(Me.p);re&&t.canvas.setMousePoint(re)},onEscape:L}),c=Hu(()=>{var Me;return((Me=s.value)==null?void 0:Me.items.map(({label:re,children:_e})=>({label:re,children:_e==null?void 0:_e.map(({label:Ve,key:ft,data:Ot})=>({label:Ve,exec:ft?()=>A(ft,Ot):void 0}))})))??[]}),d=H([]),p=g(()=>d.value.map(({label:Me,items:re})=>({label:Me,items:re.map(({label:_e,key:Ve})=>({label:_e,exec:Ve?()=>A(Ve):void 0}))}))??[]),f=H(),m=H(),v=Zo(),y=uI({graphStore:v,requestPointerLock:()=>{a.value&&(t.canvas.startMoving(),i.requestPointerLockFromElement(a.value))},exitPointerLock:()=>{i.exitPointerLock(),t.canvas.endMoving()},getScale:()=>t.canvas.scale.value,startEditMovement:()=>{v.setEditMovement({start:t.canvas.viewToCanvas(t.canvas.mousePoint.value),current:t.canvas.viewToCanvas(t.canvas.mousePoint.value),ctrl:!1,scale:t.canvas.scale.value})},startDragging:()=>t.canvas.startDragging(),getCursorPoint:()=>t.canvas.viewToCanvas(t.canvas.mousePoint.value),setViewport:Me=>t.canvas.setViewport(Me),panView:Me=>t.canvas.viewMove(Me),setRectangleDragging:Me=>t.canvas.setRectangleDragging(Me),getDraggedRectangle:()=>t.canvas.draggedRectangle.value,setPopupMenuList:Me=>{s.value=Me,c.clearOpened()},setToolMenuList:(Me=[])=>d.value=Me,getNodeItemList:()=>v.nodeItemList.value,setCommandExams:Me=>f.value=Me,getEdgeCutter:()=>m.value,setEdgeCutter:Me=>m.value=Me});vt(v.selectedNodes,()=>{y.sm.handleEvent({type:"selection"})}),vt(v.selectedGraphByType,()=>{L()});function E(Me){y.sm.handleEvent({type:"pointerdown",target:Qa(Me),data:{point:t.canvas.viewToCanvas(t.canvas.mousePoint.value),options:gn(Me)}})}function h(Me){t.canvas.endMoving(),y.sm.handleEvent({type:"pointerup",target:Qa(Me),data:{point:t.canvas.viewToCanvas(t.canvas.mousePoint.value),options:gn(Me)}})}function S(Me){t.canvas.editStartPoint.value&&y.sm.handleEvent({type:"pointermove",data:{start:t.canvas.viewToCanvas(t.canvas.editStartPoint.value),current:t.canvas.viewToCanvas(t.canvas.mousePoint.value),ctrl:Me.ctrl,scale:t.canvas.scale.value}})}function $(Me){t.canvas.dragged.value&&t.canvas.editStartPoint.value&&y.sm.handleEvent({type:"pointerdrag",data:{start:t.canvas.viewToCanvas(t.canvas.editStartPoint.value),current:t.canvas.viewToCanvas(t.canvas.mousePoint.value),ctrl:Xn(Me),scale:t.canvas.scale.value}})}function _(Me){y.sm.handleEvent({type:"keydown",data:Vo(Me),point:t.canvas.viewToCanvas(t.canvas.mousePoint.value)})}function A(Me,re={}){y.sm.handleEvent({type:"popupmenu",data:{key:Me,...re}})}function O(Me){y.sm.handleEvent({type:"copy",nativeEvent:Me})}function T(Me){y.sm.handleEvent({type:"paste",nativeEvent:Me})}function L(){y.sm.handleEvent({type:"keydown",data:{key:"Escape"},point:t.canvas.viewToCanvas(t.canvas.mousePoint.value)})}const N=g(()=>t.canvas.scale.value),U=g(()=>t.canvas.viewOrigin.value),I=g(()=>t.canvas.viewSize.value),R=g(()=>t.canvas.viewBox.value),B=g(()=>t.canvas.viewCanvasRect.value),Y=g(()=>c.list.value),Ce=g(()=>f.value??[]),Le=g(()=>t.canvas.draggedRectangle.value),Fe=O,Qe=T;return(Me,re)=>(b(),M("div",{ref_key:"wrapper",ref:n,class:"graph-canvas-root"},[k(Ru,{onKeydown:_,onCopy:G(Fe),onPaste:G(Qe)},{default:D(()=>[(b(),M("svg",{ref_key:"svg",ref:a,xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none","font-family":"sans-serif",viewBox:R.value,width:I.value.width,height:I.value.height,onWheel:re[0]||(re[0]=ze((..._e)=>Me.canvas.wheel&&Me.canvas.wheel(..._e),["prevent"])),onMousedown:ze(E,["prevent"]),onMouseup:ze(h,["prevent"]),onMousemove:$,onContextmenu:re[1]||(re[1]=ze(()=>{},["prevent"]))},[k(Lx,{x:B.value.x,y:B.value.y,width:B.value.width,height:B.value.height,size:40,class:"view-only"},null,8,["x","y","width","height"]),dI,ot(Me.$slots,"default",{scale:N.value,viewOrigin:U.value,viewSize:I.value},void 0,!0),Le.value?(b(),be(Bu,{key:0,x:Le.value.x,y:Le.value.y,width:Le.value.width,height:Le.value.height,class:"view-only"},null,8,["x","y","width","height"])):ce("",!0),m.value?(b(),be(Rx,{key:1,from:m.value.from,to:m.value.to},null,8,["from","to"])):ce("",!0)],40,cI))]),_:3},8,["onCopy","onPaste"]),k(iu,{class:"command-exam-panel","available-command-list":Ce.value},null,8,["available-command-list"]),k(Np,{class:"tool-menus",groups:p.value},null,8,["groups"]),Y.value.length>0&&l.value?(b(),be(cu,{key:0,class:"popup-menu-list","enabled-search":"","popup-menu-list":Y.value,style:st({left:`${l.value.x-80}px`,top:`${l.value.y-10}px`})},null,8,["popup-menu-list","style"])):ce("",!0)],512))}});const fI=Te(pI,[["__scopeId","data-v-f4cf9991"]]),mI={},vI={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10"},hI=C("rect",{width:"10",height:"10",stroke:"none",class:"fill-background-second"},null,-1),yI=C("path",{d:"M2.5 5L7.5 5M5 2.5L5 7.5","stroke-linejoin":"round",fill:"none",class:"stroke-background"},null,-1),gI=[hI,yI];function _I(e,t){return b(),M("svg",vI,gI)}const $v=Te(mI,[["render",_I]]),bI=["data-input_id","data-input_key","data-output_id","data-output_key","stroke-opacity"],SI=["d","stroke-width"],wI=["d","stroke","stroke-width"],kI=["d","stroke","stroke-width"],EI=q({__name:"GraphEdge",props:{from:{},to:{},status:{default:void 0},inputId:{default:void 0},inputKey:{default:void 0},outputId:{default:void 0},outputKey:{default:void 0}},setup(e){const t=e,n=g(()=>dm(t.from,t.to)),{settings:a}=Mt(),o=g(kn()),r=g(()=>t.status?a.selectedColor:"#888");return(s,l)=>(b(),M("g",{class:"edge","data-type":"edge","data-input_id":s.inputId,"data-input_key":s.inputKey,"data-output_id":s.outputId,"data-output_key":s.outputKey,"stroke-opacity":s.status==="connecting"?.5:1},[C("path",{d:n.value,stroke:"#222","stroke-width":5*o.value,fill:"none"},null,8,SI),C("path",{d:n.value,stroke:r.value,"stroke-width":4*o.value,fill:"none"},null,8,wI),s.status?ce("",!0):(b(),M("path",{key:0,class:"highlight",d:n.value,stroke:r.value,"stroke-width":9*o.value,fill:"none"},null,8,kI))],8,bI))}});const bd=Te(EI,[["__scopeId","data-v-65766af6"]]),CI={class:"side-bar"},MI={class:"tab-list"},OI=["onClick"],TI=q({__name:"SideBar",props:{tabs:{default:()=>[]},defaultTab:{default:""},delighlight:{type:Boolean,default:!1}},setup(e){const n=H(e.defaultTab);function a(o){n.value=n.value===o?"":o}return(o,r)=>(b(),M("div",CI,[C("ul",MI,[(b(!0),M(ve,null,Ie(o.tabs,s=>(b(),M("li",{key:s.key,class:qe({current:n.value===s.key})},[C("a",{href:"#",onClick:ze(l=>a(s.key),["prevent"])},Ne(s.label),9,OI)],2))),128))]),n.value!==""?(b(),M("div",{key:0,class:qe(["tab-content",{delighlight:o.delighlight}])},[ot(o.$slots,n.value,{},void 0,!0)],2)):ce("",!0)]))}});const xv=Te(TI,[["__scopeId","data-v-526858af"]]),AI={key:0,class:"label"},$I={class:"block-content"},xI=q({__name:"BlockField",props:{label:{default:""}},setup(e){return(t,n)=>(b(),be(Um,null,{default:D(()=>[t.label?(b(),M("label",AI,Ne(t.label),1)):ce("",!0),C("div",$I,[ot(t.$slots,"default",{},void 0,!0)])]),_:3}))}});const yn=Te(xI,[["__scopeId","data-v-70f08417"]]),II=["d","stroke","fill"],hr=120,LI=q({__name:"HueCicle",props:{radius:{default:50}},setup(e){const t=e,n=[...Array(hr)].map((l,u)=>o(Math.PI*2/hr*u)),a=n.map((l,u)=>s(u));function o(l){return{x:Math.cos(l)*t.radius,y:Math.sin(l)*t.radius}}function r(l){const u=n[l],i=n[(l+1)%hr];return`M0,0L${u.x},${u.y}A${t.radius},${t.radius},0,0,1,${i.x},${i.y}z`}function s(l){return Wo(lo({h:l*360/hr,s:1,v:1,a:1}))}return(l,u)=>(b(),M("g",null,[(b(!0),M(ve,null,Ie(G(n),(i,c)=>(b(),M("path",{key:c,d:r(c),stroke:G(a)[c],fill:G(a)[c]},null,8,II))),128))]))}});var PI=Object.defineProperty,Sd=Object.getOwnPropertySymbols,BI=Object.prototype.hasOwnProperty,RI=Object.prototype.propertyIsEnumerable,wd=(e,t,n)=>t in e?PI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_o=(e,t)=>{for(var n in t||(t={}))BI.call(t,n)&&wd(e,n,t[n]);if(Sd)for(var n of Sd(t))RI.call(t,n)&&wd(e,n,t[n]);return e};function jI(e){return"touches"in e}function qr(e){return jI(e)?{x:e.touches[0].pageX,y:e.touches[0].pageY}:{x:e.pageX,y:e.pageY}}function xs(e,t=()=>{}){let n=!1,a=null,o=null,r=null,s=0;return{onDown:l=>{n=!0,a=qr(l),r=_o({},a),o=_o({},a),s=Date.now()},onMove:l=>{n&&(l.preventDefault(),r=qr(l),!(!n||!a||!r||!o)&&(e({base:a,p:_o({},r),d:{x:r.x-o.x,y:r.y-o.y}}),o=_o({},r)))},onUp:()=>{r&&Date.now()-s<100&&t(_o({},r)),n=!1,a=null,r=null,o=null,s=0}}}const NI=C("circle",{r:"40",class:"fill-background"},null,-1),VI=["x2","y2"],DI=C("circle",{r:"39",class:"fill-background"},null,-1),FI=q({__name:"HueCiclePicker",props:{modelValue:{}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,a=t;function o(y){return{x:Math.cos(y)*50,y:Math.sin(y)*50}}const r=g(()=>n.modelValue===void 0?0:n.modelValue*Math.PI/180),s=g(()=>{if(n.modelValue!==void 0)return o(r.value)}),l=H(!1),u=H(),i=H();function c(y){a("update:model-value",y,u.value)}function d(y){if(!i.value)return;const E=i.value.getBoundingClientRect(),h=Oe(y,{x:E.left+E.width/2,y:E.top+E.height/2}),S=r.value+uf(r.value,yt(h));return Math.round(S*180/Math.PI)}function p(y){const E=d(y.p);E!==void 0&&c(E)}const f=sa(p,1e3/60,!0),m=xs(f);Ho(m.onMove),Xo(()=>{m.onUp(),l.value=!1,u.value=void 0});function v(y){l.value=!1,u.value=`color_${Date.now()}`;const E=d(qr(y));E!==void 0&&(c(E),m.onDown(y))}return(y,E)=>(b(),M("svg",{ref_key:"svg",ref:i,xmlns:"http://www.w3.org/2000/svg",viewBox:"-50 -50 100 100",onMousedown:v},[k(LI,{radius:49}),NI,s.value?(b(),M("line",{key:0,x2:s.value.x,y2:s.value.y,stroke:"#ddd","stroke-width":"4"},null,8,VI)):ce("",!0),DI],544))}}),GI=e=>(dt("data-v-273404f7"),e=e(),pt(),e),UI={class:"color-picker-wrapper"},KI={class:"color-picker-inner"},zI=GI(()=>C("div",null,null,-1)),YI=[zI],HI={class:"input-block"},yr=110,XI=q({__name:"ColorPicker",props:{modelValue:{default:()=>({h:0,s:0,v:0,a:1})},extraHue:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,a=t,o=H(),r=H(!1),s=H(),l=g(()=>n.modelValue),u=g(()=>({x:l.value.s,y:1-l.value.v})),i=g(()=>Wo(lo({h:l.value.h,s:1,v:1,a:1})));function c(h,S){a("update:model-value",h,S)}function d(h,S){c({...l.value,h},S)}function p(h,S){c({...l.value,a:h},S)}function f(h){if(!o.value)return;const S=o.value.getBoundingClientRect(),$=Oe(h,{x:S.left,y:S.top}),_={x:$.x/yr,y:$.y/yr},A={s:ut(0,1,_.x),v:1-ut(0,1,_.y)};c({...l.value,s:A.s,v:A.v},s.value)}function m(h){f(h.p)}const v=sa(m,1e3/60,!0),y=xs(v);Ho(y.onMove),Xo(()=>{y.onUp(),r.value=!1,s.value=void 0});function E(h){r.value=!1,s.value=`color_${Date.now()}`,f(qr(h)),y.onDown(h)}return(h,S)=>(b(),M("div",UI,[C("div",KI,[k(FI,{"model-value":l.value.h,class:"hue-circle","onUpdate:modelValue":d},null,8,["model-value"]),C("div",{ref_key:"colorRect",ref:o,class:"color-rect",style:st({"background-color":i.value}),onMousedown:E},[C("div",{class:"cursor",style:st({transform:`translate(${u.value.x*yr}px,${u.value.y*yr}px)`})},YI,4)],36),C("div",HI,[C("div",null,[k(ue,{label:"A","label-width":"10px"},{default:D(()=>[k($e,{"model-value":l.value.a,min:0,max:1,"onUpdate:modelValue":p},null,8,["model-value"])]),_:1})])])])]))}});const Iv=Te(XI,[["__scopeId","data-v-273404f7"]]),WI=q({__name:"ColorRect",props:{hsva:{},transform:{}},setup(e){const t=e,n=g(()=>t.hsva?Wo(lo(t.hsva)):t.transform?LE(t.transform):"#000");return(a,o)=>(b(),M("div",{class:"color-rect",style:st({"background-color":n.value})},null,4))}});const Qu=Te(WI,[["__scopeId","data-v-41dc92ca"]]),JI=q({__name:"FixedContainer",setup(e){const t=H(),n=H(0),a=H(0);rn(o),ob(o,!0);function o(){var s;if(!((s=t.value)!=null&&s.parentElement))return;const r=t.value.parentElement.getBoundingClientRect();n.value=r.left,a.value=r.top}return(r,s)=>(b(),M("div",{ref_key:"root",ref:t,class:"fixed-container",style:st({transform:`translate(${n.value}px, ${a.value}px)`})},[ot(r.$slots,"default",{},void 0,!0)],4))}});const Lv=Te(JI,[["__scopeId","data-v-2298d696"]]),Pv=q({__name:"OutsideEventContainer",emits:["click-outside"],setup(e,{emit:t}){const n=t,a=H();return rb(o=>{!a.value||!o.target||a.value.contains(o.target)||n("click-outside")}),(o,r)=>(b(),M("div",{ref_key:"root",ref:a},[ot(o.$slots,"default")],512))}}),qI=q({__name:"GraphNodeDataFieldTransform",props:{modelValue:{},disabled:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,a=t;function o(d,p){a("update:model-value",{...n.modelValue,translate:{x:d,y:n.modelValue.translate.y}},p)}function r(d,p){a("update:model-value",{...n.modelValue,translate:{x:n.modelValue.translate.x,y:d}},p)}function s(d,p){a("update:model-value",{...n.modelValue,scale:{x:d,y:n.modelValue.scale.y}},p)}function l(d,p){a("update:model-value",{...n.modelValue,scale:{x:n.modelValue.scale.x,y:d}},p)}function u(d,p){a("update:model-value",{...n.modelValue,rotate:d},p)}function i(d,p){a("update:model-value",{...n.modelValue,origin:{x:d,y:n.modelValue.origin.y}},p)}function c(d,p){a("update:model-value",{...n.modelValue,origin:{x:n.modelValue.origin.x,y:d}},p)}return(d,p)=>(b(),M("div",null,[k(ue,{label:"tr","label-width":"10px"},{default:D(()=>[$t(" ( "),k($e,{"model-value":d.modelValue.translate.x,step:1,disabled:d.disabled,"onUpdate:modelValue":o},null,8,["model-value","disabled"]),$t(" , "),k($e,{"model-value":d.modelValue.translate.y,step:1,disabled:d.disabled,"onUpdate:modelValue":r},null,8,["model-value","disabled"]),$t(" ) ")]),_:1}),k(ue,{label:"ro","label-width":"10px"},{default:D(()=>[k($e,{"model-value":d.modelValue.rotate,step:1,disabled:d.disabled,"onUpdate:modelValue":u},null,8,["model-value","disabled"])]),_:1}),k(ue,{label:"sc","label-width":"10px"},{default:D(()=>[$t(" ( "),k($e,{"model-value":d.modelValue.scale.x,step:.1,disabled:d.disabled,"onUpdate:modelValue":s},null,8,["model-value","disabled"]),$t(" , "),k($e,{"model-value":d.modelValue.scale.y,step:.1,disabled:d.disabled,"onUpdate:modelValue":l},null,8,["model-value","disabled"]),$t(" ) ")]),_:1}),k(ue,{label:"or","label-width":"10px"},{default:D(()=>[$t(" ( "),k($e,{"model-value":d.modelValue.origin.x,step:1,disabled:d.disabled,"onUpdate:modelValue":i},null,8,["model-value","disabled"]),$t(" , "),k($e,{"model-value":d.modelValue.origin.y,step:1,disabled:d.disabled,"onUpdate:modelValue":c},null,8,["model-value","disabled"]),$t(" ) ")]),_:1})]))}}),Bv=Symbol(),Rv=Symbol(),jv=Symbol();function ZI(e){oo(Bv,e)}function Nv(){return Ma(Bv,()=>zr)}function QI(e){oo(Rv,e)}function eL(){return Ma(Rv,()=>[])}function tL(e){oo(jv,e)}function Vv(){return Ma(jv,()=>[])}const nL={key:0},aL={key:7,class:"color-block"},oL=["disabled"],rL={key:0,class:"color-popup"},sL={[W.BOOLEAN]:!0,[W.SCALER]:!0,[W.VECTOR2]:!0,[W.BONE]:!0,[W.OBJECT]:!0,[W.COLOR]:!0,[W.TEXT]:!0,[W.TRANSFORM]:!0},lL=q({__name:"GraphNodeDataField",props:{modelValue:{},label:{},type:{},disabled:{type:Boolean,default:!1}},emits:["update:model-value","start-pick-bone"],setup(e,{emit:t}){const n=e,a=t;function o(y,E){a("update:model-value",y,E)}const r=g(eL()),s=g(Vv()),l=H(!1);function u(){l.value=!l.value}function i(y,E){o(yu(y),E)}const c=g(()=>n.type.type),d=g(()=>n.type.scale??1),p=g(()=>n.type.enumKey),f=g(()=>(Xp[p.value]??[]).map(y=>({label:`${y.value}: ${y.key}`,value:y.value}))),m=g(()=>c.value==="COLOR"?io(n.modelValue):void 0);function v(y){a("start-pick-bone",y)}return(y,E)=>sL[c.value]?(b(),M("div",nL,[C("h5",null,Ne(y.label),1),c.value==="SCALER"?(b(),M(ve,{key:0},[p.value?(b(),be(Lt,{key:0,"model-value":y.modelValue,options:f.value,disabled:y.disabled,"no-placeholder":"","onUpdate:modelValue":o},null,8,["model-value","options","disabled"])):(b(),be($e,{key:1,step:d.value,"model-value":y.modelValue,disabled:y.disabled,"onUpdate:modelValue":o},null,8,["step","model-value","disabled"]))],64)):c.value==="BONE"?(b(),M(ve,{key:1},[y.disabled?(b(),be(Hn,{key:0,"model-value":y.modelValue,disabled:""},null,8,["model-value"])):(b(),be(an,{key:1,"model-value":y.modelValue,options:s.value,name:"targetId","onUpdate:modelValue":o,onStartPick:v},null,8,["model-value","options"]))],64)):c.value==="OBJECT"?(b(),M(ve,{key:2},[y.disabled?(b(),be(Hn,{key:0,"model-value":y.modelValue,disabled:""},null,8,["model-value"])):(b(),be(Lt,{key:1,"model-value":y.modelValue,options:r.value,"onUpdate:modelValue":o},null,8,["model-value","options"]))],64)):c.value==="TEXT"?(b(),be(Hn,{key:3,"model-value":y.modelValue,disabled:y.disabled,"onUpdate:modelValue":o},null,8,["model-value","disabled"])):c.value==="BOOLEAN"?(b(),be(it,{key:4,"model-value":y.modelValue,disabled:y.disabled,"onUpdate:modelValue":o},null,8,["model-value","disabled"])):c.value==="VECTOR2"?(b(),M(ve,{key:5},[k(ue,{label:"x","label-width":"20px"},{default:D(()=>[k($e,{"model-value":y.modelValue.x,step:d.value,disabled:y.disabled,"onUpdate:modelValue":E[0]||(E[0]=(h,S)=>o({x:h,y:y.modelValue.y},S))},null,8,["model-value","step","disabled"])]),_:1}),k(ue,{label:"y","label-width":"20px"},{default:D(()=>[k($e,{"model-value":y.modelValue.y,step:d.value,disabled:y.disabled,"onUpdate:modelValue":E[1]||(E[1]=(h,S)=>o({x:y.modelValue.x,y:h},S))},null,8,["model-value","step","disabled"])]),_:1})],64)):c.value==="TRANSFORM"?(b(),be(qI,{key:6,"model-value":y.modelValue,disabled:y.disabled,"onUpdate:modelValue":o},null,8,["model-value","disabled"])):c.value==="COLOR"?(b(),M("div",aL,[k(Pv,{class:"color-field",onClickOutside:E[2]||(E[2]=h=>l.value=!1)},{default:D(()=>[C("button",{type:"button",class:"color-button",disabled:y.disabled,onClick:u},[k(Qu,{hsva:m.value},null,8,["hsva"])],8,oL),l.value?(b(),M("div",rL,[k(Lv,null,{default:D(()=>[k(Iv,{class:"color-picker","model-value":m.value,"extra-hue":"","onUpdate:modelValue":i},null,8,["model-value"])]),_:1})])):ce("",!0)]),_:1})])):ce("",!0)])):ce("",!0)}});const kd=Te(lL,[["__scopeId","data-v-1c8b1d0c"]]),ei=e=>(dt("data-v-bb6597b6"),e=e(),pt(),e),uL={key:0,class:"item-panel"},iL=ei(()=>C("h5",null,"Data",-1)),cL=ei(()=>C("h5",null,"Inputs",-1)),dL={key:1},pL=ei(()=>C("p",null,"No Item",-1)),fL=[pL],mL=q({__name:"GraphItemPanel",setup(e){const t=dn(),n=Zo(),a=n.lastSelectedNode,o=g(Nv()),r=g(()=>{var m;if(a.value)return(m=o.value(a.value.type))==null?void 0:m.struct}),s=g(()=>{const m=a.value;return!m||!r.value?{}:Z(m.data,(v,y)=>({...Gf(o.value,m,y),label:y}))}),l=g(()=>Z(s.value,(m,v)=>(y,E)=>u(v,y,E)));function u(m,v,y){const E=a.value;E&&n.updateNode(E.id,{data:{...E.data,[m]:mE(o.value,E.type,m,E.data[m],v)}},y)}const i=g(()=>{var E,h;if(!a.value||!r.value)return{};const m=a.value.inputs,v=Ou((E=o.value(a.value.type))==null?void 0:E.struct,a.value),y=((h=n.resolvedGraph.value)==null?void 0:h.nodeMap)??{};return r.value.inputs,Z(m,(S,$)=>{var A,O,T;const _=((O=(A=r.value)==null?void 0:A.inputs[$])==null?void 0:O.label)??$;return S.from?{type:v[$],value:((T=y[S.from.id])==null?void 0:T[S.from.key])??"",disabled:!0,label:_}:{type:v[$],value:S.value,label:_}})}),c=g(()=>Z(i.value,(m,v)=>(y,E)=>d(v,y,E)));function d(m,v,y){a.value&&n.updateNode(a.value.id,{inputs:{...a.value.inputs,[m]:{...a.value.inputs[m],value:v}}},y)}const p=g(()=>Object.keys(i.value).length>0);function f(m){t.dispatchCanvasEvent({type:"state",data:{name:"pick-bone",options:m}})}return(m,v)=>G(a)?(b(),M("div",uL,[C("form",{onSubmit:v[0]||(v[0]=ze(()=>{},["prevent"]))},[iL,(b(!0),M(ve,null,Ie(s.value,(y,E)=>(b(),be(yn,{key:E},{default:D(()=>[k(kd,{label:E,type:y.type,"model-value":y.value,"onUpdate:modelValue":l.value[E],onStartPickBone:f},null,8,["label","type","model-value","onUpdate:modelValue"])]),_:2},1024))),128)),p.value?(b(),M(ve,{key:0},[cL,(b(!0),M(ve,null,Ie(i.value,(y,E)=>(b(),be(yn,{key:E},{default:D(()=>[k(kd,{label:y.label,type:y.type,"model-value":y.value,disabled:y.disabled,"onUpdate:modelValue":c.value[E],onStartPickBone:f},null,8,["label","type","model-value","disabled","onUpdate:modelValue"])]),_:2},1024))),128))],64)):ce("",!0)],32)])):(b(),M("div",dL,fL))}});const vL=Te(mL,[["__scopeId","data-v-bb6597b6"]]),hL=q({__name:"GraphSideBar",props:{delighlight:{type:Boolean}},setup(e){const t=g(()=>[{key:"item",label:"Item"}]);return(n,a)=>(b(),be(xv,{delighlight:n.delighlight,tabs:t.value,"default-tab":"item"},{item:D(()=>[k(vL)]),_:1},8,["delighlight","tabs"]))}}),yL=["transform"],gL=q({__name:"OutlineRect",props:{dep:{},marginSize:{default:()=>({width:0,height:0})}},setup(e){const t=e,n=H(),a=H({width:0,height:0}),o=JE();function r(){if(!n.value)return;const s=o(n.value);a.value={width:s.width+t.marginSize.width*2,height:s.height+t.marginSize.height*2}}return vt(()=>t.dep,r),vt(()=>t.marginSize,r),Gt(r),(s,l)=>(b(),M("g",null,[ot(s.$slots,"background",{size:a.value}),C("g",{ref_key:"target",ref:n,transform:`translate(${s.marginSize.width}, ${s.marginSize.height})`},[ot(s.$slots,"default")],8,yL)]))}}),_L=["width","height"],bL={"font-size":"16","font-weight":"600",fill:"red","dominant-baseline":"text-before-edge"},SL=["dy"],wL=q({__name:"ErrorText",props:{errors:{}},setup(e){return(t,n)=>(b(),be(gL,{dep:t.errors,"margin-size":{width:10,height:4}},{background:D(a=>[C("rect",{width:a.size.width,height:a.size.height,fill:"#fff",stroke:"red","stroke-width":"2"},null,8,_L)]),default:D(()=>[C("text",bL,[(b(!0),M(ve,null,Ie(t.errors,(a,o)=>(b(),M("tspan",{key:o,x:"0",dy:o===0?0:"1.2em"},Ne(a),9,SL))),128))])]),_:1},8,["dep"]))}}),kL={width:"100",height:"40"},EL={xmlns:"http://www.w3.org/1999/xhtml",class:"field"},CL={key:1},ML=q({__name:"GraphNodeDataField",props:{modelValue:{},label:{},type:{}},setup(e){const t=e,n=g(()=>t.type.type),a=g(()=>wn(Vv()(),"value")),o=g(()=>{var r;switch(t.type.type){case W.TEXT:case W.SCALER:case W.BOOLEAN:return Tn(`${t.modelValue}`,6);case W.BONE:{const s=((r=a.value[t.modelValue])==null?void 0:r.label)??"";return Tn(`${s}`,10)}case W.VECTOR2:{const s=t.modelValue;return`(${Tn(s.x,4)},${Tn(s.y,4)})`}default:return""}});return(r,s)=>(b(),M("foreignObject",kL,[C("div",EL,[C("h5",null,Ne(r.label),1),n.value==="COLOR"?(b(),be(Qu,{key:0,transform:r.modelValue,class:"color"},null,8,["transform"])):(b(),M("p",CL,Ne(o.value),1))])]))}});const OL=Te(ML,[["__scopeId","data-v-6a0b1d68"]]),TL=["x","fill"],AL=q({__name:"GraphNodeInputLabel",props:{inputKey:{},input:{},type:{}},setup(e){const t=e,n=H(),a=H(0),o=kn();Gt(async()=>{if(await Ea(),!n.value)return 0;a.value=n.value.getBoundingClientRect().width*o()});const r=g(()=>t.input.from?"":WE(t.type,t.input.value)),s=g(()=>t.type.type===W.COLOR);return(l,u)=>(b(),M("g",null,[C("text",{ref_key:"textRef",ref:n,"dominant-baseline":"middle","font-size":"14",fill:"#000"},Ne(l.inputKey+(r.value&&!s.value?` (${r.value})`:"")),513),r.value&&s.value?(b(),M("rect",{key:0,x:a.value+6,y:"-6",width:"12",height:"12",fill:r.value},null,8,TL)):ce("",!0)]))}});function Dv(e){switch(e.type){case W.SCALER:return"l6,8 l-6,8";case W.VECTOR2:return"l6,4 l-6,4 l6,4 l-6,4";case W.TRANSFORM:return"l0,4 l6,0 l0,8 l-6,0 l0,4";case W.COLOR:return"l0,4 l4,0 l0,2 l3,0 l0,4 l-3,0 l0,2 l-4,0 l0,4";case W.BOOLEAN:return"l0,3 l6,0 l0,2 l-6,8 l0,3";case W.OBJECT:return"l0,4 a5,5,0,1,1,0,8 l0,4";case W.D:return"l0,5 l6,0 a6,8,0,0,1,-6,8 l0,3";case W.GENERICS:return"a10 10 0 0 1 0,16";case W.INPUT:return"l0,4 l8,0 l0,8 l-3,0 l0,-2 l-5,0 l0,6";case W.OUTPUT:return"l0,6 l5,0 l0,-2 l3,0 l0,8 l-8,0 l0,4";default:return"a10 10 0 0 1 0,16"}}const $L=["fill"],xL=["d"],Zr=q({__name:"EdgeAnchorMale",props:{type:{}},setup(e){const t=e,n=g(()=>cm[t.type.type]),a=g(()=>`M-6,-8 l6,0 ${Dv(t.type)} l-6,0z`);return(o,r)=>(b(),M("g",{fill:n.value,stroke:"#333"},[C("path",{d:a.value,"stroke-linejoin":"round"},null,8,xL)],8,$L))}}),IL=["fill"],LL=["d"],Qr=q({__name:"EdgeAnchorFemale",props:{type:{}},setup(e){const t=e,n=g(()=>cm[t.type.type]),a=g(()=>`M-8,-8 ${Dv(t.type)} l12,0 l0,-16z`);return(o,r)=>(b(),M("g",{fill:n.value,stroke:"#333"},[C("path",{d:a.value,"stroke-linejoin":"round"},null,8,LL)],8,IL))}}),Fv=e=>(dt("data-v-5a53e83c"),e=e(),pt(),e),PL=["transform"],BL=["data-node_id"],RL=["d","stroke","stroke-width"],jL=["d","stroke","stroke-width","fill"],NL=["fill"],VL=["transform","data-node_type"],DL=Fv(()=>C("rect",{width:"18",height:"18",rx:"4",ry:"4",fill:"#eee"},null,-1)),FL=Fv(()=>C("path",{d:"M4 6L14 6L9 12z","stroke-linejoin":"round",stroke:"none",fill:"#000"},null,-1)),GL=[DL,FL],UL=["transform"],KL={class:"view-only"},zL=["x","y","height"],YL={x:"-10","dominant-baseline":"middle","text-anchor":"end","font-size":"14",fill:"#000"},HL=["data-node_id","data-edge_key"],XL={class:"view-only"},WL=["transform"],JL=["transform"],qL={class:"view-only"},ZL=["y","height"],QL={transform:"translate(10, 0)"},eP=["data-node_id","data-edge_key"],tP=["transform"],nP=q({__name:"GraphNode",props:{node:{},edgePositions:{default:()=>({inputs:{},outputs:{}})},selected:{type:Boolean,default:!1},errors:{default:void 0}},setup(e){const t=e;function n(_){return`M0,${An} L0,14 A14,14 0 0 1 14,0 L${_.width-14},0 A14,14 0 0 1 ${_.width},14 L${_.width},${An}`}function a(_){return`M0,${An} L0,${_.height-8} A8,8 0 0 0 8,${_.height} L${_.width-8},${_.height} A8,8 0 0 0 ${_.width},${_.height-8} L${_.width},${An}`}const{settings:o}=Mt(),r=g(Nv()),s=g(()=>{var _;return(_=r.value(t.node.type))==null?void 0:_.struct.custom}),l=g(()=>Iu(r.value,t.node)),u=g(()=>n(l.value)),i=g(()=>a(l.value)),c=g(()=>{var _;return(_=r.value(t.node.type))==null?void 0:_.struct}),d=g(()=>{var _;return((_=c.value)==null?void 0:_.label)??"Unknown"}),p=g(()=>{var _;return((_=c.value)==null?void 0:_.color)??"#ccc"}),f=g(()=>{var _;return((_=c.value)==null?void 0:_.textColor)??"#ff0000"}),m=g(()=>KE(r.value,t.node)),v=g(()=>Z(m.value,(_,A)=>({position:_,...Gf(r.value,t.node,A)}))),y=g(()=>Ou(c.value,t.node)),E=na,h=g(()=>t.errors?"red":t.selected?o.selectedColor:"#555"),S=g(()=>t.errors?6:t.selected?2:1),$=60;return(_,A)=>(b(),M("g",{transform:`translate(${_.node.position.x}, ${_.node.position.y})`},[C("g",{"data-type":"node-body","data-node_id":_.node.id},[C("path",{d:i.value,stroke:h.value,"stroke-width":S.value,fill:"#fafafa"},null,8,RL),C("path",{d:u.value,stroke:h.value,"stroke-width":S.value,fill:p.value},null,8,jL)],8,BL),C("g",null,[C("text",{x:"8",y:"6","dominant-baseline":"text-before-edge","font-size":"16",fill:f.value,class:"view-only"},Ne(d.value),9,NL)]),s.value?(b(),M("g",{key:0,transform:`translate(${l.value.width-28}, 6)`,"data-type":"node-custom-anchor","data-node_type":_.node.type,class:"node-custom-anchor"},GL,8,VL)):ce("",!0),C("g",null,[(b(!0),M(ve,null,Ie(Object.entries(_.edgePositions.outputs),([O,T])=>(b(),M("g",{key:O,transform:`translate(${T.p.x}, ${T.p.y})`},[C("g",KL,[C("rect",{x:-$,y:-G(E)/2,width:$,height:G(E),fill:"transparent",stroke:"none"},null,8,zL),C("text",YL,Ne(T.label),1)]),C("circle",{"data-type":"node-edge-output","data-node_id":_.node.id,"data-edge_key":O,r:"10",fill:"transparent",stroke:"none",class:"edge-anchor"},null,8,HL),k(Zr,{type:T.type,class:"view-only"},null,8,["type"])],8,UL))),128))]),C("g",XL,[(b(!0),M(ve,null,Ie(v.value,(O,T)=>(b(),M("g",{key:T,transform:`translate(${O.position.x}, ${O.position.y})`},[k(OL,{label:T,type:O.type,"model-value":O.value},null,8,["label","type","model-value"])],8,WL))),128))]),C("g",null,[(b(!0),M(ve,null,Ie(Object.entries(_.edgePositions.inputs),([O,T])=>(b(),M("g",{key:O,transform:`translate(${T.p.x}, ${T.p.y})`},[C("g",qL,[C("rect",{y:-G(E)/2,width:$,height:G(E),fill:"transparent",stroke:"none"},null,8,ZL),C("g",QL,[k(AL,{"input-key":T.label,type:y.value[O],input:_.node.inputs[O]},null,8,["input-key","type","input"])])]),C("circle",{"data-type":"node-edge-input","data-node_id":_.node.id,"data-edge_key":O,r:"10",fill:"transparent",stroke:"none",class:"edge-anchor"},null,8,eP),k(Qr,{type:T.type,class:"view-only"},null,8,["type"])],8,JL))),128))]),_.errors?(b(),M("g",{key:1,transform:`translate(0, ${l.value.height})`},[k(wL,{errors:_.errors},null,8,["errors"])],8,tP)):ce("",!0)],8,PL))}});const aP=Te(nP,[["__scopeId","data-v-5a53e83c"]]),Gv=e=>(dt("data-v-4641843b"),e=e(),pt(),e),oP=["transform"],rP=["data-node_id"],sP=["d","stroke","stroke-width"],lP=["transform"],uP=["data-node_id"],iP=Gv(()=>C("circle",{r:"8",fill:"transparent",stroke:"none"},null,-1)),cP=[iP],dP=["transform"],pP=["data-node_id"],fP=Gv(()=>C("circle",{r:"8",fill:"transparent",stroke:"none"},null,-1)),mP=[fP],{settings:vP}=Mt(),hP=q({__name:"GraphNodeReroute",props:{node:{},edgePositions:{},selected:{type:Boolean,default:!1},errors:{default:void 0}},setup(e){const t=e,n=g(()=>t.edgePositions.inputs.value),a=g(()=>t.edgePositions.outputs.value),o=g(()=>{const l=a.value.p.x-n.value.p.x;return`M0,-2 Q${l},-2 ${l},10 T0,22 z`}),r=g(()=>t.errors?"red":t.selected?vP.selectedColor:"#555"),s=g(()=>t.errors?6:t.selected?3:2);return(l,u)=>(b(),M("g",{transform:`translate(${l.node.position.x}, ${l.node.position.y})`},[C("title",null,Ne(l.node.type),1),C("g",{"data-type":"node-body","data-node_id":l.node.id},[C("path",{d:o.value,stroke:r.value,"stroke-width":s.value,fill:"#ddd"},null,8,sP)],8,rP),C("g",{transform:`translate(${a.value.p.x}, ${a.value.p.y})`},[C("g",{class:"edge-anchor","data-type":"node-edge-output","data-node_id":l.node.id,"data-edge_key":"value"},cP,8,uP),k(Zr,{type:a.value.type,class:"view-only"},null,8,["type"])],8,lP),C("g",{transform:`translate(${n.value.p.x}, ${n.value.p.y})`},[C("g",{class:"edge-anchor","data-type":"node-edge-input","data-node_id":l.node.id,"data-edge_key":"value"},mP,8,pP),k(Qr,{type:n.value.type,class:"view-only"},null,8,["type"])],8,dP)],8,oP))}});const yP=Te(hP,[["__scopeId","data-v-4641843b"]]),gP=e=>(dt("data-v-305e3c1d"),e=e(),pt(),e),_P={class:"animation-graph-panel-root"},bP={class:"top"},SP={class:"select-graph"},wP={class:"graph-buttons"},kP=["disabled"],EP=["disabled"],CP=gP(()=>C("p",null,"(!!Experimental!!)",-1)),MP={class:"main"},OP={key:0},TP=q({__name:"AnimationGraphPanel",setup(e){const t=[{value:"graph",label:"Graph"},{value:"custom",label:"Custom"}],n=Rt(),a=Pn(),o=Zo(),r=g(()=>o.lastSelectedGraph.value),s=$o(),l=g(()=>s.moving.value),u=g(()=>o.getGraphNodeModuleFn.value());ZI(()=>u.value);const i=g(()=>n.lastSelectedArmature.value),c=g(()=>o.parentGraph.value),d=H({});vt(c,(I,R)=>{if(R&&(d.value={...d.value,[R.id]:{scale:s.scale.value,origin:s.viewOrigin.value}}),I){const B=d.value[I.id];if(B)s.scale.value=B.scale,s.viewOrigin.value=B.origin;else{const Y=Object.values(o.nodeMap.value);s.setViewport(Y.length?_s(Y.map(Ce=>xu(o.getGraphNodeModuleFn.value(),Ce))):void 0)}}});const p=g(()=>o.parentGraphs.value.map(I=>I.name)),f=H("");rn(()=>{var I;f.value=((I=c.value)==null?void 0:I.name)??""});function m(){o.graphType.value==="graph"?o.addGraph():o.addCustomGraph()}function v(){o.graphType.value==="graph"?o.deleteGraph():o.deleteCustomGraph()}function y(){var I;p.value.includes(f.value)?f.value=((I=c.value)==null?void 0:I.name)??"":o.graphType.value==="graph"?o.updateGraph({name:f.value}):o.updateCustomGraph({name:f.value})}const E=g(()=>o.graphType.value==="graph"?o.graphs.value.map(I=>{var B;const R=((B=i.value)==null?void 0:B.id)!==I.armatureId;return{value:I.id,label:`${R?"(x)":""} ${I.name}`}}):o.customGraphs.value.map(I=>({value:I.id,label:I.name}))),h=g({get:()=>{var I;return((I=o.selectedGraphByType.value)==null?void 0:I.id)??""},set:I=>o.switchGraph(I)}),S=o.selectedNodes,$=o.editedNodeMap,_=o.edgePositionMap,A=g(()=>{var Y,Ce;const I=o.draftEdge.value;if(!I)return;const R=$.value,B=_.value;if(I.type==="draft-input"){const Le=R[I.output.nodeId],Fe=uo((Y=u.value(Le.type))==null?void 0:Y.struct,Le,I.output.key);return Le?[{output:te(Le.position,B[Le.id].outputs[I.output.key].p),input:I.input,type:Fe,connected:I.connected}]:void 0}else{const Le=I.inputs[0],Fe=un((Ce=u.value(R[Le.nodeId].type))==null?void 0:Ce.struct,R[Le.nodeId],Le.key);return I.inputs.filter(Qe=>R[Qe.nodeId]).map(Qe=>({output:I.output,input:te(R[Qe.nodeId].position,B[Qe.nodeId].inputs[Qe.key].p),type:Fe,connected:I.connected,draftOutput:!0}))}});QI(()=>{const I=a.lastSelectedActor.value;if(o.graphType.value!=="graph"||!I||!r.value)return[];if(I.armatureId!==r.value.armatureId)return[];const R=ie(qo([I.svgTree]));return I.elements.map(B=>({value:B,label:Zf(R[B])}))}),tL(()=>{const I=n.lastSelectedArmature.value;return o.graphType.value!=="graph"||!I||!r.value?[]:I.id!==r.value.armatureId?[]:Object.values(n.boneMap.value).map(R=>({value:R.id,label:R.name}))});const O=o.graphType,T=I=>o.setGraphType(I),L=o.edgeSummaryMap,N=o.nodeErrorMessagesMap,U=g(()=>{const I=Z(L.value,()=>({inputs:{},outputs:{}}));return Object.values(L.value).forEach(R=>{Object.values(R).forEach(B=>{var Y,Ce,Le,Fe;(Y=I[B.inputId].inputs)[Ce=B.inputKey]??(Y[Ce]={p:B.to,type:B.type}),(Le=I[B.outputId].outputs)[Fe=B.outputKey]??(Le[Fe]={p:B.from,type:B.type})})}),I});return(I,R)=>(b(),M("div",_P,[C("div",bP,[k(Kn,{"model-value":G(O),options:t,"onUpdate:modelValue":T},null,8,["model-value"]),C("div",SP,[k(Lt,{modelValue:h.value,"onUpdate:modelValue":R[0]||(R[0]=B=>h.value=B),options:E.value},null,8,["modelValue","options"])]),oa(C("input",{"onUpdate:modelValue":R[1]||(R[1]=B=>f.value=B),type:"text",class:"name-input",onChange:y},null,544),[[ms,f.value]]),C("div",wP,[C("button",{type:"button",class:"add-graph",title:"Add graph",disabled:!i.value,onClick:m},[k($v)],8,kP),C("button",{type:"button",class:"delete-graph",title:"Delete graph",disabled:!h.value,onClick:v},[k(Os)],8,EP)]),CP]),C("div",MP,[k(fI,{class:"canvas",canvas:G(s)},{default:D(()=>[C("g",null,[(b(!0),M(ve,null,Ie(G(L),(B,Y)=>(b(),M("g",{key:`edge_${Y}`},[(b(!0),M(ve,null,Ie(B,(Ce,Le)=>(b(),M("g",{key:Le},[(b(),be(bd,{key:Le,from:Ce.from,to:Ce.to,"input-id":Ce.inputId,"input-key":Ce.inputKey,"output-id":Ce.outputId,"output-key":Ce.outputKey},null,8,["from","to","input-id","input-key","output-id","output-key"]))]))),128))]))),128))]),C("g",null,[(b(!0),M(ve,null,Ie(G($),B=>(b(),M("g",{key:`node_${B.id}`},[(b(),be(tu(B.type==="reroute"?yP:aP),{node:B,"edge-positions":G(_)[B.id],selected:G(S)[B.id],errors:G(N)[B.id]},null,8,["node","edge-positions","selected","errors"])),(b(!0),M(ve,null,Ie(U.value[B.id].inputs,(Y,Ce)=>(b(),M("g",{key:`input_${Ce}`},[k(Zr,{type:Y.type,transform:`translate(${Y.p.x-8},${Y.p.y})`},null,8,["type","transform"])]))),128)),(b(!0),M(ve,null,Ie(U.value[B.id].outputs,(Y,Ce)=>(b(),M("g",{key:`output_${Ce}`},[k(Qr,{type:Y.type,transform:`translate(${Y.p.x+8},${Y.p.y})`},null,8,["type","transform"])]))),128))]))),128))]),A.value?(b(),M("g",OP,[(b(!0),M(ve,null,Ie(A.value,(B,Y)=>(b(),M("g",{key:`draft-edge_${Y}`},[k(bd,{from:B.output,to:B.input,status:B.connected?"connected":"connecting"},null,8,["from","to","status"]),!B.draftOutput||B.connected?(b(),be(Zr,{key:0,type:B.type,transform:`translate(${B.input.x-(B.connected?8:0)},${B.input.y})`},null,8,["type","transform"])):ce("",!0),B.draftOutput||B.connected?(b(),be(Qr,{key:1,type:B.type,transform:`translate(${B.output.x+(B.connected?8:0)},${B.output.y})`},null,8,["type","transform"])):ce("",!0)]))),128))])):ce("",!0)]),_:1},8,["canvas"]),k(hL,{delighlight:l.value,class:"side-bar"},null,8,["delighlight"])])]))}});const AP=Te(TP,[["__scopeId","data-v-305e3c1d"]]);function Uv(e,t,n){return{x:Bm(t),y:e.value*n}}function Rl(e,t){return{x:Bm(e.x),y:e.y*t}}function $P(e,t){return{x:Fu(e.x),y:e.y/t}}function xP(e,t,n,a,o,r){if(e===a.length-1)return{...n};const s=a[e+1],l=Uv(s.points[o],s.frame,r);if(t.curve.name!=="bezier3")return{...n,to:l};const u=Rl(t.curve.controlOut,r),i=Rl(s.points[o].curve.controlIn,r),[,c,d]=Sm(n.from,u,i,l),[,p,f]=wm(n.from,u,i,l);return{...n,to:l,c1:c,c2:d,fixedC1:p,fixedC2:f,controlOut:c}}function IP(e){const t=e.keyframes.length,n={};let a;return e.keyframes.reduce((o,r,s)=>{const l=e.selectedStateMap[r.id],u=r.points[e.pointKey],i=Uv(u,r.frame,e.valueWidth),c=(a==null?void 0:a.name)==="bezier3"?te(Rl(u.curve.controlIn,e.valueWidth),i):void 0;n[r.id]=!0;const d=xP(s,u,{id:r.id,keyframeName:r.name,name:u.curve.name,selected:(l==null?void 0:l.props[e.pointKey])??!1,first:s===0,last:s===t-1,from:i,controlIn:c},e.keyframes,e.pointKey,e.valueWidth);return a=d,o[d.id]=d,o},{})}function LP(e,t,n,a=!1){return Object.keys(t).reduce((o,r)=>(e[r]&&(o[r]=PP(e[r],t[r],n,a)),o),{})}function PP(e,t,n,a=!1){return{...e,points:Z(e.points,(o,r)=>{const s=t[r];if(!s)return o;if(s.controlIn){const l={x:Math.min(o.curve.controlIn.x+n.x,0),y:o.curve.controlIn.y+n.y},u=a?hc({x:0,y:0},l,o.curve.controlOut):o.curve.controlOut;return{value:o.value,curve:{name:o.curve.name,controlIn:l,controlOut:u}}}else{const l={x:Math.max(o.curve.controlOut.x+n.x,0),y:o.curve.controlOut.y+n.y},u=a?hc({x:0,y:0},l,o.curve.controlIn):o.curve.controlIn;return{value:o.value,curve:{name:o.curve.name,controlIn:u,controlOut:l}}}})}}function Ed(){return BP}const BP={getLabel:()=>"Grabbing",shouldRequestPointerLock:!0,onStart:async e=>{e.startEditMovement()},onEnd:async e=>{e.setEditMovement()},handleEvent:async(e,t)=>{switch(t.type){case"pointermove":e.setEditMovement({...t.data,current:{x:t.data.current.x,y:t.data.start.y}});return;case"pointerup":return t.data.options.button===0&&e.completeEdit(),jl;case"keydown":switch(t.data.key){case"Escape":return jl}return}}};function Kv(){let e="";return{getLabel:()=>"MovingFrame",onStart:async t=>{t.startDragging(),e=t.generateSeriesKey()},handleEvent:async(t,n)=>{switch(n.type){case"pointerdrag":t.setCurrentFrame(xl(n.data.current.x),e);return;case"pointerup":return t.setCurrentFrame(xl(n.data.point.x),e),{type:"break"};case"keydown":switch(n.data.key){case"Escape":return{type:"break"}}return}}}}function zv(e){return{getLabel:()=>"ChangingCurveType",onStart:async t=>{t.setPopupMenuList({items:bm.map(n=>({label:n.label,key:n.name})),point:e.point})},onEnd:async t=>{t.setPopupMenuList()},handleEvent:async(t,n)=>{switch(n.type){case"pointerdown":switch(n.data.options.button){case 1:return Ut}return{type:"break"};case"keydown":switch(n.data.key){case"Escape":return{type:"break"}}return;case"popupmenu":{const a=t.getSelectedKeyframes();return t.updateKeyframes(mM(nt(t.getKeyframes(),a),a,o=>({...o,curve:{...o.curve,name:n.data.key}}))),{type:"break"}}}}}}function Yv(e){const t=e.getKeyframes(),n=Object.keys(e.getSelectedKeyframes()).reduce((a,o)=>{const r=t[o];if(r){const s=e.generateUuid();a[s]=xm({...r,id:s})}return a},{});e.setTmpKeyframes(n)}const Cd=Cs("keyframes");function es(e){return Es(()=>({"text/plain":Cd.serialize(Ee(Im(e.getKeyframes(),e.getSelectedKeyframes()).selected))}),async t=>{const n=t.find(r=>r.kind==="string");if(!n)return;const a=await n.getAsString(),o=Cd.deserialize(a);o.length!==0&&e.pasteKeyframes(o)})}function jl(){return RP}const RP={getLabel:()=>"Default",onStart:async e=>{Md(e)},handleEvent:async(e,t)=>{switch(t.type){case"pointerdown":switch(t.data.options.button){case 0:switch(t.target.type){case"keyframes-by-frame":{const n=parseInt(t.target.id),a=Ze(e.getKeyframes(),o=>o.frame===n);Object.keys(a).length>0&&e.selectKeyframes(Z(a,o=>Yr(o)),t.data.options.shift);return}case"keyframe-body":{const n=t.target.id;e.selectKeyframe(n,Yr(e.getKeyframes()[n]),t.data.options.shift);return}case"keyframe-prop":{const n=t.target.data.key;e.selectKeyframe(t.target.id,{props:{[n]:!0}},t.data.options.shift);return}case"frame-control":return Kv;default:t.data.options.shift||e.selectKeyframe("");return}case 1:return Ut}return;case"keydown":switch(t.data.key){case"a":e.selectAllKeyframes();return;case"x":e.getLastSelectedKeyframeId()&&e.deleteKeyframes();return;case"g":return e.getLastSelectedKeyframeId()?Ed:void 0;case"D":return e.getLastSelectedKeyframeId()?(Yv(e),Ed):void 0;case"t":if(e.getLastSelectedKeyframeId()){const n=t.point;return n?()=>zv({point:n}):void 0}return;case"!":case"Home":{e.setViewport();return}default:return}case"copy":{es(e).onCopy(t.nativeEvent);return}case"paste":{await es(e).onPaste(t.nativeEvent);return}case"selection":Md(e);return;default:return}}};function Md(e){e.setCommandExams([{command:"a",title:"All Select"},...e.getLastSelectedKeyframeId()?[{command:"g",title:"Grab"},{command:"t",title:"Interpolation"},{command:"x",title:"Delete"},{command:"D",title:"Duplicate"}]:[],{command:"Space",title:"Play/Stop"}])}function Od(){return jP}const jP={getLabel:()=>"Grabbing",shouldRequestPointerLock:!0,onStart:async e=>{e.startEditMovement()},onEnd:async e=>{e.setEditMovement()},handleEvent:async(e,t)=>{switch(t.type){case"pointermove":e.setEditMovement(t.data);return;case"pointerup":return t.data.options.button===0&&e.completeEdit(),ka;case"keydown":switch(t.data.key){case"Escape":return ka}return}}};function NP(e){return{getLabel:()=>"MovingBezier",onStart:async t=>{t.startDragging(),t.setCommandExams([{command:"Shift",title:"Synchronize"},{command:tn(),title:"Symmetrize"}])},handleEvent:async(t,n)=>{switch(n.type){case"pointerdrag":{const a=LP(t.getKeyframes(),n.data.shift?Z(t.getSelectedKeyframes(),({props:o})=>Z(o,()=>e.controls)):{[e.id]:{[e.key]:e.controls}},t.toCurveControl(Oe(n.data.current,n.data.start)),n.data.ctrl);t.setTmpKeyframes(a);return}case"pointerup":return t.completeEdit(),ka;case"keydown":switch(n.data.key){case"Escape":return ka}return}}}}function VP(){return DP}const DP={getLabel:()=>"RectangleSelecting",onStart:async e=>{e.startDragging(),e.setRectangleDragging(!0)},onEnd:async e=>{e.setRectangleDragging()},handleEvent:async(e,t)=>{switch(t.type){case"pointerup":{const n=e.getDraggedRectangle();if(n){const a=e.toFrameValue(n,!0),o=e.toFrameValue({x:n.x+n.width,y:n.y+n.height},!0);e.selectKeyframes(yM(e.getKeyframes(),[a.x,o.x],[a.y,o.y]),t.data.options.shift)}return ka}case"keydown":switch(t.data.key){case"Escape":return ka}return}}};function ka(){return FP}const FP={getLabel:()=>"Default",onStart:async e=>{Td(e)},handleEvent:async(e,t)=>{switch(t.type){case"pointerdown":switch(t.data.options.button){case 0:switch(t.target.type){case"keyframe-body":{const n=t.target.id;e.selectKeyframe(n,Yr(e.getKeyframes()[n]),t.data.options.shift);return}case"keyframe-prop":{const n=t.target.data.key;e.selectKeyframe(t.target.id,{props:{[n]:!0}},t.data.options.shift);return}case"frame-control":return Kv;case"bezier-control":{const n=t.target.data??{};return()=>NP({id:t.target.id,key:n.key,controls:{controlIn:!!n.control_in,controlOut:!!n.control_out}})}default:return t.data.options.shift||e.selectKeyframe(""),VP}case 1:return Ut}return;case"keydown":switch(t.data.key){case"a":e.selectAllKeyframes();return;case"x":e.getLastSelectedKeyframeId()&&e.deleteKeyframes();return;case"g":return e.getLastSelectedKeyframeId()?Od:void 0;case"D":return e.getLastSelectedKeyframeId()?(Yv(e),Od):void 0;case"t":if(e.getLastSelectedKeyframeId()){const n=t.point;return n?()=>zv({point:n}):void 0}return;case"!":case"Home":{e.setViewport();return}default:return}case"copy":{es(e).onCopy(t.nativeEvent);return}case"paste":{await es(e).onPaste(t.nativeEvent);return}case"selection":Td(e);return;default:return}}};function Td(e){e.setCommandExams([{command:"a",title:"All Select"},...e.getLastSelectedKeyframeId()?[{command:"g",title:"Grab"},{command:"t",title:"Interpolation"},{command:"x",title:"Delete"},{command:"D",title:"Duplicate"}]:[],{command:"Space",title:"Play/Stop"}])}function GP(){return UP}const UP={getLabel:()=>"Default",handleEvent:async(e,t)=>{switch(t.type){case"pointerdown":switch(t.data.options.button){case 1:return Ut}return;case"keydown":switch(t.data.key){case"a":e.selectAllKeyframes();return;case"!":case"Home":{e.setViewport();return}default:return}default:return}}};function KP(e){return e.canvasType==="graph"?{sm:za(Ad(e),ka)}:e.canvasType==="label"?{sm:za(Ad(e),GP)}:{sm:za(zP(e),jl)}}function zP(e){return Hv(e)}function Ad(e){return{...Hv(e),toCurveControl:t=>$P(t,e.settings.graphValueWidth),toFrameValue:(t,n)=>Rm(t,e.settings.graphValueWidth,n)}}function Hv(e){const{animationStore:t}=e;return{...YP(e),generateUuid:We,setViewport:e.setViewport,panView:e.panView,startDragging:e.startDragging,setRectangleDragging:e.setRectangleDragging,getDraggedRectangle:e.getDraggedRectangle,setPopupMenuList:e.setPopupMenuList,setCommandExams:e.setCommandExams,generateSeriesKey:()=>`${Date.now()}`,startEditMovement:e.startEditMovement,getCursorPoint:e.getCursorPoint,getEditMovement:t.getEditMovement,setEditMovement:t.setEditMovement,completeEdit:t.completeEdit,setCurrentFrame:t.setCurrentFrame,getKeyframes:()=>t.visibledKeyframeMap.value,getLastSelectedKeyframeId:()=>{var n;return((n=t.lastSelectedKeyframe.value)==null?void 0:n.id)??""},getSelectedKeyframes:()=>t.selectedKeyframeMap.value,selectKeyframe:t.selectKeyframe,selectKeyframes:t.selectKeyframes,selectAllKeyframes:t.selectAllKeyframes,deleteKeyframes:t.execDeleteKeyframes,updateKeyframes:t.execUpdateKeyframes,pasteKeyframes:t.pasteKeyframes,setTmpKeyframes:t.setTmpKeyframes}}function YP(e){return{requestPointerLock:e.requestPointerLock,exitPointerLock:e.exitPointerLock,getTimestamp:()=>Date.now()}}const HP=["viewBox","width","height"],XP=q({__name:"TimelineCanvas",props:{canvas:{},canvasType:{}},setup(e){const t=e,{wrapper:n,svg:a,addRootPosition:o,removeRootPosition:r}=Gu(()=>t.canvas);Pu(()=>t.canvas.scale.value);const s=H(),l=g(()=>s.value?o(t.canvas.canvasToView(s.value.point)):void 0),u=Hu(()=>{var Y;return((Y=s.value)==null?void 0:Y.items.map(({label:Ce,key:Le,data:Fe})=>({label:Ce,exec:Le?()=>$(Le,Fe):void 0})))??[]}),i=H(),c=cn(),{settings:d}=Mt(),p=KP({indexStore:Rt(),animationStore:c,settings:d,canvasType:t.canvasType,requestPointerLock:()=>{a.value&&(t.canvas.startMoving(),m.requestPointerLockFromElement(a.value))},exitPointerLock:()=>{m.exitPointerLock(),t.canvas.endMoving()},startEditMovement:()=>{c.setEditMovement({start:t.canvas.viewToCanvas(t.canvas.mousePoint.value),current:t.canvas.viewToCanvas(t.canvas.mousePoint.value),ctrl:!1,scale:t.canvas.scale.value})},startDragging:()=>t.canvas.startDragging(),getCursorPoint:()=>t.canvas.viewToCanvas(t.canvas.mousePoint.value),setViewport:Y=>t.canvas.setViewport(Y),panView:Y=>t.canvas.viewMove(Y),setRectangleDragging:Y=>t.canvas.setRectangleDragging(Y),getDraggedRectangle:()=>t.canvas.draggedRectangle.value,setPopupMenuList:Y=>s.value=Y,setCommandExams:Y=>i.value=Y}),f=sa(E,1e3/60,!0),m=hs({onMove:f,onGlobalMove:Y=>{if(!a.value)return;const Ce=r(Y.p);Ce&&t.canvas.setMousePoint(Ce)},onEscape:()=>{p.sm.handleEvent({type:"keydown",data:{key:"Escape"},point:t.canvas.viewToCanvas(t.canvas.mousePoint.value)})}});vt(c.selectedKeyframeMap,()=>{p.sm.handleEvent({type:"selection"})});function v(Y){p.sm.handleEvent({type:"pointerdown",target:Qa(Y),data:{point:t.canvas.viewToCanvas(t.canvas.mousePoint.value),options:gn(Y)}})}function y(Y){t.canvas.endMoving(),p.sm.handleEvent({type:"pointerup",target:Qa(Y),data:{point:t.canvas.viewToCanvas(t.canvas.mousePoint.value),options:gn(Y)}})}function E(Y){t.canvas.editStartPoint.value&&p.sm.handleEvent({type:"pointermove",data:{start:t.canvas.viewToCanvas(t.canvas.editStartPoint.value),current:t.canvas.viewToCanvas(t.canvas.mousePoint.value),ctrl:Y.ctrl,shift:Y.shift,scale:t.canvas.scale.value}})}function h(Y){t.canvas.dragged.value&&t.canvas.editStartPoint.value&&p.sm.handleEvent({type:"pointerdrag",data:{start:t.canvas.viewToCanvas(t.canvas.editStartPoint.value),current:t.canvas.viewToCanvas(t.canvas.mousePoint.value),scale:t.canvas.scale.value,...gn(Y)}})}function S(Y){p.sm.handleEvent({type:"keydown",data:Vo(Y),point:t.canvas.viewToCanvas(t.canvas.mousePoint.value)})}function $(Y,Ce={}){p.sm.handleEvent({type:"popupmenu",data:{key:Y,...Ce}})}function _(Y){p.sm.handleEvent({type:"copy",nativeEvent:Y})}function A(Y){p.sm.handleEvent({type:"paste",nativeEvent:Y})}const O=g(()=>t.canvas.scale.value),T=g(()=>t.canvas.viewOrigin.value),L=g(()=>t.canvas.viewSize.value),N=g(()=>t.canvas.viewBox.value),U=g(()=>u.list.value),I=g(()=>t.canvas.draggedRectangle.value),R=_,B=A;return(Y,Ce)=>(b(),M("div",{ref_key:"wrapper",ref:n,class:"timeline-canvas-root"},[k(Ru,{onKeydown:S,onCopy:G(R),onPaste:G(B)},{default:D(()=>[(b(),M("svg",{ref_key:"svg",ref:a,xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none","font-family":"sans-serif",viewBox:N.value,width:L.value.width,height:L.value.height,onWheel:Ce[0]||(Ce[0]=ze((...Le)=>Y.canvas.wheel&&Y.canvas.wheel(...Le),["prevent"])),onMousedown:ze(v,["prevent"]),onMouseup:ze(y,["prevent"]),onMousemove:h,onContextmenu:Ce[1]||(Ce[1]=ze(()=>{},["prevent"]))},[ot(Y.$slots,"default",{scale:O.value,viewOrigin:T.value,viewSize:L.value},void 0,!0),I.value?(b(),be(Bu,{key:0,x:I.value.x,y:I.value.y,width:I.value.width,height:I.value.height,class:"view-only"},null,8,["x","y","width","height"])):ce("",!0)],40,HP))]),_:3},8,["onCopy","onPaste"]),k(iu,{class:"command-exam-panel","available-command-list":i.value},null,8,["available-command-list"]),U.value.length>0&&l.value?(b(),be(cu,{key:0,class:"popup-menu-list","popup-menu-list":U.value,style:st({left:`${l.value.x-20}px`,top:`${l.value.y-10}px`})},null,8,["popup-menu-list","style"])):ce("",!0)],512))}});const ol=Te(XP,[["__scopeId","data-v-ad1b6040"]]),WP={class:"view-only"},JP=["transform"],qP=["y1","stroke-width"],ZP={class:"view-only"},QP=["transform"],eB=C("g",{transform:"scale(-1, 1)"},[C("rect",{width:"200000",height:"200000"})],-1),tB=["transform"],nB=C("rect",{width:"200000",height:"200000"},null,-1),aB=[nB],oB={class:"view-only"},rB=["transform","y1"],sB=["transform"],lB=["height"],uB={class:"view-only"},iB=["transform"],cB=["y","font-size"],dB={class:"view-only"},pB=["transform"],fB=["x","y","width"],mB=["y"],$d=q({__name:"TimelineAxis",props:{scale:{default:1},originX:{default:0},viewWidth:{default:100},currentFrame:{default:0},endFrame:{default:60},headerHeight:{default:24}},setup(e){const t=e,n=g(()=>gM(t.scale)),a=g(()=>wM(n.value,t.originX)),o=g(()=>Math.ceil(t.viewWidth*t.scale/vn)),r=g(()=>Math.ceil(o.value/n.value)+3),s=g(()=>[...Array(r.value)].map((c,d)=>{const p=d*n.value+a.value;return{f:p,labelSize:p%10===0?14:p%5===0?11:0,strokeWidth:p%10===0?2:1}})),l=g(()=>t.currentFrame*vn),u=g(()=>Math.max(t.currentFrame.toString().length,2)*10+2),i=g(()=>t.endFrame*vn);return(c,d)=>(b(),M("g",null,[C("g",WP,[(b(!0),M(ve,null,Ie(s.value,p=>(b(),M("g",{key:p.f,transform:`translate(${p.f*G(vn)}, 0) scale(${c.scale})`},[p.strokeWidth>0?(b(),M("line",{key:0,x1:"0",y1:c.headerHeight,x2:"0",y2:"20000",class:"stroke-background-second","stroke-width":p.strokeWidth},null,8,qP)):ce("",!0)],8,JP))),128))]),C("g",ZP,[C("g",{transform:`translate(0, ${c.headerHeight})`,stroke:"none","fill-opacity":"0.5",class:"fill-background-second"},[eB,C("g",{transform:`translate(${i.value}, 0)`},aB,8,tB)],8,QP)]),C("g",oB,[C("line",{transform:`translate(${l.value}, 0) scale(${c.scale})`,x1:"0",y1:c.headerHeight,x2:"0",y2:"20000",stroke:"blue","stroke-width":"2"},null,8,rB)]),ot(c.$slots,"default"),C("g",{transform:`scale(${c.scale})`,"data-type":"frame-control"},[C("rect",{x:"-100000",width:"200000",height:c.headerHeight,class:"fill-background stroke-text"},null,8,lB)],8,sB),C("g",uB,[(b(!0),M(ve,null,Ie(s.value,p=>(b(),M("g",{key:p.f,transform:`translate(${p.f*G(vn)}, 0) scale(${c.scale})`},[p.labelSize>0?(b(),M("text",{key:0,y:c.headerHeight-4,"font-size":p.labelSize,"dominant-baseline":"text-after-edge","text-anchor":"middle",class:"fill-text"},Ne(p.f),9,cB)):ce("",!0)],8,iB))),128))]),C("g",dB,[C("g",{transform:`translate(${l.value}, 0) scale(${c.scale})`},[C("rect",{x:-u.value/2,y:c.headerHeight-22,width:u.value,height:20,rx:"4",ry:"4",fill:"blue",stroke:"none"},null,8,fB),C("text",{y:c.headerHeight-4,"font-size":"12","dominant-baseline":"text-after-edge","text-anchor":"middle",fill:"#fff"},Ne(c.currentFrame),9,mB)],8,pB)])]))}}),vB={"font-size":"14","text-anchor":"middle","dominant-baseline":"middle"},hB=["transform"],yB={transform:"translate(10,0) rotate(-90)"},gB={class:"fill-text"},_B=["x2"],bB=q({__name:"GraphAxis",props:{scale:{default:1},originY:{default:0},viewWidth:{default:100},viewHeight:{default:100}},setup(e){const t=e,{settings:n}=Mt(),a=g(()=>_M(n.graphValueWidth,t.scale)),o=g(()=>kM(n.graphValueWidth,a.value,t.originY)),r=g(()=>Math.ceil(t.viewHeight*t.scale/n.graphValueWidth)),s=g(()=>Math.ceil(r.value/a.value)+3),l=g(()=>[...Array(s.value)].map((i,c)=>c*a.value+o.value)),u=g(()=>n.graphValueWidth);return(i,c)=>(b(),M("g",vB,[(b(!0),M(ve,null,Ie(l.value,d=>(b(),M("g",{key:d,transform:`translate(0, ${d*u.value}) scale(${i.scale})`},[C("g",yB,[C("text",gB,Ne(d),1)]),C("line",{x1:"16",x2:i.viewWidth,stroke:"#aaa"},null,8,_B)],8,hB))),128))]))}}),SB=e=>(dt("data-v-0852b150"),e=e(),pt(),e),wB=["width","height"],kB=["y"],EB=["transform"],CB=SB(()=>C("rect",{x:"-1",y:"-1",width:"14",height:"14",stroke:"none",class:"fill-background-second"},null,-1)),MB={"stroke-linejoin":"round",stroke:"none",class:"fill-background"},OB={key:0,d:"M2 9L10 9L6 3z"},TB={key:1,d:"M10 3L2 3L6 9z"},AB=q({__name:"TimelineRow",props:{labelWidth:{default:100},labelHeight:{default:24},label:{},expanded:{type:Boolean},showExpanded:{type:Boolean},selected:{type:Boolean},highlight:{type:Boolean,default:!1}},emits:["toggle-expanded"],setup(e,{emit:t}){const n=t;function a(){n("toggle-expanded")}return(o,r)=>(b(),M("g",{class:"toggle-expanded",onClick:a},[C("rect",{width:o.labelWidth,height:o.labelHeight,class:"fill-background stroke-text"},null,8,wB),C("text",{x:"4",y:o.labelHeight/2,"dominant-baseline":"central",class:qe(o.highlight?"fill-highlight":"fill-text")},Ne(o.label),11,kB),o.showExpanded?(b(),M("g",{key:0,transform:`translate(${o.labelWidth-16}, ${o.labelHeight/2-6})`},[CB,C("g",MB,[o.expanded?(b(),M("path",OB)):(b(),M("path",TB))])],8,EB)):ce("",!0)]))}});const gr=Te(AB,[["__scopeId","data-v-0852b150"]]),$B=["width"],xB=["x1","x2"],IB=["transform"],LB=["transform"],PB={key:0},BB=["transform"];function RB(e){return{translateX:"Translate X",translateY:"Translate Y",rotate:"Rotate",scaleX:"Scale X",scaleY:"Scale Y",influence:"Influence"}[e]??""}const jB=q({__name:"TimelineTargets",props:{targetList:{default:()=>[]},labelWidth:{default:200},height:{default:24},scrollY:{default:0},targetExpandedMap:{default:()=>({})},targetTopMap:{default:()=>({})},propsStateMap:{default:()=>({})}},emits:["toggle-target-expanded","select"],setup(e,{emit:t}){const n=e,a=t;function o(u){a("toggle-target-expanded",u)}const r=g(()=>n.targetList.map(u=>rm(n.height,0,u.children)));function s(u,i){var c;return((c=n.propsStateMap[u])==null?void 0:c.props[i])==="selected"}function l(u,i,c=!1){a("select",u,{props:{[i]:"selected"}},c)}return(u,i)=>(b(),M("g",null,[C("rect",{width:u.labelWidth,height:"10000",stroke:"none",class:"fill-background"},null,8,$B),C("line",{x1:u.labelWidth,y1:"0",x2:u.labelWidth,y2:"10000",class:"stroke-text"},null,8,xB),C("g",{transform:`translate(0, ${-u.scrollY})`},[(b(!0),M(ve,null,Ie(u.targetList,(c,d)=>(b(),M("g",{key:c.id,transform:`translate(0, ${u.targetTopMap[c.id]})`},[k(gr,{"label-width":u.labelWidth,"label-height":u.height,label:c.name,expanded:u.targetExpandedMap[c.id],"show-expanded":"",onToggleExpanded:p=>o(c.id)},null,8,["label-width","label-height","label","expanded","onToggleExpanded"]),u.targetExpandedMap[c.id]?(b(),M("g",PB,[(b(!0),M(ve,null,Ie(Object.entries(r.value[d]),([p,f])=>(b(),be(gr,{key:p,transform:`translate(10, ${f})`,"label-width":u.labelWidth-10,"label-height":u.height,label:RB(p),highlight:s(c.id,p),onClick:[ze(m=>l(c.id,p),["left","exact"]),ze(m=>l(c.id,p,!0),["left","shift","exact"])]},null,8,["transform","label-width","label-height","label","highlight","onClick"]))),128))])):ce("",!0)],8,LB))),128))],8,IB),C("g",null,[k(gr,{"label-width":u.labelWidth,"label-height":u.height,label:""},null,8,["label-width","label-height"])]),C("g",{transform:`translate(0, ${u.height})`},[k(gr,{"label-width":u.labelWidth,"label-height":u.height,label:"Summary"},null,8,["label-width","label-height"])],8,BB)]))}}),NB={key:0},VB=["y","width"],DB=["cy","fill"],FB=["cy"],xd=q({__name:"KeyPoint",props:{top:{},selected:{type:Boolean,default:!1},sameRangeWidth:{default:0},tooltip:{default:""}},emits:["select","shift-select"],setup(e,{emit:t}){const n=t,{settings:a}=Mt(),o=g(()=>a.selectedColor);function r(){n("select")}function s(){n("shift-select")}return(l,u)=>(b(),M("g",null,[l.tooltip?(b(),M("title",NB,Ne(l.tooltip),1)):ce("",!0),C("rect",{y:l.top-3,width:l.sameRangeWidth,height:"6",fill:"#aaa","fill-opacity":"0.5",class:"view-only"},null,8,VB),C("circle",{cy:l.top,r:"5",stroke:"#000",fill:l.selected?o.value:"#fff"},null,8,DB),C("circle",{cy:l.top,r:"10",fill:"transparent",onClick:[ze(r,["left","exact"]),ze(s,["left","shift","exact"])]},null,8,FB)]))}}),GB=q({__name:"KeyPointGroup",props:{keyFrame:{},childMap:{},top:{default:0},selectedState:{default:()=>({name:"",props:{}})},expanded:{type:Boolean,default:!1},sameRangeWidth:{default:()=>Am(()=>0).props},height:{default:24},scrollY:{default:0}},setup(e){const t=e;function n(r){return r>t.scrollY+t.height*1.5}const a=g(()=>Om(t.selectedState)),o=g(()=>Ze(rm(t.height,t.top,t.childMap),(r,s)=>s in t.keyFrame.points&&n(r)));return(r,s)=>(b(),M("g",null,[n(r.top)?(b(),be(xd,{key:0,top:r.top,selected:a.value,"same-range-width":r.sameRangeWidth.all,"data-type":"keyframe-body","data-id":r.keyFrame.id},null,8,["top","selected","same-range-width","data-id"])):ce("",!0),r.expanded?(b(!0),M(ve,{key:1},Ie(o.value,(l,u)=>(b(),be(xd,{key:u,top:l,selected:r.selectedState.props[u],"same-range-width":r.sameRangeWidth[u],tooltip:r.keyFrame.points[u].curve.name,"data-type":"keyframe-prop","data-id":r.keyFrame.id,"data-key":u},null,8,["top","selected","same-range-width","tooltip","data-id","data-key"]))),128)):ce("",!0)]))}}),UB=["transform"],KB=C("line",{x1:"-100000",x2:"100000",class:"stroke-text"},null,-1),zB=[KB],YB=["transform"],HB=["transform"],XB=["data-id","cy","fill"],WB=["transform"],JB=q({__name:"KeyframeGroup",props:{scale:{default:1},keyframeMapByFrame:{default:()=>({})},targetList:{default:()=>[]},selectedKeyframeMap:{default:()=>({})},scrollY:{default:0},height:{default:24},targetExpandedMap:{default:()=>({})},targetTopMap:{default:()=>({})}},setup(e){const t=e,{settings:n}=Mt(),a=g(()=>t.targetList.map(m=>m.id)),o=g(()=>a.value.reduce((m,v,y)=>(m[v]=y,m),{})),r=g(()=>o.value),s=g(()=>Object.keys(t.keyframeMapByFrame).reduce((m,v)=>(m[v]=p(t.keyframeMapByFrame[v]),m),{})),l=g(()=>Za(Object.keys(t.keyframeMapByFrame).flatMap(m=>t.keyframeMapByFrame[m]))),u=g(()=>cM(l.value));function i(m,v){var h;const y=(h=u.value[m])==null?void 0:h[v];if(!y)return;const E=Z(y.props,S=>S*vn/t.scale);return E.all=Math.min(...Object.keys(E).map(S=>E[S])),E}const c=g(()=>Z(t.keyframeMapByFrame,m=>m.some(v=>t.selectedKeyframeMap[v.id]))),d=g(()=>ie(t.targetList));function p(m){return m.filter(v=>r.value[v.targetId]>-1).sort((v,y)=>r.value[v.targetId]-r.value[y.targetId])}const f=n.selectedColor;return(m,v)=>(b(),M("g",null,[C("g",{transform:`scale(${m.scale}) translate(0, ${m.height*2})`},zB,8,UB),(b(!0),M(ve,null,Ie(s.value,(y,E)=>(b(),M("g",{key:E,transform:`translate(${parseInt(E)*G(vn)}, 0)`},[C("g",{transform:`scale(${m.scale}) translate(0, ${m.height/2})`},[y.length>0?(b(),M("circle",{key:"all","data-type":"keyframes-by-frame","data-id":E,cy:m.height,r:"5",stroke:"#000",fill:c.value[E]?G(f):"#fff"},null,8,XB)):ce("",!0),C("g",{transform:`translate(0, ${-m.scrollY})`},[(b(!0),M(ve,null,Ie(y,h=>(b(),M("g",{key:h.id},[k(GB,{"key-frame":h,"child-map":d.value[h.targetId].children,top:m.targetTopMap[h.targetId],"selected-state":m.selectedKeyframeMap[h.id],expanded:m.targetExpandedMap[h.targetId],"same-range-width":i(h.targetId,h.frame),height:m.height,"scroll-y":m.scrollY},null,8,["key-frame","child-map","top","selected-state","expanded","same-range-width","height","scroll-y"])]))),128))],8,WB)],8,HB)],8,YB))),128))]))}}),qB={stroke:"#000",fill:"#fff",class:"view-only"},ZB=["x1","y1","x2","y2"],QB=["x1","y1","x2","y2"],eR={stroke:"#000",fill:"#fff"},tR=["x","y","width","height"],nR=["x","y","width","height"],aR={fill:"transparent"},oR=["x","y","width","height","data-id","data-key"],rR=["x","y","width","height","data-id","data-key"],sR=q({__name:"BezierControls",props:{pointId:{},pointKey:{},c0:{},controlIn:{default:void 0},controlOut:{default:void 0},color:{default:"#fff"},scale:{default:1}},setup(e){const t=e,n=g(()=>10*t.scale);return(a,o)=>(b(),M("g",null,[C("g",qB,[a.controlIn?(b(),M("line",{key:0,x1:a.controlIn.x,y1:a.controlIn.y,x2:a.c0.x,y2:a.c0.y},null,8,ZB)):ce("",!0),a.controlOut?(b(),M("line",{key:1,x1:a.c0.x,y1:a.c0.y,x2:a.controlOut.x,y2:a.controlOut.y},null,8,QB)):ce("",!0)]),C("g",eR,[a.controlIn?(b(),M("rect",{key:0,x:a.controlIn.x-n.value/2,y:a.controlIn.y-n.value/2,width:n.value,height:n.value},null,8,tR)):ce("",!0),a.controlOut?(b(),M("rect",{key:1,x:a.controlOut.x-n.value/2,y:a.controlOut.y-n.value/2,width:n.value,height:n.value},null,8,nR)):ce("",!0)]),C("g",aR,[a.controlIn?(b(),M("rect",{key:0,x:a.controlIn.x-n.value,y:a.controlIn.y-n.value,width:n.value*2,height:n.value*2,"data-type":"bezier-control","data-id":a.pointId,"data-key":a.pointKey,"data-control_in":"true"},null,8,oR)):ce("",!0),a.controlOut?(b(),M("rect",{key:1,x:a.controlOut.x-n.value,y:a.controlOut.y-n.value,width:n.value*2,height:n.value*2,"data-type":"bezier-control","data-id":a.pointId,"data-key":a.pointKey,"data-control_out":"true"},null,8,rR)):ce("",!0)])]))}}),lR=["d","stroke","stroke-width"],uR=q({__name:"CurveBezier3",props:{c0:{},c1:{},c2:{},c3:{},color:{default:"#fff"},scale:{default:1},lineWidth:{default:1}},setup(e){const t=e,n=g(()=>`M ${t.c0.x},${t.c0.y} C ${t.c1.x},${t.c1.y} ${t.c2.x},${t.c2.y} ${t.c3.x},${t.c3.y}`);return(a,o)=>(b(),M("path",{d:n.value,stroke:a.color,"stroke-width":a.lineWidth*a.scale},null,8,lR))}}),iR=["stroke-width"],cR=["x1","y1","x2","y2"],dR=["x1","y1","x2","y2"],pR=q({__name:"CurveConstant",props:{from:{},to:{},color:{default:"#fff"},scale:{default:1},lineWidth:{default:1}},setup(e){return(t,n)=>(b(),M("g",{"stroke-width":t.lineWidth*t.scale},[C("line",{x1:t.from.x,y1:t.from.y,x2:t.to.x,y2:t.from.y},null,8,cR),C("line",{x1:t.to.x,y1:t.from.y,x2:t.to.x,y2:t.to.y},null,8,dR)],8,iR))}}),fR=["stroke","stroke-width"],mR=["x1","y1","x2","y2"],vR=["x1","y1","x2","y2"],hR={key:1},yR=["x1","y1","x2","y2","stroke-width"],gR=q({__name:"GraphCurveLine",props:{curve:{},first:{type:Boolean,default:!1},last:{type:Boolean,default:!1},color:{default:"#fff"},scale:{default:1},lineWidth:{default:1}},setup(e){return(t,n)=>(b(),M("g",{stroke:t.color,"stroke-width":t.lineWidth*t.scale,fill:"none"},[t.first?(b(),M("line",{key:0,x1:t.curve.from.x-2e4,y1:t.curve.from.y,x2:t.curve.from.x,y2:t.curve.from.y},null,8,mR)):ce("",!0),t.last?(b(),M("line",{key:1,x1:t.curve.from.x,y1:t.curve.from.y,x2:t.curve.from.x+2e4,y2:t.curve.from.y},null,8,vR)):t.curve.to?(b(),M(ve,{key:2},[t.curve.name==="bezier3"?(b(),be(uR,{key:0,c0:t.curve.from,c1:t.curve.fixedC1,c2:t.curve.fixedC2,c3:t.curve.to,color:t.color,scale:t.scale,"line-width":t.lineWidth},null,8,["c0","c1","c2","c3","color","scale","line-width"])):t.curve.name==="constant"?(b(),M("g",hR,[k(pR,{from:t.curve.from,to:t.curve.to,color:t.color,scale:t.scale,"line-width":t.lineWidth},null,8,["from","to","color","scale","line-width"])])):(b(),M("line",{key:2,x1:t.curve.from.x,y1:t.curve.from.y,x2:t.curve.to.x,y2:t.curve.to.y,"stroke-width":t.lineWidth*t.scale},null,8,yR))],64)):ce("",!0)],8,fR))}}),_R=q({__name:"GraphCurveLines",props:{curves:{},color:{default:"#fff"},scale:{default:1},lineWidth:{default:1}},setup(e){return(t,n)=>(b(),M("g",null,[(b(!0),M(ve,null,Ie(t.curves,a=>(b(),M("g",{key:a.id},[k(gR,{curve:a,color:t.color,scale:t.scale,first:a.first,last:a.last,"line-width":t.lineWidth},null,8,["curve","color","scale","first","last","line-width"])]))),128))]))}}),bR={class:"view-only"},SR=["cx","cy","r","stroke","stroke-width","fill","data-id","data-key"],Id=q({__name:"GraphKeyPoints",props:{pointKey:{},keyframes:{},selectedStateMap:{default:()=>({})},color:{default:"#fff"},focused:{type:Boolean,default:!1}},setup(e){const t=e,{settings:n}=Mt(),a=g(()=>IP({keyframes:t.keyframes,selectedStateMap:t.selectedStateMap,pointKey:t.pointKey,valueWidth:n.graphValueWidth})),o=kn(),r=g(()=>t.focused?6.5:5),s=g(()=>t.focused?2.5:1),l=g(o),u=g(()=>n.selectedColor);return(i,c)=>(b(),M("g",null,[C("g",bR,[k(_R,{curves:a.value,color:i.color,scale:l.value,"line-width":s.value},null,8,["curves","color","scale","line-width"])]),C("g",null,[(b(!0),M(ve,null,Ie(a.value,d=>(b(),M("g",{key:d.id},[C("title",null,Ne(i.pointKey),1),C("circle",{cx:d.from.x,cy:d.from.y,r:r.value*l.value,stroke:d.selected?"#000":"#777","stroke-width":l.value,fill:d.selected?u.value:i.color,"data-type":"keyframe-prop","data-id":d.id,"data-key":i.pointKey},null,8,SR)]))),128))]),C("g",null,[(b(!0),M(ve,null,Ie(a.value,d=>(b(),M("g",{key:d.id},[d.selected?(b(),be(sR,{key:0,"point-id":d.id,"point-key":i.pointKey,c0:d.from,"control-in":d.controlIn,"control-out":d.controlOut,color:i.color,scale:l.value},null,8,["point-id","point-key","c0","control-in","control-out","color","scale"])):ce("",!0)]))),128))])]))}}),wR=q({__name:"GraphKeyframes",props:{keyframeMapByFrame:{default:()=>({})},selectedKeyframeMap:{default:()=>({})},colorMap:{default:()=>({})},propsStateMap:{default:()=>({})}},emits:["select","shift-select","down-control"],setup(e,{emit:t}){const n=e,a=t,o=g(()=>Za(Object.keys(n.keyframeMapByFrame).flatMap(m=>n.keyframeMapByFrame[m]))),r=g(()=>Object.keys(o.value).reduce((m,v)=>{const y=o.value[v];return m[v]=Tm(y,Gb(y,"name","bone")),m[v].props=Object.keys(m[v].props).reduce((E,h)=>(m[v].props[h].length>0&&(E[h]=m[v].props[h]),E),{}),m},{})),s=g(()=>hM(r.value,l));function l(m,v){var y;return((y=n.propsStateMap[m])==null?void 0:y.props[v])==="selected"}function u(m,v){a("select",m,v)}function i(m,v){a("shift-select",m,v)}function c(m,v,y){a("down-control",m,v,y)}const d=Sb(()=>ie(qp(n.keyframeMapByFrame)),r);vt(()=>n.selectedKeyframeMap,d.updateCache);function p(m,v){return r.value[m].props[v].some(y=>{var E;return(E=n.selectedKeyframeMap[y.id])==null?void 0:E.props[v]})}function f(m,v){var E,h;if(p(m,v))return r.value[m].props[v];const y=(h=(E=d.cache.value)==null?void 0:E[m])==null?void 0:h.props[v];return y||(console.warn(`Invalid cache for id: ${m} key: ${v}: Fallback to original data.`),r.value[m].props[v])}return(m,v)=>(b(),M("g",null,[C("g",null,[(b(!0),M(ve,null,Ie(Object.entries(s.value.falseMap),([y,E])=>(b(),M("g",{key:y},[(b(!0),M(ve,null,Ie(Object.keys(E.props),h=>(b(),be(Id,{key:h,"point-key":h,keyframes:f(y,h),"selected-state-map":m.selectedKeyframeMap,color:m.colorMap[h],onSelect:u,onShiftSelect:i,onDownControl:c},null,8,["point-key","keyframes","selected-state-map","color"]))),128))]))),128))]),C("g",null,[(b(!0),M(ve,null,Ie(Object.entries(s.value.trueMap),([y,E])=>(b(),M("g",{key:y},[(b(!0),M(ve,null,Ie(Object.keys(E.props),h=>(b(),be(Id,{key:h,"point-key":h,keyframes:f(y,h),"selected-state-map":m.selectedKeyframeMap,color:m.colorMap[h],focused:"",onSelect:u,onShiftSelect:i,onDownControl:c},null,8,["point-key","keyframes","selected-state-map","color"]))),128))]))),128))])]))}}),kR=["transform"],ER=C("rect",{width:"10",height:"10",stroke:"none",class:"fill-background-second"},null,-1),CR=C("path",{d:"M2 5L7 2L7 8z","stroke-linejoin":"round",stroke:"none",class:"fill-background"},null,-1),MR=[ER,CR],Ld=q({__name:"PlayIcon",props:{flipped:{type:Boolean,default:!1}},setup(e){return(t,n)=>(b(),M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",transform:`scale(${e.flipped?1:-1}, 1)`},MR,8,kR))}}),OR={},TR={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 21 10"},AR=C("rect",{width:"21",height:"10",stroke:"none",class:"fill-background-second"},null,-1),$R=C("line",{x1:"8",y1:"2",x2:"8",y2:"8",class:"stroke-background","stroke-width":"1.5"},null,-1),xR=C("line",{x1:"12",y1:"2",x2:"12",y2:"8",class:"stroke-background","stroke-width":"1.5"},null,-1),IR=[AR,$R,xR];function LR(e,t){return b(),M("svg",TR,IR)}const PR=Te(OR,[["render",LR]]),BR=["transform"],RR=C("rect",{width:"10",height:"10",stroke:"none",class:"fill-background-second"},null,-1),jR=C("path",{d:"M5 5L8 2L8 8z","stroke-linejoin":"round",stroke:"none",class:"fill-background"},null,-1),NR=C("circle",{cx:"3",cy:"5",r:"1.5",stroke:"none",class:"fill-background"},null,-1),VR=[RR,jR,NR],Pd=q({__name:"JumpKeyIcon",props:{flipped:{type:Boolean,default:!1}},setup(e){return(t,n)=>(b(),M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",transform:`scale(${t.flipped?1:-1}, 1)`},VR,8,BR))}}),DR=["transform"],FR=C("rect",{width:"10",height:"10",stroke:"none",class:"fill-background-second"},null,-1),GR=C("path",{d:"M5 5L8 2L8 8z","stroke-linejoin":"round",stroke:"none",class:"fill-background"},null,-1),UR=C("line",{x1:"3",y1:"2",x2:"3",y2:"8","stroke-width":"1.2",class:"stroke-background"},null,-1),KR=[FR,GR,UR],Bd=q({__name:"JumpEndIcon",props:{flipped:{type:Boolean,default:!1}},setup(e){return(t,n)=>(b(),M("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",transform:`scale(${t.flipped?1:-1}, 1)`},KR,8,DR))}}),zR={class:"animation-controller"},YR=q({__name:"AnimationController",props:{playing:{default:"pause"}},emits:["jump-end","jump-start","play","pause","reverse","jump-next","jump-prev"],setup(e,{emit:t}){const n=t;return(a,o)=>(b(),M("div",zR,[C("button",{type:"button",title:"jump to start",onClick:o[0]||(o[0]=r=>n("jump-start"))},[k(Bd,{flipped:""})]),C("button",{type:"button",title:"jump to prev keyframe",onClick:o[1]||(o[1]=r=>n("jump-prev"))},[k(Pd,{flipped:""})]),a.playing!=="pause"?(b(),M("button",{key:0,type:"button",title:"pause",class:"pause-button",onClick:o[2]||(o[2]=r=>n("pause"))},[k(PR)])):(b(),M(ve,{key:1},[C("button",{type:"button",title:"reverse",onClick:o[3]||(o[3]=r=>n("reverse"))},[k(Ld,{flipped:""})]),C("button",{type:"button",title:"play",onClick:o[4]||(o[4]=r=>n("play"))},[k(Ld)])],64)),C("button",{type:"button",title:"jump to next keyframe",onClick:o[5]||(o[5]=r=>n("jump-next"))},[k(Pd)]),C("button",{type:"button",title:"jump to end",onClick:o[6]||(o[6]=r=>n("jump-end"))},[k(Bd)])]))}});const HR=Te(YR,[["__scopeId","data-v-f0f968c5"]]),XR=e=>(dt("data-v-8d6d92d7"),e=e(),pt(),e),WR={class:"graph-panel-wrapper"},JR=XR(()=>C("hr",null,null,-1)),qR=bm.map(e=>({label:e.label,value:e.name})),ZR=q({__name:"GraphPanel",props:{keyframe:{},selectedState:{}},emits:["update"],setup(e,{emit:t}){const n=e,a=t,o=g(()=>{if(n.selectedState)return Object.keys(n.selectedState.props)[0]}),r=g(()=>{var d;if(o.value)return(d=n.keyframe)==null?void 0:d.points[o.value]});function s(d,p){!n.keyframe||!n.selectedState||a("update",$m(n.keyframe,n.selectedState,d),p)}function l(d){s(p=>({...p,curve:_m(d)}))}function u(d,p){s(f=>({...f,value:d}),p)}const{settings:i}=Mt(),c=g({get(){return i.graphValueWidth},set(d){i.graphValueWidth=d}});return(d,p)=>(b(),M("div",WR,[k(yn,{label:"Value Scale"},{default:D(()=>[k($e,{modelValue:c.value,"onUpdate:modelValue":p[0]||(p[0]=f=>c.value=f),min:.5,max:10},null,8,["modelValue"])]),_:1}),JR,r.value?(b(),M(ve,{key:0},[k(yn,{label:"Interpolation"},{default:D(()=>[k(Lt,{"model-value":r.value.curve.name,options:G(qR),"no-placeholder":"","onUpdate:modelValue":l},null,8,["model-value","options"])]),_:1}),k(yn,{label:"Value"},{default:D(()=>[k($e,{"model-value":r.value.value,"onUpdate:modelValue":u},null,8,["model-value"])]),_:1})],64)):ce("",!0)]))}});const QR=Te(ZR,[["__scopeId","data-v-8d6d92d7"]]);function Xv(e,t){const n=e?`Resizable_${e}`:void 0,a=n?localStorage.getItem(n):void 0,o=H(!1);function r(l){o.value=l}function s(l){n&&o.value&&localStorage.setItem(n,l.toString()),o.value=!1}return{restoredRate:a?parseFloat(a):t,dirty:g(()=>o.value),setDirty:r,save:s}}const ej=e=>(dt("data-v-12c6c6bd"),e=e(),pt(),e),tj=ej(()=>C("div",null,null,-1)),nj=[tj],aj=q({__name:"ResizableH",props:{initialRate:{default:.5},minRate:{default:.1},maxRate:{default:.9},dense:{type:Boolean,default:!1},storageKey:{default:""}},setup(e){const t=e,n=Xv(t.storageKey,t.initialRate),a=H(),o=H(),r=H(),s=H(n.restoredRate),l=H(100),u=H(100),i=g(()=>t.dense?0:9),c=g(()=>`calc((100% - ${i.value}px) * ${s.value})`),d=g(()=>`calc((100% - ${i.value}px) * ${1-s.value})`);function p(){var E,h;l.value=((E=o.value)==null?void 0:E.getBoundingClientRect().width)??100,u.value=((h=r.value)==null?void 0:h.getBoundingClientRect().width)??100}async function f(E){if(!a.value)return;const h=a.value.getBoundingClientRect();s.value=Kt(-5,ut(t.minRate,t.maxRate,(E.p.x-h.left)/h.width)),n.setDirty(!0),await Ea(),p(),window.dispatchEvent(new Event("resize"))}const m=sa(f,1e3/60,!0),v=xs(m);Ho(E=>{v.onMove(E)}),Xo(()=>{n.save(s.value),v.onUp()}),Gt(p);const y=v.onDown;return(E,h)=>(b(),M("div",{ref_key:"root",ref:a,class:"resizable-h-wrapper"},[C("div",{ref_key:"left",ref:o,style:st({width:c.value})},[ot(E.$slots,"left",{size:l.value},void 0,!0)],4),E.dense?ce("",!0):(b(),M("div",{key:0,class:"anchor",onMousedown:h[0]||(h[0]=ze((...S)=>G(y)&&G(y)(...S),["prevent"]))},nj,32)),C("div",{ref_key:"right",ref:r,class:"right",style:st({width:d.value})},[ot(E.$slots,"right",{size:u.value},void 0,!0),E.dense?(b(),M("div",{key:0,class:"anchor-dence",onMousedown:h[1]||(h[1]=ze((...S)=>G(y)&&G(y)(...S),["prevent"]))},null,32)):ce("",!0)],4)],512))}});const ts=Te(aj,[["__scopeId","data-v-12c6c6bd"]]);function Rd(){var e;return((e=performance==null?void 0:performance.now)==null?void 0:e.call(performance))??Date.now()}function oj(e,t=60){let n=0,a=0,o=!1;function r(){if(o)return;const s=Math.floor((Rd()-n)/(1e3/t)),l=s-a;l>0&&(e(l),a=s),requestAnimationFrame(r)}return{begin(){n=Rd(),requestAnimationFrame(r)},stop(){o=!0}}}function rj(e){const t=H({});function n(a){t.value[a]?delete t.value[a]:t.value[a]=!0}return vt(e,a=>{const o=a.reduce((r,s)=>({...r,[s]:!0}),{});t.value=Ze(t.value,(r,s)=>s in o)}),{booleanMap:t,toggle:n}}const sj={class:"animation-panel-root"},lj={class:"top"},uj={class:"select-action"},ij={class:"action-buttons"},cj=["disabled"],dj={class:"end-frame-field"},pj=["transform"],fj={class:"timeline-canvas-inner"},mj=["transform"],vj=["transform"],hj=["transform"],yj=["transform"],gj={class:"graph-panel-space"},bo=24,_j=[{label:"Action",value:"action"},{label:"Graph",value:"graph"}],bj={translateX:"red",translateY:"green",rotate:"blue",scaleX:"hotpink",scaleY:"mediumaquamarine",influence:"darkviolet"},Sj=q({__name:"AnimationPanel",setup(e){const t=Rt(),n=cn(),a=H({width:0,height:0}),o={scaleMin:1,ignoreNegativeY:!0,scaleAtFixY:!0,viewOrigin:H({x:-20,y:0}),viewSize:a},r=$o(o),s=$o(o),l=$o({scaleMin:1,viewOrigin:H({x:-20,y:-50}),viewSize:a}),u=H("action");function i(Se){u.value=Se}const c=g(()=>{switch(u.value){case"action":return s;default:return l}}),d=g(()=>n.selectedAction.value),p=g(()=>Object.keys(n.selectedBoneIdMap.value)),f=g(()=>Ee(n.selectedBoneMap.value)),m=g(()=>Object.keys(n.selectedConstraintMap.value)),v=g(()=>p.value.concat(m.value)),y=g(()=>{const Se=n.keyframeMapByTargetId.value,ne=n.selectedBoneMap.value,we=n.selectedConstraintMap.value;return[...f.value.map(Ke=>VE(Ke,Uo(Se[Ke.id]??[]).props)),...m.value.map(Ke=>{const x=we[Ke];return FE(ne[x.boneId],x,Uo(Se[Ke]??[]).props)})]}),E=g(()=>{const Se=n.editedKeyframeMap.value;return aa(Se?Nm(Ee({...n.visibledKeyframeMap.value,...Se.notSelected}),Ee(Se.selected),!0).merged:Ee(n.visibledKeyframeMap.value))}),h=H("");rn(()=>{var Se;h.value=((Se=d.value)==null?void 0:Se.name)??""});const S=g(()=>n.actions.value.map(Se=>{var we;const ne=((we=t.lastSelectedArmature.value)==null?void 0:we.id)!==Se.armatureId;return{value:Se.id,label:`${ne?"(x)":""} ${Se.name}`}}));function $(){var ne;n.actions.value.map(we=>we.name).includes(h.value)?h.value=((ne=d.value)==null?void 0:ne.name)??"":n.updateAction({name:h.value})}const _=g({get:()=>{var Se;return((Se=d.value)==null?void 0:Se.id)??""},set:Se=>n.selectAction(Se)}),A=H();let O;rn(()=>{O==null||O.stop(),n.playing.value!=="pause"&&(A.value=`play_${Date.now()}`,O=oj(T,60),O.begin())});function T(Se){n.stepFrame(Se,n.playing.value==="reverse",A.value)}const L=rj(()=>Object.keys(t.boneMap.value).concat(Object.keys(t.constraintMap.value))),N=g(()=>GE(y.value,L.booleanMap.value,bo,2)),{playing:U,visibledTargetPropsStateMap:I,lastSelectedKeyframe:R,selectedKeyframeMap:B,currentFrame:Y,setPlaying:Ce,jumpStartFrame:Le,jumpEndFrame:Fe,jumpNextKey:Qe,jumpPrevKey:Me,selectTargetProp:re,endFrame:_e,setEndFrame:Ve}=n,ft=()=>n.addAction(),Ot=()=>n.deleteAction(),K=L.booleanMap,fe=L.toggle;function ke(Se,ne){n.execUpdateKeyframes({[Se.id]:Se},ne)}return(Se,ne)=>(b(),M("div",sj,[C("div",lj,[k(Kn,{"model-value":u.value,options:_j,"onUpdate:modelValue":i},null,8,["model-value"]),C("div",uj,[k(Lt,{modelValue:_.value,"onUpdate:modelValue":ne[0]||(ne[0]=we=>_.value=we),options:S.value},null,8,["modelValue","options"])]),oa(C("input",{"onUpdate:modelValue":ne[1]||(ne[1]=we=>h.value=we),type:"text",onChange:$},null,544),[[ms,h.value]]),C("div",ij,[C("button",{type:"button",class:"add-action",title:"Add action",onClick:ft},[k($v)]),C("button",{type:"button",class:"delete-action",title:"Delete action",disabled:!_.value,onClick:Ot},[k(Os)],8,cj)]),k(HR,{playing:G(U),onPlay:ne[2]||(ne[2]=we=>G(Ce)("play")),onReverse:ne[3]||(ne[3]=we=>G(Ce)("reverse")),onPause:ne[4]||(ne[4]=we=>G(Ce)("pause")),onJumpStart:G(Le),onJumpEnd:G(Fe),onJumpNext:G(Qe),onJumpPrev:G(Me)},null,8,["playing","onJumpStart","onJumpEnd","onJumpNext","onJumpPrev"]),C("div",dj,[k(ue,{label:"End"},{default:D(()=>[k($e,{"model-value":G(_e),min:0,integer:"",class:"slider","onUpdate:modelValue":G(Ve)},null,8,["model-value","onUpdate:modelValue"])]),_:1})])]),k(ts,{class:"middle","initial-rate":.15,"storage-key":"animation-label",dense:""},{left:D(({size:we})=>[k(ol,{class:"label-canvas",canvas:G(r),"canvas-type":"label"},{default:D(({scale:Ke,viewOrigin:x})=>[C("g",{transform:`translate(${x.x}, ${x.y}) scale(${Ke})`},[k(jB,{"target-list":y.value,"label-width":we+1,"scroll-y":x.y,"target-expanded-map":G(K),"target-top-map":N.value,"props-state-map":G(I),height:bo,onToggleTargetExpanded:G(fe),onSelect:G(re)},null,8,["target-list","label-width","scroll-y","target-expanded-map","target-top-map","props-state-map","onToggleTargetExpanded","onSelect"])],8,pj)]),_:2},1032,["canvas"])]),right:D(()=>[k(ts,{class:"timeline-canvas-space","initial-rate":.8,"storage-key":"animation-timeline",dense:""},{left:D(()=>[C("div",fj,[u.value==="action"?(b(),be(ol,{key:0,canvas:c.value,"canvas-type":"action"},{default:D(we=>[C("g",{transform:`translate(0, ${we.viewOrigin.y})`},[k($d,{scale:we.scale,"origin-x":we.viewOrigin.x,"view-width":we.viewSize.width,"current-frame":G(Y),"end-frame":G(_e),"header-height":bo},{default:D(()=>[k(JB,{scale:we.scale,"keyframe-map-by-frame":E.value,"target-list":y.value,"target-ids":v.value,"selected-keyframe-map":G(B),"scroll-y":we.viewOrigin.y,"target-expanded-map":G(K),"target-top-map":N.value,height:bo},null,8,["scale","keyframe-map-by-frame","target-list","target-ids","selected-keyframe-map","scroll-y","target-expanded-map","target-top-map"])]),_:2},1032,["scale","origin-x","view-width","current-frame","end-frame"])],8,mj)]),_:1},8,["canvas"])):(b(),be(ol,{key:1,canvas:c.value,"canvas-type":"graph"},{default:D(we=>[u.value==="graph"?(b(),M("g",{key:0,transform:`translate(${we.viewOrigin.x}, 0)`},[k(bB,{scale:we.scale,"origin-y":we.viewOrigin.y,"view-width":we.viewSize.width,"view-height":we.viewSize.height},null,8,["scale","origin-y","view-width","view-height"])],8,vj)):ce("",!0),C("g",{transform:`translate(0, ${we.viewOrigin.y})`},[k($d,{scale:we.scale,"origin-x":we.viewOrigin.x,"view-width":we.viewSize.width,"current-frame":G(Y),"end-frame":G(_e),"header-height":bo},{default:D(()=>[C("g",{transform:`translate(0, ${-we.viewOrigin.y})`},[k(wR,{"keyframe-map-by-frame":E.value,"selected-keyframe-map":G(B),"color-map":bj,"props-state-map":G(I)},null,8,["keyframe-map-by-frame","selected-keyframe-map","props-state-map"])],8,yj)]),_:2},1032,["scale","origin-x","view-width","current-frame","end-frame"])],8,hj)]),_:1},8,["canvas"]))])]),right:D(()=>{var we;return[C("div",gj,[k(QR,{keyframe:G(R),"selected-state":G(B)[(we=G(R))==null?void 0:we.id],onUpdate:ke},null,8,["keyframe","selected-state"])])]}),_:1})]),_:1})]))}});const wj=Te(Sj,[["__scopeId","data-v-fab023ec"]]),{settings:jd}=Mt(),kj=q({__name:"NativeElement",props:{element:{},groupSelected:{type:Boolean,default:!1}},setup(e){const t=e,n=Ma("selectedMap",g(()=>({}))),a=g(()=>{if(n.value[t.element.id]||t.groupSelected)return{fill:jd.selectedColor,stroke:jd.selectedColor}}),o=g(()=>t.groupSelected||n.value[t.element.id]),r=g(()=>({...om({...t.element.attributes,...a.value??{},...qf(t.element.tag)?{"data-type":"element","data-id":t.element.id}:{}}),key:t.element.id}));return(s,l)=>{const u=eu("NativeElement",!0);return b(),be(tu(s.element.tag),vh(xp(r.value)),{default:D(()=>[(b(!0),M(ve,null,Ie(s.element.children,i=>(b(),M(ve,null,[G(ht)(i)?(b(),M(ve,{key:0},[$t(Ne(i),1)],64)):(b(),be(u,{key:i.id,element:i,"group-selected":o.value},null,8,["element","group-selected"]))],64))),256))]),_:1},16)}}});const Ej=Te(kj,[["__scopeId","data-v-d792e947"]]),Cj={key:0},Mj=["x","y","width","height","stroke-width","stroke-dasharray"],Oj=["id"],Tj=q({__name:"ElementLayer",props:{boneMap:{default:()=>({})},canvasMode:{default:"object"}},setup(e){const t=e,n=Rt(),a=Zo(),o=Pn(),r=dn(),{settings:s}=Mt(),l=g(()=>t.canvasMode!=="weight"?{}:o.selectedElements.value);oo("selectedMap",l);const u=g(()=>["pose","weight"].includes(t.canvasMode)?t.boneMap:{}),i=g(()=>{if(!n.lastSelectedArmature.value||!o.lastSelectedActor.value||!a.lastSelectedGraph.value||r.canvasMode.value==="edit")return!1;const h=n.lastSelectedArmature.value.id;return h===o.lastSelectedActor.value.armatureId&&h===a.lastSelectedGraph.value.armatureId}),c=g(()=>{if(o.lastSelectedActor.value)return zm(u.value,o.elementMap.value,o.lastSelectedActor.value.svgTree)}),d=g(()=>{if(!c.value||!i.value||!a.resolvedGraph.value)return c.value;try{const h=a.resolvedGraph.value.context.getObjectMap();return Jm(h,c.value)}catch(h){return console.warn(h),c.value}}),p=g(()=>{if(d.value)return ks(d.value.attributes.viewBox)}),f=g(kn()),m=g(()=>f.value),v=g(()=>[2,2].map(h=>h*f.value).join(" ")),y=d,E=g(()=>{var h;return(h=y.value)==null?void 0:h.children.filter(S=>!ht(S))});return(h,S)=>G(y)?(b(),M("g",Cj,[p.value&&G(s).showViewbox?(b(),M("rect",{key:0,x:p.value.x,y:p.value.y,width:p.value.width,height:p.value.height,fill:"none",stroke:"#777","stroke-width":m.value,"stroke-dasharray":v.value},null,8,Mj)):ce("",!0),C("g",{id:G(y).id},[(b(!0),M(ve,null,Ie(E.value,$=>(b(),be(Ej,{key:$.id,element:$},null,8,["element"]))),128))],8,Oj)])):ce("",!0)}}),Aj=["fill","opacity","stroke-width"],$j=["data-type","data-id"],xj=["d","fill"],Ij=["d"],Lj=["r","cx","cy","fill","data-type","data-id"],Pj=["r","cx","cy","fill","data-type","data-id"],Bj=["x1","y1","x2","y2","stroke-dasharray"],Rj=["transform","font-size"],jj={class:"fill-background stroke-background"},Nj={class:"fill-text",stroke:"none"};function Nd(e,t,n,a=!1){const o=je(Oe(t,e),.15),r=te(e,o);return te(r,je(kt(je(o,.6),Math.PI/2*(a?-1:1)),n))}function Vj(e,t,n){return Math.max(It(e,t)*.04,2*n)}const Dj=q({__name:"BoneElm",props:{bone:{},parent:{default:void 0},opacity:{default:1},scale:{default:1},selectedState:{default:()=>({})},poseMode:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){const n=e,a=t,{settings:o}=Mt(),r=g(()=>n.bone.head),s=g(()=>n.bone.tail),l=g(()=>Nd(r.value,s.value,n.bone.transform.scale.x)),u=g(()=>Nd(r.value,s.value,n.bone.transform.scale.x,!0)),i=g(()=>n.poseMode?n.selectedState.head||n.selectedState.tail:n.selectedState.head&&n.selectedState.tail),c=g(()=>Vj(r.value,s.value,n.scale)),d=g(()=>Math.min(1.2*Math.min(n.scale,1),3)),p=g(()=>n.opacity*o.boneOpacity),f=g(()=>o.showBoneName?n.bone.name:""),m=g(()=>Lc([r.value,l.value,u.value],!0)),v=g(()=>Lc([s.value,l.value,u.value],!0)),y=g(()=>i.value?o.selectedColor:"#ddd"),E=g(()=>i.value?o.selectedColor:"#bbb"),h=g(()=>n.selectedState.head?o.selectedColor:""),S=g(()=>n.selectedState.tail?o.selectedColor:""),$=(_,A)=>{const O=n.poseMode?{head:!0,tail:!0}:A;ab(_,{plain:()=>a("select",O),shift:()=>a("select",O,{shift:!0}),ctrl:()=>a("select",O,{ctrl:!0})})};return(_,A)=>(b(),M("g",{stroke:"black",fill:y.value,opacity:p.value,"stroke-width":d.value},[C("title",null,Ne(_.bone.name),1),C("g",{"stroke-linejoin":"bevel","data-type":_.readOnly?void 0:"bone-body","data-id":_.readOnly?void 0:_.bone.id,onClick:A[0]||(A[0]=O=>$(O,{head:!0,tail:!0}))},[C("path",{d:m.value,fill:E.value},null,8,xj),C("path",{d:v.value},null,8,Ij)],8,$j),C("circle",{r:c.value,cx:r.value.x,cy:r.value.y,fill:h.value,"data-type":_.readOnly?void 0:"bone-head","data-id":_.readOnly?void 0:_.bone.id,onClick:A[1]||(A[1]=O=>$(O,{head:!0}))},null,8,Lj),C("circle",{r:c.value,cx:s.value.x,cy:s.value.y,fill:S.value,"data-type":_.readOnly?void 0:"bone-tail","data-id":_.readOnly?void 0:_.bone.id,onClick:A[2]||(A[2]=O=>$(O,{tail:!0}))},null,8,Pj),_.parent?(b(),M("line",{key:0,x1:_.parent.tail.x,y1:_.parent.tail.y,x2:r.value.x,y2:r.value.y,"stroke-dasharray":`${1.5*_.scale} ${6*_.scale}`,class:"view-only stroke-text"},null,8,Bj)):ce("",!0),f.value?(b(),M("g",{key:1,transform:`translate(${(r.value.x+s.value.x)/2}, ${(r.value.y+s.value.y)/2})`,"font-size":Math.min(16*_.scale,16),"text-anchor":"middle","dominant-baseline":"middle",class:"view-only"},[C("text",jj,Ne(f.value),1),C("text",Nj,Ne(f.value),1)],8,Rj)):ce("",!0)],8,Aj))}});const Wv=Te(Dj,[["__scopeId","data-v-36a79d38"]]),Fj=["transform","opacity","data-id"],Vd=q({__name:"ArmatureElm",props:{armature:{},bones:{},opacity:{default:.8},selected:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){const n=e,a=t,o=g(()=>$f(n.bones)),r=g(kn()),s=g(()=>ie(n.bones)),l=g(()=>BE(n.armature.transform)),u=g(()=>n.selected?{head:!0,tail:!0}:void 0),i=()=>a("select");return(c,d)=>(b(),M("g",{transform:l.value,opacity:c.opacity,"data-type":"armature-body","data-id":c.armature.id},[(b(!0),M(ve,null,Ie(o.value,p=>(b(),be(Wv,{key:p.id,"read-only":"",bone:p,"selected-state":u.value,parent:s.value[p.parentId],scale:r.value,onSelect:i},null,8,["bone","selected-state","parent","scale"]))),128))],8,Fj))}}),Jv=e=>(dt("data-v-3c45c5df"),e=e(),pt(),e),Gj={class:"weight-panel"},Uj=Jv(()=>C("h4",null,"Weight Paint",-1)),Kj={key:1},zj=Jv(()=>C("p",null,"No Item",-1)),Yj=[zj],Hj=q({__name:"WeightPanel",setup(e){const t=Rt(),n=dn(),a=Pn(),o=n.canvasMode,r=g(()=>a.lastSelectedActor.value),s=g(()=>a.lastSelectedElement.value),l=g(()=>t.armatures.value.find(m=>{var v;return m.id===((v=a.lastSelectedActor.value)==null?void 0:v.armatureId)})),u=g({get(){var m;return((m=s.value)==null?void 0:m.boneId)??""},set(m){a.updateElement({boneId:m})}}),i=g({get(){var m;return((m=s.value)==null?void 0:m.fillBoneId)??""},set(m){a.updateElement({fillBoneId:m})}}),c=g({get(){var m;return((m=s.value)==null?void 0:m.strokeBoneId)??""},set(m){a.updateElement({strokeBoneId:m})}}),d=g({get(){var m;return((m=s.value)==null?void 0:m.viewBoxBoneId)??""},set(m){a.updateElement({viewBoxBoneId:m})}}),p=g(()=>l.value?Qp(t.getBonesByArmatureId(l.value.id).map(m=>({value:m.id,label:m.name})),"label"):[]);function f(m){n.dispatchCanvasEvent({type:"state",data:{name:"pick-bone",options:m}})}return(m,v)=>(b(),M("div",Gj,[Uj,G(o)==="weight"&&r.value?(b(),M("form",{key:0,onSubmit:v[4]||(v[4]=ze(()=>{},["prevent"]))},[s.value?(b(),M(ve,{key:0},[s.value.tag==="svg"?(b(),be(yn,{key:0,label:"Viewbox"},{default:D(()=>[k(an,{modelValue:d.value,"onUpdate:modelValue":v[0]||(v[0]=y=>d.value=y),name:"viewBoxBoneId",options:p.value,onStartPick:f},null,8,["modelValue","options"])]),_:1})):(b(),M(ve,{key:1},[k(yn,{label:"Transform"},{default:D(()=>[k(an,{modelValue:u.value,"onUpdate:modelValue":v[1]||(v[1]=y=>u.value=y),name:"boneId",options:p.value,onStartPick:f},null,8,["modelValue","options"])]),_:1}),k(yn,{label:"Fill"},{default:D(()=>[k(an,{modelValue:i.value,"onUpdate:modelValue":v[2]||(v[2]=y=>i.value=y),name:"fillBoneId",options:p.value,onStartPick:f},null,8,["modelValue","options"])]),_:1}),k(yn,{label:"Stroke"},{default:D(()=>[k(an,{modelValue:c.value,"onUpdate:modelValue":v[3]||(v[3]=y=>c.value=y),name:"strokeBoneId",options:p.value,onStartPick:f},null,8,["modelValue","options"])]),_:1})],64))],64)):ce("",!0)],32)):(b(),M("div",Kj,Yj))]))}});const Xj=Te(Hj,[["__scopeId","data-v-3c45c5df"]]),En=e=>(dt("data-v-1d13a527"),e=e(),pt(),e),Wj={key:1,class:"item-panel"},Jj=En(()=>C("h4",null,"Pose",-1)),qj=En(()=>C("h5",null,"Translate",-1)),Zj=En(()=>C("h5",null,"Rotate",-1)),Qj=En(()=>C("h5",null,"Scale",-1)),e2={key:0,class:"color-popup"},t2={key:1},n2=En(()=>C("p",null,"No Item",-1)),a2=[n2],o2={key:2,class:"item-panel"},r2=En(()=>C("h4",null,"Bone",-1)),s2=En(()=>C("h5",null,"Head",-1)),l2=En(()=>C("h5",null,"Tail",-1)),u2={key:1},i2=En(()=>C("p",null,"No Item",-1)),c2=[i2],d2={key:3},p2=En(()=>C("p",null,"No Item",-1)),f2=[p2],On="20px",m2=q({__name:"ItemPanel",setup(e){const t=Rt(),n=cn(),a=dn(),o=_a({translateX:0,translateY:0,rotate:0,scaleX:0,scaleY:0}),r=_a({headX:0,headY:0,tailX:0,tailY:0}),s=g(()=>{if(a.canvasMode.value==="object")return;const R=t.lastSelectedBone.value;if(R)return a.canvasMode.value==="edit"?kl(R,a.getEditTransforms(R.id),t.selectedBones.value[R.id]||{}):t.lastSelectedBone.value}),l=g(()=>{var R;return(R=s.value)==null?void 0:R.connected}),u=g(()=>{if(s.value&&a.canvasMode.value==="pose")return qa(n.getCurrentSelfTransforms(s.value.id),a.getEditPoseTransforms(s.value.id))});vt(u,R=>{R||(i.value=!1)});const i=H(!1);function c(){i.value=!i.value}const d=g(()=>{if(u.value)return io(u.value)});function p(R,B){if(!u.value)return;const Y=yu(R);o.translateX=Y.translate.x,o.translateY=Y.translate.y,o.rotate=Y.rotate,o.scaleX=Y.scale.x,O(B)}function f(R,B){r.headX=R,E(B)}function m(R,B){r.headY=R,E(B)}function v(R,B){r.tailX=R,E(B)}function y(R,B){r.tailY=R,E(B)}function E(R){s.value&&t.updateBones({[s.value.id]:{head:{x:r.headX,y:r.headY},tail:{x:r.tailX,y:r.tailY}}},R)}function h(R,B){o.translateX=R,O(B)}function S(R,B){o.translateY=R,O(B)}function $(R,B){o.rotate=R,O(B)}function _(R,B){o.scaleX=R,O(B)}function A(R,B){o.scaleY=R,O(B)}function O(R){s.value&&n.pastePoses({[s.value.id]:he({translate:{x:o.translateX,y:o.translateY},rotate:o.rotate,scale:{x:o.scaleX,y:o.scaleY}})},R)}const T=g(()=>{if(!s.value)return{};const B=n.getBoneEditedTransforms(s.value.id);return{translateX:B.translate.x!==0,translateY:B.translate.y!==0,scaleX:B.scale.x!==0,scaleY:B.scale.y!==0,rotate:B.rotate!==0}}),L=g(()=>{if(!s.value)return{};const R=n.keyframeMapByTargetId.value[s.value.id];if(!R)return{};const B=n.currentFrame.value;return Z(Uo(R).props,Y=>Y.some(Ce=>Ce.frame===B)?"self":"others")});function N(R){s.value&&n.execInsertKeyframe({[R]:!0})}function U(R){s.value&&n.execDeleteTargetKeyframe(s.value.id,R)}rn(()=>{s.value&&(r.headX=s.value.head.x,r.headY=s.value.head.y,r.tailX=s.value.tail.x,r.tailY=s.value.tail.y)}),rn(()=>{u.value&&(o.translateX=u.value.translate.x,o.translateY=u.value.translate.y,o.rotate=u.value.rotate,o.scaleX=u.value.scale.x,o.scaleY=u.value.scale.y)});const I=a.canvasMode;return(R,B)=>G(I)==="weight"?(b(),be(Xj,{key:0})):G(I)==="pose"?(b(),M("div",Wj,[Jj,u.value?(b(),M("form",{key:0,onSubmit:B[11]||(B[11]=ze(()=>{},["prevent"]))},[qj,k(ue,{label:"x","label-width":On},{default:D(()=>[k($e,{"model-value":o.translateX,disabled:l.value,"onUpdate:modelValue":h},null,8,["model-value","disabled"]),k(Jt,{status:L.value.translateX,updated:T.value.translateX,onCreate:B[0]||(B[0]=Y=>N("translateX")),onDelete:B[1]||(B[1]=Y=>U("translateX"))},null,8,["status","updated"])]),_:1}),k(ue,{label:"y","label-width":On},{default:D(()=>[k($e,{"model-value":o.translateY,disabled:l.value,"onUpdate:modelValue":S},null,8,["model-value","disabled"]),k(Jt,{status:L.value.translateY,updated:T.value.translateY,onCreate:B[2]||(B[2]=Y=>N("translateY")),onDelete:B[3]||(B[3]=Y=>U("translateY"))},null,8,["status","updated"])]),_:1}),Zj,k(ue,{"label-width":On},{default:D(()=>[k($e,{"model-value":o.rotate,"onUpdate:modelValue":$},null,8,["model-value"]),k(Jt,{status:L.value.rotate,updated:T.value.rotate,onCreate:B[4]||(B[4]=Y=>N("rotate")),onDelete:B[5]||(B[5]=Y=>U("rotate"))},null,8,["status","updated"])]),_:1}),Qj,k(ue,{label:"x","label-width":On},{default:D(()=>[k($e,{step:.1,"model-value":o.scaleX,"onUpdate:modelValue":_},null,8,["model-value"]),k(Jt,{status:L.value.scaleX,updated:T.value.scaleX,onCreate:B[6]||(B[6]=Y=>N("scaleX")),onDelete:B[7]||(B[7]=Y=>U("scaleX"))},null,8,["status","updated"])]),_:1}),k(ue,{label:"y","label-width":On},{default:D(()=>[k($e,{step:.1,"model-value":o.scaleY,"onUpdate:modelValue":A},null,8,["model-value"]),k(Jt,{status:L.value.scaleY,updated:T.value.scaleY,onCreate:B[8]||(B[8]=Y=>N("scaleY")),onDelete:B[9]||(B[9]=Y=>U("scaleY"))},null,8,["status","updated"])]),_:1}),k(ue,null,{default:D(()=>[k(Pv,{class:"color-field",onClickOutside:B[10]||(B[10]=Y=>i.value=!1)},{default:D(()=>[C("button",{type:"button",class:"color-button",onClick:c},[k(Qu,{hsva:d.value},null,8,["hsva"])]),i.value?(b(),M("div",e2,[k(Lv,null,{default:D(()=>[k(Iv,{class:"color-picker","model-value":d.value,"extra-hue":"","onUpdate:modelValue":p},null,8,["model-value"])]),_:1})])):ce("",!0)]),_:1})]),_:1})],32)):(b(),M("div",t2,a2))])):G(I)==="edit"?(b(),M("div",o2,[r2,s.value?(b(),M("form",{key:0,onSubmit:B[12]||(B[12]=ze(()=>{},["prevent"]))},[s2,k(ue,{label:"x","label-width":On},{default:D(()=>[k($e,{"model-value":r.headX,"onUpdate:modelValue":f},null,8,["model-value"])]),_:1}),k(ue,{label:"y","label-width":On},{default:D(()=>[k($e,{"model-value":r.headY,"onUpdate:modelValue":m},null,8,["model-value"])]),_:1}),l2,k(ue,{label:"x","label-width":On},{default:D(()=>[k($e,{"model-value":r.tailX,"onUpdate:modelValue":v},null,8,["model-value"])]),_:1}),k(ue,{label:"y","label-width":On},{default:D(()=>[k($e,{"model-value":r.tailY,"onUpdate:modelValue":y},null,8,["model-value"])]),_:1})],32)):(b(),M("div",u2,c2))])):(b(),M("div",d2,f2))}});const v2=Te(m2,[["__scopeId","data-v-1d13a527"]]),h2=e=>(dt("data-v-db77698a"),e=e(),pt(),e),y2={class:"view-panel"},g2=h2(()=>C("h4",null,"View",-1)),_2=q({__name:"ViewPanel",setup(e){const{settings:t}=Mt();return(n,a)=>(b(),M("div",y2,[g2,C("form",null,[k(ue,null,{default:D(()=>[k(it,{modelValue:G(t).showBoneName,"onUpdate:modelValue":a[0]||(a[0]=o=>G(t).showBoneName=o),label:"Bone Name"},null,8,["modelValue"])]),_:1}),k(yn,{label:"Bone Opacity"},{default:D(()=>[k($e,{modelValue:G(t).boneOpacity,"onUpdate:modelValue":a[1]||(a[1]=o=>G(t).boneOpacity=o),min:0,max:1,step:.1},null,8,["modelValue"])]),_:1}),k(ue,null,{default:D(()=>[k(it,{modelValue:G(t).showViewbox,"onUpdate:modelValue":a[2]||(a[2]=o=>G(t).showViewbox=o),label:"Viewbox"},null,8,["modelValue"])]),_:1}),k(ue,null,{default:D(()=>[k(it,{modelValue:G(t).showAxis,"onUpdate:modelValue":a[3]||(a[3]=o=>G(t).showAxis=o),label:"Axis"},null,8,["modelValue"])]),_:1})])]))}});const b2=Te(_2,[["__scopeId","data-v-db77698a"]]),S2=q({__name:"CanvasSideBar",setup(e){const t=g(()=>[{key:"item",label:"Item"},{key:"view",label:"View"}]);return(n,a)=>(b(),be(xv,{tabs:t.value,"default-tab":"item"},{item:D(()=>[k(v2)]),view:D(()=>[k(b2)]),_:1},8,["tabs"]))}}),w2=q({__name:"BoneLayer",props:{boneMap:{default:()=>({})},selectedBones:{default:()=>({})},canvasMode:{default:"object"}},emits:["select"],setup(e,{emit:t}){const n=e,a=t,o=g(()=>$f(Ee(n.boneMap))),r=g(kn());function s(l,u,i){a("select",l,u,i)}return(l,u)=>(b(),M("g",null,[(b(!0),M(ve,null,Ie(o.value,i=>(b(),be(Wv,{key:i.id,bone:i,parent:l.boneMap[i.parentId],"selected-state":l.selectedBones[i.id],scale:r.value,"pose-mode":l.canvasMode==="pose",onSelect:(c,d)=>s(i.id,c,d)},null,8,["bone","parent","selected-state","scale","pose-mode","onSelect"]))),128))]))}}),k2=["transform"],E2=["stroke-width","stroke-dasharray"],C2=C("line",{x1:"-50",x2:"50",stroke:"red"},null,-1),M2=C("line",{y1:"-50",y2:"50",stroke:"green"},null,-1),O2=[C2,M2],T2=C("path",{d:"M50,0 L40,-5 L40,5z",fill:"red"},null,-1),A2=C("path",{d:"M0,50 L-5,40 L5,40z",fill:"green"},null,-1),$2=q({__name:"SpaceAxis",props:{origin:{},radian:{}},setup(e){const t=e,n=g(kn()),a=g(()=>t.radian*180/Math.PI);return(o,r)=>(b(),M("g",{transform:`translate(${o.origin.x}, ${o.origin.y}) rotate(${a.value})`},[C("g",{"stroke-width":2*n.value,"stroke-dasharray":`${2*n.value},${2*n.value}`},O2,8,E2),T2,A2],8,k2))}}),x2=e=>(dt("data-v-7c6fdf30"),e=e(),pt(),e),I2=x2(()=>C("div",null,null,-1)),L2=[I2],P2=q({__name:"ResizableV",props:{initialRate:{default:.5},minRate:{default:.1},maxRate:{default:.9},dense:{type:Boolean,default:!1},storageKey:{default:""}},setup(e){const t=e,n=Xv(t.storageKey,t.initialRate),a=H(),o=H(n.restoredRate),r=g(()=>t.dense?0:9),s=g(()=>`calc((100% - ${r.value}px) * ${o.value})`),l=g(()=>`calc((100% - ${r.value}px) * ${1-o.value})`);async function u(p){if(!a.value)return;const f=a.value.getBoundingClientRect();o.value=Kt(-5,ut(t.minRate,t.maxRate,(p.p.y-f.top)/f.height)),n.setDirty(!0),await Ea(),window.dispatchEvent(new Event("resize"))}const i=sa(u,1e3/60,!0),c=xs(i);Ho(p=>{c.onMove(p)}),Xo(()=>{n.save(o.value),c.onUp()});const d=c.onDown;return(p,f)=>(b(),M("div",{ref_key:"root",ref:a,class:"resizable-v-wrapper"},[C("div",{class:"top",style:st({height:s.value})},[ot(p.$slots,"top",{},void 0,!0)],4),p.dense?ce("",!0):(b(),M("div",{key:0,class:"anchor",onMousedown:f[0]||(f[0]=ze((...m)=>G(d)&&G(d)(...m),["prevent"]))},L2,32)),C("div",{class:"bottom",style:st({height:l.value})},[ot(p.$slots,"bottom",{},void 0,!0),p.dense?(b(),M("div",{key:0,class:"anchor-dence",onMousedown:f[1]||(f[1]=ze((...m)=>G(d)&&G(d)(...m),["prevent"]))},null,32)):ce("",!0)],4)],512))}});const Dd=Te(P2,[["__scopeId","data-v-7c6fdf30"]]),B2={class:"main"},R2={key:0},j2={key:1},N2={class:"bottom"},Na=Rt(),_r=dn(),V2=cn(),Fd=ra(),Nl=Pn(),rl=qu();Na.createDefaultEntities();Nl.createDefaultEntities();function D2(e){var t;["input","textarea"].includes((t=e.target)==null?void 0:t.tagName.toLowerCase())||(Xn(e)&&e.key.toLowerCase()==="z"?(e.preventDefault(),e.shiftKey?Fd.redo():Fd.undo()):e.key.toLowerCase()===" "?(e.preventDefault(),V2.togglePlaying()):Xn(e)&&e.key.toLowerCase()==="s"?(e.preventDefault(),rl.overrideProjectFile()):Xn(e)&&e.key.toLowerCase()==="o"&&(e.preventDefault(),e.shiftKey?rl.loadSvgFile():rl.loadProjectFile()))}const F2=q({__name:"App",setup(e){sb(D2);const t=g(()=>{var d;return(d=Nl.lastSelectedActor.value)==null?void 0:d.viewBox}),n=_r.canvasMode,a=Na.armatures,o=g(()=>a.value.filter(d=>{var p;return d.id!==((p=Na.lastSelectedArmature.value)==null?void 0:p.id)})),r=_r.posedBoneMap,s=_r.visibledBoneMap,l=_r.lastSelectedBoneSpace,u=g(()=>{if(n.value==="weight"){const d=Nl.lastSelectedElement.value;return d!=null&&d.boneId?{[d.boneId]:{head:!0,tail:!0}}:{}}else return Na.selectedBones.value}),i=g(()=>{var d;return(d=Na.lastSelectedArmature.value)==null?void 0:d.id}),c=Na.bonesByArmatureId;return(d,p)=>(b(),be(Dd,{"initial-rate":.7,"storage-key":"app-v",class:"app-root"},{top:D(()=>[k(ts,{"initial-rate":.8,"storage-key":"app-panel-h",dense:"",class:"top"},{left:D(()=>[k(ts,{"initial-rate":.1,"storage-key":"app-canvas-h",dense:"",class:"main-wrapper"},{left:D(()=>[k(AP,{class:"animation-graph"})]),right:D(()=>[C("div",B2,[k(WO,{"original-view-box":t.value,class:"canvas"},{default:D(()=>[k(Tj,{"bone-map":G(r),"canvas-mode":G(n),class:qe({"view-only":G(n)!=="weight"})},null,8,["bone-map","canvas-mode","class"]),G(n)==="object"?(b(),M("g",R2,[(b(!0),M(ve,null,Ie(G(a),f=>(b(),be(Vd,{key:f.id,armature:f,bones:G(c)[f.id],selected:i.value===f.id},null,8,["armature","bones","selected"]))),128))])):(b(),M("g",j2,[(b(!0),M(ve,null,Ie(o.value,f=>(b(),be(Vd,{key:f.id,armature:f,bones:G(c)[f.id],opacity:.3,class:"view-only"},null,8,["armature","bones"]))),128)),k(w2,{"bone-map":G(s),"selected-bones":u.value,"canvas-mode":G(n)},null,8,["bone-map","selected-bones","canvas-mode"]),G(l)?(b(),be($2,{key:0,origin:G(l).origin,radian:G(l).radian,class:"view-only"},null,8,["origin","radian"])):ce("",!0)]))]),_:1},8,["original-view-box"]),k(S2,{class:"side-bar"})])]),_:1})]),right:D(()=>[k(Dd,{"initial-rate":.4,"storage-key":"app-side",dense:"",class:"side-panel"},{top:D(()=>[k(pd)]),bottom:D(()=>[k(pd,{"initial-tab":"detail"})]),_:1})]),_:1})]),bottom:D(()=>[C("div",N2,[k(wj)])]),_:1}))}});const G2=Te(F2,[["__scopeId","data-v-01a932a6"]]);Mg(G2).mount("#app");
