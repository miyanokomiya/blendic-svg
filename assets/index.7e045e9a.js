var dm=Object.defineProperty,fm=Object.defineProperties;var pm=Object.getOwnPropertyDescriptors;var Ra=Object.getOwnPropertySymbols;var hu=Object.prototype.hasOwnProperty,yu=Object.prototype.propertyIsEnumerable;var vu=(e,t,n)=>t in e?dm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,c=(e,t)=>{for(var n in t||(t={}))hu.call(t,n)&&vu(e,n,t[n]);if(Ra)for(var n of Ra(t))yu.call(t,n)&&vu(e,n,t[n]);return e},g=(e,t)=>fm(e,pm(t));var Pa=(e,t)=>{var n={};for(var r in e)hu.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Ra)for(var r of Ra(e))t.indexOf(r)<0&&yu.call(e,r)&&(n[r]=e[r]);return n};const mm=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerpolicy&&(o.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?o.credentials="include":a.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}};mm();function ls(e,t){const n=Object.create(null),r=e.split(",");for(let a=0;a<r.length;a++)n[r[a]]=!0;return t?a=>!!n[a.toLowerCase()]:a=>!!n[a]}const vm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",hm=ls(vm);function fc(e){return!!e||e===""}function at(e){if($e(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],a=ut(r)?bm(r):at(r);if(a)for(const o in a)t[o]=a[o]}return t}else{if(ut(e))return e;if(nt(e))return e}}const ym=/;(?![^(]*\))/g,gm=/:(.+)/;function bm(e){const t={};return e.split(ym).forEach(n=>{if(n){const r=n.split(gm);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function pt(e){let t="";if(ut(e))t=e;else if($e(e))for(let n=0;n<e.length;n++){const r=pt(e[n]);r&&(t+=r+" ")}else if(nt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function _m(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=wa(e[r],t[r]);return n}function wa(e,t){if(e===t)return!0;let n=gu(e),r=gu(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=$e(e),r=$e(t),n||r)return n&&r?_m(e,t):!1;if(n=nt(e),r=nt(t),n||r){if(!n||!r)return!1;const a=Object.keys(e).length,o=Object.keys(t).length;if(a!==o)return!1;for(const l in e){const s=e.hasOwnProperty(l),u=t.hasOwnProperty(l);if(s&&!u||!s&&u||!wa(e[l],t[l]))return!1}}return String(e)===String(t)}function ss(e,t){return e.findIndex(n=>wa(n,t))}const Ve=e=>ut(e)?e:e==null?"":$e(e)||nt(e)&&(e.toString===vc||!Te(e.toString))?JSON.stringify(e,pc,2):String(e),pc=(e,t)=>t&&t.__v_isRef?pc(e,t.value):kr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,a])=>(n[`${r} =>`]=a,n),{})}:Kr(t)?{[`Set(${t.size})`]:[...t.values()]}:nt(t)&&!$e(t)&&!hc(t)?String(t):t,Ye={},Tr=[],Zt=()=>{},Sm=()=>!1,wm=/^on[^a-z]/,bo=e=>wm.test(e),us=e=>e.startsWith("onUpdate:"),wt=Object.assign,is=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},$m=Object.prototype.hasOwnProperty,Ne=(e,t)=>$m.call(e,t),$e=Array.isArray,kr=e=>_o(e)==="[object Map]",Kr=e=>_o(e)==="[object Set]",gu=e=>e instanceof Date,Te=e=>typeof e=="function",ut=e=>typeof e=="string",cs=e=>typeof e=="symbol",nt=e=>e!==null&&typeof e=="object",mc=e=>nt(e)&&Te(e.then)&&Te(e.catch),vc=Object.prototype.toString,_o=e=>vc.call(e),Cm=e=>_o(e).slice(8,-1),hc=e=>_o(e)==="[object Object]",ds=e=>ut(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ka=ls(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),So=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Em=/-(\w)/g,dn=So(e=>e.replace(Em,(t,n)=>n?n.toUpperCase():"")),Mm=/\B([A-Z])/g,Gr=So(e=>e.replace(Mm,"-$1").toLowerCase()),wo=So(e=>e.charAt(0).toUpperCase()+e.slice(1)),Zo=So(e=>e?`on${wo(e)}`:""),ca=(e,t)=>!Object.is(e,t),Ga=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Ha=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},da=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let bu;const Am=()=>bu||(bu=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let ln;class Im{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&ln&&(this.parent=ln,this.index=(ln.scopes||(ln.scopes=[])).push(this)-1)}run(t){if(this.active){const n=ln;try{return ln=this,t()}finally{ln=n}}}on(){ln=this}off(){ln=this.parent}stop(t){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.active=!1}}}function Tm(e,t=ln){t&&t.active&&t.effects.push(e)}const fs=e=>{const t=new Set(e);return t.w=0,t.n=0,t},yc=e=>(e.w&xn)>0,gc=e=>(e.n&xn)>0,km=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=xn},Om=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const a=t[r];yc(a)&&!gc(a)?a.delete(e):t[n++]=a,a.w&=~xn,a.n&=~xn}t.length=n}},wl=new WeakMap;let ra=0,xn=1;const $l=30;let qt;const lr=Symbol(""),Cl=Symbol("");class ps{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,Tm(this,r)}run(){if(!this.active)return this.fn();let t=qt,n=jn;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=qt,qt=this,jn=!0,xn=1<<++ra,ra<=$l?km(this):_u(this),this.fn()}finally{ra<=$l&&Om(this),xn=1<<--ra,qt=this.parent,jn=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){qt===this?this.deferStop=!0:this.active&&(_u(this),this.onStop&&this.onStop(),this.active=!1)}}function _u(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let jn=!0;const bc=[];function zr(){bc.push(jn),jn=!1}function Yr(){const e=bc.pop();jn=e===void 0?!0:e}function xt(e,t,n){if(jn&&qt){let r=wl.get(e);r||wl.set(e,r=new Map);let a=r.get(n);a||r.set(n,a=fs()),_c(a)}}function _c(e,t){let n=!1;ra<=$l?gc(e)||(e.n|=xn,n=!yc(e)):n=!e.has(qt),n&&(e.add(qt),qt.deps.push(e))}function wn(e,t,n,r,a,o){const l=wl.get(e);if(!l)return;let s=[];if(t==="clear")s=[...l.values()];else if(n==="length"&&$e(e))l.forEach((u,i)=>{(i==="length"||i>=r)&&s.push(u)});else switch(n!==void 0&&s.push(l.get(n)),t){case"add":$e(e)?ds(n)&&s.push(l.get("length")):(s.push(l.get(lr)),kr(e)&&s.push(l.get(Cl)));break;case"delete":$e(e)||(s.push(l.get(lr)),kr(e)&&s.push(l.get(Cl)));break;case"set":kr(e)&&s.push(l.get(lr));break}if(s.length===1)s[0]&&El(s[0]);else{const u=[];for(const i of s)i&&u.push(...i);El(fs(u))}}function El(e,t){for(const n of $e(e)?e:[...e])(n!==qt||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const Bm=ls("__proto__,__v_isRef,__isVue"),Sc=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(cs)),Lm=ms(),Rm=ms(!1,!0),Pm=ms(!0),Su=Nm();function Nm(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Fe(this);for(let o=0,l=this.length;o<l;o++)xt(r,"get",o+"");const a=r[t](...n);return a===-1||a===!1?r[t](...n.map(Fe)):a}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){zr();const r=Fe(this)[t].apply(this,n);return Yr(),r}}),e}function ms(e=!1,t=!1){return function(r,a,o){if(a==="__v_isReactive")return!e;if(a==="__v_isReadonly")return e;if(a==="__v_isShallow")return t;if(a==="__v_raw"&&o===(e?t?Zm:Mc:t?Ec:Cc).get(r))return r;const l=$e(r);if(!e&&l&&Ne(Su,a))return Reflect.get(Su,a,o);const s=Reflect.get(r,a,o);return(cs(a)?Sc.has(a):Bm(a))||(e||xt(r,"get",a),t)?s:gt(s)?!l||!ds(a)?s.value:s:nt(s)?e?Ac(s):$n(s):s}}const jm=wc(),Fm=wc(!0);function wc(e=!1){return function(n,r,a,o){let l=n[r];if(fa(l)&&gt(l)&&!gt(a))return!1;if(!e&&!fa(a)&&(Ic(a)||(a=Fe(a),l=Fe(l)),!$e(n)&&gt(l)&&!gt(a)))return l.value=a,!0;const s=$e(n)&&ds(r)?Number(r)<n.length:Ne(n,r),u=Reflect.set(n,r,a,o);return n===Fe(o)&&(s?ca(a,l)&&wn(n,"set",r,a):wn(n,"add",r,a)),u}}function Vm(e,t){const n=Ne(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&wn(e,"delete",t,void 0),r}function Dm(e,t){const n=Reflect.has(e,t);return(!cs(t)||!Sc.has(t))&&xt(e,"has",t),n}function xm(e){return xt(e,"iterate",$e(e)?"length":lr),Reflect.ownKeys(e)}const $c={get:Lm,set:jm,deleteProperty:Vm,has:Dm,ownKeys:xm},Um={get:Pm,set(e,t){return!0},deleteProperty(e,t){return!0}},Km=wt({},$c,{get:Rm,set:Fm}),vs=e=>e,$o=e=>Reflect.getPrototypeOf(e);function Na(e,t,n=!1,r=!1){e=e.__v_raw;const a=Fe(e),o=Fe(t);t!==o&&!n&&xt(a,"get",t),!n&&xt(a,"get",o);const{has:l}=$o(a),s=r?vs:n?gs:pa;if(l.call(a,t))return s(e.get(t));if(l.call(a,o))return s(e.get(o));e!==a&&e.get(t)}function ja(e,t=!1){const n=this.__v_raw,r=Fe(n),a=Fe(e);return e!==a&&!t&&xt(r,"has",e),!t&&xt(r,"has",a),e===a?n.has(e):n.has(e)||n.has(a)}function Fa(e,t=!1){return e=e.__v_raw,!t&&xt(Fe(e),"iterate",lr),Reflect.get(e,"size",e)}function wu(e){e=Fe(e);const t=Fe(this);return $o(t).has.call(t,e)||(t.add(e),wn(t,"add",e,e)),this}function $u(e,t){t=Fe(t);const n=Fe(this),{has:r,get:a}=$o(n);let o=r.call(n,e);o||(e=Fe(e),o=r.call(n,e));const l=a.call(n,e);return n.set(e,t),o?ca(t,l)&&wn(n,"set",e,t):wn(n,"add",e,t),this}function Cu(e){const t=Fe(this),{has:n,get:r}=$o(t);let a=n.call(t,e);a||(e=Fe(e),a=n.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return a&&wn(t,"delete",e,void 0),o}function Eu(){const e=Fe(this),t=e.size!==0,n=e.clear();return t&&wn(e,"clear",void 0,void 0),n}function Va(e,t){return function(r,a){const o=this,l=o.__v_raw,s=Fe(l),u=t?vs:e?gs:pa;return!e&&xt(s,"iterate",lr),l.forEach((i,d)=>r.call(a,u(i),u(d),o))}}function Da(e,t,n){return function(...r){const a=this.__v_raw,o=Fe(a),l=kr(o),s=e==="entries"||e===Symbol.iterator&&l,u=e==="keys"&&l,i=a[e](...r),d=n?vs:t?gs:pa;return!t&&xt(o,"iterate",u?Cl:lr),{next(){const{value:v,done:f}=i.next();return f?{value:v,done:f}:{value:s?[d(v[0]),d(v[1])]:d(v),done:f}},[Symbol.iterator](){return this}}}}function In(e){return function(...t){return e==="delete"?!1:this}}function Gm(){const e={get(o){return Na(this,o)},get size(){return Fa(this)},has:ja,add:wu,set:$u,delete:Cu,clear:Eu,forEach:Va(!1,!1)},t={get(o){return Na(this,o,!1,!0)},get size(){return Fa(this)},has:ja,add:wu,set:$u,delete:Cu,clear:Eu,forEach:Va(!1,!0)},n={get(o){return Na(this,o,!0)},get size(){return Fa(this,!0)},has(o){return ja.call(this,o,!0)},add:In("add"),set:In("set"),delete:In("delete"),clear:In("clear"),forEach:Va(!0,!1)},r={get(o){return Na(this,o,!0,!0)},get size(){return Fa(this,!0)},has(o){return ja.call(this,o,!0)},add:In("add"),set:In("set"),delete:In("delete"),clear:In("clear"),forEach:Va(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=Da(o,!1,!1),n[o]=Da(o,!0,!1),t[o]=Da(o,!1,!0),r[o]=Da(o,!0,!0)}),[e,n,t,r]}const[zm,Ym,Xm,Wm]=Gm();function hs(e,t){const n=t?e?Wm:Xm:e?Ym:zm;return(r,a,o)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?r:Reflect.get(Ne(n,a)&&a in r?n:r,a,o)}const Hm={get:hs(!1,!1)},qm={get:hs(!1,!0)},Jm={get:hs(!0,!1)},Cc=new WeakMap,Ec=new WeakMap,Mc=new WeakMap,Zm=new WeakMap;function Qm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ev(e){return e.__v_skip||!Object.isExtensible(e)?0:Qm(Cm(e))}function $n(e){return fa(e)?e:ys(e,!1,$c,Hm,Cc)}function tv(e){return ys(e,!1,Km,qm,Ec)}function Ac(e){return ys(e,!0,Um,Jm,Mc)}function ys(e,t,n,r,a){if(!nt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=a.get(e);if(o)return o;const l=ev(e);if(l===0)return e;const s=new Proxy(e,l===2?r:n);return a.set(e,s),s}function Or(e){return fa(e)?Or(e.__v_raw):!!(e&&e.__v_isReactive)}function fa(e){return!!(e&&e.__v_isReadonly)}function Ic(e){return!!(e&&e.__v_isShallow)}function Tc(e){return Or(e)||fa(e)}function Fe(e){const t=e&&e.__v_raw;return t?Fe(t):e}function kc(e){return Ha(e,"__v_skip",!0),e}const pa=e=>nt(e)?$n(e):e,gs=e=>nt(e)?Ac(e):e;function Oc(e){jn&&qt&&(e=Fe(e),_c(e.dep||(e.dep=fs())))}function Bc(e,t){e=Fe(e),e.dep&&El(e.dep)}function gt(e){return!!(e&&e.__v_isRef===!0)}function H(e){return nv(e,!1)}function nv(e,t){return gt(e)?e:new rv(e,t)}class rv{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Fe(t),this._value=n?t:pa(t)}get value(){return Oc(this),this._value}set value(t){t=this.__v_isShallow?t:Fe(t),ca(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:pa(t),Bc(this))}}function ke(e){return gt(e)?e.value:e}const av={get:(e,t,n)=>ke(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const a=e[t];return gt(a)&&!gt(n)?(a.value=n,!0):Reflect.set(e,t,n,r)}};function Lc(e){return Or(e)?e:new Proxy(e,av)}class ov{constructor(t,n,r,a){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new ps(t,()=>{this._dirty||(this._dirty=!0,Bc(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!a,this.__v_isReadonly=r}get value(){const t=Fe(this);return Oc(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function lv(e,t,n=!1){let r,a;const o=Te(e);return o?(r=e,a=Zt):(r=e.get,a=e.set),new ov(r,a,o||!a,n)}function Fn(e,t,n,r){let a;try{a=r?e(...r):e()}catch(o){Co(o,t,n)}return a}function Wt(e,t,n,r){if(Te(e)){const o=Fn(e,t,n,r);return o&&mc(o)&&o.catch(l=>{Co(l,t,n)}),o}const a=[];for(let o=0;o<e.length;o++)a.push(Wt(e[o],t,n,r));return a}function Co(e,t,n,r=!0){const a=t?t.vnode:null;if(t){let o=t.parent;const l=t.proxy,s=n;for(;o;){const i=o.ec;if(i){for(let d=0;d<i.length;d++)if(i[d](e,l,s)===!1)return}o=o.parent}const u=t.appContext.config.errorHandler;if(u){Fn(u,null,10,[e,l,s]);return}}sv(e,n,a,r)}function sv(e,t,n,r=!0){console.error(e)}let qa=!1,Ml=!1;const Ft=[];let yn=0;const oa=[];let aa=null,Er=0;const la=[];let Rn=null,Mr=0;const Rc=Promise.resolve();let bs=null,Al=null;function $a(e){const t=bs||Rc;return e?t.then(this?e.bind(this):e):t}function uv(e){let t=yn+1,n=Ft.length;for(;t<n;){const r=t+n>>>1;ma(Ft[r])<e?t=r+1:n=r}return t}function Pc(e){(!Ft.length||!Ft.includes(e,qa&&e.allowRecurse?yn+1:yn))&&e!==Al&&(e.id==null?Ft.push(e):Ft.splice(uv(e.id),0,e),Nc())}function Nc(){!qa&&!Ml&&(Ml=!0,bs=Rc.then(Vc))}function iv(e){const t=Ft.indexOf(e);t>yn&&Ft.splice(t,1)}function jc(e,t,n,r){$e(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?r+1:r))&&n.push(e),Nc()}function cv(e){jc(e,aa,oa,Er)}function dv(e){jc(e,Rn,la,Mr)}function _s(e,t=null){if(oa.length){for(Al=t,aa=[...new Set(oa)],oa.length=0,Er=0;Er<aa.length;Er++)aa[Er]();aa=null,Er=0,Al=null,_s(e,t)}}function Fc(e){if(la.length){const t=[...new Set(la)];if(la.length=0,Rn){Rn.push(...t);return}for(Rn=t,Rn.sort((n,r)=>ma(n)-ma(r)),Mr=0;Mr<Rn.length;Mr++)Rn[Mr]();Rn=null,Mr=0}}const ma=e=>e.id==null?1/0:e.id;function Vc(e){Ml=!1,qa=!0,_s(e),Ft.sort((n,r)=>ma(n)-ma(r));const t=Zt;try{for(yn=0;yn<Ft.length;yn++){const n=Ft[yn];n&&n.active!==!1&&Fn(n,null,14)}}finally{yn=0,Ft.length=0,Fc(),qa=!1,bs=null,(Ft.length||oa.length||la.length)&&Vc(e)}}function fv(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Ye;let a=n;const o=t.startsWith("update:"),l=o&&t.slice(7);if(l&&l in r){const d=`${l==="modelValue"?"model":l}Modifiers`,{number:v,trim:f}=r[d]||Ye;f?a=n.map(m=>m.trim()):v&&(a=n.map(da))}let s,u=r[s=Zo(t)]||r[s=Zo(dn(t))];!u&&o&&(u=r[s=Zo(Gr(t))]),u&&Wt(u,e,6,a);const i=r[s+"Once"];if(i){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Wt(i,e,6,a)}}function Dc(e,t,n=!1){const r=t.emitsCache,a=r.get(e);if(a!==void 0)return a;const o=e.emits;let l={},s=!1;if(!Te(e)){const u=i=>{const d=Dc(i,t,!0);d&&(s=!0,wt(l,d))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!o&&!s?(r.set(e,null),null):($e(o)?o.forEach(u=>l[u]=null):wt(l,o),r.set(e,l),l)}function Eo(e,t){return!e||!bo(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ne(e,t[0].toLowerCase()+t.slice(1))||Ne(e,Gr(t))||Ne(e,t))}let Ct=null,Mo=null;function Ja(e){const t=Ct;return Ct=e,Mo=e&&e.type.__scopeId||null,t}function it(e){Mo=e}function ct(){Mo=null}function Y(e,t=Ct,n){if(!t||e._n)return e;const r=(...a)=>{r._d&&ju(-1);const o=Ja(t),l=e(...a);return Ja(o),r._d&&ju(1),l};return r._n=!0,r._c=!0,r._d=!0,r}function Qo(e){const{type:t,vnode:n,proxy:r,withProxy:a,props:o,propsOptions:[l],slots:s,attrs:u,emit:i,render:d,renderCache:v,data:f,setupState:m,ctx:p,inheritAttrs:y}=e;let E,b;const w=Ja(e);try{if(n.shapeFlag&4){const O=a||r;E=sn(d.call(O,O,v,o,m,f,p)),b=u}else{const O=t;E=sn(O.length>1?O(o,{attrs:u,slots:s,emit:i}):O(o,null)),b=t.props?u:pv(u)}}catch(O){ua.length=0,Co(O,e,1),E=$(Ht)}let T=E;if(b&&y!==!1){const O=Object.keys(b),{shapeFlag:A}=T;O.length&&A&7&&(l&&O.some(us)&&(b=mv(b,l)),T=fr(T,b))}return n.dirs&&(T.dirs=T.dirs?T.dirs.concat(n.dirs):n.dirs),n.transition&&(T.transition=n.transition),E=T,Ja(w),E}const pv=e=>{let t;for(const n in e)(n==="class"||n==="style"||bo(n))&&((t||(t={}))[n]=e[n]);return t},mv=(e,t)=>{const n={};for(const r in e)(!us(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function vv(e,t,n){const{props:r,children:a,component:o}=e,{props:l,children:s,patchFlag:u}=t,i=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?Mu(r,l,i):!!l;if(u&8){const d=t.dynamicProps;for(let v=0;v<d.length;v++){const f=d[v];if(l[f]!==r[f]&&!Eo(i,f))return!0}}}else return(a||s)&&(!s||!s.$stable)?!0:r===l?!1:r?l?Mu(r,l,i):!0:!!l;return!1}function Mu(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let a=0;a<r.length;a++){const o=r[a];if(t[o]!==e[o]&&!Eo(n,o))return!0}return!1}function hv({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const yv=e=>e.__isSuspense;function gv(e,t){t&&t.pendingBranch?$e(e)?t.effects.push(...e):t.effects.push(e):dv(e)}function un(e,t){if(yt){let n=yt.provides;const r=yt.parent&&yt.parent.provides;r===n&&(n=yt.provides=Object.create(r)),n[e]=t}}function Yt(e,t,n=!1){const r=yt||Ct;if(r){const a=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(a&&e in a)return a[e];if(arguments.length>1)return n&&Te(t)?t.call(r.proxy):t}}function dr(e,t){return Ss(e,null,t)}const Au={};function bt(e,t,n){return Ss(e,t,n)}function Ss(e,t,{immediate:n,deep:r,flush:a,onTrack:o,onTrigger:l}=Ye){const s=yt;let u,i=!1,d=!1;if(gt(e)?(u=()=>e.value,i=Ic(e)):Or(e)?(u=()=>e,r=!0):$e(e)?(d=!0,i=e.some(Or),u=()=>e.map(b=>{if(gt(b))return b.value;if(Or(b))return ar(b);if(Te(b))return Fn(b,s,2)})):Te(e)?t?u=()=>Fn(e,s,2):u=()=>{if(!(s&&s.isUnmounted))return v&&v(),Wt(e,s,3,[f])}:u=Zt,t&&r){const b=u;u=()=>ar(b())}let v,f=b=>{v=E.onStop=()=>{Fn(b,s,4)}};if(va)return f=Zt,t?n&&Wt(t,s,3,[u(),d?[]:void 0,f]):u(),Zt;let m=d?[]:Au;const p=()=>{if(!!E.active)if(t){const b=E.run();(r||i||(d?b.some((w,T)=>ca(w,m[T])):ca(b,m)))&&(v&&v(),Wt(t,s,3,[b,m===Au?void 0:m,f]),m=b)}else E.run()};p.allowRecurse=!!t;let y;a==="sync"?y=p:a==="post"?y=()=>Ot(p,s&&s.suspense):y=()=>{!s||s.isMounted?cv(p):p()};const E=new ps(u,y);return t?n?p():m=E.run():a==="post"?Ot(E.run.bind(E),s&&s.suspense):E.run(),()=>{E.stop(),s&&s.scope&&is(s.scope.effects,E)}}function bv(e,t,n){const r=this.proxy,a=ut(e)?e.includes(".")?xc(r,e):()=>r[e]:e.bind(r,r);let o;Te(t)?o=t:(o=t.handler,n=t);const l=yt;Lr(this);const s=Ss(a,o.bind(r),n);return l?Lr(l):ur(),s}function xc(e,t){const n=t.split(".");return()=>{let r=e;for(let a=0;a<n.length&&r;a++)r=r[n[a]];return r}}function ar(e,t){if(!nt(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),gt(e))ar(e.value,t);else if($e(e))for(let n=0;n<e.length;n++)ar(e[n],t);else if(Kr(e)||kr(e))e.forEach(n=>{ar(n,t)});else if(hc(e))for(const n in e)ar(e[n],t);return e}function _v(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ut(()=>{e.isMounted=!0}),Xc(()=>{e.isUnmounting=!0}),e}const zt=[Function,Array],Sv={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:zt,onEnter:zt,onAfterEnter:zt,onEnterCancelled:zt,onBeforeLeave:zt,onLeave:zt,onAfterLeave:zt,onLeaveCancelled:zt,onBeforeAppear:zt,onAppear:zt,onAfterAppear:zt,onAppearCancelled:zt},setup(e,{slots:t}){const n=rh(),r=_v();let a;return()=>{const o=t.default&&Gc(t.default(),!0);if(!o||!o.length)return;let l=o[0];if(o.length>1){for(const y of o)if(y.type!==Ht){l=y;break}}const s=Fe(e),{mode:u}=s;if(r.isLeaving)return el(l);const i=Iu(l);if(!i)return el(l);const d=Il(i,s,r,n);Tl(i,d);const v=n.subTree,f=v&&Iu(v);let m=!1;const{getTransitionKey:p}=i.type;if(p){const y=p();a===void 0?a=y:y!==a&&(a=y,m=!0)}if(f&&f.type!==Ht&&(!tr(i,f)||m)){const y=Il(f,s,r,n);if(Tl(f,y),u==="out-in")return r.isLeaving=!0,y.afterLeave=()=>{r.isLeaving=!1,n.update()},el(l);u==="in-out"&&i.type!==Ht&&(y.delayLeave=(E,b,w)=>{const T=Kc(r,f);T[String(f.key)]=f,E._leaveCb=()=>{b(),E._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=w})}return l}}},Uc=Sv;function Kc(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function Il(e,t,n,r){const{appear:a,mode:o,persisted:l=!1,onBeforeEnter:s,onEnter:u,onAfterEnter:i,onEnterCancelled:d,onBeforeLeave:v,onLeave:f,onAfterLeave:m,onLeaveCancelled:p,onBeforeAppear:y,onAppear:E,onAfterAppear:b,onAppearCancelled:w}=t,T=String(e.key),O=Kc(n,e),A=(M,P)=>{M&&Wt(M,r,9,P)},B={mode:o,persisted:l,beforeEnter(M){let P=s;if(!n.isMounted)if(a)P=y||s;else return;M._leaveCb&&M._leaveCb(!0);const R=O[T];R&&tr(e,R)&&R.el._leaveCb&&R.el._leaveCb(),A(P,[M])},enter(M){let P=u,R=i,x=d;if(!n.isMounted)if(a)P=E||u,R=b||i,x=w||d;else return;let N=!1;const V=M._enterCb=le=>{N||(N=!0,le?A(x,[M]):A(R,[M]),B.delayedLeave&&B.delayedLeave(),M._enterCb=void 0)};P?(P(M,V),P.length<=1&&V()):V()},leave(M,P){const R=String(e.key);if(M._enterCb&&M._enterCb(!0),n.isUnmounting)return P();A(v,[M]);let x=!1;const N=M._leaveCb=V=>{x||(x=!0,P(),V?A(p,[M]):A(m,[M]),M._leaveCb=void 0,O[R]===e&&delete O[R])};O[R]=e,f?(f(M,N),f.length<=1&&N()):N()},clone(M){return Il(M,t,n,r)}};return B}function el(e){if(Ao(e))return e=fr(e),e.children=null,e}function Iu(e){return Ao(e)?e.children?e.children[0]:void 0:e}function Tl(e,t){e.shapeFlag&6&&e.component?Tl(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Gc(e,t=!1,n){let r=[],a=0;for(let o=0;o<e.length;o++){let l=e[o];const s=n==null?l.key:String(n)+String(l.key!=null?l.key:o);l.type===ve?(l.patchFlag&128&&a++,r=r.concat(Gc(l.children,t,s))):(t||l.type!==Ht)&&r.push(s!=null?fr(l,{key:s}):l)}if(a>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function Q(e){return Te(e)?{setup:e,name:e.name}:e}const Za=e=>!!e.type.__asyncLoader,Ao=e=>e.type.__isKeepAlive;function wv(e,t){zc(e,"a",t)}function $v(e,t){zc(e,"da",t)}function zc(e,t,n=yt){const r=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(Io(t,r,n),n){let a=n.parent;for(;a&&a.parent;)Ao(a.parent.vnode)&&Cv(r,t,n,a),a=a.parent}}function Cv(e,t,n,r){const a=Io(t,e,r,!0);yr(()=>{is(r[t],a)},n)}function Io(e,t,n=yt,r=!1){if(n){const a=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...l)=>{if(n.isUnmounted)return;zr(),Lr(n);const s=Wt(t,n,e,l);return ur(),Yr(),s});return r?a.unshift(o):a.push(o),o}}const En=e=>(t,n=yt)=>(!va||e==="sp")&&Io(e,t,n),Ev=En("bm"),Ut=En("m"),Yc=En("bu"),Mv=En("u"),Xc=En("bum"),yr=En("um"),Av=En("sp"),Iv=En("rtg"),Tv=En("rtc");function kv(e,t=yt){Io("ec",e,t)}let kl=!0;function Ov(e){const t=Hc(e),n=e.proxy,r=e.ctx;kl=!1,t.beforeCreate&&Tu(t.beforeCreate,e,"bc");const{data:a,computed:o,methods:l,watch:s,provide:u,inject:i,created:d,beforeMount:v,mounted:f,beforeUpdate:m,updated:p,activated:y,deactivated:E,beforeDestroy:b,beforeUnmount:w,destroyed:T,unmounted:O,render:A,renderTracked:B,renderTriggered:M,errorCaptured:P,serverPrefetch:R,expose:x,inheritAttrs:N,components:V,directives:le,filters:be}=t;if(i&&Bv(i,r,null,e.appContext.config.unwrapInjectedRef),l)for(const Be in l){const re=l[Be];Te(re)&&(r[Be]=re.bind(n))}if(a){const Be=a.call(n,n);nt(Be)&&(e.data=$n(Be))}if(kl=!0,o)for(const Be in o){const re=o[Be],Z=Te(re)?re.bind(n,n):Te(re.get)?re.get.bind(n,n):Zt,Ee=!Te(re)&&Te(re.set)?re.set.bind(n):Zt,Ke=h({get:Z,set:Ee});Object.defineProperty(r,Be,{enumerable:!0,configurable:!0,get:()=>Ke.value,set:me=>Ke.value=me})}if(s)for(const Be in s)Wc(s[Be],r,n,Be);if(u){const Be=Te(u)?u.call(n):u;Reflect.ownKeys(Be).forEach(re=>{un(re,Be[re])})}d&&Tu(d,e,"c");function Pe(Be,re){$e(re)?re.forEach(Z=>Be(Z.bind(n))):re&&Be(re.bind(n))}if(Pe(Ev,v),Pe(Ut,f),Pe(Yc,m),Pe(Mv,p),Pe(wv,y),Pe($v,E),Pe(kv,P),Pe(Tv,B),Pe(Iv,M),Pe(Xc,w),Pe(yr,O),Pe(Av,R),$e(x))if(x.length){const Be=e.exposed||(e.exposed={});x.forEach(re=>{Object.defineProperty(Be,re,{get:()=>n[re],set:Z=>n[re]=Z})})}else e.exposed||(e.exposed={});A&&e.render===Zt&&(e.render=A),N!=null&&(e.inheritAttrs=N),V&&(e.components=V),le&&(e.directives=le)}function Bv(e,t,n=Zt,r=!1){$e(e)&&(e=Ol(e));for(const a in e){const o=e[a];let l;nt(o)?"default"in o?l=Yt(o.from||a,o.default,!0):l=Yt(o.from||a):l=Yt(o),gt(l)&&r?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>l.value,set:s=>l.value=s}):t[a]=l}}function Tu(e,t,n){Wt($e(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Wc(e,t,n,r){const a=r.includes(".")?xc(n,r):()=>n[r];if(ut(e)){const o=t[e];Te(o)&&bt(a,o)}else if(Te(e))bt(a,e.bind(n));else if(nt(e))if($e(e))e.forEach(o=>Wc(o,t,n,r));else{const o=Te(e.handler)?e.handler.bind(n):t[e.handler];Te(o)&&bt(a,o,e)}}function Hc(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:a,optionsCache:o,config:{optionMergeStrategies:l}}=e.appContext,s=o.get(t);let u;return s?u=s:!a.length&&!n&&!r?u=t:(u={},a.length&&a.forEach(i=>Qa(u,i,l,!0)),Qa(u,t,l)),o.set(t,u),u}function Qa(e,t,n,r=!1){const{mixins:a,extends:o}=t;o&&Qa(e,o,n,!0),a&&a.forEach(l=>Qa(e,l,n,!0));for(const l in t)if(!(r&&l==="expose")){const s=Lv[l]||n&&n[l];e[l]=s?s(e[l],t[l]):t[l]}return e}const Lv={data:ku,props:er,emits:er,methods:er,computed:er,beforeCreate:It,created:It,beforeMount:It,mounted:It,beforeUpdate:It,updated:It,beforeDestroy:It,beforeUnmount:It,destroyed:It,unmounted:It,activated:It,deactivated:It,errorCaptured:It,serverPrefetch:It,components:er,directives:er,watch:Pv,provide:ku,inject:Rv};function ku(e,t){return t?e?function(){return wt(Te(e)?e.call(this,this):e,Te(t)?t.call(this,this):t)}:t:e}function Rv(e,t){return er(Ol(e),Ol(t))}function Ol(e){if($e(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function It(e,t){return e?[...new Set([].concat(e,t))]:t}function er(e,t){return e?wt(wt(Object.create(null),e),t):t}function Pv(e,t){if(!e)return t;if(!t)return e;const n=wt(Object.create(null),e);for(const r in t)n[r]=It(e[r],t[r]);return n}function Nv(e,t,n,r=!1){const a={},o={};Ha(o,To,1),e.propsDefaults=Object.create(null),qc(e,t,a,o);for(const l in e.propsOptions[0])l in a||(a[l]=void 0);n?e.props=r?a:tv(a):e.type.props?e.props=a:e.props=o,e.attrs=o}function jv(e,t,n,r){const{props:a,attrs:o,vnode:{patchFlag:l}}=e,s=Fe(a),[u]=e.propsOptions;let i=!1;if((r||l>0)&&!(l&16)){if(l&8){const d=e.vnode.dynamicProps;for(let v=0;v<d.length;v++){let f=d[v];if(Eo(e.emitsOptions,f))continue;const m=t[f];if(u)if(Ne(o,f))m!==o[f]&&(o[f]=m,i=!0);else{const p=dn(f);a[p]=Bl(u,s,p,m,e,!1)}else m!==o[f]&&(o[f]=m,i=!0)}}}else{qc(e,t,a,o)&&(i=!0);let d;for(const v in s)(!t||!Ne(t,v)&&((d=Gr(v))===v||!Ne(t,d)))&&(u?n&&(n[v]!==void 0||n[d]!==void 0)&&(a[v]=Bl(u,s,v,void 0,e,!0)):delete a[v]);if(o!==s)for(const v in o)(!t||!Ne(t,v)&&!0)&&(delete o[v],i=!0)}i&&wn(e,"set","$attrs")}function qc(e,t,n,r){const[a,o]=e.propsOptions;let l=!1,s;if(t)for(let u in t){if(Ka(u))continue;const i=t[u];let d;a&&Ne(a,d=dn(u))?!o||!o.includes(d)?n[d]=i:(s||(s={}))[d]=i:Eo(e.emitsOptions,u)||(!(u in r)||i!==r[u])&&(r[u]=i,l=!0)}if(o){const u=Fe(n),i=s||Ye;for(let d=0;d<o.length;d++){const v=o[d];n[v]=Bl(a,u,v,i[v],e,!Ne(i,v))}}return l}function Bl(e,t,n,r,a,o){const l=e[n];if(l!=null){const s=Ne(l,"default");if(s&&r===void 0){const u=l.default;if(l.type!==Function&&Te(u)){const{propsDefaults:i}=a;n in i?r=i[n]:(Lr(a),r=i[n]=u.call(null,t),ur())}else r=u}l[0]&&(o&&!s?r=!1:l[1]&&(r===""||r===Gr(n))&&(r=!0))}return r}function Jc(e,t,n=!1){const r=t.propsCache,a=r.get(e);if(a)return a;const o=e.props,l={},s=[];let u=!1;if(!Te(e)){const d=v=>{u=!0;const[f,m]=Jc(v,t,!0);wt(l,f),m&&s.push(...m)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!o&&!u)return r.set(e,Tr),Tr;if($e(o))for(let d=0;d<o.length;d++){const v=dn(o[d]);Ou(v)&&(l[v]=Ye)}else if(o)for(const d in o){const v=dn(d);if(Ou(v)){const f=o[d],m=l[v]=$e(f)||Te(f)?{type:f}:f;if(m){const p=Ru(Boolean,m.type),y=Ru(String,m.type);m[0]=p>-1,m[1]=y<0||p<y,(p>-1||Ne(m,"default"))&&s.push(v)}}}const i=[l,s];return r.set(e,i),i}function Ou(e){return e[0]!=="$"}function Bu(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function Lu(e,t){return Bu(e)===Bu(t)}function Ru(e,t){return $e(t)?t.findIndex(n=>Lu(n,e)):Te(t)&&Lu(t,e)?0:-1}const Zc=e=>e[0]==="_"||e==="$stable",ws=e=>$e(e)?e.map(sn):[sn(e)],Fv=(e,t,n)=>{const r=Y((...a)=>ws(t(...a)),n);return r._c=!1,r},Qc=(e,t,n)=>{const r=e._ctx;for(const a in e){if(Zc(a))continue;const o=e[a];if(Te(o))t[a]=Fv(a,o,r);else if(o!=null){const l=ws(o);t[a]=()=>l}}},ed=(e,t)=>{const n=ws(t);e.slots.default=()=>n},Vv=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Fe(t),Ha(t,"_",n)):Qc(t,e.slots={})}else e.slots={},t&&ed(e,t);Ha(e.slots,To,1)},Dv=(e,t,n)=>{const{vnode:r,slots:a}=e;let o=!0,l=Ye;if(r.shapeFlag&32){const s=t._;s?n&&s===1?o=!1:(wt(a,t),!n&&s===1&&delete a._):(o=!t.$stable,Qc(t,a)),l=t}else t&&(ed(e,t),l={default:1});if(o)for(const s in a)!Zc(s)&&!(s in l)&&delete a[s]};function gr(e,t){const n=Ct;if(n===null)return e;const r=ko(n)||n.proxy,a=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[l,s,u,i=Ye]=t[o];Te(l)&&(l={mounted:l,updated:l}),l.deep&&ar(s),a.push({dir:l,instance:r,value:s,oldValue:void 0,arg:u,modifiers:i})}return e}function Jn(e,t,n,r){const a=e.dirs,o=t&&t.dirs;for(let l=0;l<a.length;l++){const s=a[l];o&&(s.oldValue=o[l].value);let u=s.dir[r];u&&(zr(),Wt(u,n,8,[e.el,s,e,t]),Yr())}}function td(){return{app:null,config:{isNativeTag:Sm,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xv=0;function Uv(e,t){return function(r,a=null){Te(r)||(r=Object.assign({},r)),a!=null&&!nt(a)&&(a=null);const o=td(),l=new Set;let s=!1;const u=o.app={_uid:xv++,_component:r,_props:a,_container:null,_context:o,_instance:null,version:ch,get config(){return o.config},set config(i){},use(i,...d){return l.has(i)||(i&&Te(i.install)?(l.add(i),i.install(u,...d)):Te(i)&&(l.add(i),i(u,...d))),u},mixin(i){return o.mixins.includes(i)||o.mixins.push(i),u},component(i,d){return d?(o.components[i]=d,u):o.components[i]},directive(i,d){return d?(o.directives[i]=d,u):o.directives[i]},mount(i,d,v){if(!s){const f=$(r,a);return f.appContext=o,d&&t?t(f,i):e(f,i,v),s=!0,u._container=i,i.__vue_app__=u,ko(f.component)||f.component.proxy}},unmount(){s&&(e(null,u._container),delete u._container.__vue_app__)},provide(i,d){return o.provides[i]=d,u}};return u}}function Ll(e,t,n,r,a=!1){if($e(e)){e.forEach((f,m)=>Ll(f,t&&($e(t)?t[m]:t),n,r,a));return}if(Za(r)&&!a)return;const o=r.shapeFlag&4?ko(r.component)||r.component.proxy:r.el,l=a?null:o,{i:s,r:u}=e,i=t&&t.r,d=s.refs===Ye?s.refs={}:s.refs,v=s.setupState;if(i!=null&&i!==u&&(ut(i)?(d[i]=null,Ne(v,i)&&(v[i]=null)):gt(i)&&(i.value=null)),Te(u))Fn(u,s,12,[l,d]);else{const f=ut(u),m=gt(u);if(f||m){const p=()=>{if(e.f){const y=f?d[u]:u.value;a?$e(y)&&is(y,o):$e(y)?y.includes(o)||y.push(o):f?(d[u]=[o],Ne(v,u)&&(v[u]=d[u])):(u.value=[o],e.k&&(d[e.k]=u.value))}else f?(d[u]=l,Ne(v,u)&&(v[u]=l)):gt(u)&&(u.value=l,e.k&&(d[e.k]=l))};l?(p.id=-1,Ot(p,n)):p()}}}const Ot=gv;function Kv(e){return Gv(e)}function Gv(e,t){const n=Am();n.__VUE__=!0;const{insert:r,remove:a,patchProp:o,createElement:l,createText:s,createComment:u,setText:i,setElementText:d,parentNode:v,nextSibling:f,setScopeId:m=Zt,cloneNode:p,insertStaticContent:y}=e,E=(I,L,U,W=null,X=null,ne=null,j=!1,D=null,G=!!L.dynamicChildren)=>{if(I===L)return;I&&!tr(I,L)&&(W=rt(I),z(I,X,ne,!0),I=null),L.patchFlag===-2&&(G=!1,L.dynamicChildren=null);const{type:K,ref:pe,shapeFlag:se}=L;switch(K){case Es:b(I,L,U,W);break;case Ht:w(I,L,U,W);break;case tl:I==null&&T(L,U,W,j);break;case ve:le(I,L,U,W,X,ne,j,D,G);break;default:se&1?B(I,L,U,W,X,ne,j,D,G):se&6?be(I,L,U,W,X,ne,j,D,G):(se&64||se&128)&&K.process(I,L,U,W,X,ne,j,D,G,Mt)}pe!=null&&X&&Ll(pe,I&&I.ref,ne,L||I,!L)},b=(I,L,U,W)=>{if(I==null)r(L.el=s(L.children),U,W);else{const X=L.el=I.el;L.children!==I.children&&i(X,L.children)}},w=(I,L,U,W)=>{I==null?r(L.el=u(L.children||""),U,W):L.el=I.el},T=(I,L,U,W)=>{[I.el,I.anchor]=y(I.children,L,U,W,I.el,I.anchor)},O=({el:I,anchor:L},U,W)=>{let X;for(;I&&I!==L;)X=f(I),r(I,U,W),I=X;r(L,U,W)},A=({el:I,anchor:L})=>{let U;for(;I&&I!==L;)U=f(I),a(I),I=U;a(L)},B=(I,L,U,W,X,ne,j,D,G)=>{j=j||L.type==="svg",I==null?M(L,U,W,X,ne,j,D,G):x(I,L,X,ne,j,D,G)},M=(I,L,U,W,X,ne,j,D)=>{let G,K;const{type:pe,props:se,shapeFlag:he,transition:_e,patchFlag:Ie,dirs:De}=I;if(I.el&&p!==void 0&&Ie===-1)G=I.el=p(I.el);else{if(G=I.el=l(I.type,ne,se&&se.is,se),he&8?d(G,I.children):he&16&&R(I.children,G,null,W,X,ne&&pe!=="foreignObject",j,D),De&&Jn(I,null,W,"created"),se){for(const ze in se)ze!=="value"&&!Ka(ze)&&o(G,ze,null,se[ze],ne,I.children,W,X,Ue);"value"in se&&o(G,"value",null,se.value),(K=se.onVnodeBeforeMount)&&an(K,W,I)}P(G,I,I.scopeId,j,W)}De&&Jn(I,null,W,"beforeMount");const xe=(!X||X&&!X.pendingBranch)&&_e&&!_e.persisted;xe&&_e.beforeEnter(G),r(G,L,U),((K=se&&se.onVnodeMounted)||xe||De)&&Ot(()=>{K&&an(K,W,I),xe&&_e.enter(G),De&&Jn(I,null,W,"mounted")},X)},P=(I,L,U,W,X)=>{if(U&&m(I,U),W)for(let ne=0;ne<W.length;ne++)m(I,W[ne]);if(X){let ne=X.subTree;if(L===ne){const j=X.vnode;P(I,j,j.scopeId,j.slotScopeIds,X.parent)}}},R=(I,L,U,W,X,ne,j,D,G=0)=>{for(let K=G;K<I.length;K++){const pe=I[K]=D?Pn(I[K]):sn(I[K]);E(null,pe,L,U,W,X,ne,j,D)}},x=(I,L,U,W,X,ne,j)=>{const D=L.el=I.el;let{patchFlag:G,dynamicChildren:K,dirs:pe}=L;G|=I.patchFlag&16;const se=I.props||Ye,he=L.props||Ye;let _e;U&&Zn(U,!1),(_e=he.onVnodeBeforeUpdate)&&an(_e,U,L,I),pe&&Jn(L,I,U,"beforeUpdate"),U&&Zn(U,!0);const Ie=X&&L.type!=="foreignObject";if(K?N(I.dynamicChildren,K,D,U,W,Ie,ne):j||Z(I,L,D,null,U,W,Ie,ne,!1),G>0){if(G&16)V(D,L,se,he,U,W,X);else if(G&2&&se.class!==he.class&&o(D,"class",null,he.class,X),G&4&&o(D,"style",se.style,he.style,X),G&8){const De=L.dynamicProps;for(let xe=0;xe<De.length;xe++){const ze=De[xe],jt=se[ze],An=he[ze];(An!==jt||ze==="value")&&o(D,ze,jt,An,X,I.children,U,W,Ue)}}G&1&&I.children!==L.children&&d(D,L.children)}else!j&&K==null&&V(D,L,se,he,U,W,X);((_e=he.onVnodeUpdated)||pe)&&Ot(()=>{_e&&an(_e,U,L,I),pe&&Jn(L,I,U,"updated")},W)},N=(I,L,U,W,X,ne,j)=>{for(let D=0;D<L.length;D++){const G=I[D],K=L[D],pe=G.el&&(G.type===ve||!tr(G,K)||G.shapeFlag&70)?v(G.el):U;E(G,K,pe,null,W,X,ne,j,!0)}},V=(I,L,U,W,X,ne,j)=>{if(U!==W){for(const D in W){if(Ka(D))continue;const G=W[D],K=U[D];G!==K&&D!=="value"&&o(I,D,K,G,j,L.children,X,ne,Ue)}if(U!==Ye)for(const D in U)!Ka(D)&&!(D in W)&&o(I,D,U[D],null,j,L.children,X,ne,Ue);"value"in W&&o(I,"value",U.value,W.value)}},le=(I,L,U,W,X,ne,j,D,G)=>{const K=L.el=I?I.el:s(""),pe=L.anchor=I?I.anchor:s("");let{patchFlag:se,dynamicChildren:he,slotScopeIds:_e}=L;_e&&(D=D?D.concat(_e):_e),I==null?(r(K,U,W),r(pe,U,W),R(L.children,U,pe,X,ne,j,D,G)):se>0&&se&64&&he&&I.dynamicChildren?(N(I.dynamicChildren,he,U,X,ne,j,D),(L.key!=null||X&&L===X.subTree)&&$s(I,L,!0)):Z(I,L,U,pe,X,ne,j,D,G)},be=(I,L,U,W,X,ne,j,D,G)=>{L.slotScopeIds=D,I==null?L.shapeFlag&512?X.ctx.activate(L,U,W,j,G):je(L,U,W,X,ne,j,G):Pe(I,L,G)},je=(I,L,U,W,X,ne,j)=>{const D=I.component=nh(I,W,X);if(Ao(I)&&(D.ctx.renderer=Mt),ah(D),D.asyncDep){if(X&&X.registerDep(D,Be),!I.el){const G=D.subTree=$(Ht);w(null,G,L,U)}return}Be(D,I,L,U,X,ne,j)},Pe=(I,L,U)=>{const W=L.component=I.component;if(vv(I,L,U))if(W.asyncDep&&!W.asyncResolved){re(W,L,U);return}else W.next=L,iv(W.update),W.update();else L.component=I.component,L.el=I.el,W.vnode=L},Be=(I,L,U,W,X,ne,j)=>{const D=()=>{if(I.isMounted){let{next:pe,bu:se,u:he,parent:_e,vnode:Ie}=I,De=pe,xe;Zn(I,!1),pe?(pe.el=Ie.el,re(I,pe,j)):pe=Ie,se&&Ga(se),(xe=pe.props&&pe.props.onVnodeBeforeUpdate)&&an(xe,_e,pe,Ie),Zn(I,!0);const ze=Qo(I),jt=I.subTree;I.subTree=ze,E(jt,ze,v(jt.el),rt(jt),I,X,ne),pe.el=ze.el,De===null&&hv(I,ze.el),he&&Ot(he,X),(xe=pe.props&&pe.props.onVnodeUpdated)&&Ot(()=>an(xe,_e,pe,Ie),X)}else{let pe;const{el:se,props:he}=L,{bm:_e,m:Ie,parent:De}=I,xe=Za(L);if(Zn(I,!1),_e&&Ga(_e),!xe&&(pe=he&&he.onVnodeBeforeMount)&&an(pe,De,L),Zn(I,!0),se&&Nt){const ze=()=>{I.subTree=Qo(I),Nt(se,I.subTree,I,X,null)};xe?L.type.__asyncLoader().then(()=>!I.isUnmounted&&ze()):ze()}else{const ze=I.subTree=Qo(I);E(null,ze,U,W,I,X,ne),L.el=ze.el}if(Ie&&Ot(Ie,X),!xe&&(pe=he&&he.onVnodeMounted)){const ze=L;Ot(()=>an(pe,De,ze),X)}L.shapeFlag&256&&I.a&&Ot(I.a,X),I.isMounted=!0,L=U=W=null}},G=I.effect=new ps(D,()=>Pc(I.update),I.scope),K=I.update=G.run.bind(G);K.id=I.uid,Zn(I,!0),K()},re=(I,L,U)=>{L.component=I;const W=I.vnode.props;I.vnode=L,I.next=null,jv(I,L.props,W,U),Dv(I,L.children,U),zr(),_s(void 0,I.update),Yr()},Z=(I,L,U,W,X,ne,j,D,G=!1)=>{const K=I&&I.children,pe=I?I.shapeFlag:0,se=L.children,{patchFlag:he,shapeFlag:_e}=L;if(he>0){if(he&128){Ke(K,se,U,W,X,ne,j,D,G);return}else if(he&256){Ee(K,se,U,W,X,ne,j,D,G);return}}_e&8?(pe&16&&Ue(K,X,ne),se!==K&&d(U,se)):pe&16?_e&16?Ke(K,se,U,W,X,ne,j,D,G):Ue(K,X,ne,!0):(pe&8&&d(U,""),_e&16&&R(se,U,W,X,ne,j,D,G))},Ee=(I,L,U,W,X,ne,j,D,G)=>{I=I||Tr,L=L||Tr;const K=I.length,pe=L.length,se=Math.min(K,pe);let he;for(he=0;he<se;he++){const _e=L[he]=G?Pn(L[he]):sn(L[he]);E(I[he],_e,U,null,X,ne,j,D,G)}K>pe?Ue(I,X,ne,!0,!1,se):R(L,U,W,X,ne,j,D,G,se)},Ke=(I,L,U,W,X,ne,j,D,G)=>{let K=0;const pe=L.length;let se=I.length-1,he=pe-1;for(;K<=se&&K<=he;){const _e=I[K],Ie=L[K]=G?Pn(L[K]):sn(L[K]);if(tr(_e,Ie))E(_e,Ie,U,null,X,ne,j,D,G);else break;K++}for(;K<=se&&K<=he;){const _e=I[se],Ie=L[he]=G?Pn(L[he]):sn(L[he]);if(tr(_e,Ie))E(_e,Ie,U,null,X,ne,j,D,G);else break;se--,he--}if(K>se){if(K<=he){const _e=he+1,Ie=_e<pe?L[_e].el:W;for(;K<=he;)E(null,L[K]=G?Pn(L[K]):sn(L[K]),U,Ie,X,ne,j,D,G),K++}}else if(K>he)for(;K<=se;)z(I[K],X,ne,!0),K++;else{const _e=K,Ie=K,De=new Map;for(K=Ie;K<=he;K++){const At=L[K]=G?Pn(L[K]):sn(L[K]);At.key!=null&&De.set(At.key,K)}let xe,ze=0;const jt=he-Ie+1;let An=!1,Oa=0;const qn=new Array(jt);for(K=0;K<jt;K++)qn[K]=0;for(K=_e;K<=se;K++){const At=I[K];if(ze>=jt){z(At,X,ne,!0);continue}let Gt;if(At.key!=null)Gt=De.get(At.key);else for(xe=Ie;xe<=he;xe++)if(qn[xe-Ie]===0&&tr(At,L[xe])){Gt=xe;break}Gt===void 0?z(At,X,ne,!0):(qn[Gt-Ie]=K+1,Gt>=Oa?Oa=Gt:An=!0,E(At,L[Gt],U,null,X,ne,j,D,G),ze++)}const Ba=An?zv(qn):Tr;for(xe=Ba.length-1,K=jt-1;K>=0;K--){const At=Ie+K,Gt=L[At],La=At+1<pe?L[At+1].el:W;qn[K]===0?E(null,Gt,U,La,X,ne,j,D,G):An&&(xe<0||K!==Ba[xe]?me(Gt,U,La,2):xe--)}}},me=(I,L,U,W,X=null)=>{const{el:ne,type:j,transition:D,children:G,shapeFlag:K}=I;if(K&6){me(I.component.subTree,L,U,W);return}if(K&128){I.suspense.move(L,U,W);return}if(K&64){j.move(I,L,U,Mt);return}if(j===ve){r(ne,L,U);for(let se=0;se<G.length;se++)me(G[se],L,U,W);r(I.anchor,L,U);return}if(j===tl){O(I,L,U);return}if(W!==2&&K&1&&D)if(W===0)D.beforeEnter(ne),r(ne,L,U),Ot(()=>D.enter(ne),X);else{const{leave:se,delayLeave:he,afterLeave:_e}=D,Ie=()=>r(ne,L,U),De=()=>{se(ne,()=>{Ie(),_e&&_e()})};he?he(ne,Ie,De):De()}else r(ne,L,U)},z=(I,L,U,W=!1,X=!1)=>{const{type:ne,props:j,ref:D,children:G,dynamicChildren:K,shapeFlag:pe,patchFlag:se,dirs:he}=I;if(D!=null&&Ll(D,null,U,I,!0),pe&256){L.ctx.deactivate(I);return}const _e=pe&1&&he,Ie=!Za(I);let De;if(Ie&&(De=j&&j.onVnodeBeforeUnmount)&&an(De,L,I),pe&6)Le(I.component,U,W);else{if(pe&128){I.suspense.unmount(U,W);return}_e&&Jn(I,null,L,"beforeUnmount"),pe&64?I.type.remove(I,L,U,X,Mt,W):K&&(ne!==ve||se>0&&se&64)?Ue(K,L,U,!1,!0):(ne===ve&&se&384||!X&&pe&16)&&Ue(G,L,U),W&&ie(I)}(Ie&&(De=j&&j.onVnodeUnmounted)||_e)&&Ot(()=>{De&&an(De,L,I),_e&&Jn(I,null,L,"unmounted")},U)},ie=I=>{const{type:L,el:U,anchor:W,transition:X}=I;if(L===ve){we(U,W);return}if(L===tl){A(I);return}const ne=()=>{a(U),X&&!X.persisted&&X.afterLeave&&X.afterLeave()};if(I.shapeFlag&1&&X&&!X.persisted){const{leave:j,delayLeave:D}=X,G=()=>j(U,ne);D?D(I.el,ne,G):G()}else ne()},we=(I,L)=>{let U;for(;I!==L;)U=f(I),a(I),I=U;a(L)},Le=(I,L,U)=>{const{bum:W,scope:X,update:ne,subTree:j,um:D}=I;W&&Ga(W),X.stop(),ne&&(ne.active=!1,z(j,I,L,U)),D&&Ot(D,L),Ot(()=>{I.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&I.asyncDep&&!I.asyncResolved&&I.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},Ue=(I,L,U,W=!1,X=!1,ne=0)=>{for(let j=ne;j<I.length;j++)z(I[j],L,U,W,X)},rt=I=>I.shapeFlag&6?rt(I.component.subTree):I.shapeFlag&128?I.suspense.next():f(I.anchor||I.el),ht=(I,L,U)=>{I==null?L._vnode&&z(L._vnode,null,null,!0):E(L._vnode||null,I,L,null,null,null,U),Fc(),L._vnode=I},Mt={p:E,um:z,m:me,r:ie,mt:je,mc:R,pc:Z,pbc:N,n:rt,o:e};let Qe,Nt;return t&&([Qe,Nt]=t(Mt)),{render:ht,hydrate:Qe,createApp:Uv(ht,Qe)}}function Zn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function $s(e,t,n=!1){const r=e.children,a=t.children;if($e(r)&&$e(a))for(let o=0;o<r.length;o++){const l=r[o];let s=a[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=a[o]=Pn(a[o]),s.el=l.el),n||$s(l,s))}}function zv(e){const t=e.slice(),n=[0];let r,a,o,l,s;const u=e.length;for(r=0;r<u;r++){const i=e[r];if(i!==0){if(a=n[n.length-1],e[a]<i){t[r]=a,n.push(r);continue}for(o=0,l=n.length-1;o<l;)s=o+l>>1,e[n[s]]<i?o=s+1:l=s;i<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,l=n[o-1];o-- >0;)n[o]=l,l=t[l];return n}const Yv=e=>e.__isTeleport,sa=e=>e&&(e.disabled||e.disabled===""),Pu=e=>typeof SVGElement!="undefined"&&e instanceof SVGElement,Rl=(e,t)=>{const n=e&&e.to;return ut(n)?t?t(n):null:n},Xv={__isTeleport:!0,process(e,t,n,r,a,o,l,s,u,i){const{mc:d,pc:v,pbc:f,o:{insert:m,querySelector:p,createText:y,createComment:E}}=i,b=sa(t.props);let{shapeFlag:w,children:T,dynamicChildren:O}=t;if(e==null){const A=t.el=y(""),B=t.anchor=y("");m(A,n,r),m(B,n,r);const M=t.target=Rl(t.props,p),P=t.targetAnchor=y("");M&&(m(P,M),l=l||Pu(M));const R=(x,N)=>{w&16&&d(T,x,N,a,o,l,s,u)};b?R(n,B):M&&R(M,P)}else{t.el=e.el;const A=t.anchor=e.anchor,B=t.target=e.target,M=t.targetAnchor=e.targetAnchor,P=sa(e.props),R=P?n:B,x=P?A:M;if(l=l||Pu(B),O?(f(e.dynamicChildren,O,R,a,o,l,s),$s(e,t,!0)):u||v(e,t,R,x,a,o,l,s,!1),b)P||xa(t,n,A,i,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const N=t.target=Rl(t.props,p);N&&xa(t,N,null,i,0)}else P&&xa(t,B,M,i,1)}},remove(e,t,n,r,{um:a,o:{remove:o}},l){const{shapeFlag:s,children:u,anchor:i,targetAnchor:d,target:v,props:f}=e;if(v&&o(d),(l||!sa(f))&&(o(i),s&16))for(let m=0;m<u.length;m++){const p=u[m];a(p,t,n,!0,!!p.dynamicChildren)}},move:xa,hydrate:Wv};function xa(e,t,n,{o:{insert:r},m:a},o=2){o===0&&r(e.targetAnchor,t,n);const{el:l,anchor:s,shapeFlag:u,children:i,props:d}=e,v=o===2;if(v&&r(l,t,n),(!v||sa(d))&&u&16)for(let f=0;f<i.length;f++)a(i[f],t,n,2);v&&r(s,t,n)}function Wv(e,t,n,r,a,o,{o:{nextSibling:l,parentNode:s,querySelector:u}},i){const d=t.target=Rl(t.props,u);if(d){const v=d._lpa||d.firstChild;t.shapeFlag&16&&(sa(t.props)?(t.anchor=i(l(e),t,s(e),n,r,a,o),t.targetAnchor=v):(t.anchor=l(e),t.targetAnchor=i(v,t,d,n,r,a,o)),d._lpa=t.targetAnchor&&l(t.targetAnchor))}return t.anchor&&l(t.anchor)}const nd=Xv,Cs="components";function F(e,t){return od(Cs,e,!0,t)||e}const rd=Symbol();function ad(e){return ut(e)?od(Cs,e,!1)||e:e||rd}function od(e,t,n=!0,r=!1){const a=Ct||yt;if(a){const o=a.type;if(e===Cs){const s=uh(o);if(s&&(s===t||s===dn(t)||s===wo(dn(t))))return o}const l=Nu(a[e]||o[e],t)||Nu(a.appContext[e],t);return!l&&r?o:l}}function Nu(e,t){return e&&(e[t]||e[dn(t)]||e[wo(dn(t))])}const ve=Symbol(void 0),Es=Symbol(void 0),Ht=Symbol(void 0),tl=Symbol(void 0),ua=[];let sr=null;function S(e=!1){ua.push(sr=e?null:[])}function Hv(){ua.pop(),sr=ua[ua.length-1]||null}let eo=1;function ju(e){eo+=e}function ld(e){return e.dynamicChildren=eo>0?sr||Tr:null,Hv(),eo>0&&sr&&sr.push(e),e}function k(e,t,n,r,a,o){return ld(C(e,t,n,r,a,o,!0))}function Se(e,t,n,r,a){return ld($(e,t,n,r,a,!0))}function to(e){return e?e.__v_isVNode===!0:!1}function tr(e,t){return e.type===t.type&&e.key===t.key}const To="__vInternal",sd=({key:e})=>e!=null?e:null,za=({ref:e,ref_key:t,ref_for:n})=>e!=null?ut(e)||gt(e)||Te(e)?{i:Ct,r:e,k:t,f:!!n}:e:null;function C(e,t=null,n=null,r=0,a=null,o=e===ve?0:1,l=!1,s=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&sd(t),ref:t&&za(t),scopeId:Mo,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:a,dynamicChildren:null,appContext:null};return s?(Ms(u,n),o&128&&e.normalize(u)):n&&(u.shapeFlag|=ut(n)?8:16),eo>0&&!l&&sr&&(u.patchFlag>0||o&6)&&u.patchFlag!==32&&sr.push(u),u}const $=qv;function qv(e,t=null,n=null,r=0,a=null,o=!1){if((!e||e===rd)&&(e=Ht),to(e)){const s=fr(e,t,!0);return n&&Ms(s,n),s}if(ih(e)&&(e=e.__vccOpts),t){t=Jv(t);let{class:s,style:u}=t;s&&!ut(s)&&(t.class=pt(s)),nt(u)&&(Tc(u)&&!$e(u)&&(u=wt({},u)),t.style=at(u))}const l=ut(e)?1:yv(e)?128:Yv(e)?64:nt(e)?4:Te(e)?2:0;return C(e,t,n,r,a,l,o,!0)}function Jv(e){return e?Tc(e)||To in e?wt({},e):e:null}function fr(e,t,n=!1){const{props:r,ref:a,patchFlag:o,children:l}=e,s=t?Zv(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&sd(s),ref:t&&t.ref?n&&a?$e(a)?a.concat(za(t)):[a,za(t)]:za(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ve?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&fr(e.ssContent),ssFallback:e.ssFallback&&fr(e.ssFallback),el:e.el,anchor:e.anchor}}function Kt(e=" ",t=0){return $(Es,null,e,t)}function fe(e="",t=!1){return t?(S(),Se(Ht,null,e)):$(Ht,null,e)}function sn(e){return e==null||typeof e=="boolean"?$(Ht):$e(e)?$(ve,null,e.slice()):typeof e=="object"?Pn(e):$(Es,null,String(e))}function Pn(e){return e.el===null||e.memo?e:fr(e)}function Ms(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if($e(t))n=16;else if(typeof t=="object")if(r&65){const a=t.default;a&&(a._c&&(a._d=!1),Ms(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!(To in t)?t._ctx=Ct:a===3&&Ct&&(Ct.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Te(t)?(t={default:t,_ctx:Ct},n=32):(t=String(t),r&64?(n=16,t=[Kt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Zv(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const a in r)if(a==="class")t.class!==r.class&&(t.class=pt([t.class,r.class]));else if(a==="style")t.style=at([t.style,r.style]);else if(bo(a)){const o=t[a],l=r[a];l&&o!==l&&!($e(o)&&o.includes(l))&&(t[a]=o?[].concat(o,l):l)}else a!==""&&(t[a]=r[a])}return t}function an(e,t,n,r=null){Wt(e,t,7,[n,r])}function Ae(e,t,n,r){let a;const o=n&&n[r];if($e(e)||ut(e)){a=new Array(e.length);for(let l=0,s=e.length;l<s;l++)a[l]=t(e[l],l,void 0,o&&o[l])}else if(typeof e=="number"){a=new Array(e);for(let l=0;l<e;l++)a[l]=t(l+1,l,void 0,o&&o[l])}else if(nt(e))if(e[Symbol.iterator])a=Array.from(e,(l,s)=>t(l,s,void 0,o&&o[s]));else{const l=Object.keys(e);a=new Array(l.length);for(let s=0,u=l.length;s<u;s++){const i=l[s];a[s]=t(e[i],i,s,o&&o[s])}}else a=[];return n&&(n[r]=a),a}function vt(e,t,n={},r,a){if(Ct.isCE||Ct.parent&&Za(Ct.parent)&&Ct.parent.isCE)return $("slot",t==="default"?null:{name:t},r&&r());let o=e[t];o&&o._c&&(o._d=!1),S();const l=o&&ud(o(n)),s=Se(ve,{key:n.key||`_${t}`},l||(r?r():[]),l&&e._===1?64:-2);return!a&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function ud(e){return e.some(t=>to(t)?!(t.type===Ht||t.type===ve&&!ud(t.children)):!0)?e:null}const Pl=e=>e?id(e)?ko(e)||e.proxy:Pl(e.parent):null,no=wt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Pl(e.parent),$root:e=>Pl(e.root),$emit:e=>e.emit,$options:e=>Hc(e),$forceUpdate:e=>()=>Pc(e.update),$nextTick:e=>$a.bind(e.proxy),$watch:e=>bv.bind(e)}),Qv={get({_:e},t){const{ctx:n,setupState:r,data:a,props:o,accessCache:l,type:s,appContext:u}=e;let i;if(t[0]!=="$"){const m=l[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return a[t];case 4:return n[t];case 3:return o[t]}else{if(r!==Ye&&Ne(r,t))return l[t]=1,r[t];if(a!==Ye&&Ne(a,t))return l[t]=2,a[t];if((i=e.propsOptions[0])&&Ne(i,t))return l[t]=3,o[t];if(n!==Ye&&Ne(n,t))return l[t]=4,n[t];kl&&(l[t]=0)}}const d=no[t];let v,f;if(d)return t==="$attrs"&&xt(e,"get",t),d(e);if((v=s.__cssModules)&&(v=v[t]))return v;if(n!==Ye&&Ne(n,t))return l[t]=4,n[t];if(f=u.config.globalProperties,Ne(f,t))return f[t]},set({_:e},t,n){const{data:r,setupState:a,ctx:o}=e;return a!==Ye&&Ne(a,t)?(a[t]=n,!0):r!==Ye&&Ne(r,t)?(r[t]=n,!0):Ne(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:a,propsOptions:o}},l){let s;return!!n[l]||e!==Ye&&Ne(e,l)||t!==Ye&&Ne(t,l)||(s=o[0])&&Ne(s,l)||Ne(r,l)||Ne(no,l)||Ne(a.config.globalProperties,l)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ne(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},eh=td();let th=0;function nh(e,t,n){const r=e.type,a=(t?t.appContext:e.appContext)||eh,o={uid:th++,vnode:e,type:r,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,scope:new Im(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Jc(r,a),emitsOptions:Dc(r,a),emit:null,emitted:null,propsDefaults:Ye,inheritAttrs:r.inheritAttrs,ctx:Ye,data:Ye,props:Ye,attrs:Ye,slots:Ye,refs:Ye,setupState:Ye,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=fv.bind(null,o),e.ce&&e.ce(o),o}let yt=null;const rh=()=>yt||Ct,Lr=e=>{yt=e,e.scope.on()},ur=()=>{yt&&yt.scope.off(),yt=null};function id(e){return e.vnode.shapeFlag&4}let va=!1;function ah(e,t=!1){va=t;const{props:n,children:r}=e.vnode,a=id(e);Nv(e,n,a,t),Vv(e,r);const o=a?oh(e,t):void 0;return va=!1,o}function oh(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=kc(new Proxy(e.ctx,Qv));const{setup:r}=n;if(r){const a=e.setupContext=r.length>1?sh(e):null;Lr(e),zr();const o=Fn(r,e,0,[e.props,a]);if(Yr(),ur(),mc(o)){if(o.then(ur,ur),t)return o.then(l=>{Fu(e,l,t)}).catch(l=>{Co(l,e,0)});e.asyncDep=o}else Fu(e,o,t)}else cd(e,t)}function Fu(e,t,n){Te(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:nt(t)&&(e.setupState=Lc(t)),cd(e,n)}let Vu;function cd(e,t,n){const r=e.type;if(!e.render){if(!t&&Vu&&!r.render){const a=r.template;if(a){const{isCustomElement:o,compilerOptions:l}=e.appContext.config,{delimiters:s,compilerOptions:u}=r,i=wt(wt({isCustomElement:o,delimiters:s},l),u);r.render=Vu(a,i)}}e.render=r.render||Zt}Lr(e),zr(),Ov(e),Yr(),ur()}function lh(e){return new Proxy(e.attrs,{get(t,n){return xt(e,"get","$attrs"),t[n]}})}function sh(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=lh(e))},slots:e.slots,emit:e.emit,expose:t}}function ko(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Lc(kc(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in no)return no[n](e)}}))}function uh(e){return Te(e)&&e.displayName||e.name}function ih(e){return Te(e)&&"__vccOpts"in e}const h=(e,t)=>lv(e,t,va);function Nl(e,t,n){const r=arguments.length;return r===2?nt(t)&&!$e(t)?to(t)?$(e,null,[t]):$(e,t):$(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&to(n)&&(n=[n]),$(e,t,n))}const ch="3.2.33",dh="http://www.w3.org/2000/svg",nr=typeof document!="undefined"?document:null,Du=nr&&nr.createElement("template"),fh={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const a=t?nr.createElementNS(dh,e):nr.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&a.setAttribute("multiple",r.multiple),a},createText:e=>nr.createTextNode(e),createComment:e=>nr.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>nr.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r,a,o){const l=n?n.previousSibling:t.lastChild;if(a&&(a===o||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===o||!(a=a.nextSibling)););else{Du.innerHTML=r?`<svg>${e}</svg>`:e;const s=Du.content;if(r){const u=s.firstChild;for(;u.firstChild;)s.appendChild(u.firstChild);s.removeChild(u)}t.insertBefore(s,n)}return[l?l.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function ph(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function mh(e,t,n){const r=e.style,a=ut(n);if(n&&!a){for(const o in n)jl(r,o,n[o]);if(t&&!ut(t))for(const o in t)n[o]==null&&jl(r,o,"")}else{const o=r.display;a?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=o)}}const xu=/\s*!important$/;function jl(e,t,n){if($e(n))n.forEach(r=>jl(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=vh(e,t);xu.test(n)?e.setProperty(Gr(r),n.replace(xu,""),"important"):e[r]=n}}const Uu=["Webkit","Moz","ms"],nl={};function vh(e,t){const n=nl[t];if(n)return n;let r=dn(t);if(r!=="filter"&&r in e)return nl[t]=r;r=wo(r);for(let a=0;a<Uu.length;a++){const o=Uu[a]+r;if(o in e)return nl[t]=o}return t}const Ku="http://www.w3.org/1999/xlink";function hh(e,t,n,r,a){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(Ku,t.slice(6,t.length)):e.setAttributeNS(Ku,t,n);else{const o=hm(t);n==null||o&&!fc(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}function yh(e,t,n,r,a,o,l){if(t==="innerHTML"||t==="textContent"){r&&l(r,a,o),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const u=n==null?"":n;(e.value!==u||e.tagName==="OPTION")&&(e.value=u),n==null&&e.removeAttribute(t);return}let s=!1;if(n===""||n==null){const u=typeof e[t];u==="boolean"?n=fc(n):n==null&&u==="string"?(n="",s=!0):u==="number"&&(n=0,s=!0)}try{e[t]=n}catch{}s&&e.removeAttribute(t)}const[dd,gh]=(()=>{let e=Date.now,t=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(e=()=>performance.now());const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let Fl=0;const bh=Promise.resolve(),_h=()=>{Fl=0},Sh=()=>Fl||(bh.then(_h),Fl=dd());function Nn(e,t,n,r){e.addEventListener(t,n,r)}function wh(e,t,n,r){e.removeEventListener(t,n,r)}function $h(e,t,n,r,a=null){const o=e._vei||(e._vei={}),l=o[t];if(r&&l)l.value=r;else{const[s,u]=Ch(t);if(r){const i=o[t]=Eh(r,a);Nn(e,s,i,u)}else l&&(wh(e,s,l,u),o[t]=void 0)}}const Gu=/(?:Once|Passive|Capture)$/;function Ch(e){let t;if(Gu.test(e)){t={};let n;for(;n=e.match(Gu);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[Gr(e.slice(2)),t]}function Eh(e,t){const n=r=>{const a=r.timeStamp||dd();(gh||a>=n.attached-1)&&Wt(Mh(r,n.value),t,5,[r])};return n.value=e,n.attached=Sh(),n}function Mh(e,t){if($e(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>a=>!a._stopped&&r&&r(a))}else return t}const zu=/^on[a-z]/,Ah=(e,t,n,r,a=!1,o,l,s,u)=>{t==="class"?ph(e,r,a):t==="style"?mh(e,n,r):bo(t)?us(t)||$h(e,t,n,r,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ih(e,t,r,a))?yh(e,t,r,o,l,s,u):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),hh(e,t,r,a))};function Ih(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&zu.test(t)&&Te(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||zu.test(t)&&ut(n)?!1:t in e}const Tn="transition",ta="animation",As=(e,{slots:t})=>Nl(Uc,Th(e),t);As.displayName="Transition";const fd={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};As.props=wt({},Uc.props,fd);const Qn=(e,t=[])=>{$e(e)?e.forEach(n=>n(...t)):e&&e(...t)},Yu=e=>e?$e(e)?e.some(t=>t.length>1):e.length>1:!1;function Th(e){const t={};for(const V in e)V in fd||(t[V]=e[V]);if(e.css===!1)return t;const{name:n="v",type:r,duration:a,enterFromClass:o=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:u=o,appearActiveClass:i=l,appearToClass:d=s,leaveFromClass:v=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=e,p=kh(a),y=p&&p[0],E=p&&p[1],{onBeforeEnter:b,onEnter:w,onEnterCancelled:T,onLeave:O,onLeaveCancelled:A,onBeforeAppear:B=b,onAppear:M=w,onAppearCancelled:P=T}=t,R=(V,le,be)=>{$r(V,le?d:s),$r(V,le?i:l),be&&be()},x=(V,le)=>{$r(V,m),$r(V,f),le&&le()},N=V=>(le,be)=>{const je=V?M:w,Pe=()=>R(le,V,be);Qn(je,[le,Pe]),Xu(()=>{$r(le,V?u:o),kn(le,V?d:s),Yu(je)||Wu(le,r,y,Pe)})};return wt(t,{onBeforeEnter(V){Qn(b,[V]),kn(V,o),kn(V,l)},onBeforeAppear(V){Qn(B,[V]),kn(V,u),kn(V,i)},onEnter:N(!1),onAppear:N(!0),onLeave(V,le){const be=()=>x(V,le);kn(V,v),Lh(),kn(V,f),Xu(()=>{$r(V,v),kn(V,m),Yu(O)||Wu(V,r,E,be)}),Qn(O,[V,be])},onEnterCancelled(V){R(V,!1),Qn(T,[V])},onAppearCancelled(V){R(V,!0),Qn(P,[V])},onLeaveCancelled(V){x(V),Qn(A,[V])}})}function kh(e){if(e==null)return null;if(nt(e))return[rl(e.enter),rl(e.leave)];{const t=rl(e);return[t,t]}}function rl(e){return da(e)}function kn(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function $r(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Xu(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Oh=0;function Wu(e,t,n,r){const a=e._endId=++Oh,o=()=>{a===e._endId&&r()};if(n)return setTimeout(o,n);const{type:l,timeout:s,propCount:u}=Bh(e,t);if(!l)return r();const i=l+"end";let d=0;const v=()=>{e.removeEventListener(i,f),o()},f=m=>{m.target===e&&++d>=u&&v()};setTimeout(()=>{d<u&&v()},s+1),e.addEventListener(i,f)}function Bh(e,t){const n=window.getComputedStyle(e),r=p=>(n[p]||"").split(", "),a=r(Tn+"Delay"),o=r(Tn+"Duration"),l=Hu(a,o),s=r(ta+"Delay"),u=r(ta+"Duration"),i=Hu(s,u);let d=null,v=0,f=0;t===Tn?l>0&&(d=Tn,v=l,f=o.length):t===ta?i>0&&(d=ta,v=i,f=u.length):(v=Math.max(l,i),d=v>0?l>i?Tn:ta:null,f=d?d===Tn?o.length:u.length:0);const m=d===Tn&&/\b(transform|all)(,|$)/.test(n[Tn+"Property"]);return{type:d,timeout:v,propCount:f,hasTransform:m}}function Hu(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>qu(n)+qu(e[r])))}function qu(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Lh(){return document.body.offsetHeight}const Rr=e=>{const t=e.props["onUpdate:modelValue"];return $e(t)?n=>Ga(t,n):t};function Rh(e){e.target.composing=!0}function Ju(e){const t=e.target;t.composing&&(t.composing=!1,Ph(t,"input"))}function Ph(e,t){const n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}const Oo={created(e,{modifiers:{lazy:t,trim:n,number:r}},a){e._assign=Rr(a);const o=r||a.props&&a.props.type==="number";Nn(e,t?"change":"input",l=>{if(l.target.composing)return;let s=e.value;n?s=s.trim():o&&(s=da(s)),e._assign(s)}),n&&Nn(e,"change",()=>{e.value=e.value.trim()}),t||(Nn(e,"compositionstart",Rh),Nn(e,"compositionend",Ju),Nn(e,"change",Ju))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:a}},o){if(e._assign=Rr(o),e.composing||document.activeElement===e&&(n||r&&e.value.trim()===t||(a||e.type==="number")&&da(e.value)===t))return;const l=t==null?"":t;e.value!==l&&(e.value=l)}},Nh={deep:!0,created(e,t,n){e._assign=Rr(n),Nn(e,"change",()=>{const r=e._modelValue,a=ha(e),o=e.checked,l=e._assign;if($e(r)){const s=ss(r,a),u=s!==-1;if(o&&!u)l(r.concat(a));else if(!o&&u){const i=[...r];i.splice(s,1),l(i)}}else if(Kr(r)){const s=new Set(r);o?s.add(a):s.delete(a),l(s)}else l(pd(e,o))})},mounted:Zu,beforeUpdate(e,t,n){e._assign=Rr(n),Zu(e,t,n)}};function Zu(e,{value:t,oldValue:n},r){e._modelValue=t,$e(t)?e.checked=ss(t,r.props.value)>-1:Kr(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=wa(t,pd(e,!0)))}const jh={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const a=Kr(t);Nn(e,"change",()=>{const o=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>n?da(ha(l)):ha(l));e._assign(e.multiple?a?new Set(o):o:o[0])}),e._assign=Rr(r)},mounted(e,{value:t}){Qu(e,t)},beforeUpdate(e,t,n){e._assign=Rr(n)},updated(e,{value:t}){Qu(e,t)}};function Qu(e,t){const n=e.multiple;if(!(n&&!$e(t)&&!Kr(t))){for(let r=0,a=e.options.length;r<a;r++){const o=e.options[r],l=ha(o);if(n)$e(t)?o.selected=ss(t,l)>-1:o.selected=t.has(l);else if(wa(ha(o),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ha(e){return"_value"in e?e._value:e.value}function pd(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Fh=["ctrl","shift","alt","meta"],Vh={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Fh.some(n=>e[`${n}Key`]&&!t.includes(n))},Me=(e,t)=>(n,...r)=>{for(let a=0;a<t.length;a++){const o=Vh[t[a]];if(o&&o(n,t))return}return e(n,...r)},Dh={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):na(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),na(e,!0),r.enter(e)):r.leave(e,()=>{na(e,!1)}):na(e,t))},beforeUnmount(e,{value:t}){na(e,t)}};function na(e,t){e.style.display=t?e._vod:"none"}const xh=wt({patchProp:Ah},fh);let ei;function Uh(){return ei||(ei=Kv(xh))}const Kh=(...e)=>{const t=Uh().createApp(...e),{mount:n}=t;return t.mount=r=>{const a=Gh(r);if(!a)return;const o=t._component;!Te(o)&&!o.render&&!o.template&&(o.template=a.innerHTML),a.innerHTML="";const l=n(a,!1,a instanceof SVGElement);return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),l},t};function Gh(e){return ut(e)?document.querySelector(e):e}/*!
 * okageo v3.0.0
 * (c) miyanokomiya
 * Released under the MIT License.
 */function ro(e,t){return zh(e)||function(n,r){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(n)))){var a=[],o=!0,l=!1,s=void 0;try{for(var u,i=n[Symbol.iterator]();!(o=(u=i.next()).done)&&(a.push(u.value),!r||a.length!==r);o=!0);}catch(d){l=!0,s=d}finally{try{o||i.return==null||i.return()}finally{if(l)throw s}}return a}}(e,t)||md(e,t)||Xh()}function ot(e){return function(t){if(Array.isArray(t))return Vl(t)}(e)||Yh(e)||md(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zh(e){if(Array.isArray(e))return e}function Yh(e){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(e))return Array.from(e)}function md(e,t){if(e){if(typeof e=="string")return Vl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vl(e,t):void 0}}function Vl(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var He=[1,0,0,1,0,0];function ce(e,t){return{x:e.x+t.x,y:e.y+t.y}}function ge(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Oe(e,t){return{x:e.x*t,y:e.y*t}}function Br(e,t){var n=ge(e,t);return Math.abs(n.x)<1e-6&&Math.abs(n.y)<1e-6}function Un(e,t){return pr(ge(e,t))}function pr(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function Pr(e){return pr(e)<1e-6}function Wh(e,t){return e.x*t.y-e.y*t.x}function ao(e,t){return e.x*t.x+e.y*t.y}function Is(e,t){return Oe(ce(e,t),.5)}function vd(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function hd(e){return e.length===0?{x:0,y:0}:Oe(e.reduce(function(t,n){return ce(t,n)},{x:0,y:0}),1/e.length)}function Tt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0},n=ge(e,t);return Math.atan2(n.y,n.x)}function Ua(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{x:0,y:0};return ce(Oe(ge(t,e),2),e)}function tt(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{x:0,y:0},r=ge(e,n);return ce({x:Math.cos(t)*r.x-Math.sin(t)*r.y,y:Math.sin(t)*r.x+Math.cos(t)*r.y},n)}function Hh(e,t,n){if(or(e))return or(t)?[]:[-n/t];var r=t*t-4*e*n;if(r<0)return[];var a=.5/e;if(or(r))return[-t*a];var o=Math.sqrt(r);return[(-t+o)*a,(-t-o)*a]}function Bo(e,t){if(t.length!==2)throw new Error("line must be length = 2");var n=t[0],r=ge(t[1],n);return ce(n,Oe(r,ao(r,ge(e,n))/ao(r,r)))}function qh(e,t){var n=Jh(e,t),r=n.ta,a=n.tb;return n.tc*n.td<=0&&r*a<=0}function Jh(e,t){var n=e[0].x,r=e[0].y,a=e[1].x,o=e[1].y,l=t[0].x,s=t[0].y,u=t[1].x,i=t[1].y;return{ta:(l-u)*(r-s)+(s-i)*(l-n),tb:(l-u)*(o-s)+(s-i)*(l-a),tc:(n-a)*(s-r)+(r-o)*(n-l),td:(n-a)*(i-r)+(r-o)*(n-u)}}function Zh(e,t){var n=Wh(e,t);return Math.abs(n)<1e-6}function ti(e,t){return Pr(ge(e,Bo(e,t)))}function Qh(e,t){if(!Pr(ge(e,Bo(e,t))))return!1;var n=ge(t[1],t[0]),r=ge(e,t[0]);return!(ao(n,r)<0)&&!(pr(n)<pr(r))}function ni(e,t){if(t.find(function(o){return e.x===o.x&&e.y===o.y}))return!0;for(var n=t.map(function(o,l){return[o,l<t.length-1?t[l+1]:t[0]]}).filter(function(o){return!Br(o[0],o[1])}),r=0;r<n.length;r++){var a=n[r];if(Qh(e,a))return!0}return n.filter(function(o){return function(l,s){if(Math.abs(s[0].y-s[1].y)<1e-6)return!1;var u,i;if(s[0].y<s[1].y){var d=ro(s,2);i=d[0],u=d[1]}else{var v=ro(s,2);u=v[0],i=v[1]}if(l.y<i.y||u.y<=l.y)return!1;var f=ey(s,[l,{x:l.x+1,y:l.y}]);return!(!f||f.x<=l.x)}(e,o)}).length%2==1}function ey(e,t){if(Zh(ge(e[0],e[1]),ge(t[0],t[1])))return null;if(ti(e[0],t))return Object.assign({},e[0]);if(ti(e[1],t))return Object.assign({},e[1]);var n=((t[1].x-t[0].x)*(e[0].y-t[0].y)-(t[1].y-t[0].y)*(e[0].x-t[0].x))/2,r=n/(n+((t[1].x-t[0].x)*(t[0].y-e[1].y)-(t[1].y-t[0].y)*(t[0].x-e[1].x))/2);return 0<r&&r<1?{x:e[0].x+(e[1].x-e[0].x)*r,y:e[0].y+(e[1].y-e[0].y)*r}:null}function ri(e){var t=ty(e,!0);return t>0?1:t<0?-1:0}function ty(e){var t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(e.length<3)return 0;for(var n=0,r=e.length,a=0;a<r-1;a++)n+=(e[a].x-e[a+1].x)*(e[a].y+e[a+1].y);return n+=(e[r-1].x-e[0].x)*(e[r-1].y+e[0].y),n/=2,t||(n=Math.abs(n)),n}function On(e,t){var n=[],r=1/t;if(e.length===3)for(var a=0;a<=t;a++)n.push(ny(e,r*a));else{if(e.length!==4)throw new Error("connot approximate");for(var o=0;o<=t;o++)n.push(ry(e,r*o))}return n}function ny(e,t){var n=t,r=Oe(e[0],(1-n)*(1-n)),a=Oe(e[1],2*n*(1-n)),o=Oe(e[2],n*n);return{x:r.x+a.x+o.x,y:r.y+a.y+o.y}}function ry(e,t){var n=t,r=Oe(e[0],(1-n)*(1-n)*(1-n)),a=Oe(e[1],3*n*(1-n)*(1-n)),o=Oe(e[2],3*n*n*(1-n)),l=Oe(e[3],n*n*n);return{x:r.x+a.x+o.x+l.x,y:r.y+a.y+o.y+l.y}}function ay(e,t){var n=ro(e,4),r=n[0],a=n[1],o=n[2],l=n[3],s=function(f,m,p,y){var E=iy(f,m,p,y);if(E.length===0)return 0;var b=(w=E,T=0,O=1,w.find(function(A){return T<=A&&A<=O||!(!li(A,T)&&!li(A,O))})),w,T,O;if(b===void 0)throw new Error("Error: Cannot resolve uniquely in 0 <= t <= 1.");return Math.max(Math.min(b,1),0)}(-r.x+3*a.x-3*o.x+l.x,3*r.x-6*a.x+3*o.x,-3*r.x+3*a.x,r.x-t),u=s*s,i=u*s,d=1-s,v=d*d;return v*d*r.y+3*s*v*a.y+3*u*d*o.y+i*l.y}function oy(e,t,n,r,a,o,l){for(var s=[],u=(r-n)/l,i=0;i<=l;i++){var d=u*i+n-o;s.push(ce(tt({x:e*Math.cos(d),y:t*Math.sin(d)},o),a))}return s}function ai(e,t,n,r,a,o,l,s){if(e*t==0)return[n,r];var u=ly(n,r,e=Math.abs(e),t=Math.abs(t),l),i=u.centers;e*=u.radiusRate,t*=u.radiusRate;var d=null,v=0,f=0,m=oi(n,e,d=a&&o||!a&&!o?ri([n,r,i[0]])<0?i[0]:i[1]:ri([n,r,i[0]])>0?i[0]:i[1],l),p=oi(r,e,d,l);return o?m>p?(v=m-2*Math.PI,f=p):(v=m,f=p):m>p?(v=m,f=p):(v=m,f=p-2*Math.PI),oy(e,t,v,f,d,l,s)}function oi(e,t,n,r){e=tt(e,-r,n);var a=Math.acos((e.x-n.x)/t);return e.y-n.y<0&&(a=-a+2*Math.PI),a+=r,a%=2*Math.PI}function ly(e,t,n,r,a){e=tt(e,-a),t=tt(t,-a);var o=sy({x:e.x/n,y:e.y/r},{x:t.x/n,y:t.y/r},1),l=o.centers,s={x:l[0].x*n,y:l[0].y*r},u={x:l[1].x*n,y:l[1].y*r};return{centers:[s=tt(s,a),u=tt(u,a)],radiusRate:o.radiusRate}}function sy(e,t,n){var r=(e.x+t.x)/2,a=(e.x-t.x)/2,o=(e.y+t.y)/2,l=(e.y-t.y)/2,s=Math.sqrt(a*a+l*l),u=Math.pow(n/s,2)-1;if(u<0){var i=Is(e,t);return{centers:[i,i],radiusRate:s/n}}var d=Math.sqrt(u);return{centers:[{x:r+l*d,y:o-a*d},{x:r-l*d,y:o+a*d}],radiusRate:1}}function uy(e){var t=ro(e,6),n=t[0],r=t[1],a=t[2],o=t[3],l=t[4],s=t[5],u=n*o-r*a;return[o/u,-r/u,-a/u,n/u,(a*s-o*l)/u,-(n*s-r*l)/u]}function Dl(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}function Xr(e){return e.reduce(function(t,n){return Dl(t,n)},He)}function oo(e,t,n){return e*(1-n)+t*n}function Ya(e,t,n){return{x:oo(e.x,t.x,n),y:oo(e.y,t.y,n)}}function iy(e,t,n,r){if(or(e))return Hh(t,n,r);var a=(3*e*n-t*t)/(3*e*e),o=(2*t*t*t-9*e*t*n+27*e*e*r)/(27*e*e*e),l=-t/(3*e);if(or(a)&&or(o))return[l];var s=(27*o*o+4*a*a*a)/108;if(or(s)){var u=Math.sign(o)*Math.pow(Math.abs(o)/2,.3333333333333333);return[-2*u+l,u+l]}if(s>0){var i=Math.sqrt(s),d=-o/2+i,v=-o/2-i;return[Math.sign(d)*Math.pow(Math.abs(d),1/3)+Math.sign(v)*Math.pow(Math.abs(v),1/3)+l]}var f=-o/2,m=Math.sqrt(-s),p=Math.atan2(m,f),y=2*Math.pow(f*f+m*m,1/6);return[y*Math.cos(p/3)+l,y*Math.cos((p+2*Math.PI)/3)+l,y*Math.cos((p+4*Math.PI)/3)+l]}function li(e,t){return Math.abs(e-t)<1e-6}function or(e){return Math.abs(e)<1e-6}function Ge(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:-1/0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,n=arguments.length>2?arguments[2]:void 0;return Math.max(Math.min(n,t),e)}function mr(e,t,n){return e===t?e:t<n?(n-t)%(t-e)+e:n<e?t-(e-n)%(t-e):n}function cy(e,t,n){var r=t-e,a=2*r;if(a===0)return e;var o=Math.abs(n-e)%a;return o<r?o+e:a-o+e}var on={bezierSplitSize:10,ellipseSplitSize:20};function dy(e){var t=[],n=fy(e),r={x:0,y:0},a={x:0,y:0};return n.forEach(function(o){var l=[],s=null,u=null;switch(o[0]){case"M":case"L":l.push({x:parseFloat(o[1]),y:parseFloat(o[2])});break;case"m":case"l":l.push({x:r.x+parseFloat(o[1]),y:r.y+parseFloat(o[2])});break;case"H":l.push({x:parseFloat(o[1]),y:r.y});break;case"V":l.push({x:r.x,y:parseFloat(o[1])});break;case"h":l.push({x:r.x+parseFloat(o[1]),y:r.y});break;case"v":l.push({x:r.x,y:r.y+parseFloat(o[1])});break;case"Q":(l=On([s=r,u={x:parseFloat(o[1]),y:parseFloat(o[2])},{x:parseFloat(o[3]),y:parseFloat(o[4])}],on.bezierSplitSize)).shift();break;case"q":(l=On([s=r,u={x:s.x+parseFloat(o[1]),y:s.y+parseFloat(o[2])},{x:s.x+parseFloat(o[3]),y:s.y+parseFloat(o[4])}],on.bezierSplitSize)).shift();break;case"T":(l=On([s=r,u=Ua(s,a),{x:parseFloat(o[1]),y:parseFloat(o[2])}],on.bezierSplitSize)).shift();break;case"t":(l=On([s=r,u=Ua(s,a),{x:s.x+parseFloat(o[1]),y:s.y+parseFloat(o[2])}],on.bezierSplitSize)).shift();break;case"C":(l=On([s=r,u={x:parseFloat(o[1]),y:parseFloat(o[2])},{x:parseFloat(o[3]),y:parseFloat(o[4])},{x:parseFloat(o[5]),y:parseFloat(o[6])}],on.bezierSplitSize)).shift();break;case"c":(l=On([s=r,u={x:s.x+parseFloat(o[1]),y:s.y+parseFloat(o[2])},{x:s.x+parseFloat(o[3]),y:s.y+parseFloat(o[4])},{x:s.x+parseFloat(o[5]),y:s.y+parseFloat(o[6])}],on.bezierSplitSize)).shift();break;case"S":(l=On([s=r,u=Ua(s,a),{x:parseFloat(o[1]),y:parseFloat(o[2])},{x:parseFloat(o[3]),y:parseFloat(o[4])}],on.bezierSplitSize)).shift();break;case"s":(l=On([s=r,u=Ua(s,a),{x:s.x+parseFloat(o[1]),y:s.y+parseFloat(o[2])},{x:s.x+parseFloat(o[3]),y:s.y+parseFloat(o[4])}],on.bezierSplitSize)).shift();break;case"A":s=r,u={x:parseFloat(o[6]),y:parseFloat(o[7])},(l=ai(parseFloat(o[1]),parseFloat(o[2]),s,u,!!parseInt(o[4],10),!!parseInt(o[5],10),parseFloat(o[3])/180*Math.PI,on.bezierSplitSize)).shift();break;case"a":u={x:(s=r).x+parseFloat(o[6]),y:s.y+parseFloat(o[7])},(l=ai(parseFloat(o[1]),parseFloat(o[2]),s,u,!!parseInt(o[4],10),!!parseInt(o[5],10),parseFloat(o[3])/180*Math.PI,on.bezierSplitSize)).shift()}l.length>0&&(r=l[l.length-1],t=t.concat(l),l.length>1&&(a=l[l.length-2]))}),t}function fy(e){for(var t=/M|m|L|l|H|h|V|v|C|c|S|s|Q|q|T|t|A|a|Z|z/g,n=e.replace(t," $& ").replace(/([^e])(-\d(\d*\.?)\d*)/g,"$1 $2 ").split(/,| /).filter(function(s){return s}),r="M",a=[],o=0;o<n.length;){var l=[];if(n[o].match(t)?(l[0]=n[o].trim(),r=l[0],o++):l[0]=r,!l[0].match(/Z|z/))if(l[0].match(/V|v|H|h/))l=l.concat(n.slice(o,o+1)),o+=1;else if(l[0].match(/M|m|L|l|T|t/))l=l.concat(n.slice(o,o+2)),o+=2;else if(l[0].match(/Q|q|S|s/))l=l.concat(n.slice(o,o+4)),o+=4;else if(l[0].match(/C|c/))l=l.concat(n.slice(o,o+6)),o+=6;else{if(!l[0].match(/A|a/))break;l=l.concat(n.slice(o,o+7)),o+=7}a.push(l)}return a}function yd(e){return"matrix(".concat(e.join(","),")")}function py(e){return Xr(e.split(")").map(function(t){return"".concat(t,")")}).map(function(t){return function(n){return/translateX/.test(n)?vy(n):/translateY/.test(n)?hy(n):/translate/.test(n)?my(n):/skewX/.test(n)?yy(n):/skewY/.test(n)?gy(n):/scaleX/.test(n)?_y(n):/scaleY/.test(n)?Sy(n):/scale/.test(n)?by(n):/rotate/.test(n)?wy(n):/matrix/.test(n)?$y(n):ot(He)}(t)}))}function en(e){return e.trim().replace(/,/g," ").split(/ +/).map(function(t){return parseFloat(t)})}function my(e){var t=e.match(/translate\((.+)\)/);if(!t||t.length<1)return ot(He);var n=en(t[1]);return n.length<1?ot(He):n.length===1?[1,0,0,1,n[0],0]:[1,0,0,1,n[0],n[1]]}function vy(e){var t=e.match(/translateX\((.+)\)/);if(!t||t.length<1)return ot(He);var n=en(t[1]);return n.length<1?ot(He):[1,0,0,1,n[0],0]}function hy(e){var t=e.match(/translateY\((.+)\)/);if(!t||t.length<1)return ot(He);var n=en(t[1]);return n.length<1?ot(He):[1,0,0,1,0,n[0]]}function yy(e){var t=e.match(/skewX\((.+)\)/);if(!t||t.length<1)return ot(He);var n=en(t[1]);return n.length<1?ot(He):[1,0,Math.tan(n[0]*Math.PI/180),1,0,0]}function gy(e){var t=e.match(/skewY\((.+)\)/);if(!t||t.length<1)return ot(He);var n=en(t[1]);return n.length<1?ot(He):[1,Math.tan(n[0]*Math.PI/180),0,1,0,0]}function by(e){var t=e.match(/scale\((.+)\)/);if(!t||t.length<2)return ot(He);var n=en(t[1]);return n.length<1?ot(He):n.length===1?[n[0],0,0,n[0],0,0]:[n[0],0,0,n[1],0,0]}function _y(e){var t=e.match(/scaleX\((.+)\)/);if(!t||t.length<1)return ot(He);var n=en(t[1]);return n.length<1?ot(He):[n[0],0,0,1,0,0]}function Sy(e){var t=e.match(/scaleY\((.+)\)/);if(!t||t.length<1)return ot(He);var n=en(t[1]);return n.length<1?ot(He):[1,0,0,n[0],0,0]}function wy(e){var t=e.match(/rotate\((.+)\)/);if(!t||t.length<2)return ot(He);var n=en(t[1]);if(en.length<1)return ot(He);var r=n[0]/180*Math.PI,a=Math.cos(r),o=Math.sin(r),l=[a,o,-o,a,0,0];return n.length>2?Dl(Dl([1,0,0,1,n[1],n[2]],l),[1,0,0,1,-n[1],-n[2]]):l}function $y(e){var t=e.match(/matrix\((.+)\)/);if(!t||t.length<2)return ot(He);var n=en(t[1]);return n.length<5?ot(He):n.slice(0,6)}const J={BOOLEAN:"BOOLEAN",SCALER:"SCALER",VECTOR2:"VECTOR2",TRANSFORM:"TRANSFORM",COLOR:"COLOR",TEXT:"TEXT",BONE:"BONE",OBJECT:"OBJECT",D:"D",STOP:"STOP",GENERICS:"GENERICS",INPUT:"INPUT",OUTPUT:"OUTPUT",UNKNOWN:"UNKNOWN"},We={UNIT:"UNIT",ARRAY:"ARRAY",UNIT_OR_ARRAY:"UNIT_OR_ARRAY"},Cy=[{key:"pad",value:0},{key:"reflect",value:1},{key:"repeat",value:2}],Ey=[{key:"userSpaceOnUse",value:0},{key:"objectBoundingBox",value:1}],gd={SPREAD_METHOD:Cy,SPACE_UNITS:Ey};function ya(e,t){var a,o,l;const n=(a=gd[e])!=null?a:[],r=Ge(0,n.length-1,Math.floor(t));return(l=(o=n.find(s=>s.value===r))==null?void 0:o.key)!=null?l:""}function My(e,t){const n=H(),r=h(e);function a(){return Object.keys(r.value).sort().join(",")}function o(){n.value=Fe(t.value)}let l=a();return o(),Yc(()=>{const s=a();l!==s&&(o(),l=s)}),{cache:n,updateCache:o}}function Ay(e){let t,n=!0;function r(){return n&&(t=e(),n=!1),t}function a(){n=!0}return{update:a,getValue:r}}function Iy(e,t,n=100){const r=new Map;function a(l){var i;const s=e(l),u=(i=r.get(s))!=null?i:t(l);return r.delete(s),r.set(s,u),r.size>n&&r.delete(r.keys().next().value),u}function o(){r.clear()}return{getValue:a,clear:o}}function Ty(e,t){let n={};function r(o){return o in n||(n[o]=t(e[o])),n[o]}function a(){n={}}return{getValue:r,clear:a}}let ky=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const qe=()=>`b${ky(12)}`,si=/\.[0-9]{3,}$/;function ui(e){return si.test(e)?e.replace(si,t=>"."+`${parseInt(t.slice(1),10)+1}`.padStart(3,"0")):`${e}.001`}function Xt(e,t){const n=new Map(t.map(a=>[a,!0]));if(!n.has(e))return e;let r=ui(e);for(;n.has(r);)r=ui(r);return r}function Oy(e,t,n){const r=e.concat(),a=r[t];return!a||a.name===n?e:(r[t]=g(c({},a),{name:Xt(n,r.map(o=>o.name))}),r)}function By(e,t){if(t<=0||e.length-1<t)return e;const n=e.concat(),r=n[t-1];return n[t-1]=n[t],n[t]=r,n}function Ly(e,t){if(t<0||e.length-1<=t)return e;const n=e.concat(),r=n[t+1];return n[t+1]=n[t],n[t]=r,n}function Ry(e,t){return e.reduce((n,r)=>(n[r]=t,n),{})}function fn(e,t){return e.reduce((n,r)=>{const a=r[t];return n[a]=r,n},{})}function br(e,t){const n={};return e.forEach(r=>{n[r[t]]?n[r[t]].push(r):n[r[t]]=[r]}),n}function bd(e){return Object.keys(e).flatMap(t=>e[t])}function ye(e){return Object.keys(e).map(t=>e[t])}function te(e,t){return Object.keys(e).reduce((n,r)=>(n[r]=t(e[r],r),n),{})}function Ze(e,t){return Object.keys(t).reduce((n,r)=>(e[r]!==void 0&&(n[r]=e[r]),n),{})}function lt(e,t){return $t(e,(n,r)=>t[r]===void 0)}function $t(e,t){return Object.keys(e).reduce((n,r)=>(t(e[r],r)&&(n[r]=e[r]),n),{})}function Py(e,t,n){return ye(c(c({},fn(e,n)),fn(t,n)))}function Ny(e,t,n,r=!1){const a=fn(e,n),o=fn(t,n);return ye($t(a,(l,s)=>{var u;return l[n]===((u=o[s])==null?void 0:u[n])===r}))}function Nr(e,t,n=""){const r=e[t];return!r||!e[r.parentId]||n===r.parentId?[]:[...Nr(e,r.parentId,n),r.parentId]}function jy(e,t,n){const r=Nr(e,t),a=r.findIndex(s=>s===n);if(a!==-1)return[...r.slice(a),t];const o=Nr(e,n),l=o.findIndex(s=>s===t);return l!==-1?[...o.slice(l),n]:[t,n]}function _d(e){return/\.r\.?/.test(e)?"r":/\.R\.?/.test(e)?"R":/\.l\.?/.test(e)?"l":/\.L\.?/.test(e)?"L":""}const ii={"":"",r:"l",R:"L",l:"r",L:"R"};function xl(e){const t=_d(e);return ii[t]?e.replace(`.${t}`,`.${ii[t]}`):e}function Ul(e,t){const n=e.map(r=>r[t]).sort().reduce((r,a,o)=>(r[a]=o,r),{});return e.concat().sort((r,a)=>n[r[t]]-n[a[t]])}function Sd(e){return e.reduce((t,n)=>Fy(t,n),{})}function Fy(e,t){return Object.keys(t).reduce((n,r)=>(n[r]?n[r]+=t[r]:n[r]=t[r],n),c({},e))}function Vy(e){return oe(ye(e).map(t=>g(c({},t),{id:qe()})))}function ci(e){const t=Object.keys(e);return t.length>0?e[t[0]]:void 0}function lo(e,t,n){return c(c({},lt(e,t)),n(Ze(e,t)))}function Dy(e,t){const n=Object.keys(e),r=Object.keys(t);return n.length!==r.length?!1:n.every(a=>e[a]===t[a])}function wd(e,t,n=(r,a)=>r===a){if(!e)return t;if(!t)return e;const r=Object.keys(t).length>1;let a=!0;const o=Object.keys(c(c({},e),t)).reduce((l,s)=>{var u;return n(e[s],t[s])&&!r||(a=a&&!!e[s]&&!!t[s]&&n(e[s],t[s]),l[s]=(u=t[s])!=null?u:e[s]),l},{});if(!a)return o}function $d(e,t,n){return n?g(c({},e),{[t]:n}):lt(e,{[t]:!0})}function xy(e){return Array.from(new Set(e))}function Uy(e){return g(c({},e),{id:qe()})}function Ky(e,t,n){const r=e[0];return r?r[t]:n}function Gy(e,t=n=>!!n){const n=[],r=[];return e.forEach(a=>{t(a)?n.push(a):r.push(a)}),[n,r]}function Cn(e,t){return e.reduce((n,r)=>(n[r]=t(r),n),{})}function Cd(e,t){const n=Object.entries(e),r=Object.entries(t);return n.length===r.length&&n.every(([a,o])=>o===t[a])}function di(e,t){return(e||t)&&!(e&&t)}function zy(e,t){if(t){const n=c({},e),r=e[t];if(r)return delete n[t],Object.entries(n).concat([[t,r]])}return Object.entries(e)}function Yy(e,t=(n,r)=>n===r){const n=new Set;let r;return e.forEach((a,o)=>{!r||!t(r.item,a)?r={item:a,from:o}:r.from+1<o&&n.add(o-1)}),e.map((a,o)=>n.has(o)?void 0:a)}function Ed(e){return Array.from(new Set(e.flatMap(n=>n?Object.keys(n):[]))).reduce((n,r)=>(Yy(e.map(a=>a==null?void 0:a[r])).forEach((a,o)=>{a&&(n[o][r]=a)}),n),e.map(()=>({}))).map(n=>Object.keys(n).length===0?void 0:n)}function Xy(e,t,n=!1){const r=Math.floor(1/t),a=e.filter((o,l)=>l%r===0);return n&&Number.isInteger(e.length*t)&&a.push(e[e.length-1]),a}function Kl(e){return e!=null}function Md(e){return $t(e,Kl)}function Ad(e={},t=!1){var r;const n=t?qe():(r=e.id)!=null?r:"";return g(c({name:"",armatureId:"",nodes:[]},e),{id:n})}function Id(e={},t=!1){var r;const n=t?qe():(r=e.id)!=null?r:"";return g(c({name:"",nodes:[]},e),{id:n})}function Xa(e={},t=!1){var r;const n=t?qe():(r=e.id)!=null?r:"";return g(c({index:0},e),{id:n})}function Lo(e={},t=!1){var r;const n=t?qe():(r=e.id)!=null?r:"";return g(c({tag:"",attributes:{},children:[]},e),{id:n})}function Wy(e={},t=!1){var r;const n=t?qe():(r=e.id)!=null?r:"";return g(c({index:0,tag:""},e),{id:n})}function Ts(e={},t=!1){var r;const n=t?qe():(r=e.id)!=null?r:"";return g(c({armatureId:"",svgTree:Lo(),elements:[],viewBox:{x:0,y:0,width:400,height:400}},e),{id:n})}function de(e={}){return c({translate:{x:0,y:0},origin:{x:0,y:0},rotate:0,scale:{x:1,y:1}},e)}function Td(e={},t=!1){var r;const n=t?qe():(r=e.id)!=null?r:"";return g(c({name:"",armatureId:"",keyframes:[]},e),{id:n})}function Vn(e={},t=!1){var r;const n=t?qe():(r=e.id)!=null?r:"";return g(c({name:"",transform:de(),parentId:"",connected:!1,head:{x:0,y:0},tail:{x:0,y:0},inheritRotation:!0,inheritScale:!0,constraints:[]},e),{id:n})}function Gl(e={},t=!1){var r;const n=t?qe():(r=e.id)!=null?r:"";return g(c({name:"",transform:de(),bones:[]},e),{id:n})}function oe(e){return fn(e,"id")}function al(e){return fn(e,"targetId")}function so(e,t){return Object.keys(c(c({},e),t)).reduce((n,r)=>{var a,o;return n[r]=c(c({},(a=e[r])!=null?a:{}),(o=t[r])!=null?o:{}),n},{})}function kd(e,t=!1){return e?t?!!e.head&&!!e.tail:!!e.head||!!e.tail:!1}const Ro=1.1,bn=10;function ft(e,t){const n=Math.pow(10,-e);return Math.round(t*n)/n}function fi(e,t){return Math.round(t/e)*e}function pi(e){return mr(-Math.PI,Math.PI,e)}function Hy(e,t){return e>0&&t<e-Math.PI?t+Math.PI*2:e<0&&t>e+Math.PI?t-Math.PI*2:t}function Od(e,t){const n=pi(e),r=pi(t);return Hy(n,r)-n}function qy(e,t,n){return{x:t(e.x),y:(n!=null?n:t)(e.y)}}const Jy=de();function Zy(e){return Qy(e,Jy)}function Qy(e,t){return!(!Br(e.translate,t.translate)||!Br(e.scale,t.scale)||!Br(e.origin,t.origin)||e.rotate!==t.rotate)}function Bd(e){const t=Math.round(Math.log(e)/Math.log(Ro));return t<5?10:t<8?20:t<11?50:100}function Ld(e,t=15){return zl(e,t)}function Rd(e,t=.1){return{x:zl(e.x,t),y:zl(e.y,t)}}function zl(e,t=1){return Math.round(e/t)*t}function Pd(e){const t=e.width>0?e.x:e.x+e.width,n=e.height>0?e.y:e.y+e.height;return{x:t,y:n,width:Math.abs(e.width),height:Math.abs(e.height)}}function ks(e){return Tt(e.tail,e.head)/Math.PI*180}function mi(e){return e.transform.rotate+ks(e)}function ga(e){return ce(e.head,ba(e))}function Wr(e){return Tt(e.tail,e.head)-Math.PI/2}function ba(e){const t=Wr(e);return tt(e.transform.translate,t)}function _r(e){const t=Wr(e);return{toLocal:n=>tt(n,-t),toWorld:n=>tt(n,t)}}function vi(e){const t=e.head.x-e.tail.x,n=e.head.y-e.tail.y;return t*t+n*n}function jr(e,t,n={x:0,y:0}){return{x:n.x+(e.x-n.x)*t.x,y:n.y+(e.y-n.y)*t.y}}function eg(e){return{x:e.x===0?0:1/e.x,y:e.y===0?0:1/e.y}}function Sn(e,t){return ce(tt(jr(e,t.scale,t.origin),t.rotate/180*Math.PI,t.origin),t.translate)}function Nd(e,t){const n=Tt(e.tail,e.head),r=tt(e.transform.translate,n-Math.PI/2),a=Sn(e.head,de({translate:r})),o=Sn(e.tail,de(g(c({},e.transform),{translate:r,origin:e.head,scale:{x:1,y:1}}))),l=Sn(t,de(g(c({},e.transform),{translate:r,origin:e.head,scale:{x:1,y:1}})));if(Br(a,o))return l;const s=Bo(l,[a,o]),u=ge(s,a),i=ge(l,s);return ce(ce(Oe(u,e.transform.scale.y),Oe(i,e.transform.scale.x)),a)}function tg(e,t){return Sn(e,g(c({},t),{translate:{x:0,y:0}}))}function ng(e,t){const n=Sn(e,g(c({},t),{rotate:0}));return g(c({},n),{width:e.width*t.scale.x,height:e.height*t.scale.y})}function rg(e){return e.every((t,n)=>t===He[n])}function ag(e){const t=e.rotate/180*Math.PI,n=Math.cos(t),r=Math.sin(t);return Xr([[1,0,0,1,e.translate.x,e.translate.y],[1,0,0,1,e.origin.x,e.origin.y],[n,r,-r,n,0,0],[e.scale.x,0,0,e.scale.y,0,0],[1,0,0,1,-e.origin.x,-e.origin.y]])}function og(e){const t=e.x+e.width,n=e.y+e.height;return r=>!(t<r.x||n<r.y||r.x+r.width<e.x||r.y+r.height<e.y)}const lg={x:1,y:0},sg={x:1,y:1};function ug(e,t=0,n=1,r=1){return a=>{const o=a/360-1,l=a+t;return de({rotate:l,translate:Oe(tt(lg,l*Math.PI/180),e*a/360*Math.pow(n,o)),scale:Oe(sg,Math.pow(r,o))})}}function ig(e,t,n=0){const r=360/e,a={x:t,y:0};return o=>{const l=o*r;return de({translate:tt(a,(l+n)*Math.PI/180),rotate:l})}}function cg(e,t,n,r,a,o){const l=o?{x:(n-1)*e/2,y:(r-1)*t/2}:void 0,s=[...Array(r)].map((v,f)=>f*t),u=[...Array(n)].map((v,f)=>f*e),i=a*Math.PI/180,d=s.flatMap(v=>u.map(f=>de({translate:tt(l?ge({x:f,y:v},l):{x:f,y:v},i)})));return v=>d[v]}function jd(e,t,n){const r=Bo(n,[{x:0,y:0},t]);if(e<=0||Pr(r))return r;const a=pr(r),o={x:r.x/a,y:r.y/a},l=Math.round(a/e)*e;return Oe(o,l)}function Fd(e,t,n){if(e<=0)return n;const r=tt(n,-t),a={x:Math.round(r.x/e)*e,y:Math.round(r.y/e)*e};return tt(a,t)}function dg(e,t,n){return ao(ge(t,e),ge(n,e))<0}function fg(e){const t=e.replace(/ /g,"").match(/rgba\((.+),(.+),(.+),(.+)\)/);if(!(!t||t.length<5))return{r:Ge(0,255,parseFloat(t[1])),g:Ge(0,255,parseFloat(t[2])),b:Ge(0,255,parseFloat(t[3])),a:Ge(0,1,parseFloat(t[4]))}}function Fr(e){return`rgba(${e.r},${e.g},${e.b},${e.a})`}const pg=Iy(e=>`${e.h},${e.s}${e.v}`,e=>{const t=vr(e);return`rgb(${ft(-1,t.r)},${ft(-1,t.g)},${ft(-1,t.b)})`});function mg(e){return pg.getValue(e)}function vg(e){const t=e.r/255,n=e.g/255,r=e.b/255,a=Math.max(t,n,r),o=a-Math.min(t,n,r),l=o===0?o:a===t?(n-r)/o:a===n?2+(r-t)/o:4+(t-n)/o;return{h:Ge(0,360,60*(l<0?l+6:l)),s:Ge(0,1,a===0?a:o/a),v:Ge(0,1,a),a:e.a}}function ol(e,t,n,r){const a=(r+e/60)%6;return n-n*t*Math.max(Math.min(a,4-a,1),0)}function vr(e){const t=mr(0,360,e.h);return{r:Ge(0,1,ol(t,e.s,e.v,5))*255,g:Ge(0,1,ol(t,e.s,e.v,3))*255,b:Ge(0,1,ol(t,e.s,e.v,1))*255,a:e.a}}function Os(e){return de({translate:{x:e.s*100,y:e.v*100},rotate:e.h,scale:{x:e.a,y:1}})}function hg(e,t){return de({translate:Is(e.translate,t.translate),rotate:(e.rotate+t.rotate)/2,scale:{x:(e.scale.x+t.scale.x)/2,y:1}})}function yg(e,t,n,r){const a=r[t.targetId];if(!a)return r;const o=gg(e,t,r),l=r[t.poleTargetId],s=ga(a);let u=l?Vd(ga(l),o):o;for(let i=0;i<t.iterations;i++)u=bg(s,u);return c(c({},r),oe(u.map((i,d)=>g(c({},i),{transform:Hd(o[d].transform,i.transform,t.influence)}))))}function gg(e,t,n){return t.chainLength===0?[]:[...Nr(n,e).map(a=>n[a]),n[e]].slice(-t.chainLength)}function bg(e,t){if(t.length===0)return t;let n=e;const r=t.concat().reverse().map(o=>{const[l,s,u]=Sg(n,o);return n=u,g(c({},o),{transform:g(c({},o.transform),{rotate:l,translate:s})})}).reverse(),a=ge(ba(t[0]),ba(r[0]));return r.map(o=>g(c({},o),{transform:g(c({},o.transform),{translate:ce(o.transform.translate,_r(o).toLocal(a))})}))}function _g(e){return ce(e.head,Oe(ge(e.tail,e.head),e.transform.scale.y))}function Sg(e,t){const n=_r(t),r=n.toWorld(t.transform.translate),a=ce(t.head,r),o=ce(_g(t),r),l=Tt(e,a)-Tt(o,a),s=tt(o,l,a),u=ce(t.transform.translate,n.toLocal(ge(e,s)));return[l/Math.PI*180,u,ce(t.head,n.toWorld(u))]}function Vd(e,t){if(t.length===0)return t;const n=t[0],r=Tt(e,ce(n.head,ba(n)));let a=n,o={x:0,y:0};return t.map(l=>{const s=_r(l),u=s.toWorld(l.transform.translate),i=ce(l.head,u),d=ce(l.tail,u),v=r-Tt(d,i),f=v/Math.PI*180,m=g(c({},l),{transform:g(c({},l.transform),{rotate:f,translate:ce(l.transform.translate,s.toLocal(o))})});return a=m,o=ge(tt(a.tail,v,a.head),a.tail),m})}function wg(e,t){var n,r;return g(c({},t),{targetId:(n=e[t.targetId])!=null?n:t.targetId,poleTargetId:(r=e[t.poleTargetId])!=null?r:t.poleTargetId})}function $g(e={}){return c({targetId:"",poleTargetId:"",iterations:20,chainLength:2,influence:1},e)}function Cg(e){return Sd([e.targetId?{[e.targetId]:1}:{},e.poleTargetId?{[e.poleTargetId]:1}:{}])}var Eg=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",apply:yg,straightToPoleTarget:Vd,immigrate:wg,getOption:$g,getDependentCountMap:Cg});function Mg(e,t,n,r){const a=r[e];if(!a||a.connected)return r;const o=_r(a);if(t.spaceType==="world"){const l=ga(a),s=hi(t,l);return g(c({},r),{[e]:g(c({},a),{transform:g(c({},a.transform),{translate:o.toLocal(ge(ce(l,s),a.head))})})})}else{const l=n[e];if(!l)return r;const s=l.transform.translate,u=hi(t,s),i=o.toWorld(ce(s,u)),d=ce(l.head,i),v=r[a.parentId]?Nd(r[a.parentId],d):d,f=ge(v,d);return g(c({},r),{[e]:g(c({},a),{transform:g(c({},a.transform),{translate:o.toLocal(ce(i,f))})})})}}function hi(e,t){const n={x:Ge(e.useMinX?e.minX:void 0,e.useMaxX?e.maxX:void 0,t.x),y:Ge(e.useMinY?e.minY:void 0,e.useMaxY?e.maxY:void 0,t.y)};return Oe(ge(n,t),e.influence)}function Ag(e,t){return t}function Ig(e={}){return c({spaceType:"world",influence:1,minX:0,maxX:0,minY:0,maxY:0,useMinX:!1,useMaxX:!1,useMinY:!1,useMaxY:!1},e)}function Tg(e){return{}}var kg=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",apply:Mg,immigrate:Ag,getOption:Ig,getDependentCountMap:Tg});function Og(e,t,n,r){var o;const a=r[e];if(!a)return r;if(t.spaceType==="world"){const l=ks(a);return g(c({},r),{[e]:g(c({},a),{transform:g(c({},a.transform),{rotate:yi(t,a.transform.rotate-l)})})})}else if(t.spaceType==="local"){const l=yi(t,n[e].transform.rotate);return g(c({},r),{[e]:g(c({},a),{transform:g(c({},a.transform),{rotate:a.inheritRotation?l+((o=r[a.parentId])==null?void 0:o.transform.rotate):l})})})}return r}function yi(e,t){const r=Ge(e.useMin?e.min:void 0,e.useMax?e.max:void 0,t)-t;return t+r*e.influence}function Bg(e,t){return t}function Lg(e={}){return c({spaceType:"world",min:0,max:0,useMin:!1,useMax:!1,influence:1},e)}function Rg(e){return{}}var Pg=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",apply:Og,immigrate:Bg,getOption:Lg,getDependentCountMap:Rg});function Ng(e,t,n,r){const a=r[e];if(!a)return r;if(t.spaceType==="world"){const o=a.transform.scale,l=gi(t,o);return g(c({},r),{[e]:g(c({},a),{transform:g(c({},a.transform),{scale:ce(o,l)})})})}else{const o=n[e];if(!o)return r;const l=o.transform.scale,s=gi(t,l),u=a.inheritScale&&r[a.parentId]?r[a.parentId].transform.scale:{x:1,y:1};return g(c({},r),{[e]:g(c({},a),{transform:g(c({},a.transform),{scale:jr(ce(l,s),u)})})})}}function gi(e,t){const n={x:Ge(e.useMinX?e.minX:void 0,e.useMaxX?e.maxX:void 0,t.x),y:Ge(e.useMinY?e.minY:void 0,e.useMaxY?e.maxY:void 0,t.y)};return Oe(ge(n,t),e.influence)}function jg(e,t){return t}function Fg(e={}){return c({spaceType:"world",influence:1,minX:0,maxX:0,minY:0,maxY:0,useMinX:!1,useMaxX:!1,useMinY:!1,useMaxY:!1},e)}function Vg(e){return{}}var Dg=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",apply:Ng,immigrate:jg,getOption:Fg,getDependentCountMap:Vg});function xg(e,t,n,r){var d,v,f,m,p,y,E,b;const a=r[t.targetId],o=r[e];if(!a||!o)return r;const l=o.inheritRotation&&(v=(d=r[o.parentId])==null?void 0:d.transform.rotate)!=null?v:0,s=(t.targetSpaceType==="world"?mi(a):(p=(m=(f=n[t.targetId])==null?void 0:f.transform)==null?void 0:m.rotate)!=null?p:0)*(t.invert?-1:1),u=t.ownerSpaceType==="world"?mi(o):(b=(E=(y=n[e])==null?void 0:y.transform)==null?void 0:E.rotate)!=null?b:0,i=(s-u)*t.influence;return g(c({},r),{[e]:g(c({},o),{transform:g(c({},o.transform),{rotate:t.ownerSpaceType==="world"?u+i-ks(o):u+i+l})})})}function Ug(e,t){var n;return g(c({},t),{targetId:(n=e[t.targetId])!=null?n:t.targetId})}function Kg(e={}){return c({targetSpaceType:"world",ownerSpaceType:"world",targetId:"",influence:1,invert:!1},e)}function Gg(e){return{[e.targetId]:1}}var zg=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",apply:xg,immigrate:Ug,getOption:Kg,getDependentCountMap:Gg});function Yg(e,t,n,r){var v,f,m,p,y,E;const a=r[t.targetId],o=r[e];if(!a||!o)return r;const l=r[o.parentId]?ba(r[o.parentId]):{x:0,y:0},s=jr(t.targetSpaceType==="world"?ga(a):(m=(f=(v=n[t.targetId])==null?void 0:v.transform)==null?void 0:f.translate)!=null?m:{x:0,y:0},{x:t.invertX?-1:1,y:t.invertY?-1:1}),u=t.ownerSpaceType==="world"?ga(o):(E=(y=(p=n[e])==null?void 0:p.transform)==null?void 0:y.translate)!=null?E:{x:0,y:0},i=jr(ge(s,u),{x:t.copyX?t.influence:0,y:t.copyY?t.influence:0}),d=_r(o);return g(c({},r),{[e]:g(c({},o),{transform:g(c({},o.transform),{translate:t.ownerSpaceType==="world"?d.toLocal(ge(ce(u,i),o.head)):ce(ce(u,i),l)})})})}function Xg(e,t){var n;return g(c({},t),{targetId:(n=e[t.targetId])!=null?n:t.targetId})}function Wg(e={}){return c({targetSpaceType:"world",ownerSpaceType:"world",targetId:"",influence:1,copyX:!0,copyY:!0,invertX:!1,invertY:!1},e)}function Hg(e){return{[e.targetId]:1}}var qg=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",apply:Yg,immigrate:Xg,getOption:Wg,getDependentCountMap:Hg});function Jg(e,t,n,r){var d,v,f,m,p,y,E,b;const a=r[t.targetId],o=r[e];if(!a||!o)return r;const l=(v=(d=r[o.parentId])==null?void 0:d.transform.scale)!=null?v:{x:1,y:1},s=t.targetSpaceType==="world"?a.transform.scale:(p=(m=(f=n[t.targetId])==null?void 0:f.transform)==null?void 0:m.scale)!=null?p:{x:1,y:1},u=t.ownerSpaceType==="world"?o.transform.scale:(b=(E=(y=n[e])==null?void 0:y.transform)==null?void 0:E.scale)!=null?b:{x:1,y:1},i=jr(ge({x:Math.pow(s.x,t.power),y:Math.pow(s.y,t.power)},u),{x:t.copyX?t.influence:0,y:t.copyY?t.influence:0});return g(c({},r),{[e]:g(c({},o),{transform:g(c({},o.transform),{scale:t.ownerSpaceType==="world"?ce(u,i):jr(ce(u,i),l)})})})}function Zg(e,t){var n;return g(c({},t),{targetId:(n=e[t.targetId])!=null?n:t.targetId})}function Qg(e={}){return c({targetSpaceType:"world",ownerSpaceType:"world",targetId:"",influence:1,power:1,copyX:!0,copyY:!0},e)}function eb(e){return{[e.targetId]:1}}var tb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",apply:Jg,immigrate:Zg,getOption:Qg,getDependentCountMap:eb});function Po(e){switch(e){case"IK":return Eg;case"LIMIT_LOCATION":return kg;case"LIMIT_ROTATION":return Pg;case"LIMIT_SCALE":return Dg;case"COPY_LOCATION":return qg;case"COPY_ROTATION":return zg;case"COPY_SCALE":return tb}}function nb(e,t,n,r){return Po(n.type).apply(r,n.option,e,t)}function rb(e,t,n,r){const a=t[r];return a?a.constraints.reduce((o,l)=>c(c({},o),nb(e,o,n[l],a.id)),t):t}function ab(e,t,n=r=>r.id){return t.map(r=>g(c({},r),{id:n(r),option:ob(e,r.type,r.option)}))}function ob(e,t,n){return Po(t).immigrate(e,n)}function Dd(e,t=!1){var r,a;const n=t?qe():(r=e.id)!=null?r:"";return{type:e.type,name:(a=e==null?void 0:e.name)!=null?a:"",option:lb(e.type,e==null?void 0:e.option),id:n}}function lb(e,t={}){return Po(e).getOption(t)}function sb(e,t){const n=oe(e),r=xd(n,t);return ib(r).map(o=>n[o])}function xd(e,t){return te(e,n=>Sd(n.constraints.map(r=>ub(t[r])).concat(n.parentId?{[n.parentId]:1}:{})))}function ub(e){return Po(e.type).getDependentCountMap(e.option)}function ib(e){let t=[],n={},r=e;for(;Object.keys(r).length>0;){const a=cb(n,r);if(a.length===0){t=t.concat(Object.keys(r).sort());break}t=t.concat(a),n=a.reduce((o,l)=>g(c({},o),{[l]:!0}),n),r=lt(r,n)}return t}function cb(e,t){return Object.keys($t(t,n=>Object.keys(n).every(r=>e[r])))}function db(e){const t=e.head,n=Wr(e),r=Math.cos(n),a=Math.sin(n),o=e.transform.rotate/180*Math.PI,l=Math.cos(o),s=Math.sin(o);return Xr([[1,0,0,1,t.x,t.y],[r,a,-a,r,0,0],[1,0,0,1,e.transform.translate.x,e.transform.translate.y],[l,s,-s,l,0,0],[e.transform.scale.x,0,0,e.transform.scale.y,0,0],[r,-a,a,r,0,0],[1,0,0,1,-t.x,-t.y]])}function Vr(e,t){return de({scale:ce(e.scale,t.scale),rotate:e.rotate+t.rotate,translate:ce(e.translate,t.translate),origin:ce(e.origin,t.origin)})}function Ud(e,t){return de({scale:ge(e.scale,t.scale),rotate:e.rotate-t.rotate,translate:ge(e.translate,t.translate),origin:ge(e.origin,t.origin)})}function Bs(e,t){return de({scale:{x:e.scale.x*t.scale.x,y:e.scale.y*t.scale.y},rotate:e.rotate+t.rotate,translate:ce(e.translate,t.translate),origin:ce(e.origin,t.origin)})}function fb(e){return de({scale:eg(e.scale),rotate:-e.rotate,translate:Oe(e.translate,-1),origin:Oe(e.origin,-1)})}function pb(e){return e.reduce((t,n)=>Bs(t,n),de())}function Yl(e,t,n){const r=n.head?Sn(e.head,t):e.head,a=n.tail?Sn(e.tail,t):e.tail;return g(c({},e),{head:r,tail:a})}function Hr(e,t){const n=pb(t),r=Wr(e),a=tt(n.translate,r),o=Sn(e.head,de({translate:a})),l=Sn(e.tail,de(g(c({},n),{translate:a,origin:e.head,scale:{x:1,y:1}})));return g(c({},e),{head:o,tail:ce(Oe(ge(l,o),n.scale.y),o),transform:de({scale:{x:n.scale.x,y:1}})})}function bi(e,t=!1){const n=t?e.head:e.tail;return Vn({head:n,tail:n,parentId:t?e.parentId:e.id,connected:t?e.connected:!0},!0)}function uo(e,t){return e.find(n=>n.id===t)}function mb(e,t,n=!1){return e.filter(r=>r.parentId===t&&(!n||r.connected))}function Kd(e,t,n,r=!1){const a=uo(e,t);if(!a||Object.keys(n).length===0)return{};let o={[t]:n};if(!r){if(n.head&&a.connected){const l=uo(e,a.parentId);l&&(o=c(c({},Kd(e,l.id,{tail:!0},r)),o))}n.tail&&mb(e,a.id,!0).forEach(l=>{o[l.id]={head:!0}})}return o}function Gd(e,t){const n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];return ye(t).reduce((r,a)=>{const o=Hr(a,[a.transform]),l=ni(o.head,n),s=ni(o.tail,n);return(l||s)&&(r[a.id]=kb({head:l,tail:s}),l||delete r[a.id].head,s||delete r[a.id].tail),r},{})}function vb(e,t){if(!t.parentId&&!t.connected)return t;const n=uo(e,t.parentId);return n?t.connected?g(c({},t),{head:n.tail}):t:g(c({},t),{connected:!1,parentId:""})}function Wa(e){return e.reduce((t,n)=>{if(!n.parentId)return t;const r=uo(e,n.parentId);return r?n.connected&&(t[n.id]={connected:Br(r.tail,n.head)}):t[n.id]={connected:!1,parentId:""},t},{})}function Dn(e,t){const n=Object.keys(t).map(r=>{const a=[],o=Hr(e[r],[e[r].transform]);return t[r].head&&a.push(o.head),t[r].tail&&a.push(o.tail),a}).flat();return hd(n)}function Ls(e){const t=Object.keys(e).map(n=>Hr(e[n],[e[n].transform]).head);return hd(t)}function Rs(e){const t=[],n=Object.keys(e).reduce((r,a)=>{const o=e[a];return!o.parentId||!e[o.parentId]?t.push(o):r[o.parentId]?r[o.parentId].push(o):r[o.parentId]=[o],r},{});return t.map(r=>g(c({},r),{children:zd(n,r.id)}))}function zd(e,t){var n,r;return(r=(n=e[t])==null?void 0:n.map(a=>g(c({},a),{children:zd(e,a.id)})))!=null?r:[]}function Ps(e,t){return sb(ye(e),t).reduce((n,r)=>Yd(e,n,t,r.id),{})}function Yd(e,t,n,r){if(t[r])return t;let a=t;const o=e[r];return o.parentId?(a[o.parentId]||(a=c(c({},a),Yd(e,a,n,o.parentId))),a=g(c({},a),{[r]:hb(a[o.parentId],o)})):a=g(c({},a),{[r]:o}),a=c(c({},a),rb(e,a,n,r)),a}function hb(e,t){const n=_r(t),r=t.connected?{x:0,y:0}:t.transform.translate,a=ce(t.head,n.toWorld(r)),o=Nd(e,a),l=ge(o,a);return g(c({},t),{transform:{translate:ce(r,n.toLocal(l)),rotate:t.inheritRotation?t.transform.rotate+e.transform.rotate:t.transform.rotate,scale:t.inheritScale?{x:t.transform.scale.x*e.transform.scale.x,y:t.transform.scale.y*e.transform.scale.y}:t.transform.scale,origin:{x:0,y:0}}})}function Xd(e){return e.map(t=>{const a=t,{children:n}=a;return Pa(a,["children"])}).concat(e.flatMap(t=>Xd(t.children)))}function yb(e,t){return oe(Wd(Rs(e),t))}function Wd(e,t){return e.flatMap(n=>{if(kd(t[n.id])){const r=n,{children:a}=r;return[Pa(r,["children"])]}else return Wd(n.children,t)})}function Hd(e,t,n){return de({scale:Ya(e.scale,t.scale,n),rotate:oo(e.rotate,t.rotate,n),origin:Ya(e.origin,t.origin,n),translate:Ya(e.translate,t.translate,n)})}function Ns(e,t,n,r={}){const a=te(oe(t),l=>ab(e,l.constraints.map(s=>n[s]),s=>r.resetConstraintId?qe():s.id));return{bones:t.map(l=>{var s;return g(c({},l),{parentId:(s=e[l.parentId])!=null?s:l.parentId,constraints:a[l.id].map(u=>u.id)})}),constraints:ye(a).flat()}}function qd(e,t,n){const r=te(e,()=>qe()),a=Object.values(r).reduce((l,s)=>(l[s]=!0,l),{}),o=Ns(r,ye(te(e,l=>{const s=g(c({},l),{id:r[l.id],name:Xt(l.name,n)});return n.push(s.name),s})).sort((l,s)=>l.name>=s.name?1:-1),t,{resetConstraintId:!0});return{bones:o.bones.map(l=>!l.parentId||a[l.parentId]?l:g(c({},l),{connected:!1})),createdConstraints:o.constraints}}function gb(e,t,n){const r=Object.keys(e).reduce((i,d)=>(i[e[d].name]=d,i),{}),a={},o={};n.forEach(i=>{if(_b(e,i)){const d=xl(e[i].name);r[d]?a[i]=r[d]:a[i]=qe(),o[i]=d}});const l=Object.keys(a).map(i=>{const d=e[i],v=o[i],f=Nr(e,d.id);return Vn(g(c({},Sb(d,f[0]?e[f[0]].tail:d.head)),{id:a[i],name:v}))}),s=Ns(bb(c(c({},e),oe(l)),!0),l,t,{resetConstraintId:!0}),u=Wa(ye(c(c({},e),oe(s.bones))));return{bones:s.bones.map(i=>u[i.id]?c(c({},i),u[i.id]):i),createdConstraints:[]}}function bb(e,t=!1){const n=Object.keys(e).reduce((r,a)=>(xl(e[a].name)!==e[a].name&&(r[xl(e[a].name)]=a),r),{});return Object.keys(e).reduce((r,a)=>{const o=n[e[a].name];return o?r[a]=o:t&&(r[a]=a),r},{})}function _b(e,t){return!(!e[t]||!e[t].name||!_d(e[t].name)||Nr(e,t).length===0)}function Sb(e,t){const n={x:ge(t,e.head).x*2,y:0},r=ce(e.head,n),a={x:ce(ce(e.tail,n),Oe(ge(e.head,e.tail),2)).x,y:e.tail.y};return g(c({},e),{head:r,tail:a})}function wb(e,t){const n=Rs(e[t]?g(c({},e),{[t]:g(c({},e[t]),{parentId:""})}):e);return $b(Xd(n.filter(r=>r.id!==t))).map(r=>r.id)}function $b(e){return Ul(e,"name")}function Jd(e,t,n,r){const a={},o={},l=n.reduce((s,u)=>{const i=r(s.bones,s.constraints,u);return Object.keys(i.bones).forEach(d=>{a[d]=!0,s.bones[d]=i.bones[d]}),Object.keys(i.constraints).forEach(d=>{o[d]=!0,s.constraints[d]=i.constraints[d]}),s},{bones:c({},e),constraints:c({},t)});return{bones:Ze(l.bones,a),constraints:Ze(l.constraints,a)}}function Cb(e,t,n=qe){return Jd(e,{},t,(r,a,o)=>({bones:Eb(r,o,n),constraints:{}})).bones}function Eb(e,t,n=qe){const r=e[t];if(!r)return e;const[a,o]=Mb(r,ye(e).map(l=>l.name),n);return g(c({},oe(ye(e).filter(l=>l.parentId===t).map(l=>g(c({},l),{parentId:o.id})))),{[a.id]:a,[o.id]:o})}function Mb(e,t,n){const r=Is(e.head,e.tail);return[Vn(g(c({},e),{tail:r})),Vn(g(c({},e),{id:n(),name:Xt(e.name,t),head:r,parentId:e.id,connected:!0,constraints:[],inheritRotation:!0,inheritScale:!0}))]}function Ab(e,t,n){return Jd(e,t,n,Ib)}function Ib(e,t,n){const r=e[n];if(!r)return{bones:{},constraints:{}};const a=$t(xd(e,t),l=>n in l),o=Ns({[n]:r.parentId},ye(e).filter(l=>!!a[l.id]).map(l=>{if(l.parentId!==n||!l.connected)return l;const s=e[n];if(!s.parentId)return g(c({},l),{parentId:"",connected:!1});const u=e[s.parentId];return u?g(c({},l),{parentId:s.parentId,head:u.tail}):l}),t);return{bones:oe(o.bones),constraints:oe(o.constraints)}}function Zd(e){return e.concat().sort((t,n)=>vi(n)-vi(t))}function Tb(e,t){const n=_r(e);if(!t)return a=>n.toLocal(a);const r=fb(t);return a=>n.toLocal(tg(a,r))}function kb(e){const t={};return e.head&&(t.head=!0),e.tail&&(t.tail=!0),t}function ue(e={}){return c({id:"",type:"scaler",data:{},inputs:{},position:{x:0,y:0}},e)}const _=te(J,e=>({type:e,struct:We.UNIT})),_t={createdInputs:{disabled:{value:!1},parent:{value:""},transform:{value:de()},fill:{value:de()},stroke:{value:de()},"stroke-width":{value:1}},inputs:{disabled:{type:_.BOOLEAN,default:!1},parent:{type:_.OBJECT,default:""},transform:{type:_.TRANSFORM,default:de()},fill:{type:_.COLOR,default:de()},stroke:{type:_.COLOR,default:de()},"stroke-width":{type:_.SCALER,default:1}},outputs:{object:_.OBJECT,parent:_.OBJECT},getComputation(e){return(t,n)=>({object:t.disabled?"":e({id:n.id,parent:t.parent,transform:t.transform,fill:t.fill,stroke:t.stroke,"stroke-width":t["stroke-width"]}),parent:t.parent})}};function tn(e){return e.find(t=>!!t&&t.type!==J.GENERICS)}function nn(e,t){return e===void 0&&t===void 0||(e==null?void 0:e.type)===(t==null?void 0:t.type)&&(e==null?void 0:e.struct)===(t==null?void 0:t.struct)}function Ob(e,t){return(n,r)=>{var a,o;return(o=(a=t.find(l=>l.some(s=>s.key===n&&s.output===r)))==null?void 0:a.map(l=>g(c({},l),{id:e})))!=null?o:void 0}}function No(e,t,n,r=!1){const a=e.getTransform(t);return o=>o.map((l,s)=>{const u=e.cloneObject(t,{parent:n},`${n}_${s}`),i=g(c({},l),{rotate:r?0:l.rotate});return e.setTransform(u,a?Bs(a,i):i),u})}function Qd(e,t){let n=0;return t.map((r,a)=>{const o=r.relative?n+r.offset:r.offset;return n+=r.offset,{id:`${e}_stop_${a}`,parent:e,attributes:{offset:o,"stop-color":r.color}}})}const Bb={create(e={}){return g(c({},ue(c({inputs:{}},e))),{type:"get_frame"})},data:{},inputs:{},outputs:{frame:_.SCALER,end_frame:_.SCALER},computation(e,t,n){const r=n.getFrameInfo();return{frame:r.currentFrame,end_frame:r.endFrame}},width:120,color:"#f0e68c",label:"Get Frame"};var Lb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:Bb});const Rb={create(e={}){return g(c({},ue(c({data:{value:0},inputs:{}},e))),{type:"scaler"})},data:{value:{type:_.SCALER,default:0}},inputs:{},outputs:{value:_.SCALER},computation(e,t){return{value:t.data.value}},width:120,color:"#f0e68c",label:"Number"};var Pb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:Rb});const Nb={create(e={}){return g(c({},ue(c({inputs:{x:{value:0},y:{value:0}}},e))),{type:"make_vector2"})},data:{},inputs:{x:{type:_.SCALER,default:0},y:{type:_.SCALER,default:0}},outputs:{vector2:_.VECTOR2},computation(e){return{vector2:e}},width:140,color:"#f0e68c",label:"Make Vector2"};var jb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:Nb});const Fb={create(e={}){return g(c({},ue(c({inputs:{vector2:{value:{x:0,y:0}}}},e))),{type:"break_vector2"})},data:{},inputs:{vector2:{type:_.VECTOR2,default:{x:0,y:0}}},outputs:{x:_.SCALER,y:_.SCALER},computation(e){return{x:e.vector2.x,y:e.vector2.y}},width:140,color:"#f0e68c",label:"Break Vector2"};var Vb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:Fb});const Db={create(e={}){return g(c({},ue(c({inputs:{translate:{value:{x:0,y:0}},rotate:{value:0},scale:{value:{x:1,y:1}},origin:{value:{x:0,y:0}}}},e))),{type:"make_transform"})},data:{},inputs:{translate:{type:_.VECTOR2,default:{x:0,y:0}},rotate:{type:_.SCALER,default:0},scale:{type:{type:J.VECTOR2,struct:We.UNIT,scale:.1},default:{x:1,y:1}},origin:{type:_.VECTOR2,default:{x:0,y:0}}},outputs:{transform:_.TRANSFORM},computation(e){return{transform:de({translate:e.translate,rotate:e.rotate,scale:e.scale,origin:e.origin})}},width:160,color:"#f0e68c",label:"Make Transform"};var xb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:Db});const Ub={create(e={}){return g(c({},ue(c({inputs:{transform:{value:de()}}},e))),{type:"break_transform"})},data:{},inputs:{transform:{type:_.TRANSFORM,default:de()}},outputs:{translate:_.VECTOR2,rotate:_.SCALER,scale:_.VECTOR2,origin:_.VECTOR2},computation(e){return{translate:e.transform.translate,rotate:e.transform.rotate,scale:e.transform.scale,origin:e.transform.origin}},width:160,color:"#f0e68c",label:"Break Transform"};var Kb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:Ub});const Gb={create(e={}){return g(c({},ue(c({data:{color:de()},inputs:{}},e))),{type:"color"})},data:{color:{type:_.COLOR,default:de()}},inputs:{},outputs:{color:_.COLOR},computation(e,t){return{color:t.data.color}},width:120,color:"#f0e68c",label:"Color"};var zb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:Gb});const ll={type:J.SCALER,struct:We.UNIT,scale:.1},Yb={create(e={}){return g(c({},ue(c({inputs:{h:{value:0},s:{value:0},v:{value:0},a:{value:1}}},e))),{type:"make_color"})},data:{},inputs:{h:{type:_.SCALER,default:0},s:{type:ll,default:0},v:{type:ll,default:0},a:{type:ll,default:1}},outputs:{color:_.COLOR},computation(e){return{color:Os(c({},e))}},width:140,color:"#f0e68c",label:"Make Color"};var Xb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:Yb});const Wb={create(e={}){return g(c({},ue(c({inputs:{color:{value:de()}}},e))),{type:"break_color"})},data:{},inputs:{color:{type:_.COLOR,default:de()}},outputs:{h:_.SCALER,s:_.SCALER,v:_.SCALER,a:{type:J.SCALER,struct:We.UNIT,scale:.1}},computation(e){return c({},qr(e.color))},width:140,color:"#f0e68c",label:"Break Color"};var Hb=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:Wb});const qb={create(e={}){return g(c({},ue(c({inputs:{a:{value:void 0},b:{value:void 0}}},e))),{type:"add_generics"})},data:{},inputs:{a:{type:_.GENERICS,default:void 0},b:{type:_.GENERICS,default:void 0}},outputs:{value:_.GENERICS},computation(e,t){var r;const n=(r=this.getOutputType)==null?void 0:r.call(this,t,"value");return{value:Jb(n)(e.a,e.b)}},width:100,color:"#4169e1",textColor:"#fff",label:"a + b",getOutputType(e,t){var n;switch(t){case"value":return(n=tn([e.inputs.a.genericsType,e.inputs.b.genericsType]))!=null?n:_.GENERICS;default:return _.GENERICS}},genericsChains:[[{key:"a"},{key:"b"},{key:"value",output:!0}]],getErrors(e){const t=tn([e.inputs.a.genericsType,e.inputs.b.genericsType]);if(!!t)switch(t.type){case J.SCALER:case J.VECTOR2:case J.TRANSFORM:case J.COLOR:case J.TEXT:case J.D:return;default:return["invalid type to operate"]}}};function Jb(e){if(!e)return _i;if(e.struct===We.ARRAY)return Zb;switch(e.type){case J.SCALER:return Qb;case J.VECTOR2:return e0;case J.TRANSFORM:return t0;case J.COLOR:return n0;case J.TEXT:return r0;case J.D:return a0;default:return _i}}function _i(){}function Zb(e=[],t=[]){return e.concat(t)}function Qb(e=0,t=0){return e+t}const Xl={x:0,y:0};function e0(e=Xl,t=Xl){return ce(e,t)}const io=de({scale:Xl});function t0(e=io,t=io){return Vr(e,t)}function n0(e=io,t=io){return hg(e,t)}function r0(e="",t=""){return e+t}function a0(e=[],t=[]){return e.concat(t)}var o0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:qb});const l0={create(e={}){return g(c({},ue(c({inputs:{a:{value:void 0},b:{value:void 0}}},e))),{type:"sub_generics"})},data:{},inputs:{a:{type:_.GENERICS,default:void 0},b:{type:_.GENERICS,default:void 0}},outputs:{value:_.GENERICS},computation(e,t){var r;const n=(r=this.getOutputType)==null?void 0:r.call(this,t,"value");return{value:s0(n)(e.a,e.b)}},width:100,color:"#4169e1",textColor:"#fff",label:"a - b",getOutputType(e,t){var n;switch(t){case"value":return(n=tn([e.inputs.a.genericsType,e.inputs.b.genericsType]))!=null?n:_.GENERICS;default:return _.GENERICS}},genericsChains:[[{key:"a"},{key:"b"},{key:"value",output:!0}]],getErrors(e){const t=tn([e.inputs.a.genericsType,e.inputs.b.genericsType]);if(!!t){if(t.struct!==We.UNIT)return["invalid type to operate"];switch(t.type){case J.SCALER:case J.VECTOR2:case J.TRANSFORM:return;default:return["invalid type to operate"]}}}};function s0(e){if(!e||e.struct===We.ARRAY)return sl;switch(e.type){case J.SCALER:return i0;case J.VECTOR2:return u0;case J.TRANSFORM:return c0;default:return sl}}function sl(){}function u0(e=Wl,t=Wl){return ge(e,t)}function i0(e=0,t=0){return e-t}const Wl={x:0,y:0},Si=de({scale:Wl});function c0(e=Si,t=Si){return Ud(e,t)}var d0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:l0});const f0={create(e={}){return g(c({},ue(c({inputs:{a:{value:0},b:{value:1}}},e))),{type:"multi_scaler"})},data:{},inputs:{a:{type:_.SCALER,default:0},b:{type:_.SCALER,default:1}},outputs:{value:_.SCALER},computation(e){return{value:e.a*e.b}},width:100,color:"#4169e1",textColor:"#fff",label:"a x b"};var p0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:f0});const m0={create(e={}){return g(c({},ue(c({inputs:{a:{value:0},b:{value:1}}},e))),{type:"divide_scaler"})},data:{},inputs:{a:{type:_.SCALER,default:0},b:{type:_.SCALER,default:1}},outputs:{value:_.SCALER},computation(e){return{value:e.a/(e.b===0?1:e.b)}},width:100,color:"#4169e1",textColor:"#fff",label:"a / b"};var v0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:m0});const h0={create(e={}){return g(c({},ue(c({inputs:{rotate:{value:0}}},e))),{type:"sin"})},data:{},inputs:{rotate:{type:_.SCALER,default:0}},outputs:{value:_.SCALER},computation(e){return{value:Math.sin(e.rotate*Math.PI/180)}},width:100,color:"#4169e1",textColor:"#fff",label:"Sin"};var y0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:h0});const g0={create(e={}){return g(c({},ue(c({inputs:{rotate:{value:0}}},e))),{type:"cos"})},data:{},inputs:{rotate:{type:_.SCALER,default:0}},outputs:{value:_.SCALER},computation(e){return{value:Math.cos(e.rotate*Math.PI/180)}},width:100,color:"#4169e1",textColor:"#fff",label:"Cos"};var b0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:g0});const _0={create(e={}){return g(c({},ue(c({inputs:{rotate:{value:0},radius:{value:1}}},e))),{type:"polar_coord"})},data:{},inputs:{rotate:{type:_.SCALER,default:0},radius:{type:_.SCALER,default:1}},outputs:{vector2:_.VECTOR2},computation(e){const t=e.rotate*Math.PI/180;return{vector2:{x:e.radius*Math.cos(t),y:e.radius*Math.sin(t)}}},width:140,color:"#4169e1",textColor:"#fff",label:"Polar Coord"};var S0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:_0});const w0={create(e={}){return g(c({},ue(c({inputs:{vector2:{value:{x:1,y:0}}}},e))),{type:"invert_polar_coord"})},data:{},inputs:{vector2:{type:_.VECTOR2,default:{x:1,y:0}}},outputs:{rotate:_.SCALER,radius:_.SCALER},computation(e){const t=pr(e.vector2);return{rotate:Tt(e.vector2)*180/Math.PI,radius:t}},width:160,color:"#4169e1",textColor:"#fff",label:"Invert Polar Coord"};var $0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:w0});const C0={create(e={}){return g(c({},ue(c({inputs:{x:{value:0},t:{value:2}}},e))),{type:"pow"})},data:{},inputs:{x:{type:_.SCALER,default:0},t:{type:_.SCALER,default:2}},outputs:{value:_.SCALER},computation(e){return{value:Math.pow(e.x,e.t)}},width:100,color:"#4169e1",textColor:"#fff",label:"x ^ t"};var E0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:C0});const M0={create(e={}){return g(c({},ue(c({inputs:{vector2:{value:{x:0,y:0}},scale:{value:1}}},e))),{type:"scale_vector2"})},data:{},inputs:{vector2:{type:_.VECTOR2,default:{x:0,y:0}},scale:{type:_.SCALER,default:1}},outputs:{vector2:_.VECTOR2},computation(e){return{vector2:Oe(e.vector2,e.scale)}},width:140,color:"#4169e1",textColor:"#fff",label:"Scale Vector2"};var A0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:M0});const I0={create(e={}){return g(c({},ue(c({inputs:{a:{value:{x:0,y:0}},b:{value:{x:0,y:0}}}},e))),{type:"distance"})},data:{},inputs:{a:{type:_.VECTOR2,default:{x:0,y:0}},b:{type:_.VECTOR2,default:{x:0,y:0}}},outputs:{distance:_.SCALER},computation(e){return{distance:Un(e.a,e.b)}},width:140,color:"#f0e68c",label:"Distance"};var T0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:I0});const k0={create(e={}){return g(c({},ue(c({inputs:{vector2:{value:{x:0,y:0}},rotate:{value:0},origin:{value:{x:0,y:0}}}},e))),{type:"rotate_vector2"})},data:{},inputs:{vector2:{type:_.VECTOR2,default:{x:0,y:0}},rotate:{type:_.SCALER,default:0},origin:{type:_.VECTOR2,default:{x:0,y:0}}},outputs:{vector2:_.VECTOR2},computation(e){return{vector2:tt(e.vector2,e.rotate*Math.PI/180,e.origin)}},width:140,color:"#f0e68c",label:"Rotate Vector2"};var O0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:k0});const B0={create(e={}){return g(c({},ue(c({inputs:{a:{value:void 0},b:{value:void 0},alpha:{value:0}}},e))),{type:"lerp_generics"})},data:{},inputs:{a:{type:_.GENERICS,default:void 0},b:{type:_.GENERICS,default:void 0},alpha:{type:{type:J.SCALER,struct:We.UNIT,scale:.1},default:0}},outputs:{value:_.GENERICS},computation(e,t){var r;const n=(r=this.getOutputType)==null?void 0:r.call(this,t,"value");return{value:L0(n)(e.a,e.b,Ge(0,1,e.alpha))}},width:140,color:"#4169e1",textColor:"#fff",label:"Lerp Number",getOutputType(e,t){var n;switch(t){case"value":return(n=tn([e.inputs.a.genericsType,e.inputs.b.genericsType]))!=null?n:_.GENERICS;default:return _.GENERICS}},genericsChains:[[{key:"a"},{key:"b"},{key:"value",output:!0}]],getErrors(e){const t=tn([e.inputs.a.genericsType,e.inputs.b.genericsType]);if(!!t){if(t.struct!==We.UNIT)return["invalid type to operate"];switch(t.type){case J.SCALER:case J.VECTOR2:case J.TRANSFORM:case J.COLOR:return;default:return["invalid type to operate"]}}}};function L0(e){if(!e||e.struct===We.ARRAY)return ul;switch(e.type){case J.SCALER:return R0;case J.VECTOR2:return P0;case J.TRANSFORM:case J.COLOR:return N0;default:return ul}}function ul(){}function R0(e=0,t=0,n){return oo(e,t,n)}const wi={x:0,y:0};function P0(e=wi,t=wi,n){return Ya(e,t,n)}const $i=de();function N0(e=$i,t=$i,n){return Hd(e,t,n)}var j0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:B0});const F0={create(e={}){return g(c({},ue(c({inputs:{number:{value:0},from:{value:0},to:{value:1},loop:{value:!1}}},e))),{type:"clamp"})},data:{},inputs:{number:{type:_.SCALER,default:0},from:{type:_.SCALER,default:0},to:{type:_.SCALER,default:1},loop:{type:_.BOOLEAN,default:!1}},outputs:{value:_.SCALER},computation(e){return{value:e.loop?mr(e.from,e.to,e.number):Ge(e.from,e.to,e.number)}},width:140,color:"#4169e1",textColor:"#fff",label:"Clamp"};var V0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:F0});const D0={create(e={}){return g(c({},ue(c({inputs:{number:{value:0},from:{value:0},to:{value:1}}},e))),{type:"round_trip"})},data:{},inputs:{number:{type:_.SCALER,default:0},from:{type:_.SCALER,default:0},to:{type:_.SCALER,default:1}},outputs:{value:_.SCALER},computation(e){return{value:cy(e.from,e.to,e.number)}},width:140,color:"#4169e1",textColor:"#fff",label:"Round Trip"};var x0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:D0});const U0={create(e={}){return g(c({},ue(c({data:{bone:""},inputs:{}},e))),{type:"get_bone"})},data:{bone:{type:_.BONE,default:""}},inputs:{},outputs:{transform:_.TRANSFORM,height:_.SCALER},computation(e,t,n){var r;return(r=n.getBoneSummary(t.data.bone))!=null?r:{transform:de(),height:0}},width:120,color:"#dc143c",textColor:"#fff",label:"Get Bone"};var K0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:U0});const G0={create(e={}){return g(c({},ue(c({data:{object:""},inputs:{}},e))),{type:"get_object"})},data:{object:{type:_.OBJECT,default:""}},inputs:{},outputs:{object:_.OBJECT},computation(e,t,n){return{object:t.data.object}},width:120,color:"#dc143c",textColor:"#fff",label:"Get Object"};var z0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:G0});const Y0={create(e={}){return g(c({},ue(c({inputs:{object:{value:""},index:{value:0}}},e))),{type:"get_child"})},data:{},inputs:{object:{type:_.OBJECT,default:""},index:{type:_.SCALER,default:0}},outputs:{child:_.OBJECT},computation(e,t,n){var o;const r=Math.floor(e.index);return e.object?{child:(o=n.getChildId(e.object,r))!=null?o:""}:{child:""}},width:120,color:"#dc143c",textColor:"#fff",label:"Get Child"};var X0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:Y0});const W0={create(e={}){return g(c({},ue(c({inputs:{object:{value:""}}},e))),{type:"get_transform"})},data:{},inputs:{object:{type:_.OBJECT,default:""}},outputs:{transform:_.TRANSFORM},computation(e,t,n){var r;return{transform:(r=n.getTransform(e.object))!=null?r:de()}},width:140,color:"#dc143c",textColor:"#fff",label:"Get Transform"};var H0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:W0});const q0={create(e={}){return g(c({},ue(c({inputs:{object:{value:""},transform:{value:de()}}},e))),{type:"set_transform"})},data:{},inputs:{object:{type:_.OBJECT,default:""},transform:{type:_.TRANSFORM,default:de()}},outputs:{object:_.OBJECT},computation(e,t,n){return n.setTransform(e.object,e.transform),{object:e.object}},width:140,color:"#dc143c",textColor:"#fff",label:"Set Transform"};var J0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:q0});const Z0={create(e={}){return g(c({},ue(c({inputs:{object:{value:""},transform:{value:de({scale:{x:0,y:0}})}}},e))),{type:"add_transform"})},data:{},inputs:{object:{type:_.OBJECT,default:""},transform:{type:_.TRANSFORM,default:de()}},outputs:{object:_.OBJECT},computation(e,t,n){const r=n.getTransform(e.object);return n.setTransform(e.object,r?Vr(r,e.transform):e.transform),{object:e.object}},width:140,color:"#dc143c",textColor:"#fff",label:"Add Transform"};var Q0=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:Z0});const e_={create(e={}){return g(c({},ue(c({inputs:{object:{value:""},color:{value:de()}}},e))),{type:"set_fill"})},data:{},inputs:{object:{type:_.OBJECT,default:""},color:{type:_.COLOR,default:de()}},outputs:{object:_.OBJECT},computation(e,t,n){return n.setFill(e.object,e.color),{object:e.object}},width:120,color:"#dc143c",textColor:"#fff",label:"Set Fill"};var t_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:e_});const n_={create(e={}){return g(c({},ue(c({inputs:{object:{value:""},color:{value:de()}}},e))),{type:"set_stroke"})},data:{},inputs:{object:{type:_.OBJECT,default:""},color:{type:_.COLOR,default:de()}},outputs:{object:_.OBJECT},computation(e,t,n){return n.setStroke(e.object,e.color),{object:e.object}},width:120,color:"#dc143c",textColor:"#fff",label:"Set Stroke"};var r_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:n_});const a_={create(e={}){return g(c({},ue(c({inputs:{object:{value:""},length:{value:0},max_length:{value:100}}},e))),{type:"set_stroke_length"})},data:{},inputs:{object:{type:_.OBJECT,default:""},length:{type:_.SCALER,default:0},max_length:{type:_.SCALER,default:0}},outputs:{object:_.OBJECT},computation(e,t,n){return e.object?(n.setAttributes(e.object,{"stroke-dasharray":e.max_length.toString(),"stroke-dashoffset":e.max_length-e.length}),{object:e.object}):{object:""}},width:160,color:"#dc143c",textColor:"#fff",label:"Set Stroke Length"};var o_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:a_});const l_={create(e={}){return g(c({},ue(c({inputs:{object:{value:""},fill_gradient:{value:""},stroke_gradient:{value:""}}},e))),{type:"set_gradient"})},data:{},inputs:{object:{type:_.OBJECT,default:""},fill_gradient:{type:_.OBJECT,default:""},stroke_gradient:{type:_.OBJECT,default:""}},outputs:{object:_.OBJECT},computation(e,t,n){return n.setFill(e.object,e.fill_gradient),n.setStroke(e.object,e.stroke_gradient),{object:e.object}},width:140,color:"#dc143c",textColor:"#fff",label:"Set Gradient"};var s_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:l_});const u_={create(e={}){return g(c({},ue(c({inputs:{object:{value:""},centered:{value:!1},x:{value:0},y:{value:0},width:{value:400},height:{value:400}}},e))),{type:"set_viewbox"})},data:{},inputs:{object:{type:_.OBJECT,default:""},centered:{type:_.BOOLEAN,default:!1},x:{type:_.SCALER,default:0},y:{type:_.SCALER,default:0},width:{type:_.SCALER,default:400},height:{type:_.SCALER,default:400}},outputs:{object:_.OBJECT},computation(e,t,n){return n.setAttributes(e.object,{viewBox:{x:e.centered?e.x-e.width/2:e.x,y:e.centered?e.y-e.height/2:e.y,width:e.width,height:e.height}}),{object:e.object}},width:140,color:"#dc143c",textColor:"#fff",label:"Set Viewbox"};var i_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:u_});const c_={create(e={}){return g(c({},ue(c({inputs:{disabled:{value:!1},object:{value:""}}},e))),{type:"hide_object"})},data:{},inputs:{disabled:{type:_.BOOLEAN,default:!1},object:{type:_.OBJECT,default:""}},outputs:{object:_.OBJECT},computation(e,t,n){if(!e.disabled){const r=de({scale:{x:0,y:1}});n.setStroke(e.object,r),n.setFill(e.object,r)}return{object:e.object}},width:120,color:"#dc143c",textColor:"#fff",label:"Hide Object"};var d_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:c_});const f_={create(e={}){return g(c({},ue(c({inputs:{object:{value:""}}},e))),{type:"clone_object"})},data:{},inputs:{object:{type:_.OBJECT,default:""}},outputs:{origin:_.OBJECT,clone:_.OBJECT},computation(e,t,n){const r=n.cloneObject(e.object,{},t.id);return{origin:e.object,clone:r}},width:140,color:"#dc143c",textColor:"#fff",label:"Clone Object"};var p_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:f_});const m_={create(e={}){return g(c({},ue(c({inputs:{object:{value:""}}},e))),{type:"group_clone_object"})},data:{},inputs:{object:{type:_.OBJECT,default:""}},outputs:{origin:_.OBJECT,group:_.OBJECT,clone:_.OBJECT},computation(e,t,n){const r=n.createCloneGroupObject(e.object,{id:t.id}),a=No(n,e.object,r),[o]=a([0].map(()=>de()));return{origin:e.object,group:r,clone:o}},width:180,color:"#dc143c",textColor:"#fff",label:"Group Clone Object"};var v_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:m_});const h_={create(e={}){return g(c({},ue(c({inputs:{object:{value:""},rotate:{value:0},count:{value:4},radius:{value:100},fix_rotate:{value:!1}}},e))),{type:"circle_clone_object"})},data:{},inputs:{object:{type:_.OBJECT,default:""},rotate:{type:_.SCALER,default:0},count:{type:_.SCALER,default:4},radius:{type:_.SCALER,default:100},fix_rotate:{type:_.BOOLEAN,default:!1}},outputs:{origin:_.OBJECT,group:_.OBJECT},computation(e,t,n){if(!e.object)return{origin:"",group:""};const r=Math.floor(e.count);if(r<=0)return{origin:e.object,group:""};const a=n.createCloneGroupObject(e.object,{id:t.id}),o=ig(r,e.radius,e.rotate);return No(n,e.object,a,e.fix_rotate)([...Array(r)].map((s,u)=>o(u))),{origin:e.object,group:a}},width:180,color:"#dc143c",textColor:"#fff",label:"Circle Clone Object"};var y_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:h_});const g_={create(e={}){return g(c({},ue(c({inputs:{object:{value:""},centered:{value:!1},rotate:{value:0},row:{value:3},column:{value:3},width:{value:50},height:{value:50}}},e))),{type:"grid_clone_object"})},data:{},inputs:{object:{type:_.OBJECT,default:""},centered:{type:_.BOOLEAN,default:!1},rotate:{type:_.SCALER,default:0},row:{type:_.SCALER,default:3},column:{type:_.SCALER,default:3},width:{type:_.SCALER,default:50},height:{type:_.SCALER,default:50}},outputs:{origin:_.OBJECT,group:_.OBJECT},computation(e,t,n){if(!e.object)return{origin:"",group:""};const r=Math.floor(e.row),a=Math.floor(e.column);if(r<=0||a<=0)return{origin:e.object,group:""};const o=n.createCloneGroupObject(e.object,{id:t.id}),l=No(n,e.object,o),s=cg(e.width,e.height,a,r,e.rotate,e.centered);return l([...Array(r*a)].map((u,i)=>s(i))),{origin:e.object,group:o}},width:180,color:"#dc143c",textColor:"#fff",label:"Grid Clone Object"};var b_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:g_});const __={create(e={}){return g(c({},ue(c({inputs:{object:{value:""},rotate:{value:0},max_rotate:{value:360*3},interval:{value:30},offset:{value:0},radius:{value:50},radius_grow:{value:1},scale_grow:{value:1},fix_rotate:{value:!1}}},e))),{type:"tornado_clone_object"})},data:{},inputs:{object:{type:_.OBJECT,default:""},rotate:{type:_.SCALER,default:0},max_rotate:{type:_.SCALER,default:360*3},interval:{type:_.SCALER,default:60},offset:{type:_.SCALER,default:0},radius:{type:_.SCALER,default:50},radius_grow:{type:{type:J.SCALER,struct:We.UNIT,scale:.1},default:1},scale_grow:{type:{type:J.SCALER,struct:We.UNIT,scale:.1},default:1},fix_rotate:{type:_.BOOLEAN,default:!1}},outputs:{origin:_.OBJECT,group:_.OBJECT},computation(e,t,n){if(!e.object)return{origin:"",group:""};const r=Math.floor(e.max_rotate/e.interval);if(r<=0||e.interval<=0||e.radius<=0||e.radius_grow<=0||e.scale_grow<=0)return{origin:e.object,group:""};const a=n.createCloneGroupObject(e.object,{id:t.id}),o=ug(e.radius,e.rotate,e.radius_grow,e.scale_grow);return No(n,e.object,a,e.fix_rotate)([...Array(r)].map((s,u)=>e.interval*u+e.offset).filter(s=>0<=s&&s<=e.max_rotate).map(o)),{origin:e.object,group:a}},width:200,color:"#dc143c",textColor:"#fff",label:"Tornado Clone Object"};var S_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:__});const w_={create(e={}){return g(c({},ue(c({data:{},inputs:{disabled:{value:!1},parent:{value:""},transform:{value:de()}}},e))),{type:"create_object_group"})},data:{},inputs:{disabled:{type:_.BOOLEAN,default:!1},parent:{type:_.OBJECT,default:""},transform:{type:_.TRANSFORM,default:de()}},outputs:_t.outputs,computation(e,t,n){return e.disabled?{object:"",parent:e.parent}:{object:n.createObject("g",{id:t.id,parent:e.parent,transform:e.transform,attributes:{}}),parent:e.parent}},width:140,color:"#dc143c",textColor:"#fff",label:"Create Group"};var $_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:w_});const C_={create(e={}){return g(c({},ue(c({data:{},inputs:g(c({},_t.createdInputs),{centered:{value:!1},x:{value:0},y:{value:0},width:{value:100},height:{value:100}})},e))),{type:"create_object_rect"})},data:{},inputs:g(c({},_t.inputs),{centered:{type:_.BOOLEAN,default:!1},x:{type:_.SCALER,default:0},y:{type:_.SCALER,default:0},width:{type:_.SCALER,default:100},height:{type:_.SCALER,default:100}}),outputs:_t.outputs,computation(e,t,n){return _t.getComputation(r=>n.createObject("rect",g(c({},r),{attributes:{x:e.centered?e.x-e.width/2:e.x,y:e.centered?e.y-e.height/2:e.y,width:e.width,height:e.height}})))(e,t)},width:140,color:"#dc143c",textColor:"#fff",label:"Create Rect"};var E_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:C_});const M_={create(e={}){return g(c({},ue(c({data:{},inputs:g(c({},_t.createdInputs),{cx:{value:0},cy:{value:0},rx:{value:10},ry:{value:10}})},e))),{type:"create_object_ellipse"})},data:{},inputs:g(c({},_t.inputs),{cx:{type:_.SCALER,default:0},cy:{type:_.SCALER,default:0},rx:{type:_.SCALER,default:10},ry:{type:_.SCALER,default:10}}),outputs:_t.outputs,computation(e,t,n){return _t.getComputation(r=>n.createObject("ellipse",g(c({},r),{attributes:{cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry}})))(e,t)},width:140,color:"#dc143c",textColor:"#fff",label:"Create Ellipse"};var A_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:M_});const I_={create(e={}){return g(c({},ue(c({data:{},inputs:g(c({},_t.createdInputs),{centered:{value:!1},x:{value:0},y:{value:0},dx:{value:0},dy:{value:0},text:{value:"TEXT"},"font-size":{value:10}})},e))),{type:"create_object_text"})},data:{},inputs:g(c({},_t.inputs),{centered:{type:_.BOOLEAN,default:!1},x:{type:_.SCALER,default:0},y:{type:_.SCALER,default:0},dx:{type:_.SCALER,default:0},dy:{type:_.SCALER,default:0},text:{type:_.TEXT,default:"TEXT"},"font-size":{type:_.SCALER,default:100}}),outputs:_t.outputs,computation(e,t,n){return _t.getComputation(r=>n.createObject("text",g(c({},r),{attributes:c({x:e.x,y:e.y,dx:e.dx,dy:e.dy,"font-size":e["font-size"]},e.centered?{"text-anchor":"middle","dominant-baseline":"middle"}:{}),text:e.text})))(e,t)},width:140,color:"#dc143c",textColor:"#fff",label:"Create Text"};var T_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:I_});const k_={create(e={}){return g(c({},ue(c({data:{},inputs:g(c({},_t.createdInputs),{d:{value:[]}})},e))),{type:"create_object_path"})},data:{},inputs:g(c({},_t.inputs),{d:{type:_.D,default:[]}}),outputs:_t.outputs,computation(e,t,n){return _t.getComputation(r=>n.createObject("path",g(c({},r),{attributes:{d:e.d}})))(e,t)},width:140,color:"#dc143c",textColor:"#fff",label:"Create Path"};var O_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:k_});const B_={create(e={}){return g(c({},ue(c({inputs:{disabled:{value:!1},parent:{value:""},relative:{value:!0},spread:{value:0},stop:{value:[]},from:{value:{x:0,y:0}},to:{value:{x:1,y:1}}}},e))),{type:"create_linear_gradient"})},data:{},inputs:{disabled:{type:_.BOOLEAN,default:!1},parent:{type:_.OBJECT,default:""},relative:{type:_.BOOLEAN,default:!0},spread:{type:{type:J.SCALER,struct:We.UNIT,enumKey:"SPREAD_METHOD"},default:0},stop:{type:_.STOP,default:[]},from:{type:{type:J.VECTOR2,struct:We.UNIT,scale:.05},default:{x:0,y:0}},to:{type:{type:J.VECTOR2,struct:We.UNIT,scale:.05},default:{x:1,y:1}}},outputs:{gradient:_.OBJECT},computation(e,t,n){if(e.disabled)return{gradient:""};const r=n.createObject("linearGradient",{id:t.id,parent:e.parent,attributes:{id:t.id,x1:e.from.x,y1:e.from.y,x2:e.to.x,y2:e.to.y,gradientUnits:e.relative?"objectBoundingBox":"userSpaceOnUse",spreadMethod:ya("SPREAD_METHOD",e.spread)}});return Qd(r,e.stop).forEach(a=>{n.createObject("stop",a)}),{gradient:r}},width:180,color:"#dc143c",textColor:"#fff",label:"Linear Gradient"};var L_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:B_});const R_={create(e={}){return g(c({},ue(c({inputs:{disabled:{value:!1},parent:{value:""},relative:{value:!0},spread:{value:0},stop:{value:[]},center:{value:{x:0,y:0}},radius:{value:1},focus:{value:{x:0,y:0}}}},e))),{type:"create_radial_gradient"})},data:{},inputs:{disabled:{type:_.BOOLEAN,default:!1},parent:{type:_.OBJECT,default:""},relative:{type:_.BOOLEAN,default:!0},spread:{type:{type:J.SCALER,struct:We.UNIT,enumKey:"SPREAD_METHOD"},default:0},stop:{type:_.STOP,default:[]},center:{type:{type:J.VECTOR2,struct:We.UNIT,scale:.05},default:{x:0,y:0}},radius:{type:{type:J.SCALER,struct:We.UNIT,scale:.05},default:1},focus:{type:{type:J.VECTOR2,struct:We.UNIT,scale:.05},default:{x:0,y:0}}},outputs:{gradient:_.OBJECT},computation(e,t,n){if(e.disabled)return{gradient:""};const r=n.createObject("radialGradient",{id:t.id,parent:e.parent,attributes:{id:t.id,cx:e.center.x,cy:e.center.y,r:Math.max(e.radius,0),fx:e.focus.x,fy:e.focus.y,gradientUnits:ya("SPACE_UNITS",e.relative?1:0),spreadMethod:ya("SPREAD_METHOD",e.spread)}});return Qd(r,e.stop).forEach(a=>{n.createObject("stop",a)}),{gradient:r}},width:180,color:"#dc143c",textColor:"#fff",label:"Radial Gradient"};var P_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:R_});const N_={create(e={}){return g(c({},ue(c({inputs:{stop:{value:[]},relative:{value:!0},offset:{value:0},color:{value:de()}}},e))),{type:"make_stop"})},data:{},inputs:{stop:{type:_.STOP,default:[]},relative:{type:_.BOOLEAN,default:!0},offset:{type:{type:J.SCALER,struct:We.UNIT,scale:.1},default:0},color:{type:_.COLOR,default:de()}},outputs:{stop:_.STOP},computation(e,t,n){return{stop:[...e.stop,{offset:e.offset,color:e.color,relative:e.relative}]}},width:140,color:"#8b008b",textColor:"#fff",label:"Make Stop"};var j_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:N_});const F_={create(e={}){return g(c({},ue(c({data:{},inputs:{d:{value:[]},relative:{value:!1},p:{value:{x:0,y:0}}}},e))),{type:"make_path_m"})},data:{},inputs:{d:{type:_.D,default:[]},relative:{type:_.BOOLEAN,default:!1},p:{type:_.VECTOR2,default:{x:0,y:0}}},outputs:{d:_.D},computation(e){return{d:[...e.d,`${e.relative?"m":"M"}${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path M"};var V_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:F_});const D_={create(e={}){return g(c({},ue(c({data:{},inputs:{d:{value:[]},relative:{value:!1},p:{value:{x:0,y:0}}}},e))),{type:"make_path_l"})},data:{},inputs:{d:{type:_.D,default:[]},relative:{type:_.BOOLEAN,default:!1},p:{type:_.VECTOR2,default:{x:0,y:0}}},outputs:{d:_.D},computation(e){return{d:[...e.d,`${e.relative?"l":"L"}${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path L"};var x_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:D_});const U_={create(e={}){return g(c({},ue(c({data:{},inputs:{d:{value:[]},relative:{value:!1},x:{value:0}}},e))),{type:"make_path_h"})},data:{},inputs:{d:{type:_.D,default:[]},relative:{type:_.BOOLEAN,default:!1},x:{type:_.SCALER,default:0}},outputs:{d:_.D},computation(e){return{d:[...e.d,`${e.relative?"h":"H"}${e.x}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path H"};var K_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:U_});const G_={create(e={}){return g(c({},ue(c({data:{},inputs:{d:{value:[]},relative:{value:!1},y:{value:0}}},e))),{type:"make_path_v"})},data:{},inputs:{d:{type:_.D,default:[]},relative:{type:_.BOOLEAN,default:!1},y:{type:_.SCALER,default:0}},outputs:{d:_.D},computation(e){return{d:[...e.d,`${e.relative?"v":"V"}${e.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path V"};var z_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:G_});const Y_={create(e={}){return g(c({},ue(c({data:{},inputs:{d:{value:[]},relative:{value:!1},c1:{value:{x:0,y:0}},p:{value:{x:0,y:0}}}},e))),{type:"make_path_q"})},data:{},inputs:{d:{type:_.D,default:[]},relative:{type:_.BOOLEAN,default:!1},c1:{type:_.VECTOR2,default:{x:0,y:0}},p:{type:_.VECTOR2,default:{x:0,y:0}}},outputs:{d:_.D},computation(e){return{d:[...e.d,`${e.relative?"q":"Q"}${e.c1.x},${e.c1.y} ${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path Q"};var X_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:Y_});const W_={create(e={}){return g(c({},ue(c({data:{},inputs:{d:{value:[]},relative:{value:!1},p:{value:{x:0,y:0}}}},e))),{type:"make_path_t"})},data:{},inputs:{d:{type:_.D,default:[]},relative:{type:_.BOOLEAN,default:!1},p:{type:_.VECTOR2,default:{x:0,y:0}}},outputs:{d:_.D},computation(e){return{d:[...e.d,`${e.relative?"t":"T"}${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path T"};var H_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:W_});const q_={create(e={}){return g(c({},ue(c({data:{},inputs:{d:{value:[]},relative:{value:!1},c1:{value:{x:0,y:0}},c2:{value:{x:0,y:0}},p:{value:{x:0,y:0}}}},e))),{type:"make_path_c"})},data:{},inputs:{d:{type:_.D,default:[]},relative:{type:_.BOOLEAN,default:!1},c1:{type:_.VECTOR2,default:{x:0,y:0}},c2:{type:_.VECTOR2,default:{x:0,y:0}},p:{type:_.VECTOR2,default:{x:0,y:0}}},outputs:{d:_.D},computation(e){return{d:[...e.d,`${e.relative?"c":"C"}${e.c1.x},${e.c1.y} ${e.c2.x},${e.c2.y} ${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path Q"};var J_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:q_});const Z_={create(e={}){return g(c({},ue(c({data:{},inputs:{d:{value:[]},relative:{value:!1},c1:{value:{x:0,y:0}},p:{value:{x:0,y:0}}}},e))),{type:"make_path_s"})},data:{},inputs:{d:{type:_.D,default:[]},relative:{type:_.BOOLEAN,default:!1},c1:{type:_.VECTOR2,default:{x:0,y:0}},p:{type:_.VECTOR2,default:{x:0,y:0}}},outputs:{d:_.D},computation(e){return{d:[...e.d,`${e.relative?"s":"S"}${e.c1.x},${e.c1.y} ${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path S"};var Q_=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:Z_});const eS={create(e={}){return g(c({},ue(c({data:{},inputs:{d:{value:[]},relative:{value:!1},rx:{value:10},ry:{value:10},rotate:{value:0},"large-arc":{value:!1},sweep:{value:!1},p:{value:{x:0,y:0}}}},e))),{type:"make_path_a"})},data:{},inputs:{d:{type:_.D,default:[]},relative:{type:_.BOOLEAN,default:!1},rx:{type:_.SCALER,default:1},ry:{type:_.SCALER,default:1},rotate:{type:_.SCALER,default:0},"large-arc":{type:_.BOOLEAN,default:!1},sweep:{type:_.BOOLEAN,default:!1},p:{type:_.VECTOR2,default:{x:0,y:0}}},outputs:{d:_.D},computation(e){return{d:[...e.d,`${e.relative?"a":"A"}${e.rx} ${e.ry} ${e.rotate} ${e["large-arc"]?1:0} ${e.sweep?1:0} ${e.p.x},${e.p.y}`]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path A"};var tS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:eS});const nS={create(e={}){return g(c({},ue(c({data:{},inputs:{d:{value:[]}}},e))),{type:"make_path_z"})},data:{},inputs:{d:{type:_.D,default:[]}},outputs:{d:_.D},computation(e){return{d:[...e.d,"Z"]}},width:140,color:"#fff5ee",textColor:"#000",label:"Make Path Z"};var rS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:nS});const aS={create(e={}){return g(c({},ue(c({data:{},inputs:{disabled:{value:!1},parent:{value:""},relative:{value:!1}}},e))),{type:"create_object_clip_path"})},data:{},inputs:{disabled:{type:_.BOOLEAN,default:!1},parent:{type:_.OBJECT,default:""},relative:{type:_.BOOLEAN,default:!1}},outputs:_t.outputs,computation(e,t,n){return e.disabled?{object:"",parent:e.parent}:{object:n.createObject("clipPath",{id:t.id,parent:e.parent,attributes:{clipPathUnits:ya("SPACE_UNITS",e.relative?1:0)}}),parent:e.parent}},width:160,color:"#dc143c",textColor:"#fff",label:"Create Clip Path"};var oS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:aS});const lS={create(e={}){return g(c({},ue(c({inputs:{object:{value:""},clip_path:{value:""}}},e))),{type:"set_clip_path"})},data:{},inputs:{object:{type:_.OBJECT,default:""},clip_path:{type:_.OBJECT,default:""}},outputs:{object:_.OBJECT},computation(e,t,n){return n.setAttributes(e.object,{"clip-path":`url(#${e.clip_path})`}),n.setAttributes(e.clip_path,{id:e.clip_path}),{object:e.object}},width:140,color:"#dc143c",textColor:"#fff",label:"Set Clip Path"};var sS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:lS});const uS={create(e={}){return g(c({},ue(c({inputs:{a:{value:0},b:{value:0}}},e))),{type:"greater_than"})},data:{},inputs:{a:{type:_.SCALER,default:0},b:{type:_.OBJECT,default:0}},outputs:{value:_.BOOLEAN},computation(e){return{value:e.a>e.b}},width:100,color:"#b0c4de",textColor:"#000",label:"a > b"};var iS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:uS});const cS={create(e={}){return g(c({},ue(c({inputs:{a:{value:0},b:{value:0}}},e))),{type:"greater_than_or_equal"})},data:{},inputs:{a:{type:_.SCALER,default:0},b:{type:_.SCALER,default:0}},outputs:{value:_.BOOLEAN},computation(e){return{value:e.a>=e.b}},width:100,color:"#b0c4de",textColor:"#000",label:"a >= b"};var dS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:cS});const fS={create(e={}){return g(c({},ue(c({inputs:{a:{value:0},b:{value:0}}},e))),{type:"less_than"})},data:{},inputs:{a:{type:_.SCALER,default:0},b:{type:_.SCALER,default:0}},outputs:{value:_.BOOLEAN},computation(e){return{value:e.a<e.b}},width:100,color:"#b0c4de",textColor:"#000",label:"a < b"};var pS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:fS});const mS={create(e={}){return g(c({},ue(c({inputs:{a:{value:0},b:{value:0}}},e))),{type:"less_than_or_equal"})},data:{},inputs:{a:{type:_.SCALER,default:0},b:{type:_.SCALER,default:0}},outputs:{value:_.BOOLEAN},computation(e){return{value:e.a<=e.b}},width:100,color:"#b0c4de",textColor:"#000",label:"a <= b"};var vS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:mS});const hS={create(e={}){return g(c({},ue(c({inputs:{number:{value:0},from:{value:0},to:{value:1}}},e))),{type:"between"})},data:{},inputs:{number:{type:_.SCALER,default:0},from:{type:_.SCALER,default:0},to:{type:_.SCALER,default:1}},outputs:{value:_.BOOLEAN},computation(e){return{value:e.from<=e.number&&e.number<=e.to}},width:120,color:"#b0c4de",textColor:"#000",label:"Between"};var yS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:hS});const gS={create(e={}){return g(c({},ue(c({inputs:{condition:{value:!0}}},e))),{type:"not"})},data:{},inputs:{condition:{type:_.BOOLEAN,default:!0}},outputs:{value:_.BOOLEAN},computation(e){return{value:!e.condition}},width:130,color:"#b0c4de",textColor:"#000",label:"Not"};var bS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:gS});const _S={create(e={}){return g(c({},ue(c({inputs:{a:{value:!1},b:{value:!1}}},e))),{type:"and"})},data:{},inputs:{a:{type:_.BOOLEAN,default:!0},b:{type:_.BOOLEAN,default:!0}},outputs:{value:_.BOOLEAN},computation(e){return{value:e.a&&e.b}},width:100,color:"#b0c4de",textColor:"#000",label:"And"};var SS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:_S});const wS={create(e={}){return g(c({},ue(c({inputs:{a:{value:!1},b:{value:!1}}},e))),{type:"or"})},data:{},inputs:{a:{type:_.BOOLEAN,default:!0},b:{type:_.BOOLEAN,default:!0}},outputs:{value:_.BOOLEAN},computation(e){return{value:e.a||e.b}},width:100,color:"#b0c4de",textColor:"#000",label:"Or"};var $S=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:wS});const CS={create(e={}){return g(c({},ue(c({inputs:{a:{value:void 0},b:{value:void 0},threshold:{value:0}}},e))),{type:"equal_generics"})},data:{},inputs:{a:{type:_.GENERICS,default:void 0},b:{type:_.GENERICS,default:void 0},threshold:{type:{type:J.SCALER,struct:We.UNIT,scale:.1},default:0}},outputs:{value:_.BOOLEAN},computation(e,t){var r;const n=(r=tn([t.inputs.a.genericsType,t.inputs.b.genericsType]))!=null?r:_.GENERICS;return{value:ES(n)(e.a,e.b,e.threshold)}},width:120,color:"#b0c4de",textColor:"#000",label:"a = b",genericsChains:[[{key:"a"},{key:"b"},{key:"value",output:!0}]],getErrors(e){const t=tn([e.inputs.a.genericsType,e.inputs.b.genericsType]);if(!!t)switch(t.type){case J.SCALER:case J.VECTOR2:case J.TEXT:case J.OBJECT:case J.BOOLEAN:return;default:return["invalid type to operate"]}}};function ES(e){if(!e||e.struct===We.ARRAY)return il;switch(e.type){case J.SCALER:return MS;case J.VECTOR2:return AS;case J.TEXT:case J.OBJECT:return IS;case J.BOOLEAN:return TS;default:return il}}function il(){return!1}function MS(e=0,t=0,n){return Math.abs(e-t)<=n}const Ci={x:0,y:0};function AS(e=Ci,t=Ci,n){return Un(e,t)<=n}function IS(e="",t=""){return e===t}function TS(e=!1,t=!1){return e===t}var kS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:CS});const OS={create(e={}){return g(c({},ue(c({inputs:{condition:{value:!0},if_true:{value:void 0},if_false:{value:void 0}}},e))),{type:"switch_generics"})},data:{},inputs:{condition:{type:_.BOOLEAN,default:!0},if_true:{type:_.GENERICS,default:void 0},if_false:{type:_.GENERICS,default:void 0}},outputs:{value:_.GENERICS},computation(e){return{value:e.condition?e.if_true:e.if_false}},width:130,color:"#afeeee",textColor:"#000",label:"Switch",getOutputType(e,t){var n;switch(t){case"value":return(n=tn([e.inputs.if_true.genericsType,e.inputs.if_false.genericsType]))!=null?n:_.GENERICS;default:return _.GENERICS}},genericsChains:[[{key:"if_true"},{key:"if_false"},{key:"value",output:!0}]]};var BS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:OS});const LS={create(e={}){return g(c({},ue(c({inputs:{value:{value:void 0}}},e))),{type:"reroute"})},data:{},inputs:{value:{type:_.GENERICS,default:void 0}},outputs:{value:_.GENERICS},computation(e){return{value:e.value}},width:18,label:"",getOutputType(e){var t;return(t=tn([e.inputs.value.genericsType]))!=null?t:_.GENERICS},genericsChains:[[{key:"value"},{key:"value",output:!0}]]};var RS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:LS});const PS={create(e={}){return g(c({},ue(e)),{type:"custom_begin_input"})},data:{},inputs:{},outputs:{input:_.INPUT},computation(e,t){return{input:t.id}},width:130,color:"#ff7f50",textColor:"#fff",label:"Begin Input"};var NS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:PS});const jS={create(e={}){return g(c({},ue(c({data:{name:"input",default:{value:void 0}},inputs:{input:{value:void 0}}},e))),{type:"custom_input"})},data:{name:{type:_.TEXT,default:"input"},default:{type:_.GENERICS,default:void 0}},inputs:{input:{type:_.INPUT,default:""}},outputs:{value:_.GENERICS,input:_.INPUT},computation(e,t){return{value:t.data.default.value,input:e.input}},width:110,color:"#ff7f50",textColor:"#fff",label:"Input",getOutputType(e,t){var n;switch(t){case"value":return(n=tn([e.data.default.genericsType]))!=null?n:_.GENERICS;case"input":return _.INPUT;default:return _.GENERICS}},genericsChains:[[{key:"default",data:!0},{key:"value",output:!0}]],getErrors(e){const t=e.data.default.genericsType;if(!!t)switch(t.type){case J.INPUT:case J.OUTPUT:return["invalid type to operate"];default:return}}};var FS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:jS});const VS={create(e={}){return g(c({},ue(e)),{type:"custom_begin_output"})},data:{},inputs:{},outputs:{output:_.OUTPUT},computation(e,t){return{output:t.id}},width:130,color:"#df7698",textColor:"#fff",label:"Begin Output"};var DS=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:VS});const xS={create(e={}){return g(c({},ue(c({data:{name:"output"},inputs:{output:{value:""},value:{value:void 0}}},e))),{type:"custom_output"})},data:{name:{type:_.TEXT,default:"output"}},inputs:{output:{type:_.OUTPUT,default:""},value:{type:_.GENERICS,default:void 0}},outputs:{output:_.OUTPUT},computation(e){return{output:e.output}},width:110,color:"#df7698",textColor:"#fff",label:"Output",genericsChains:[[{key:"value"}]],getErrors(e){const t=e.inputs.value.genericsType;if(!!t)switch(t.type){case J.INPUT:case J.OUTPUT:return["invalid type to operate"];default:return}}};var US=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",struct:xS});const js={get_frame:Lb,scaler:Pb,make_vector2:jb,break_vector2:Vb,make_transform:xb,break_transform:Kb,color:zb,make_color:Xb,break_color:Hb,add_generics:o0,sub_generics:d0,multi_scaler:p0,divide_scaler:v0,sin:y0,cos:b0,polar_coord:S0,invert_polar_coord:$0,pow:E0,scale_vector2:A0,distance:T0,rotate_vector2:O0,lerp_generics:j0,clamp:V0,round_trip:x0,get_bone:K0,get_object:z0,get_child:X0,get_transform:H0,set_transform:J0,add_transform:Q0,set_fill:t_,set_stroke:r_,set_stroke_length:o_,set_gradient:s_,set_clip_path:sS,set_viewbox:i_,hide_object:d_,clone_object:p_,group_clone_object:v_,circle_clone_object:y_,grid_clone_object:b_,tornado_clone_object:S_,create_object_group:$_,create_object_rect:E_,create_object_ellipse:A_,create_object_text:T_,create_object_path:O_,create_linear_gradient:L_,create_radial_gradient:P_,make_stop:j_,create_object_clip_path:oS,make_path_m:V_,make_path_l:x_,make_path_h:K_,make_path_v:z_,make_path_q:X_,make_path_t:H_,make_path_c:J_,make_path_s:Q_,make_path_a:tS,make_path_z:rS,not:bS,and:SS,or:$S,equal_generics:kS,greater_than:iS,greater_than_or_equal:dS,less_than:pS,less_than_or_equal:vS,between:yS,switch_generics:BS,reroute:RS,custom_begin_input:NS,custom_input:FS,custom_begin_output:DS,custom_output:US},KS={label:"Make Path",children:[{label:"M (Move)",type:"make_path_m"},{label:"L (Line)",type:"make_path_l"},{label:"H (Horizon)",type:"make_path_h"},{label:"V (Vertical)",type:"make_path_v"},{label:"Q (Bezier2)",type:"make_path_q"},{label:"T (Bezier2)",type:"make_path_t"},{label:"C (Bezier3)",type:"make_path_c"},{label:"S (Bezier3)",type:"make_path_s"},{label:"A (Arc)",type:"make_path_a"},{label:"Z (Close)",type:"make_path_z"}]},GS=[{label:"Primitive",children:[{label:"Get Frame",type:"get_frame"},{label:"Number",type:"scaler"},{label:"Make Vector2",type:"make_vector2"},{label:"Break Vector2",type:"break_vector2"},{label:"Make Transform",type:"make_transform"},{label:"Break Transform",type:"break_transform"},{label:"Color",type:"color"},{label:"Make Color",type:"make_color"},{label:"Break Color",type:"break_color"}]},{label:"Math",children:[{label:"(+)",type:"add_generics"},{label:"(-)",type:"sub_generics"},{label:"(x) Number",type:"multi_scaler"},{label:"(/) Number",type:"divide_scaler"},{label:"Sin",type:"sin"},{label:"Cos",type:"cos"},{label:"Polar Coord",type:"polar_coord"},{label:"Invert Polar Coord",type:"invert_polar_coord"},{label:"Pow",type:"pow"},{label:"Scale Vector2",type:"scale_vector2"},{label:"Distance",type:"distance"},{label:"Rotate Vector2",type:"rotate_vector2"},{label:"Lerp",type:"lerp_generics"},{label:"Clamp",type:"clamp"},{label:"Round Trip",type:"round_trip"}]},{label:"Boolean",children:[{label:"Not",type:"not"},{label:"And",type:"and"},{label:"Or",type:"or"},{label:"(=)",type:"equal_generics"},{label:"(>) Number",type:"greater_than"},{label:"(>=) Number",type:"greater_than_or_equal"},{label:"(<) Number",type:"less_than"},{label:"(<=) Number",type:"less_than_or_equal"},{label:"Between",type:"between"},{label:"Switch",type:"switch_generics"}]},{label:"Object",children:[{label:"Get Bone",type:"get_bone"},{label:"Get Object",type:"get_object"},{label:"Get Child",type:"get_child"},{label:"Get Transform",type:"get_transform"},{label:"Set Transform",type:"set_transform"},{label:"Add Transform",type:"add_transform"},{label:"Set Fill",type:"set_fill"},{label:"Set Stroke",type:"set_stroke"},{label:"Set Stroke Length",type:"set_stroke_length"},{label:"Set Gradient",type:"set_gradient"},{label:"Set Clip Path",type:"set_clip_path"},{label:"Set Viewbox",type:"set_viewbox"},{label:"Hide Object",type:"hide_object"},{label:"Clone Object",type:"clone_object"},{label:"Group Clone Object",type:"group_clone_object"},{label:"Circle Clone Object",type:"circle_clone_object"},{label:"Grid Clone Object",type:"grid_clone_object"},{label:"Tornado Clone Object",type:"tornado_clone_object"}]},{label:"Create",children:[{label:"Group",type:"create_object_group"},{label:"Rect",type:"create_object_rect"},{label:"Ellipse",type:"create_object_ellipse"},{label:"Text",type:"create_object_text"},{label:"Path",type:"create_object_path"},{label:"Linear Gradient",type:"create_linear_gradient"},{label:"Radial Gradient",type:"create_radial_gradient"},{label:"Stop",type:"make_stop"},{label:"Clip Path",type:"create_object_clip_path"}]},KS,{label:"Etc",children:[{label:"Reroute",type:"reroute"}]}];function zS(e,t,n,r){const a=Hl(e,t,n,!0);return Hl(e,a,r)}function Hl(e,t,n,r=!1){const a=nn(n,_.GENERICS);return t.map(o=>{const l=o.children.map(s=>{var i,d,v,f,m;const u=(i=e(s.type))==null?void 0:i.struct;if(!!u)if(r){const p=(v=(d=Mi(u,n))!=null?d:Mi(u,_.GENERICS))!=null?v:a?Object.keys(u.inputs)[0]:void 0;return p?g(c({},s),{inputKey:p}):void 0}else{const p=(m=(f=Ei(u,n))!=null?f:Ei(u,_.GENERICS))!=null?m:a?Object.keys(u.outputs)[0]:void 0;return p?g(c({},s),{outputKey:p}):void 0}}).filter(Kl);return l.length>0?{label:o.label,children:l}:void 0}).filter(Kl)}function Ei(e,t){const n=Object.entries(e.outputs).find(([,r])=>nn(r,t));return n?n[0]:void 0}function Mi(e,t){const n=Object.entries(e.inputs).find(([,r])=>nn(r.type,t));return n?n[0]:void 0}function co(e){return js[e]}function Fs(e,t,n){return Object.keys(n).reduce((r,a)=>r[a]?r:c(c({},r),ef(e,t,n,r,a,{})),{})}function ef(e,t,n,r,a,o={}){var i;if(r[a]||o[a])return r;const l=n[a];if(!l)return r;const s=g(c({},o),{[a]:!0}),u=nf((i=l.inputs)!=null?i:{}).reduce((d,v)=>ef(e,t,n,d,v,s),r);return g(c({},u),{[a]:XS(e,t,u,l)})}function YS(e){const t={},n=r=>{r.forEach(a=>{t[a]=!0})};return Object.keys(e).reduce((r,a)=>r[a]?r:c(c({},r),tf(e,r,a,{},n)),{}),t}function tf(e,t,n,r={},a){var u;if(t[n])return t;if(r[n])return a==null||a(Object.keys(r)),t;const o=e[n];if(!o)return t;const l=g(c({},r),{[n]:!0}),s=nf((u=o.inputs)!=null?u:{}).reduce((i,d)=>tf(e,i,d,l,a),t);return g(c({},s),{[n]:!0})}function XS(e,t,n,r){var l;const a=(l=e(r.type))==null?void 0:l.struct;if(!a)return n;const o=WS(n,r.inputs);return a.computation(te(o,(s,u)=>s!==void 0?s:a.inputs[u].default),r,t,e)}function WS(e,t){return Object.keys(t).reduce((n,r)=>(n[r]=HS(e,t,r),n),{})}function HS(e,t,n){const r=t[n].from;return r&&e[r.id]&&e[r.id][r.key]!==void 0?qS(e,r.id,r.key):t[n].value}function qS(e,t,n){return e[t][n]}function nf(e){return Object.values(e).map(t=>{var n;return(n=t.from)==null?void 0:n.id}).filter(t=>!!t)}function rf(e,t,n){var o;const r=t[n];if(!r)return{};const a=(o=e(r.type))==null?void 0:o.struct;return Object.keys(r.inputs).reduce((l,s)=>{var i;const u=r.inputs[s];if(!u.from)l[s]=!0;else if(!t[u.from.id])l[s]=!1;else{const d=(i=e(t[u.from.id].type))==null?void 0:i.struct;a&&d?l[s]=nn(Kn(a,r,s),Ca(d,t[u.from.id],u.from.key)):l[s]=!1}return l},{})}function JS(e,t,n={},r=!1){return af(e[t]?e[t]:js[t],n,r)}function Ai(e,t={},n=!1){return af(js[e],t,n)}function af(e,t={},n=!1){const l=t,{inputs:r}=l,a=Pa(l,["inputs"]),o=e.struct.create(a);return r&&(o.inputs=c(c({},o.inputs),t.inputs)),n&&(o.id=qe()),o}function ZS(e,t,n){const r=e(n.node.type),a=e(t.node.type);return!a||!r?!1:QS(Kn(r.struct,n.node,n.key),Ca(a.struct,t.node,t.key))}function QS(e,t){return e.type==="GENERICS"||t.type==="GENERICS"?!0:nn(e,t)}function ql(e,t,n){const r=t.inputs[n],a=of(e==null?void 0:e.inputs[n],r);if(!a){const l=c({},t.inputs);return delete l[n],g(c({},t),{inputs:l})}return g(c({},t),{inputs:g(c({},t.inputs),{[n]:a})})}function of(e,t){if(!e)return;const n=t;return n.genericsType?{genericsType:n.genericsType,value:Zl(n.genericsType)}:{value:e.default}}function lf(e,t,n={},r=a=>a.id){const a=e1(te(t,r),t),o=jo(e,c(c({},n),a));return c(c({},a),o)}function e1(e,t){return Object.entries(t).reduce((n,[r,a])=>(n[e[r]]=g(c({},a),{id:e[r],inputs:t1(e,a.inputs)}),n),{})}function t1(e,t){return te(t,n=>!n.from||!e[n.from.id]?n:g(c({},n),{from:{id:e[n.from.id],key:n.from.key}}))}function Vs(e){return e==="custom_begin_input"||e==="custom_begin_output"}function n1(e){return Vs(e)||e==="custom_input"||e==="custom_output"}function r1(e,t,n){const r={};return{nodes:t.filter(o=>!n[o.id]||Vs(o.type)).map(o=>g(c({},o),{inputs:te(o.inputs,(l,s)=>{var u,i;return!l.from||!n[l.from.id]?l:(r[o.id]=!0,{value:(i=(u=e(o.type))==null?void 0:u.struct.inputs[s].default)!=null?i:void 0})})})),updatedIds:r}}function a1(e,t){const n=new Set(t.map(l=>l.id)),r={},a=t.map(l=>{const s=Object.entries(l.inputs).reduce((u,[i,d])=>{var f;if(!d.from||n.has(d.from.id))return u[i]=d,u;r[l.id]=!0;const v=of((f=e(l.type))==null?void 0:f.struct.inputs[i],d);return v&&(u[i]=v),u},{});return g(c({},l),{inputs:s})}),o=jo(e,oe(a));return{nodes:a.map(l=>{var s;return(s=o[l.id])!=null?s:l}),updatedIds:c(c({},r),te(o,()=>!0))}}function sf(e,t){const n=e(t.type);return{inputs:Ds(n==null?void 0:n.struct,t),outputs:i1(n==null?void 0:n.struct,t)}}function o1(e,t){var o,l;if(e.node.id===t.node.id)return;const n=t.node.inputs[t.key];if(((o=n.from)==null?void 0:o.id)===e.node.id&&((l=n.from)==null?void 0:l.key)===e.key)return;const r={from:{id:e.node.id,key:e.key}};return g(c({},t.node),{inputs:g(c({},t.node.inputs),{[t.key]:r})})}function uf(e){const t={};return Object.entries(e).forEach(([n,r])=>{var a;(a=t[n])!=null||(t[n]={inputs:{},outputs:{}}),Object.entries(r.inputs).forEach(([o,l])=>{var s,u,i,d,v;!l.from||(t[n].inputs[o]=l.from,(u=t[s=l.from.id])!=null||(t[s]={inputs:{},outputs:{}}),(v=(i=t[l.from.id].outputs)[d=l.from.key])!=null||(i[d]=[]),t[l.from.id].outputs[l.from.key].push({id:n,key:o}))})}),t}function l1(e){return!!e&&e.type!==J.GENERICS}function cf(e,t){return!!e&&e.data[t].type.type===J.GENERICS}function s1(e,t,n,r,a){var o;return cf((o=e(t))==null?void 0:o.struct,n)?g(c({},r),{value:a}):a}function df(e,t,n){var o,l,s,u,i,d;const r=t.data[n],a=(o=e(t.type))==null?void 0:o.struct;return cf(a,n)?{type:(u=(s=r.genericsType)!=null?s:(l=a==null?void 0:a.data[n])==null?void 0:l.type)!=null?u:_.UNKNOWN,value:r.value}:{type:(d=(i=a==null?void 0:a.data[n])==null?void 0:i.type)!=null?d:_.UNKNOWN,value:r}}function Kn(e,t,n){var r,a,o;return(o=(a=t.inputs[n].genericsType)!=null?a:(r=e==null?void 0:e.inputs[n])==null?void 0:r.type)!=null?o:_.UNKNOWN}function Ds(e,t){return te(t.inputs,(n,r)=>Kn(e,t,r))}function u1(e,t,n){var a,o;const r=e(t);return(o=(a=r==null?void 0:r.struct.inputs[n])==null?void 0:a.type)!=null?o:_.UNKNOWN}function Ca(e,t,n){var r,a,o;return(o=(a=(r=e==null?void 0:e.getOutputType)==null?void 0:r.call(e,t,n))!=null?a:e==null?void 0:e.outputs[n])!=null?o:_.UNKNOWN}function i1(e,t){return e?te(e.outputs,(n,r)=>{var a,o;return(o=(a=e.getOutputType)==null?void 0:a.call(e,t,r))!=null?o:e.outputs[r]}):{}}function ff(e,t,n,r){const a={};return pf(e,t,n,r,{saveDoneItem:s=>{var u,i;(i=a[u=s.id])!=null||(a[u]={inputs:{},outputs:{}}),s.output?a[s.id].outputs[s.key]=!0:a[s.id].inputs[s.key]=!0},isDoneItem:s=>{var u,i;return s.output?!!((u=a[s.id])!=null&&u.outputs[s.key]):!!((i=a[s.id])!=null&&i.inputs[s.key])}})}function pf(e,t,n,r,a){var d,v;const o=t[r.id];if(!o)return[];if(a.isDoneItem(r))return[];const l=e(o.type);if(!l)return[];const s=(v=Ob(o.id,(d=l.struct.genericsChains)!=null?d:[])(r.key,r.output))!=null?v:[g(c({},r),{type:r.output?Ca(l.struct,o,r.key):Kn(l.struct,o,r.key)})];s.forEach(a.saveDoneItem);const u=n[o.id].inputs,i=n[o.id].outputs;return[...s,...s.flatMap(f=>{const m=[];if(f.output){const p=i[f.key];p&&p.forEach(y=>{m.push({id:y.id,key:y.key})})}else{const p=u[f.key];p&&m.push({id:p.id,key:p.key,output:!0})}return m.filter(p=>!a.isDoneItem(p)).flatMap(p=>pf(e,t,n,p,a))})]}function mf(e){var t;return(t=e.find(n=>l1(n.type)))==null?void 0:t.type}function Jl(e,t,n){const r=uf(t),a=ff(e,t,r,n),o=mf(a);return vf(e,t,a,o)}function vf(e,t,n,r){const a={};return n.forEach(o=>{var s,u,i;if(o.output)return;const l=(s=a[o.id])!=null?s:t[o.id];if(!!l)if(o.data){if(((i=(u=e(l.type))==null?void 0:u.struct.data[o.key])==null?void 0:i.type.type)!==J.GENERICS)return;const d=l.data[o.key];if(nn(d==null?void 0:d.genericsType,r))return;a[o.id]=g(c({},l),{data:g(c({},l.data),{[o.key]:{genericsType:r,value:Zl(r)}})})}else{if(u1(e,l.type,o.key).type!==J.GENERICS)return;const d=l.inputs[o.key];if(nn(d.genericsType,r))return;a[o.id]=g(c({},l),{inputs:g(c({},l.inputs),{[o.key]:g(c({},d),{genericsType:r,value:Zl(r)})})})}}),a}function Zl(e){if(!!e)switch(e.struct){case We.UNIT:case We.UNIT_OR_ARRAY:return Ii(e.type);case We.ARRAY:return[Ii(e.type)]}}function Ii(e){switch(e){case J.SCALER:return 0;case J.VECTOR2:return{x:0,y:0};case J.BOOLEAN:return!1;case J.TRANSFORM:case J.COLOR:return de();case J.STOP:return c1();case J.TEXT:case J.BONE:case J.OBJECT:case J.D:case J.INPUT:case J.OUTPUT:return"";case J.GENERICS:case J.UNKNOWN:return;default:{const t=e;throw new Error(`Unexpected value type: ${t}`)}}}function c1(){return{offset:0,color:de(),relative:!1}}function jo(e,t){const n=uf(t),r={},a={},o=ye(t).reduce((l,s)=>{var d;const u=(d=e(s.type))==null?void 0:d.struct;return u!=null&&u.genericsChains?u.genericsChains.filter(v=>v.length>0).reduce((v,f)=>{var b,w;const m=g(c({},f[0]),{id:s.id});if(m.output&&!!((b=r[s.id])!=null&&b.outputs[m.key])||(w=r[s.id])!=null&&w.inputs[m.key])return v;const p=ff(e,v,n,m);p.forEach(T=>{var O,A;(A=r[O=T.id])!=null||(r[O]={inputs:{},outputs:{}}),T.output?r[T.id].outputs[T.key]=!0:r[T.id].inputs[T.key]=!0});const y=mf(p),E=vf(e,v,p,y);return ye(E).forEach(T=>a[T.id]=!0),c(c({},v),E)},l):l},t);return Ze(o,a)}function d1(e,t){const n=YS(t);return ye(t).reduce((r,a)=>{var s,u,i;const o=(s=e(a.type))==null?void 0:s.struct,l=o?[...(i=(u=o.getErrors)==null?void 0:u.call(o,a))!=null?i:[],...Object.entries(rf(e,t,a.id)).filter(([d,v])=>!v).map(([d])=>{var v,f;return`Invalid input: ${(f=(v=o.inputs[d])==null?void 0:v.label)!=null?f:d}`}),...n[a.id]?["Circular connection is found"]:[]]:["Unknown node"];return l.length>0&&(r[a.id]=l),r},{})}function f1(e,t,n){const r=t,a=new Set;return Object.entries(n).forEach(([o,l])=>{Object.keys(l).forEach(s=>{const u=hf(e,r,o,s);Object.entries(u).forEach(([i,d])=>{r[i]=d,a.add(i)})})}),Array.from(a).reduce((o,l)=>(o[l]=r[l],o),{})}function hf(e,t,n,r){var i;const a=t[n],o=ql((i=e(a.type))==null?void 0:i.struct,a,r),l=a.inputs[r],s=Jl(e,g(c({},t),{[o.id]:o}),{id:o.id,key:r}),u=l!=null&&l.from?Jl(e,c(g(c({},t),{[o.id]:o}),s),{id:l.from.id,key:l.from.key,output:!0}):{};return c(c({[a.id]:o},s),u)}function Ti(e,t,n,r){var i;const a=(i=e(n))==null?void 0:i.struct;if(!a)return{};const o=$t(t,d=>d.type===n),l=new Set,s=te(o,d=>Object.keys(d.inputs).reduce((v,f)=>{var m;return nn((m=r.inputs[f])==null?void 0:m.type,Kn(a,v,f))?v:(l.add(d.id),ql(r,v,f))},d)),u=te(c(c({},t),s),d=>{var f;const v=(f=e(d.type))==null?void 0:f.struct;return v?Object.entries(d.inputs).reduce((m,[p,y])=>!y.from||!o[y.from.id]||nn(r.outputs[y.from.key],Kn(v,m,p))?m:(l.add(m.id),ql(v,m,p)),d):d});return c(c({},$t(u,(d,v)=>l.has(v))),jo(e,u))}function ki(e,t){return Object.entries(e.inputs).some(([n,r])=>{const a=t.inputs[n];return!a||!nn(r.type,a.type)})||Object.entries(e.outputs).some(([n,r])=>{const a=t.outputs[n];return!a||!nn(r,a)})}function p1(e,t,n){return te(t,r=>{var l;if(!n[r.id])return r;const a=(l=e(r.type))==null?void 0:l.struct;if(!a)return r;const o=rf(e,t,r.id);return g(c({},r),{inputs:te(r.inputs,(s,u)=>{var i;return o[u]?s:{value:(i=a.inputs[u])==null?void 0:i.default}})})})}function m1(){return Lo({id:"svg",tag:"svg",attributes:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 400 400","font-family":"sans-serif"}})}function v1(e){const r=new DOMParser().parseFromString(e,"image/svg+xml").getElementsByTagName("svg");if(!r||r.length===0)throw new Error("Not found SVG tag.");const a=r[0],o=g1(a),l=gf(a),s=Fo(l);return{actor:Ts({svgTree:l,viewBox:o,elements:s.map(u=>u.id)},!0),elements:s}}function h1(e,t){const n=oe(t);return Fo(e).map(a=>{var o;return c(c({},(o=n[a.id])!=null?o:{}),a)})}function Fo(e,t,n=0){return st(e)?[]:[yf(e,t,n),...e.children.flatMap((r,a)=>Fo(r,e.id,a))]}function yf(e,t,n=0){return Wy({id:e.id,tag:e.tag,parentId:t,index:n})}function gf(e){const t=e.id;return Lo({id:t,tag:e.tagName,attributes:Array.from(e.attributes).reduce((n,r)=>g(c({},n),{[r.name]:r.value}),{}),children:y1(e.childNodes)},!t)}function y1(e){return Array.from(e).map(t=>{var n;return t.nodeName==="#text"?((n=t.nodeValue)==null?void 0:n.trim())||"":gf(t)}).filter(t=>!!t)}function g1(e){const t=e.getAttribute("viewBox");return Vo(t||void 0)}function Vo(e){if(!e)return;const t=e.split(/ +/).map(n=>parseFloat(n));if(!(t.length<4))return{x:t[0],y:t[1],width:t[2],height:t[3]}}function b1(e,t,n,r){const a=oe(t),o=oe(n),l=oe(r),s=te(o,d=>oe(d.bones.map(v=>l[v]))),u=e.map(d=>o[d.armatureId]?d:g(c({},d),{armatureId:""})),i=u.flatMap(d=>{const v=d.armatureId?s[d.armatureId]:{};return d.elements.map(f=>{const m=a[f];return m.boneId?v[m.boneId]?m:g(c({},m),{boneId:""}):m})});return{actors:u,elements:i}}function _1(e,t){const n=oe(e.elements),r=oe(t.elements),a=ye(c(c({},oe(t.elements)),Ze(n,r)));return{actor:g(c({},t.actor),{armatureId:e.actor.armatureId}),elements:a}}function Ea(e){const t=e.filter(n=>!st(n));return t.concat(t.flatMap(n=>Ea(n.children)))}function bf(e){return!/defs|metadata|namedview|script|style|tspan/.test(e.toLowerCase())}function _f(e){return`${e.tag} #${e.id}`}function Sf(e){return{id:e.id,name:_f(e),children:e.children.filter(t=>!st(t)).filter(t=>bf(t.tag)).map(Sf)}}function S1(e){return Xa({id:e.id,elementId:e.id,tag:e.tag,parent:e.parentId,index:e.index})}function w1(e){if(!e)return;const t=Hr(e,[e.transform]);return{id:t.id,transform:de({translate:t.head,rotate:Wr(t)*180/Math.PI,scale:e.transform.scale}),height:Un(e.head,e.tail)}}function wf(e,t,n){const r=te(e,S1),a=Ty(t,w1),o=Ay(()=>br(ye(r),"parent"));function l(y){const E=o.getValue()[y];return E?E.length:0}function s(y,E){var w;if(E<0)return;const b=o.getValue()[y];if(!!b)return(w=b[E])==null?void 0:w.id}function u(y){r[y.id]=y,o.update()}function i(y,E){const b=o.getValue()[y];!b||b.forEach(w=>{E(w),i(w.id,E)})}function d(y){const E=o.getValue()[y];return E?[...E,...E.flatMap(b=>d(b.id))]:[]}function v(y,E={}){const b=r[y];if(!b)return;const w=E.id?p(E.id):void 0;return Xa(b.create?g(c(c({},b),E),{id:w}):g(c(c({},b),E),{id:w,clone:!0}),!w)}function f(y,E){const b=y.reduce((w,T,O)=>{const A=v(T.id,E?{id:`${E}_clone_${O}`}:void 0);return A&&(w[T.id]=A),w},{});return ye(b).map(w=>!w.parent||!b[w.parent]?w:g(c({},w),{parent:b[w.parent].id}))}const m=[];function p(y=""){return m.length>0?`${m.join("-")}-${y}`:y}return{setTransform(y,E,b=!1){const w=r[y];!w||(b&&w.transform&&E?w.transform=Bs(w.transform,E):w.transform=E)},getTransform(y){if(!!r[y])return r[y].transform},setFill(y,E){!r[y]||(r[y].fill=E,i(y,b=>{b.fill=E}))},setStroke(y,E){!r[y]||(r[y].stroke=E,i(y,b=>{b.stroke=E}))},setAttributes(y,E,b=!1){!r[y]||(r[y].attributes=b?E:c(c({},r[y].attributes),E))},getFrameInfo(){return n},getBoneSummary(y){return a.getValue(y)},getObjectMap(){return r},getChildId:s,getChildrenSize:l,cloneObject(y,E={},b){const w=r[y];if(!w)return"";const T=f([w,...d(y)],b),O=T[0];return Object.entries(E).forEach(([A,B])=>{O[A]=B}),O.index=w.parent?l(w.parent):0,T.forEach(u),O.id},createCloneGroupObject(y,E={}){const b=r[y];if(!b)return"";const w=E.id?p(E.id):void 0,T=b.parent,O=T?l(T):0,A=Xa(g(c({},E),{id:w,tag:"g",elementId:b.elementId,clone:!1,create:!0,index:O,parent:T}),!w);return u(A),A.id},createObject(y,E={}){const b=E.id?p(E.id):void 0,w=E.parent,T=w?l(w):0,O=Xa(g(c({},E),{id:b,tag:y,create:!0,index:T}),!b);return u(O),O.id},beginNamespace(y,E){m.push(y);const b=E();return m.pop(),b}}}function Oi(e,t,n,r,a){const o=wf(t,n,r);return Fs(e,o,a),o.getObjectMap()}function st(e){return typeof e=="string"}function $1(e,t,n){const r={};if(t.viewBoxBoneId){const a=e[t.viewBoxBoneId];if(a){const o=C1(n,a);o&&(r.viewBox=o)}}if(t.fillBoneId){const a=e[t.fillBoneId];if(a){const o=ia(a.transform);o&&(r.fill=o.color,r["fill-opacity"]=o.opacity)}}if(t.strokeBoneId){const a=e[t.strokeBoneId];if(a){const o=ia(a.transform);o&&(r.stroke=o.color,r["stroke-opacity"]=o.opacity)}}return r}function C1(e,t){const n=Vo(e.attributes.viewBox);if(!!n)return Do(ng(n,g(c({},t.transform),{origin:t.head})))}function ia(e){const t=qr(e);return{color:mg(t),opacity:t.a.toString()}}function E1(e){const t=qr(e);return Fr(vr(g(c({},t),{h:mr(0,360,t.h)})))}function qr(e){return{h:e.rotate,s:Ge(0,1,e.translate.x/100),v:Ge(0,1,e.translate.y/100),a:Ge(0,1,e.scale.x)}}function M1(e,t){return e.x===1&&e.y===1?"":[Pr(t)?"":`translate(${t.x},${t.y})`,`scale(${e.x},${e.y})`,Pr(t)?"":`translate(${-t.x},${-t.y})`].filter(n=>!!n).join(" ")}function A1(e){return[Pr(e.translate)?"":`translate(${e.translate.x},${e.translate.y})`,M1(e.scale,e.origin),e.rotate===0?"":`rotate(${e.rotate} ${e.origin.x} ${e.origin.y})`].filter(t=>!!t).join(" ")}function Bi(e,t=!1){if(e.length===0)return"";const[n,...r]=e;return`M${n.x},${n.y}`+r.map(a=>`L${a.x},${a.y}`).join("")+(t?"z":"")}function I1(e,t,n){const r=Math.max(n.width,n.height)*2,a=Oe(t,r);return{from:ge(e,a),to:ce(e,a)}}function Do(e){return[ft(-1,e.x),ft(-1,e.y),ft(-1,e.width),ft(-1,e.height)].join(" ")}function $f(e=""){return e.split(";").map(t=>t.split(":")).reduce((t,n)=>(n.length===2&&(t[n[0].trim()]=n[1].trim()),t),{})}function Cf(e){return Object.entries(e).filter(t=>t[1]).map(t=>`${t[0]}:${t[1]};`).join("")}function Ef(e){return!e.fill&&!e.stroke?e:g(c({},e),{style:Cf(c(c(c({},$f(e.style)),e.fill?{fill:e.fill}:{}),e.stroke?{stroke:e.stroke}:{}))})}function Mf(e,t,n){return Object.keys(n).reduce((r,a)=>(r[a]=t+e*(n[a]+1),r),{})}const T1=["translateX","translateY","rotate","scaleX","scaleY"];function Af(e,t){return t.filter(n=>e[n]).reduce((n,r,a)=>(n[r]=a,n),{})}function k1(e,t={}){return{id:e.id,name:e.name,children:Af(t,T1)}}const O1=["influence"];function B1(e,t,n={}){return{id:t.id,name:`${e.name}:${t.name}`,children:Af(n,O1)}}function L1(e,t,n,r=0){let a=r*n;return e.reduce((o,l)=>(o[l.id]=a,a=a+n*(t[l.id]?Object.keys(l.children).length+1:1),o),{})}const _n=30,Gn=20;function R1(e,t){return c({x:t.position.x,y:t.position.y},xs(e,t))}function xs(e,t){const n=P1(Object.keys(t.inputs).length),r=e(t.type);if(!r)return{width:100,height:_n+n};const a=If(r.struct),o=Us(Object.keys(r.struct.outputs).length);return{width:r.struct.width,height:_n+Math.max(o+a+n,20)}}function If(e){const t=Object.values(e.data);return t.length===0?0:t.reduce((n,r)=>n+kf(r.type),0)}function P1(e){return e===0?0:Gn*(.3+e)}function Us(e){return e===0?0:Gn*(.5+e)}function N1(e,t){const n=e(t.type);if(!n)return{};const r=Us(Object.keys(n.struct.outputs).length);let a=_n+r;return Object.entries(n.struct.data).reduce((o,[l,s])=>(o[l]={x:8,y:a},a=a+kf(s.type),o),{})}function j1(e,t){const n=e(t.type),r=n?If(n.struct):0,a=n?Us(Object.keys(n.struct.outputs).length):0,o={x:0,y:t.type==="reroute"?Gn/2:_n+a+r+Gn/2};return Tf(n==null?void 0:n.struct,Object.entries(sf(e,t).inputs).map(([l,s])=>({key:l,type:s})),o)}function F1(e,t){const n=e(t.type);if(!n)return{};const r={x:xs(e,t).width,y:t.type==="reroute"?Gn/2:_n+Gn*2/3};return Tf(n.struct,Object.entries(sf(e,t).outputs).map(([a,o])=>({key:a,type:o})),r,!0)}function V1(e,t){const n=j1(e,t),r=F1(e,t);return{inputs:n,outputs:r}}function Tf(e,t,n={x:0,y:0},r=!1){return t.reduce((a,{key:o,type:l},s)=>{var u;return a[o]={p:ce(n,{x:0,y:Gn*s}),type:l,label:(u=D1(e,o,r))!=null?u:o},a},{})}function D1(e,t,n=!1){return n?e!=null&&e.outputs[t]?e.outputs[t].label:"UNKNOWN":e!=null&&e.inputs[t]?e.inputs[t].label:"UNKNOWN"}function kf(e){switch(e){case"SCALER":return 48;default:return 48}}const Of={BOOLEAN:"#b22222",SCALER:"#555",VECTOR2:"#daa520",TRANSFORM:"#a0522d",BONE:"#4b0082",OBJECT:"#ee82ee",COLOR:"#32cd32",TEXT:"#808000",D:"#00bfff",STOP:"#8b008b",GENERICS:"#b0c4de",INPUT:"#ff7f50",OUTPUT:"#df7698",UNKNOWN:"#fff"};function x1(e,t){switch(e.type){case J.OBJECT:return gn(t,6);case J.SCALER:{const n=e.enumKey;return n?ya(n,t):gn(t,6)}case J.VECTOR2:return`${gn(t.x,4)}, ${gn(t.y,4)}`;case J.BOOLEAN:return t?"true":"false";case J.COLOR:return Fr(vr(qr(t)));case J.D:return gn(t.join(" "),6);default:return""}}function gn(e,t){const n=e.toString();return n.length<=t?n:n.slice(0,t)+".."}function Bf(e,t){const n=Math.sqrt(Math.abs(e.x-t.x))*8;return`M${e.x+5},${e.y} C${e.x+n},${e.y} ${t.x-n},${t.y} ${t.x-5},${t.y}`}var ee=(e,t)=>{const n=e.__vccOpts||e;for(const[r,a]of t)n[r]=a;return n};const U1=Q({props:{canvasMode:{type:String,required:!0}},emits:["change-mode"],setup(e,{emit:t}){return{changeMode(n){t("change-mode",n)}}}}),K1={class:"cnavas-mode-panel"};function G1(e,t,n,r,a,o){return S(),k("div",K1,[C("button",{class:pt({selected:e.canvasMode==="object"}),onClick:t[0]||(t[0]=l=>e.changeMode("object"))}," Object ",2),C("button",{class:pt({selected:e.canvasMode==="edit"}),onClick:t[1]||(t[1]=l=>e.changeMode("edit"))}," Edit ",2),C("button",{class:pt({selected:e.canvasMode==="pose"}),onClick:t[2]||(t[2]=l=>e.changeMode("pose"))}," Pose ",2),C("button",{class:pt({selected:e.canvasMode==="weight"}),onClick:t[3]||(t[3]=l=>e.changeMode("weight"))}," Weight ",2)])}var z1=ee(U1,[["render",G1],["__scopeId","data-v-0c0b9ed4"]]);const Y1=Q({props:{availableCommandList:{type:Array,default:()=>[]}}}),X1={key:0,class:"canvas-command"},W1={key:0,class:"command"};function H1(e,t,n,r,a,o){return S(),Se(As,null,{default:Y(()=>[e.availableCommandList.length>0?(S(),k("div",X1,[C("ul",null,[(S(!0),k(ve,null,Ae(e.availableCommandList,l=>(S(),k("li",{key:l.command},[l.command?(S(),k("span",W1,Ve(l.command)+":",1)):fe("",!0),C("span",null,Ve(l.title),1)]))),128))])])):fe("",!0)]),_:1})}var Ks=ee(Y1,[["render",H1],["__scopeId","data-v-0bc04f4c"]]);const q1=Q({props:{label:{type:String,required:!0},items:{type:Array,default:()=>[]}},setup(){const e=H(),t=H(!1);function n(r){var a;r.target instanceof Element&&((a=e.value)!=null&&a.contains(r.target)||(t.value=!1))}return bt(t,r=>{r?window.addEventListener("mousemove",n):window.removeEventListener("mousemove",n)}),{root:e,opened:t,toggle(){t.value=!t.value},exec(r){r==null||r(),t.value=!1}}}}),J1={ref:"root",class:"dropdown-menu"},Z1={key:0,class:"drop-menu"},Q1=["onClick"],ew={key:0};function tw(e,t,n,r,a,o){return S(),k("div",J1,[C("button",{type:"button",onClick:t[0]||(t[0]=(...l)=>e.toggle&&e.toggle(...l))},Ve(e.label),1),e.opened?(S(),k("ul",Z1,[(S(!0),k(ve,null,Ae(e.items,l=>(S(),k(ve,{key:l.label},[C("li",null,[C("button",{type:"button",onClick:s=>e.exec(l.exec)},Ve(l.label),9,Q1)]),l.underline?(S(),k("hr",ew)):fe("",!0)],64))),128))])):fe("",!0)],512)}var nw=ee(q1,[["render",tw],["__scopeId","data-v-66e20df6"]]);const rw=Q({components:{DropdownMenu:nw},props:{groups:{type:Array,default:()=>[]}}}),aw={class:"group-wrapper"};function ow(e,t,n,r,a,o){const l=F("DropdownMenu");return S(),k("div",aw,[(S(!0),k(ve,null,Ae(e.groups,s=>(S(),Se(l,{key:s.label,items:s.items,label:s.label,class:"group"},null,8,["items","label"]))),128))])}var lw=ee(rw,[["render",ow],["__scopeId","data-v-8e9133a4"]]);const sw=["transform"],uw=C("rect",{width:"10",height:"10",stroke:"none",fill:"#888"},null,-1),iw=C("path",{d:"M2 7L8 7L5 2z","stroke-linejoin":"round",stroke:"none",fill:"#fff"},null,-1),cw=[uw,iw],Gs=Q({props:{flipped:{type:Boolean,default:!1},right:{type:Boolean,default:!1}},setup(e){return(t,n)=>(S(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",transform:`rotate(${e.right?90:0}) scale(1, ${e.flipped?-1:1})`},cw,8,sw))}});const Li=26,dw=Q({name:"PopupMenuList",components:{UpIcon:Gs},props:{popupMenuList:{type:Array,required:!0}},setup(e){const t=h(()=>e.popupMenuList.findIndex(o=>o.focus)),n=h(()=>{const o=t.value;return o!==-1?`translateY(-${o*Li}px)`:""}),r=h(()=>e.popupMenuList.findIndex(o=>o.opened)),a=h(()=>r.value*Li-1);return{focusedIndex:t,transform:n,chldrenTop:a}}}),fw=["onClick","onMousemove"];function pw(e,t,n,r,a,o){const l=F("UpIcon"),s=F("PopupMenuList",!0);return S(),k("div",{class:"popup-menu-list-wrapper",style:at({transform:e.transform})},[C("ul",null,[(S(!0),k(ve,null,Ae(e.popupMenuList,u=>(S(),k("li",{key:u.label},[C("button",{onClick:u.exec,onMousemove:u.hover},[Kt(Ve(u.label)+" ",1),u.children?(S(),Se(l,{key:0,right:"",class:"right-arrow"})):fe("",!0)],40,fw),u.children&&u.opened?(S(),Se(s,{key:0,"popup-menu-list":u.children,style:at({top:`${e.chldrenTop}px`}),class:"children"},null,8,["popup-menu-list","style"])):fe("",!0)]))),128))])],4)}var zs=ee(dw,[["render",pw],["__scopeId","data-v-294f7aea"]]);const mw=window.navigator.userAgent.toLowerCase();function vw(){return mw.indexOf("mac os x")!==-1}function Qt(e){return e.ctrlKey||e.metaKey}function Vt(){return vw()?"Command":"Ctrl"}function hw(e,t){var n,r,a;Qt(e)?(n=t.ctrl)==null||n.call(t):e.shiftKey?(r=t.shift)==null||r.call(t):(a=t.plain)==null||a.call(t)}function hr(e){return{shift:e.shiftKey,ctrl:Qt(e),button:e.button}}function fo(e){return{key:e.key,shift:e.shiftKey,ctrl:Qt(e)}}function Ri(e){return!e.shift&&!!e.ctrl&&(e.key==="v"||e.key==="c")}const Lf=$n({size:{width:window.innerWidth,height:window.innerHeight}});window.addEventListener("resize",()=>{Lf.size={width:window.innerWidth,height:window.innerHeight}});function Ys(){return{state:Lf}}function Ma(e){return Ut(()=>{window.addEventListener("mousemove",e)}),yr(()=>{window.removeEventListener("mousemove",e)}),{}}function Aa(e){return Ut(()=>{window.addEventListener("mouseup",e),window.addEventListener("mouseleave",e)}),yr(()=>{window.removeEventListener("mouseup",e),window.removeEventListener("mouseleave",e)}),{}}function xo(e){let t=!1,n={x:0,y:0};const r=H({x:0,y:0}),a=H(),o=H("move");Ma(u=>{var f,m;if(!t||!a.value){const p={x:u.pageX,y:u.pageY},y=ge(r.value,p);r.value=p,(f=e.onGlobalMove)==null||f.call(e,c({base:n,p,d:y},hr(u)));return}const i={x:o.value==="move-v"?0:u.movementX,y:o.value==="move-h"?0:u.movementY};if(pr(i)>200)return;const d=hr(u);a.value=ce(a.value,Oe(i,d.shift?.1:1)),r.value=a.value;const v=c({base:n,p:a.value,d:i},d);(m=e.onGlobalMove)==null||m.call(e,v),e.onMove(v)});function l(){a.value=void 0,t=!1,document.exitPointerLock()}Aa(u=>{var i;t&&(l(),(i=e.onUp)==null||i.call(e,u))});function s(){var u;t&&!document.pointerLockElement&&(t=!1,(u=e.onEscape)==null||u.call(e))}return document.addEventListener("pointerlockchange",s),yr(()=>{document.removeEventListener("pointerlockchange",s)}),{globalCurrent:h(()=>r.value),current:h(()=>a.value),motion:o,requestPointerLock(u,i="move"){n=r.value,o.value=i,a.value=r.value,u.preventDefault(),u.target.requestPointerLock(),t=!0},requestPointerLockFromElement(u,i="move"){n=r.value,o.value=i,a.value=r.value,u.requestPointerLock(),t=!0},exitPointerLock:l}}const Cr=13,yw=Q({props:{p:{type:Object,default:void 0},cursor:{type:String,default:"move"},rotate:{type:Number,default:0}},setup(e){const t=Ys(),n=h(()=>{if(!!e.p)return{x:mr(0,t.state.size.width,e.p.x),y:mr(0,t.state.size.height,e.p.y)}}),r=H();let a=0;return bt(()=>e.p,(o,l)=>{!l&&o?(r.value=o,clearTimeout(a)):l&&!o&&(a=setTimeout(()=>{r.value=void 0},200))}),{originTransform:h(()=>{if(!!r.value)return`translate(${r.value.x-Cr}px, ${r.value.y-Cr}px)`}),transform:h(()=>n.value?`translate(${n.value.x-Cr}px, ${n.value.y-Cr}px)`:r.value?`translate(${r.value.x-Cr}px, ${r.value.y-Cr}px)`:void 0),rotateList:h(()=>{switch(e.cursor){case"move":return[0,90];case"move-h":return[0];case"move-v":return[90]}return[]})}}}),Ia=e=>(it("data-v-3960cf20"),e=e(),ct(),e),gw=["transform"],bw=Ia(()=>C("circle",{r:"2"},null,-1)),_w=["transform"],Sw=Ia(()=>C("path",{d:"M20,0L10,-10L10,10z"},null,-1)),ww=Ia(()=>C("path",{d:"M-20,0L-10,-10L-10,10z"},null,-1)),$w=[Sw,ww],Cw=Ia(()=>C("line",{x1:"-10",x2:"10"},null,-1)),Ew=Ia(()=>C("line",{y1:"-10",y2:"10"},null,-1)),Mw=[Cw,Ew];function Aw(e,t,n,r,a,o){return e.transform?(S(),Se(nd,{key:0,to:"body"},[(S(),k("svg",{class:pt(["global-cursor",{fade:!e.p}]),style:at({transform:e.transform}),xmlns:"http://www.w3.org/2000/svg",viewBox:"-20 -20 40 40",stroke:"none",fill:"#000"},[C("g",{transform:`rotate(${e.rotate})`},[bw,(S(!0),k(ve,null,Ae(e.rotateList,l=>(S(),k("g",{key:l,transform:`rotate(${l})`},$w,8,_w))),128))],8,gw)],6)),e.originTransform?(S(),k("svg",{key:0,class:"global-cursor",style:at({transform:e.originTransform}),xmlns:"http://www.w3.org/2000/svg",viewBox:"-20 -20 40 40",stroke:"#000"},Mw,4)):fe("",!0)])):fe("",!0)}var Iw=ee(yw,[["render",Aw],["__scopeId","data-v-3960cf20"]]);function cl(e={}){var O,A,B;const t=(O=e.scale)!=null?O:H(1),n=(A=e.viewOrigin)!=null?A:H({x:0,y:0}),r=(B=e.viewSize)!=null?B:H({width:600,height:100});function a(M){r.value=M}const o=H(),l=H(),s=H();function u(M){s.value=M}const i=H({x:0,y:0});function d(M){i.value=M}const v=h(()=>{if(!i.value||!l.value||l.value.dragType!=="rect-select")return;const M=ge(i.value,l.value.downAt);return Pd(g(c({},l.value.downAt),{width:M.x,height:M.y}))}),f=h(()=>{if(!!v.value)return g(c({},b(v.value)),{width:v.value.width*t.value,height:v.value.height*t.value})}),m=h(()=>f.value&&(Math.abs(f.value.width)>0||Math.abs(f.value.height)>0)),p=h(()=>({x:n.value.x,y:n.value.y,width:r.value.width*t.value,height:r.value.height*t.value})),y=h(()=>vd(c({x:0,y:0},r.value))),E=h(()=>Do(p.value));function b(M){return ce(n.value,Oe(M,t.value))}function w(M){return Oe(ge(M,n.value),1/t.value)}function T(M){return e.ignoreNegativeY?{x:M.x,y:Math.max(M.y,0)}:M}return{viewSize:r,setViewSize:a,editStartPoint:s,setEditStartPoint:u,mousePoint:i,setMousePoint:d,scale:t,viewOrigin:n,dragRectangle:f,isValidDragRectangle:m,dragInfo:l,viewMovingInfo:o,viewCenter:y,viewBox:E,viewCanvasRect:p,viewToCanvas:b,canvasToView:w,wheel(M,P=!1){var N,V;const R=!P&&i.value?i.value:y.value,x=b(R);t.value=Math.min(Math.max(t.value*Math.pow(Ro,M.deltaY>0?1:-1),(N=e.scaleMin)!=null?N:0),(V=e.scaleMax)!=null?V:10),e.scaleAtFixY?n.value=ce(n.value,ge(x,g(c({},b(R)),{y:x.y}))):n.value=ce(n.value,ge(x,b(R)))},downLeft(M=""){!i.value||(l.value={dragType:M,downAt:i.value})},upLeft(){l.value=void 0},downMiddle(){!i.value||(u(),o.value={origin:c({},n.value),downAt:c({},i.value)})},upMiddle(){o.value=void 0},leave(){o.value=void 0},viewMove(){!o.value||!i.value||(n.value=T(ce(o.value.origin,Oe(ge(o.value.downAt,i.value),t.value))))},adjustToCenter(){const M=r.value,P=Xs(M,M);n.value=ge(P.viewOrigin,Oe({x:M.width,y:M.height},1/2)),t.value=P.scale}}}function Xs(e,t,n=0){const r={width:t.width-n,height:t.height-n},a=r.width/e.width,o=r.height/e.height;if(a<o){const l=1/a,s=-n*l/2;return{viewOrigin:{x:s,y:s+(e.height/l-r.height)/2*l},scale:l}}else{const l=1/o,s=-n*l/2;return{viewOrigin:{x:s+(e.width/l-r.width)/2*l,y:s},scale:l}}}function Ws(e){un("getScale",e)}function pn(){return Yt("getScale",()=>1)}function Tw(){const e=h(pn());return t=>{if(t.getBBox)return t.getBBox();const n=t.getBoundingClientRect();return{width:n.width*e.value,height:n.height*e.value}}}function Rf(e={}){var P,R,x;const t=(P=e.scale)!=null?P:H(1),n=(R=e.viewOrigin)!=null?R:H({x:0,y:0}),r=(x=e.viewSize)!=null?x:H({width:600,height:100});function a(N){r.value=N}const o=H(),l=h(()=>o.value==="drag"),s=H(),u=H();function i(){o.value=void 0}function d(){o.value="move",s.value=f.value,u.value=n.value}function v(){o.value="drag",s.value=f.value,u.value=n.value}const f=H({x:0,y:0});function m(N){f.value=N}const p=h(()=>({x:n.value.x,y:n.value.y,width:r.value.width*t.value,height:r.value.height*t.value})),y=h(()=>vd(c({x:0,y:0},r.value))),E=h(()=>Do(p.value)),b=H(!1);function w(N=!1){b.value=N}const T=h(()=>{if(!b.value||!f.value||!s.value)return;const N=ge(f.value,s.value);return Pd(g(c({},s.value),{width:N.x,height:N.y}))}),O=h(()=>{if(!!T.value)return g(c({},A(T.value)),{width:T.value.width*t.value,height:T.value.height*t.value})});function A(N){return ce(n.value,Oe(N,t.value))}function B(N){return Oe(ge(N,n.value),1/t.value)}function M(N){return e.ignoreNegativeY?{x:N.x,y:Math.max(N.y,0)}:N}return{viewSize:r,setViewSize:a,editStartPoint:s,mousePoint:f,setMousePoint:m,scale:t,viewOrigin:n,dragged:l,endMoving:i,startMoving:d,startDragging:v,viewCenter:y,viewBox:E,viewCanvasRect:p,viewToCanvas:A,canvasToView:B,wheel(N,V=!1){var je,Pe;const le=!V&&f.value?f.value:y.value,be=A(le);t.value=Math.min(Math.max(t.value*Math.pow(Ro,N.deltaY>0?1:-1),(je=e.scaleMin)!=null?je:0),(Pe=e.scaleMax)!=null?Pe:10),e.scaleAtFixY?n.value=ce(n.value,ge(be,g(c({},A(le)),{y:be.y}))):n.value=ce(n.value,ge(be,A(le)))},viewMove(N){!u.value||(n.value=M(ce(u.value,ge(N.start,N.current))))},adjustToCenter(){const N=r.value,V=Xs(N,N);n.value=ge(V.viewOrigin,Oe({x:N.width,y:N.height},1/2)),t.value=V.scale},setRectangleDragging:w,draggedRectangle:O}}const kw=Q({props:{origin:{type:Object,required:!0},current:{type:Object,required:!0}},setup(e){const t=pn();return{scale:h(t),rotate:h(()=>Tt(e.current,e.origin)/Math.PI*180)}}}),Ow={fill:"black",stroke:"black"},Bw=["transform"],Lw=C("circle",{r:"2"},null,-1),Rw=[Lw],Pw=["x1","y1","x2","y2","stroke-width","stroke-dasharray"];function Nw(e,t,n,r,a,o){return S(),k("g",Ow,[C("g",{transform:`translate(${e.origin.x}, ${e.origin.y}) rotate(${e.rotate}) scale(${e.scale})`},Rw,8,Bw),C("line",{x1:e.origin.x,y1:e.origin.y,x2:e.current.x,y2:e.current.y,"stroke-width":e.scale,"stroke-dasharray":`${2*e.scale} ${2*e.scale}`},null,8,Pw)])}var jw=ee(kw,[["render",Nw]]);const Fw=Q({props:{x:{type:Number,default:0},y:{type:Number,default:0},width:{type:Number,default:100},height:{type:Number,default:100}}}),Vw=["x","y","width","height"];function Dw(e,t,n,r,a,o){return S(),k("rect",{x:e.x,y:e.y,width:e.width,height:e.height,fill:"#1e90ff","fill-opacity":"0.2",stroke:"none"},null,8,Vw)}var Pf=ee(Fw,[["render",Dw]]);const xw=Q({emits:["copy","paste","keydown","keyup"],setup(e,{emit:t}){const n=H();function r(){document.addEventListener("copy",o),document.addEventListener("paste",l)}function a(){document.removeEventListener("copy",o),document.removeEventListener("paste",l)}yr(a);function o(f){t("copy",f)}function l(f){t("paste",f)}function s(){var f;(f=n.value)==null||f.focus()}function u(f){Ri(fo(f))||f.preventDefault(),t("keydown",f)}function i(f){Ri(fo(f))||f.preventDefault(),t("keyup",f)}function d(){r()}function v(){a()}return(f,m)=>(S(),k("div",{ref_key:"root",ref:n,tabindex:"-1",onMouseenter:s,onKeydown:u,onKeyup:i,onFocus:d,onBlur:v},[vt(f.$slots,"default",{},void 0,!0)],544))}});var Nf=ee(xw,[["__scopeId","data-v-6bc7983e"]]);const Uw=$n({selectedColor:"orange",historyMax:64,showBoneName:!0,boneOpacity:1,showViewbox:!0,showAxis:!0,graphValueWidth:5});function Et(){return{settings:Uw}}/*!
 * okahistory v0.0.8
 * (c) miyanokomiya <tomoya.hstexze24632@gmail.com>
 * Released under the MIT License.
 */function Pi(e){return function(t){if(Array.isArray(t))return dl(t)}(e)||function(t){if(typeof Symbol!="undefined"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,n){if(!!t){if(typeof t=="string")return dl(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dl(t,n)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dl(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kw(){var e,t,n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=(e=r.max)!==null&&e!==void 0?e:64,o=(t=r==null?void 0:r.onUpdated)!==null&&t!==void 0?t:function(){},l=(n=r==null?void 0:r.avoidOverriding)!==null&&n!==void 0&&n,s={},u=[],i=-1;function d(R){u=R,o()}function v(R,x){if(l&&s[R])throw new Error("The name of this reducer has been defined already. name: ".concat(R)+"Rename it or see `avoidOverriding` option.");s[R]=x}function f(R,x){v(R,x)}function m(R){for(var x in R)v(x,R[x]);return{dispatch:p,createAction:function(N,V){return{name:N,args:V}}}}function p(R,x){var N;if(R){var V=fl(s,R.name);if(V.ignoreDuplication&&i!==-1){var le=u[i];if(le.name===R.name&&((N=V.checkDuplicationFn)!==null&&N!==void 0?N:Yw)(R.args,le.redoArgs))return}y({name:R.name,redoArgs:R.args,undoArgs:V.redo(R.args),seriesKey:R.seriesKey,children:x==null?void 0:x.filter(function(be){return!!be}).map(function(be){var je=fl(s,be.name);return{name:be.name,redoArgs:be.args,undoArgs:je.redo(be.args)}})})}}function y(R){var x;if(i<u.length-1&&u.splice(i+1,u.length-i),R.seriesKey){var N=zw(u,function(be){return Gw(be,R)});if(N.isTrue.length>0){var V=N.isTrue[0];if(Xw(V,R)){var le=Object.assign(Object.assign({},R),{undoArgs:V.undoArgs,children:(x=R.children)===null||x===void 0?void 0:x.map(function(be,je){return Object.assign(Object.assign({},be),{undoArgs:V.children[je].undoArgs})})});d(N.isFalse.concat(le))}else u.push(R)}else u.push(R)}else u.push(R);u.length>a&&u.shift(),i=u.length-1,o()}function E(){i<u.length-1&&(b(),o())}function b(){var R,x=u[i+1];s[x.name].redo(x.redoArgs),(R=x.children)===null||R===void 0||R.forEach(function(N){return s[N.name].redo(N.redoArgs)}),i+=1}function w(){-1<i&&(T(),o())}function T(){var R,x=u[i];(R=x.children)===null||R===void 0||R.concat().reverse().forEach(function(N){return s[N.name].undo(N.undoArgs)}),s[x.name].undo(x.undoArgs),i-=1}function O(R){var x=Math.min(u.length-1,Math.max(-1,R));x<i?(Pi(Array(i-x)).forEach(function(){return T()}),o()):x>i&&(Pi(Array(x-i)).forEach(function(){return b()}),o())}function A(){return u.map(function(R,x){var N,V,le=fl(s,R.name);return{name:R.name,label:(V=(N=le.getLabel)===null||N===void 0?void 0:N.call(le,{name:R.name,args:R.redoArgs}))!==null&&V!==void 0?V:R.name,done:x<=i}})}function B(){return{version:"0",stack:u,currentStackIndex:i}}function M(R){d(R.stack.concat()),i=R.currentStackIndex}function P(){d([]),i=-1}return{defineReducer:f,defineReducers:m,dispatch:p,redo:E,undo:w,jump:O,getCurrentIndex:function(){return i},getActionSummaries:A,serialize:B,deserialize:M,clear:P}}function fl(e,t){var n=e[t];if(!n)throw new Error("not found a reducer for the action: ".concat(t));return n}function Gw(e,t){return!!e.seriesKey&&!!t.seriesKey&&e.seriesKey===t.seriesKey}function zw(e,t){var n={isTrue:[],isFalse:[]};return e.forEach(function(r){return t(r)?n.isTrue.push(r):n.isFalse.push(r)}),n}function Yw(e,t){return e===t}function Xw(e,t){return e.name===t.name&&(e.children===t.children||!!e.children&&!!t.children&&e.children.length===t.children.length&&e.children.every(function(n,r){return n.name===t.children[r].name}))}function Ww(e=()=>64){const t=Kw({max:e(),onUpdated:a}),n=H(-1),r=H([]);function a(){n.value=t.getCurrentIndex(),r.value=t.getActionSummaries()}return{historySummaries:h(()=>r.value),currentItemIndex:h(()=>n.value),clear:t.clear,dispatch:t.dispatch,undo:t.undo,redo:t.redo,defineReducers:t.defineReducers}}const{settings:Hw}=Et(),qw=Ww(()=>Hw.historyMax);function Yn(){return qw}function Jw(e,t,n){const r=Array.isArray(n)?Cn(n,()=>!0):n,a=oe(t),o={created:[],updated:[],deleted:[]};e.allIds.forEach((i,d)=>{!r[i]||(a[i]?(o.updated.push(e.byId[i]),e.byId[i]=a[i]):(o.deleted.push({entity:e.byId[i],index:d}),delete e.byId[i]))});const l=oe(o.deleted.map(i=>i.entity));e.allIds=e.allIds.filter(i=>!l[i]);const s=t.filter(i=>!e.byId[i.id]),u=s.map(i=>i.id);return Object.assign(e.byId,oe(s)),e.allIds.push(...u),o.created.push(...u),o}function Zw(e,t){t.created.forEach(r=>{delete e.byId[r]});const n=Cn(t.created,()=>!0);e.allIds=e.allIds.filter(r=>!n[r]),t.deleted.concat().sort((r,a)=>r.index-a.index).forEach(r=>{e.byId[r.entity.id]=r.entity,e.allIds.splice(r.index,0,r.entity.id)}),t.updated.forEach(r=>{e.byId[r.id]=r})}function Jt(e){return e.allIds.map(t=>e.byId[t])}function Bt(e){return{byId:oe(e),allIds:e.map(t=>t.id)}}/*!
 * okaselect v0.0.11
 * (c) miyanokomiya <tomoya.hstexze24632@gmail.com>
 * Released under the MIT License.
 */function jf(e){return e instanceof Map?Array.from(e.entries()):Object.entries(e)}function Ff(e){var t=Array.from(e.keys());return t.length===0?void 0:t[t.length-1]}function Ql(e,t){return e.every(function(n){return t[n]})}function Qw(e,t){return e?Object.keys(e).reduce(function(n,r){return t[r]||(n[r]=!0),n},{}):{}}function e$(e,t){return e?Object.assign(Object.assign({},e),t):t}function t$(e){return e.reduce(function(t,n){return t[n]=!0,t},{})}function n$(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(t=n.onUpdated)!==null&&t!==void 0?t:function(){},a=new Map;function o(){return Array.from(a.keys())}function l(){return o().reduce(function(T,O){return T[O]=!0,T},{})}function s(){var T=e();return o().map(function(O){return T[O]})}function u(){var T=e();return o().reduce(function(O,A){return O[A]=T[A],O},{})}function i(){return Ff(a)}function d(){var T=Object.keys(e());return T.length>0&&T.every(function(O){return a.has(O)})}function v(){return!!i()}function f(T){var O=arguments.length>1&&arguments[1]!==void 0&&arguments[1];r$(a,T,O),r()}function m(T){var O=arguments.length>1&&arguments[1]!==void 0&&arguments[1],A=T.filter(function(B){return a.has(B)});O?(A.length===T.length?A.forEach(function(B){return a.delete(B)}):T.forEach(function(B){return a.set(B,!0)}),r()):(a=new Map(T.map(function(B){return[B,!0]})),r())}function p(){var T=arguments.length>0&&arguments[0]!==void 0&&arguments[0];T&&d()?a.clear():a=new Map(Object.keys(e()).map(function(O){return[O,!0]})),r()}function y(T){a.delete(T),r()}function E(){a.clear(),r()}function b(){return Array.from(a.entries())}function w(T){a=new Map(T),r()}return{getSelected:l,getSelectedList:o,getSelectedItemList:s,getSelectedItems:u,getLastSelected:i,isAllSelected:d,isAnySelected:v,select:f,multiSelect:m,selectAll:p,clear:y,clearAll:E,createSnapshot:b,restore:w}}function r$(e,t){var n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];n?e.has(t)?e.delete(t):e.set(t,!0):(e.clear(),e.set(t,!0))}function pl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ir(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){var a=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var o,l,s=[],u=!0,i=!1;try{for(a=a.call(n);!(u=(o=a.next()).done)&&(s.push(o.value),!r||s.length!==r);u=!0);}catch(d){i=!0,l=d}finally{try{u||a.return==null||a.return()}finally{if(i)throw l}}return s}}(e,t)||function(n,r){if(!!n){if(typeof n=="string")return Ni(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);if(a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set")return Array.from(n);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ni(n,r)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ni(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a$(e,t){var n,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=(n=r.onUpdated)!==null&&n!==void 0?n:function(){},o=new Map;function l(){return Array.from(o.entries()).reduce(function(w,T){var O=ir(T,2),A=O[0],B=O[1];return w[A]=B,w},{})}function s(){return Ff(o)}function u(){return Array.from(o.entries()).filter(function(w){var T=ir(w,2)[1];return Ql(t,T)}).map(function(w){return ir(w,1)[0]})}function i(){var w=Object.keys(e());return w.length>0&&w.every(function(T){var O=o.get(T);return O&&Ql(t,O)})}function d(){return!!s()}function v(w,T){var O=arguments.length>2&&arguments[2]!==void 0&&arguments[2];o$(o,w,T,O),a()}function f(w){var T=arguments.length>1&&arguments[1]!==void 0&&arguments[1];l$(o,w,T),a()}function m(){var w=arguments.length>0&&arguments[0]!==void 0&&arguments[0];w&&i()?o.clear():o=new Map(Object.keys(e()).map(function(T){return[T,t$(t)]})),a()}function p(w,T){s$(o,w,T),a()}function y(){o.clear(),a()}function E(){return Array.from(o.entries())}function b(w){o=new Map(w),a()}return{getSelected:l,getLastSelected:s,getAllAttrsSelected:u,isAllSelected:i,isAnySelected:d,isAttrsSelected:function(w){return Df(o,w)},select:v,multiSelect:f,selectAll:m,clear:p,clearAll:y,createSnapshot:E,restore:b}}function o$(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(r){var a=e.get(t);if(a)if(a[n]){var o=Object.assign({},a);delete o[n],Vf(e,t,o)}else e.delete(t),e.set(t,Object.assign(Object.assign({},a),pl({},n,!0)));else e.set(t,pl({},n,!0))}else e.clear(),e.set(t,pl({},n,!0))}function l$(e,t){var n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],r=jf(t);n?Df(e,t)?r.forEach(function(a){var o=ir(a,2),l=o[0],s=o[1];Vf(e,l,Qw(e.get(l),s))}):r.forEach(function(a){var o=ir(a,2),l=o[0],s=o[1];e.set(l,e$(e.get(l),s))}):(e.clear(),r.forEach(function(a){var o,l=ir(a,2),s=l[0],u=l[1];e.set(s,Object.assign(Object.assign({},(o=e.get(s))!==null&&o!==void 0?o:{}),u))}))}function Vf(e,t,n){Object.keys(n).length>0?e.set(t,n):e.delete(t)}function Df(e,t){return jf(t).every(function(n){var r=ir(n,2),a=r[0],o=r[1],l=e.get(a);return l&&Ql(Object.keys(o),l)})}function s$(e,t,n){var r=e.get(t);if(r)if(Object.keys(r).length===1)e.delete(t);else{var a=Object.assign({},r);delete a[n],e.set(t,a)}}function cr(e,t){const n=H({}),r=H(),a=n$(t,{onUpdated:o});function o(){n.value=a.getSelected(),r.value=a.getLastSelected()}const l={select:`${e}_SELECT`,multiSelect:`${e}_MULTI_SELECT`,selectAll:`${e}_SELECT_ALL`,clearAll:`${e}_CLEAR_ALL`},s={getLabel:()=>`Select ${e}`,redo(b){const w=a.createSnapshot();return b.id?a.select(b.id,b.shift):a.clearAll(),w.map(([T])=>T)},undo(b){a.restore(b.map(w=>[w,!0]))}};function u(b,w=!1){return{name:l.select,args:{id:b,shift:w}}}function i(b,w=!1){const T=Object.keys(n.value).length;return!b&&T===0?!1:w?!0:!(r.value===b&&T===1)}const d={getLabel:()=>`Select ${e}`,redo(b){const w=a.createSnapshot();return a.multiSelect(b.ids,b.shift),w.map(([T])=>T)},undo(b){a.restore(b.map(w=>[w,!0]))}};function v(b,w=!1){return{name:l.multiSelect,args:{ids:b,shift:w}}}function f(b,w=!1){const T=Object.keys(n.value).sort(),O=T.length;return!(b.length===0&&O===0||!w&&b.length===O&&b.concat().sort().join(",")===T.join(","))}const m={getLabel:()=>`Select ${e}`,redo(b){const w=a.createSnapshot();return a.selectAll(b),w.map(([T])=>T)},undo(b){a.restore(b.map(w=>[w,!0]))}};function p(b=!1){return{name:l.selectAll,args:b}}const y={getLabel:()=>`Select ${e}`,redo(){const b=a.createSnapshot();return a.clearAll(),b.map(([w])=>w)},undo(b){a.restore(b.map(w=>[w,!0]))}};function E(){return{name:l.clearAll,args:void 0}}return{selectedMap:h(()=>n.value),lastSelectedId:h(()=>r.value),restore:a.restore,createSnapshot:a.createSnapshot,getSelectHistoryDryRun:i,getMultiSelectHistoryDryRun:f,reducers:{[l.select]:s,[l.multiSelect]:d,[l.selectAll]:m,[l.clearAll]:y},createSelectAction:u,createMultiSelectAction:v,createSelectAllAction:p,createClearAllAction:E}}function u$(e,t,n){const r=H({}),a=H(),o=H([]),l=a$(t,n,{onUpdated:s});function s(){r.value=l.getSelected(),a.value=l.getLastSelected(),o.value=l.getAllAttrsSelected()}const u={select:`${e}_SELECT`,multiSelect:`${e}_MULTI_SELECT`,selectAll:`${e}_SELECT_ALL`,clearAll:`${e}_CLEAR_ALL`},i={getLabel:()=>`Select ${e}`,redo(w){const T=l.createSnapshot();return w.id?l.select(w.id,w.attrKey,w.shift):l.clearAll(),T},undo(w){l.restore(w)}};function d(w,T,O=!1){return{name:u.select,args:{id:w,attrKey:T,shift:O}}}function v(w,T,O=!1){const A=Object.keys(r.value).length;if(!w&&A===0)return!1;if(O)return!0;if(a.value===w&&A===1){const B=r.value[w];if(Object.keys(B).length===1&&B[T])return!1}return!0}const f={getLabel:()=>`Select ${e}`,redo(w){const T=l.createSnapshot();return l.multiSelect(new Map(w.val),w.shift),T},undo(w){l.restore(w)}};function m(w,T=!1){return w=Array.isArray(w)?w:Object.entries(w),{name:u.multiSelect,args:{val:w,shift:T}}}const p={getLabel:()=>`Select ${e}`,redo(w){const T=l.createSnapshot();return l.selectAll(w),T},undo(w){l.restore(w)}};function y(w=!1){return{name:u.selectAll,args:w}}const E={getLabel:()=>`Select ${e}`,redo(){const w=l.createSnapshot();return l.clearAll(),w},undo(w){l.restore(w)}};function b(){return{name:u.clearAll,args:void 0}}return{selectedMap:h(()=>r.value),lastSelectedId:h(()=>a.value),allAttrsSelectedIds:h(()=>o.value),restore:l.restore,createSnapshot:l.createSnapshot,isAttrsSelected:l.isAttrsSelected,getSelectHistoryDryRun:v,reducers:{[u.select]:i,[u.multiSelect]:f,[u.selectAll]:p,[u.clearAll]:E},createSelectAction:d,createMultiSelectAction:m,createSelectAllAction:y,createClearAllAction:b}}function cn(e){const t=$n({byId:{},allIds:[]});function n(f){t.byId=c({},f.byId),t.allIds=f.allIds.concat()}const r={add:`${e}_ADD`,delete:`${e}_DELETE`,update:`${e}_UPDATE`,replace:`${e}_REPLACE`},a={getLabel:()=>`Add ${e}`,redo(f){return f.forEach(m=>{t.byId[m.id]=m,t.allIds.push(m.id)}),f.map(m=>m.id)},undo(f){f.forEach(p=>delete t.byId[p]);const m=Cn(f,()=>!0);t.allIds=t.allIds.filter(p=>!m[p])}};function o(f){return{name:r.add,args:f}}const l={getLabel:()=>`Delete ${e}`,redo(f){const m=f.map(y=>({entity:t.byId[y],index:t.allIds.indexOf(y)})).sort((y,E)=>y.index-E.index);f.forEach(y=>delete t.byId[y]);const p=Cn(f,()=>!0);return t.allIds=t.allIds.filter(y=>!p[y]),m},undo(f){f.forEach(m=>{t.byId[m.entity.id]=m.entity,t.allIds.splice(m.index,0,m.entity.id)})}};function s(f){return{name:r.delete,args:f}}const u={getLabel:()=>`Update ${e}`,redo:f=>{const m=Ze(t.byId,f);return Object.entries(m).forEach(([p,y])=>t.byId[p]=c(c({},y),f[p])),m},undo:f=>{Object.entries(f).forEach(([m,p])=>t.byId[m]=p)}};function i(f,m){return{name:r.update,args:f,seriesKey:m}}const d={getLabel:()=>`Replace ${e}`,redo:f=>Jw(t,f.val,f.targets),undo:f=>{Zw(t,f)}};function v(f,m,p){return{name:r.replace,args:{val:f,targets:m},seriesKey:p}}return{init:n,entities:h(()=>t),reducers:{[r.add]:a,[r.delete]:l,[r.update]:u,[r.replace]:d},createAddAction:o,createDeleteAction:s,createUpdateAction:i,createReplaceAction:v}}function i$(e){const t=cn("Armature"),n=cn("Bone"),r=cn("Constraint"),a=cr("Armature",()=>t.entities.value.byId),o=u$("Bone",()=>i.value,["head","tail"]);e.defineReducers(t.reducers),e.defineReducers(n.reducers),e.defineReducers(r.reducers),e.defineReducers(a.reducers),e.defineReducers(o.reducers);const l=h(()=>Jt(t.entities.value)),s=a.lastSelectedId,u=h(()=>s.value?t.entities.value.byId[s.value]:void 0),i=h(()=>{if(!u.value)return{};const z=n.entities.value.byId;return oe(u.value.bones.map(ie=>z[ie]))}),d=o.selectedMap,v=o.lastSelectedId,f=h(()=>v.value?n.entities.value.byId[v.value]:void 0),m=h(()=>{const z=n.entities.value.byId;return oe(o.allAttrsSelectedIds.value.map(ie=>z[ie]))}),p=h(()=>Dn(i.value,d.value)),y=h(()=>{var ie;const z=r.entities.value.byId;return oe(((ie=ye(i.value))!=null?ie:[]).flatMap(we=>we.constraints.map(Le=>z[Le])))}),E=h(()=>{const z=n.entities.value.byId;return te(oe(l.value),ie=>ie.bones.map(we=>z[we]))});function b(z,ie,we,Le,Ue){t.init(Bt(z)),n.init(Bt(ie)),r.init(Bt(we)),a.restore(Le),o.restore(Ue)}function w(){return{armatures:l.value,bones:Jt(n.entities.value),constraints:Jt(r.entities.value),armatureSelected:a.createSnapshot(),boneSelected:o.createSnapshot()}}function T(){const z=Vn({name:"bone",tail:{x:0,y:100}},!0),ie=Gl({id:"initial-armature",name:"armature",bones:[z.id]});t.init(Bt([ie])),n.init(Bt([z])),a.restore([[ie.id,!0]]),o.restore([])}function O(z=""){s.value!==z&&e.dispatch(a.createSelectAction(z),[o.createClearAllAction()])}function A(){if(s.value)O();else{const z=t.entities.value.allIds[0];z&&O(z)}}function B(z,ie){const we=Vn({id:ie,name:"bone",tail:{x:0,y:100}},!ie),Le=Gl({id:z,name:Xt("armature",ye(t.entities.value.byId).map(Ue=>Ue.name)),bones:[we.id]},!z);e.dispatch(t.createAddAction([Le]),[a.createSelectAction(Le.id),n.createAddAction([we]),o.createMultiSelectAction([[we.id,{head:!0,tail:!0}]])])}function M(){const z=u.value;if(!z)return;const ie=n.entities.value.byId;e.dispatch(t.createDeleteAction([z.id]),[n.createDeleteAction(z.bones),r.createDeleteAction(z.bones.flatMap(we=>ie[we].constraints)),o.createClearAllAction()])}function P(z){!z||!u.value||u.value.name===z||e.dispatch(t.createUpdateAction({[u.value.id]:{name:Xt(z,ye(t.entities.value.byId).map(ie=>ie.name))}}))}function R(z){const ie=n.entities.value.byId;return t.entities.value.byId[z].bones.map(we=>ie[we])}function x(){Object.keys(i.value).length!==0&&e.dispatch(o.createSelectAllAction(!0))}function N(z="",ie={head:!0,tail:!0},we=!1,Le=!1){var Ue;if(!!u.value&&!(!f.value&&!z)&&!(o.lastSelectedId.value===z&&Object.keys(d.value).length===1&&!we&&Cd(d.value[z],ie)))if(!z)e.dispatch(o.createClearAllAction());else{let rt={};if(we){const ht=(Ue=d.value[z])!=null?Ue:{};di(ht.head,ie.head)&&(rt.head=!0),di(ht.tail,ie.tail)&&(rt.tail=!0)}else rt=ie;e.dispatch(o.createMultiSelectAction(zy(so(c(c({},we?lt(o.selectedMap.value,{[z]:!0}):{}),Object.keys(rt).length>0?{[z]:rt}:{}),Kd(ye(i.value),z,rt,Le)),z)))}}function V(z,ie=!1){Object.keys(z).length===0&&!o.lastSelectedId.value||e.dispatch(o.createMultiSelectAction(z,ie))}function le(z,ie={head:!0,tail:!0},we,Le=!1){z&&(we==null?void 0:we.ctrl)&&f.value?V(Cn(jy(i.value,f.value.id,z),()=>({head:!0,tail:!0})),!0):N(z,ie,we==null?void 0:we.shift,Le)}function be(z){!u.value||je([Vn({id:z,name:Xt("bone",ye(i.value).map(ie=>ie.name)),tail:{x:0,y:100}},!z)],{head:!0,tail:!0})}function je(z,ie,we){const Le=u.value;!Le||e.dispatch(n.createAddAction(z),[t.createUpdateAction({[Le.id]:{bones:Le.bones.concat(z.map(Ue=>Ue.id))}}),o.createMultiSelectAction(ie?te(oe(z),()=>ie):{}),...we?[r.createAddAction(we)]:[]])}function Pe(){const z=u.value;if(!z)return;const ie=m.value,we=Object.keys(ie);e.dispatch(n.createDeleteAction(we),[n.createUpdateAction(Wa(ye(i.value).filter(Le=>!ie[Le.id]))),t.createUpdateAction({[z.id]:{bones:z.bones.filter(Le=>!ie[Le])}}),r.createDeleteAction(we.flatMap(Le=>ie[Le].constraints)),o.createClearAllAction()])}function Be(){const z=u.value;if(!z)return;const ie=m.value,we=Object.keys(ie),Le=Ab(i.value,y.value,Object.keys(ie));e.dispatch(n.createDeleteAction(we),[n.createUpdateAction(Le.bones),t.createUpdateAction({[z.id]:{bones:z.bones.filter(Ue=>!ie[Ue])}}),r.createDeleteAction(we.flatMap(Ue=>ie[Ue].constraints)),r.createUpdateAction(Le.constraints),o.createClearAllAction()])}function re(z,ie){!u.value||e.dispatch(n.createUpdateAction(so(z,Wa(ye(i.value).map(we=>c(c({},we),z[we.id])))),ie))}function Z(z,ie){!u.value||!f.value||e.dispatch(n.createUpdateAction({[f.value.id]:vb(ye(i.value),c(c({},f.value),z))},ie))}function Ee(z){!z||!f.value||f.value.name===z||e.dispatch(n.createUpdateAction({[f.value.id]:{name:Xt(z,ye(i.value).map(ie=>ie.name))}}))}function Ke(z,ie){if(!u.value||!f.value)return;const we=y.value,Le=Cn(f.value.constraints,Qe=>we[Qe]),Ue=oe(z),rt=z.filter(Qe=>!Le[Qe.id]),ht=f.value.constraints.filter(Qe=>!Ue[Qe]),Mt=z.filter(Qe=>Le[Qe.id]);e.dispatch(r.createUpdateAction(oe(Mt),ie),[rt.length+ht.length>0?n.createUpdateAction({[f.value.id]:{constraints:z.map(Qe=>Qe.id)}}):void 0,rt.length>0?r.createAddAction(rt):void 0,ht.length>0?r.createDeleteAction(ht):void 0].filter(Qe=>!!Qe))}function me(z,ie={},we){const Le=u.value;if(!Le)return;const[Ue,rt]=Gy(z,I=>!!i.value[I.id]),ht=Wa(ye(c(c({},i.value),oe(z)))),Mt=rt.map(I=>ht[I.id]?c(c({},I),ht[I.id]):I),Qe=Ue.map(I=>ht[I.id]?c(c({},I),ht[I.id]):I),Nt=y.value;e.dispatch(n.createAddAction(Mt),[t.createUpdateAction({[Le.id]:{bones:Le.bones.concat(Mt.map(I=>I.id))}}),n.createUpdateAction(oe(Qe)),o.createMultiSelectAction(ie),we?r.createAddAction(we.filter(I=>!Nt[I.id])):void 0,we?r.createUpdateAction(oe(we.filter(I=>Nt[I.id]))):void 0].filter(I=>!!I))}return{armatures:l,lastSelectedArmatureId:s,lastSelectedArmature:u,boneMap:i,selectedBones:d,lastSelectedBoneId:v,lastSelectedBone:f,allSelectedBones:m,selectedBonesOrigin:p,constraintMap:y,bonesByArmatureId:E,initState:b,exportState:w,createDefaultEntities:T,selectArmature:O,selectAllArmature:A,addArmature:B,deleteArmature:M,updateArmatureName:P,getBonesByArmatureId:R,selectAllBones:x,selectBone:le,selectBones:V,addBone:be,addBones:je,deleteBone:Pe,dissolveBone:Be,updateBones:re,updateBone:Z,updateBoneName:Ee,updateBoneConstraints:Ke,upsertBones:me}}const c$=i$(Yn());function Rt(){return c$}function xf(e={},t=!1){var r;const n=t?qe():(r=e.id)!=null?r:"";return g(c({frame:0,targetId:"",name:"bone",points:{}},e),{id:n})}function d$(e){return e.name==="bone"}function Uf(e={},t=!1){var r;const n=t?qe():(r=e.id)!=null?r:"";return g(c({frame:0,targetId:"",name:"constraint",points:{}},e),{id:n})}function Ar(e={}){return c({value:0,curve:Kf("linear")},e)}function Kf(e){return f$(e)}function f$(e){return{name:e,controlIn:{x:-10,y:0},controlOut:{x:10,y:0}}}const Gf=[{label:"Constant",name:"constant"},{label:"Linear",name:"linear"},{label:"Bezier",name:"bezier3"}];function p$(e,t){if(e.length===0)return[];const n=e.findIndex(o=>t<=o.frame);if(n===-1)return[e[e.length-1]];const r=e[n];if(r.frame===t||n===0)return[r];const a=e[n-1];return a.frame===t?[a]:[a,r]}function m$(e,t,n){return v$(e,t)(n)}function ji(e){return{x:e.frame,y:e.keyframePoint.value}}function v$(e,t){const n=ji(e),r=ji(t);switch(e.keyframePoint.curve.name){case"constant":return h$(n);case"linear":return y$(n,r);case"bezier3":return g$(n,e.keyframePoint.curve.controlOut,t.keyframePoint.curve.controlIn,r)}}function h$(e){return()=>e.y}function y$(e,t){const n=t.x-e.x;return n===0?r=>r:r=>(r-e.x)/n*(t.y-e.y)+e.y}function g$(e,t,n,r){if(r.x-e.x===0)return l=>l;const o=Yf(e,t,n,r);return l=>ay(o,l)}function zf(e,t,n,r){const a=ce(t,e),o=ce(n,r);return[e,a,o,r]}function Yf(e,t,n,r){const a=zf(e,t,n,r);return[a[0],{x:Math.min(a[1].x,a[3].x),y:a[1].y},{x:Math.max(a[2].x,a[0].x),y:a[2].y},a[3]]}function Ir(e,t,n){const r=e.filter(o=>n(o)),a=p$(r,t);if(a.length!==0)return a.length===1?n(a[0]).value:m$({frame:a[0].frame,keyframePoint:n(a[0])},{frame:a[1].frame,keyframePoint:n(a[1])},t)}function Hs(e,t){return te(e,n=>Xf(n,t))}function Xf(e,t){var s,u,i,d,v;const n=(s=Ir(e,t,b$))!=null?s:0,r=(u=Ir(e,t,_$))!=null?u:0,a=(i=Ir(e,t,S$))!=null?i:0,o=(d=Ir(e,t,w$))!=null?d:1,l=(v=Ir(e,t,$$))!=null?v:1;return{translate:{x:n,y:r},rotate:a,scale:{x:o,y:l},origin:{x:0,y:0}}}function b$(e){return e.points.translateX}function _$(e){return e.points.translateY}function S$(e){return e.points.rotate}function w$(e){return e.points.scaleX}function $$(e){return e.points.scaleY}function C$(e){return{props:{translateX:e(),translateY:e(),rotate:e(),scaleX:e(),scaleY:e()}}}function Wf(e,t,n,r={},a=!1){return xf({frame:e,targetId:t,points:c(c(c(c(c({},r.translateX?{translateX:Ar({value:n.translate.x})}:{}),r.translateY?{translateY:Ar({value:n.translate.y})}:{}),r.rotate?{rotate:Ar({value:n.rotate})}:{}),r.scaleX?{scaleX:Ar({value:n.scale.x})}:{}),r.scaleY?{scaleY:Ar({value:n.scale.y})}:{})},a)}var E$=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getInterpolatedTransformMapByTargetId:Hs,interpolateKeyframe:Xf,getKeyframeDefaultPropsMap:C$,makeKeyframe:Wf});function es(e,t,n){const r=qs(t,n);return te(e,a=>r[a.id]?g(c({},a),{option:c(c({},a.option),r[a.id])}):a)}function qs(e,t){return te(e,n=>Hf(n,t))}function Hf(e,t){var r;return{influence:Ge(0,1,(r=Ir(e,t,M$))!=null?r:1)}}function M$(e){return e.points.influence}function A$(e){return{props:{influence:e()}}}function qf(e,t,n,r={},a=!1){return Uf({frame:e,targetId:t,points:c({},r.influence?{influence:Ar({value:n.option.influence})}:{})},a)}var I$=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getInterpolatedConstraintMap:es,getInterpolatedOptionMapByTargetId:qs,interpolateKeyframe:Hf,getKeyframeDefaultPropsMap:A$,makeKeyframe:qf});function T$(e){switch(e){case"bone":return E$;case"constraint":return I$}}function ts(e){return{props:te(e.points,()=>!0)}}function Jf(e){return e?Object.values(e.props).some(t=>t):!1}function Js(e,t){return t?Object.keys(e.points).every(n=>t.props[n]):!1}function k$(e,t){if(Js(e,t))return{selected:e};if(!Jf(t))return{notSelected:e};const n=g(c({},e),{points:c({},e.points)}),r=g(c({},e),{points:c({},e.points)});return Object.keys(e.points).forEach(a=>{t.props[a]?delete r.points[a]:delete n.points[a]}),{selected:n,notSelected:r}}function O$(e,t,n=!1){const r=g(c({},t),{points:c({},t.points),id:n?e.id:t.id});return Object.keys(e.points).forEach(a=>{e.points[a]&&!t.points[a]&&(r.points[a]=e.points[a])}),r}function Fi(e,t){if(!t)return e;if(Js(e,t))return;const n=g(c({},e),{points:c({},e.points)});return Object.keys(e.points).forEach(r=>{t.props[r]&&delete n.points[r]}),n}function Zf(e,t="bone"){const n=Qf(()=>[],t);return e.forEach(r=>{Object.keys(r.points).forEach(a=>{r.points[a]&&n.props[a]&&n.props[a].push(r)})}),n}function _a(e){const t={props:{}};return e.forEach(n=>{Object.keys(n.points).forEach(r=>{var a,o;n.points[r]&&((o=(a=t.props)[r])!=null?o:a[r]=[]).push(n)})}),t}function Qf(e,t="bone"){return T$(t).getKeyframeDefaultPropsMap(e)}function B$(e){return Object.keys(e).reduce((t,n)=>(t[n]=e[n].reduce((r,a,o)=>(r[a.frame]={props:L$(e[n],o)},r),{}),t),{})}function L$(e,t){const n=e.slice(t);if(n.length<1)return{};const r=n[0],a=Zf(n,r.name),o={};return Object.keys(r.points).forEach(l=>{o[l]=R$(a.props[l],s=>s.points[l])}),o}function R$(e,t){if(e.length<2)return 0;const n=e[0],r=e[1],a=t(n),o=t(r);return a&&o&&P$(a,o)?r.frame-n.frame:0}function P$(e,t){return e.value===t.value}function N$(e,t,n){return te(e,(r,a)=>{const o=t[a];return o?ep(r,o,n):r})}function ep(e,t,n){return g(c({},e),{points:te(e.points,(r,a)=>t.props[a]?n(r):r)})}function tp(e={name:"bone"},t=!1){switch(e.name){case"bone":return xf(g(c({},e),{name:"bone"}),t);case"constraint":return Uf(g(c({},e),{name:"constraint"}),t)}}function j$(e,t){const n={},r={};return Object.keys(t).forEach(a=>{const o=t[a],l=e[a];if(!l)return;const s=k$(l,o);s.selected&&(n[a]=s.selected),s.notSelected&&(r[a]=s.notSelected)}),{selected:n,notSelected:r}}function F$(e,t){return g(c({},e),{frame:e.frame+t.x,points:c({},te(e.points,n=>g(c({},n),{value:n.value+t.y})))})}function V$(e,t){const n={},r={};return Object.keys(e).forEach(a=>{const o=e[a],l={},s={};Object.keys(o.props).forEach(u=>{(t(a,u)?l:s)[u]=o.props[u]}),Object.keys(l).length>0&&(n[a]=g(c({},o),{props:l})),Object.keys(s).length>0&&(r[a]=g(c({},o),{props:s}))}),{trueMap:n,falseMap:r}}function np(e){const t={},n={};return Object.keys(e).forEach(r=>{const a=e[r][0];if(!!a)switch(a.name){case"bone":t[r]=e[r];return;case"constraint":n[r]=e[r];return}}),{bone:t,constraint:n}}function rp(e){return Math.round(Math.log(e)/Math.log(Ro))}function D$(e){const t=Math.round(rp(e)/2)+1;return Math.round(t/5)*5+5}function x$(e,t){const n=Math.round(rp(t)/2)+1;return(Math.round(n/3)+1)*U$(e)}function U$(e){return e>7?5:e>5?10:e>3?15:e>2?20:e>1.5?25:e>1?50:100}function ap(e){return Math.round(op(e))}function op(e){return e/bn}function lp(e){return e*bn}function K$(e,t){return e/t}function G$(e,t){return{x:ap(e.x),y:K$(e.y,t)}}function z$(e,t){const n=Math.floor(Math.max(t,0)/bn);return n-n%(e*2)}function Y$(e,t,n){const r=Math.floor(n/e);return r-r%t-(r>0?0:t)}function zn(e){return br(e,"frame")}function Dr(e){return X$(br(e,"targetId"))}function sp(e){return e.concat().sort((t,n)=>t.frame-n.frame)}function X$(e){return te(e,sp)}function W$(e,t){if(e.length===0)return e;const n=sp(e)[0].frame;return e.map(r=>g(c({},r),{frame:r.frame+(t-n)}))}function H$(e){const t=zn(e);return Object.values(t).map(n=>{const r=br(n,"targetId");return Object.values(r).map(a=>{const[o,...l]=a;return l.reduce((s,u)=>(Object.assign(s.points,u.points),s),g(c({},o),{points:c({},o.points)}))})}).flat()}function up(e,t,n=!1){const r=H$(t),a=oe(e),o=oe(r),l=zn(ye(lt(a,o))),s=zn(r),u=lt(s,l),i=Ze(a,o),d=ye(i);return{merged:ye(c(c({},te(l,(f,m)=>{var E,b,w;d.push(...Ny(f,(E=s[m])!=null?E:[],"targetId",!0));const p=fn(f,"targetId"),y=fn((b=s[m])!=null?b:[],"targetId");return n?Object.keys(c(c({},p),y)).reduce((T,O)=>{if(!y[O])T.push(p[O]);else if(!p[O])T.push(y[O]);else{const A=O$(p[O],y[O]);T.push(A)}return T},[]):s[m]?Py(f,(w=s[m])!=null?w:[],"targetId"):f})),u)).flat(),dropped:d}}function q$(e,t,n,r){const a=oe(t),o=te(oe(e),m=>m.keyframes.map(p=>a[p])),l=oe(n),s=oe(r),u=te(l,m=>m.bones.map(p=>s[p])),i=e.filter(m=>!!l[m.armatureId]),d=i.flatMap(m=>J$(o[m.id],[...u[m.armatureId],...u[m.armatureId].flatMap(p=>p.constraints.map(y=>({id:y})))])),v=oe(d);return{actions:i.map(m=>g(c({},m),{keyframes:m.keyframes.filter(p=>v[p])})),keyframes:d}}function J$(e,t){return ye(Ze(Dr(e),oe(t))).flat()}function Z$(e,t){const n=Object.keys(zn(e)).map(r=>parseInt(r)).filter(r=>t<r);return n.length>0?n[0]:t}function Q$(e,t){const n=Object.keys(zn(e)).map(r=>parseInt(r)).filter(r=>r<t);return n.length>0?n[n.length-1]:t}function eC(e){return e.reduce((t,n)=>Math.max(t,n.frame),0)}function tC(e,t,n,r=!1){return t===0?0:mr(0,t,e+(r?-1:1)*n)}function nC(e,t){return Object.keys(e).reduce((n,r)=>{const a=t(r);return a&&(n[r]=Ud(e[r],a)),n},{})}function rC(e,t){var n;return t?g(c({},e),{option:g(c({},e.option),{influence:(n=t.influence)!=null?n:e.option.influence})}):e}function aC(e,t){return t?g(c({},e),{points:te(e.points,(n,r)=>{var a;if(!!n)return g(c({},n),{value:(a=t[r])!=null?a:n.value})})}):e}function oC(e,t){return Object.keys(e).reduce((n,r)=>{const a=lC(e[r],t[r]);return Zy(a)||(n[r]=a),n},{})}function lC(e,t){if(!t||!d$(t))return e;const n=t.points.translateX?0:e.translate.x,r=t.points.translateY?0:e.translate.y,a=t.points.scaleX?0:e.scale.x,o=t.points.scaleY?0:e.scale.y,l=t.points.rotate?0:e.rotate;return de({translate:{x:n,y:r},scale:{x:a,y:o},rotate:l,origin:e.origin})}function po(e,t,n=(r,a)=>r===a){const r=H(t());function a(i){r.value=i}function o(){return r.value}const l={update:`${e}_UPDATE`},s={getLabel:()=>`Update ${e}`,redo(i){const d=r.value;return r.value=i,d},undo(i){r.value=i}};function u(i,d){if(!n(r.value,i))return{name:l.update,args:i,seriesKey:d}}return{state:h(()=>r.value),restore:a,createSnapshot:o,reducers:{[l.update]:s},createUpdateAction:u}}function sC(e=0,t=60){const n=po("Frame",()=>e),r=po("End Frame",()=>t),a=H("pause");function o(m=0,p=60){n.restore(m),r.restore(p)}function l(m){a.value=m}function s(){a.value=a.value==="pause"?"play":"pause"}function u(){return n.createUpdateAction(0)}function i(){return n.createUpdateAction(r.state.value)}function d(m,p=!1,y){return n.createUpdateAction(tC(n.state.value,r.state.value,m,p),y)}function v(m){return n.createUpdateAction(Z$(m,n.state.value))}function f(m){return n.createUpdateAction(Q$(m,n.state.value))}return{currentFrame:n.state,endFrame:r.state,restore:o,createUpdateCurrentFrameAction:n.createUpdateAction,createUpdateEndFrameAction:r.createUpdateAction,playing:h(()=>a.value),setPlaying:l,togglePlaying:s,createJumpStartFrameAction:u,createJumpEndFrameAction:i,createStepFrameAction:d,createJumpNextKeyAction:v,createJumpPrevKeyAction:f,reducers:c(c({},n.reducers),r.reducers)}}function uC(e,t){const r=H({}),a=H("");function o(M){a.value=M.length>0?M[M.length-1][0]:"",s(M.reduce((P,[R,x])=>(P[R]=x,P),{}))}function l(){const M=a.value,P=Object.entries(r.value);return M?P.filter(([R])=>R!==M).concat([[M,r.value[M]]]):P}function s(M){r.value=M}function u(M){r.value=lt(c(c({},r.value),M.toUpsert),Cn(M.toDelete,()=>!0)),a.value=M.lastSelectedId}function i(M={}){s(M);const P=Object.keys(M);a.value=P.length>0?P[0]:""}const d={select:`${e}_SELECT`,multiSelect:`${e}_MULTI_SELECT`,selectAll:`${e}_SELECT_ALL`,filter:`${e}_FILTER`,drop:`${e}_DROP`,clearAll:`${e}_CLEAR_ALL`},v={getLabel:()=>`Select ${e}`,redo(M){var x;const P=r.value,R=c({lastSelectedId:a.value},P[M.id]?{toUpsert:{[M.id]:P[M.id]},toDelete:[]}:{toUpsert:{},toDelete:[M.id]});if(M.shift){const N=wd((x=P[M.id])==null?void 0:x.props,M.propsState.props);s($d(P,M.id,N?{props:N}:void 0)),a.value=N?M.id:""}else s(lo(P,t(),()=>M.id?{[M.id]:M.propsState}:{})),a.value=M.id;return R},undo(M){u(M)}};function f(M,P,R=!1){return{name:d.select,args:{id:M,propsState:P,shift:R}}}const m={getLabel:()=>`Select ${e}`,redo(M){var R,x,N,V;const P={map:c({},r.value),lastSelectedId:a.value};return M.shift?dC(r.value,M.selectedTargetMap)?(s(lt(r.value,M.selectedTargetMap)),a.value=""):(s(c(c({},r.value),te(M.selectedTargetMap,ml))),a.value=(x=(R=ci(M.selectedTargetMap))==null?void 0:R.id)!=null?x:""):(s(c(c({},lt(r.value,t())),te(M.selectedTargetMap,ml))),a.value=(V=(N=ci(M.selectedTargetMap))==null?void 0:N.id)!=null?V:""),P},undo(M){s(M.map),a.value=M.lastSelectedId}};function p(M,P=!1){return{name:d.multiSelect,args:{selectedTargetMap:M,shift:P}}}const y={getLabel:()=>`Select ${e}`,redo(M){var x;const P={map:c({},r.value),lastSelectedId:a.value},R=lt(r.value,t());return s(te(c(c({},M),R),(N,V)=>M[V]?iC(ml(M[V]),r.value[V]):r.value[V])),a.value=(x=Object.keys(M)[0])!=null?x:"",P},undo(M){s(M.map),a.value=M.lastSelectedId}};function E(M){return{name:d.selectAll,args:M}}const b={getLabel:()=>`Filter ${e}`,redo(M){const P={map:c({},r.value),lastSelectedId:a.value};return s(lo(r.value,t(),R=>Ze(R,M))),P},undo(M){s(M.map),a.value=M.lastSelectedId}};function w(M={}){return{name:d.filter,args:M}}const T={getLabel:()=>`Drop ${e}`,redo(M){const P=a.value,R=Ze(r.value,M);return s(lt(r.value,M)),M[a.value]&&(a.value=""),{toUpsert:R,toDelete:[],lastSelectedId:P}},undo(M){u(M)}};function O(M={}){return{name:d.drop,args:M}}const A={getLabel:()=>`Select ${e}`,redo(){const M={map:c({},r.value),lastSelectedId:a.value};return s({}),a.value="",M},undo(M){s(M.map),a.value=M.lastSelectedId}};function B(){return{name:d.clearAll,args:void 0}}return{init:i,selectedStateMap:h(()=>r.value),lastSelectedId:h(()=>a.value),restore:o,createSnapshot:l,reducers:{[d.select]:v,[d.multiSelect]:m,[d.selectAll]:y,[d.filter]:b,[d.drop]:T,[d.clearAll]:A},createSelectAction:f,createMultiSelectAction:p,createSelectAllAction:E,createFilterAction:w,createDropAction:O,createClearAllAction:B}}function ml(e){return{props:te(e.points,()=>!0)}}function iC(e,t){return t?{props:c(c({},e.props),t.props)}:e}function cC(e,t){return t?Dy(te(e.points,()=>!0),t.props):!1}function dC(e,t={}){return Object.keys(e).length===0?!1:Object.keys(t).every(n=>cC(t[n],e[n]))}function Vi(e){const t=H({});function n(u={}){t.value=u}const r={upsert:`${e}_UPSERT`,set:`${e}_SET`},a={getLabel:()=>`Upsert ${e}`,redo(u){const i=Object.keys(lt(u,t.value)),d=Ze(t.value,u);return t.value=c(c({},t.value),u),{created:i,updated:d}},undo(u){t.value=lt(c(c({},t.value),u.updated),Cn(u.created,()=>!0))}};function o(u,i){return{name:r.upsert,args:u,seriesKey:i}}const l={getLabel:()=>`Set ${e}`,redo(u){const i=t.value;return t.value=u,i},undo(u){t.value=u}};function s(u,i){return{name:r.set,args:u,seriesKey:i}}return{state:h(()=>t.value),init:n,reducers:{[r.upsert]:a,[r.set]:l},createUpsertAction:o,createSetAction:s}}function fC(e,t){const r=H({});function a(A){r.value=A}function o(A){a(A.reduce((B,[M,P])=>(B[M]=P,B),{}))}function l(){return Object.entries(r.value)}function s(A){r.value=lt(c(c({},r.value),A.toUpsert),Cn(A.toDelete,()=>!0))}function u(A={}){a(A)}const i={select:`${e}_SELECT`,selectAll:`${e}_SELECT_ALL`,filter:`${e}_FILTER`,drop:`${e}_DROP`,clearAll:`${e}_CLEAR_ALL`};function d(A,B,M=!1,P=!1){const R=Object.keys(r.value).length;return R===0?!!A:R===1&&A&&r.value[A]&&Cd(r.value[A].props,B.props)?M&&!P:!0}const v={getLabel:()=>`Select ${e}`,redo(A){var P,R,x;const B=r.value,M=B[A.id]?{toUpsert:{[A.id]:B[A.id]},toDelete:[]}:{toUpsert:{},toDelete:[A.id]};if(A.shift){const N=A.notToggle?c(c({},(R=(P=B[A.id])==null?void 0:P.props)!=null?R:{}),A.propsState.props):wd((x=B[A.id])==null?void 0:x.props,A.propsState.props);a($d(B,A.id,N?{props:N}:void 0))}else a(lo(B,t(),()=>A.id?{[A.id]:A.propsState}:{}));return M},undo(A){s(A)}};function f(A,B,M=!1,P=!1){return{name:i.select,args:{id:A,propsState:B,shift:M,notToggle:P}}}const m={getLabel:()=>`Select ${e}`,redo(A){const B=c({},r.value);return a(te(c(c({},r.value),A),(M,P)=>A[P]?mC(pC(A[P]),r.value[P]):r.value[P])),B},undo(A){a(A)}};function p(A){return{name:i.selectAll,args:A}}const y={getLabel:()=>`Filter ${e}`,redo(A){const B=c({},r.value);return a(lo(r.value,t(),M=>Ze(M,A))),B},undo(A){a(A)}};function E(A={}){return{name:i.filter,args:A}}const b={getLabel:()=>`Drop ${e}`,redo(A){const B=Ze(r.value,A);return a(lt(r.value,A)),{toUpsert:B,toDelete:[]}},undo(A){s(A)}};function w(A={}){return{name:i.drop,args:A}}const T={getLabel:()=>`Select ${e}`,redo(){const A=c({},r.value);return a({}),A},undo(A){a(A)}};function O(){return{name:i.clearAll,args:void 0}}return{init:u,restore:o,createSnapshot:l,selectedStateMap:h(()=>r.value),selectDryRun:d,reducers:{[i.select]:v,[i.selectAll]:m,[i.filter]:y,[i.drop]:b,[i.clearAll]:T},createSelectAction:f,createSelectAllAction:p,createFilterAction:E,createDropAction:w,createClearAllAction:O}}function pC(e){return{props:te(e.props,()=>"selected")}}function mC(e,t){return t?{props:c(c({},e.props),t.props)}:e}function vC(e,t){const n=cn("Action"),r=cn("Keyframe"),a=cr("Action",()=>n.entities.value.byId),o=sC(),l=Vi("BonePose"),s=Vi("ConstraintPose"),u=fC("PoseTarget",()=>w.value),i=uC("Keyframe",()=>B.value);e.defineReducers(n.reducers),e.defineReducers(r.reducers),e.defineReducers(a.reducers),e.defineReducers(o.reducers),e.defineReducers(l.reducers),e.defineReducers(s.reducers),e.defineReducers(u.reducers),e.defineReducers(i.reducers);const d=h(()=>Jt(n.entities.value)),v=a.lastSelectedId,f=h(()=>v.value?n.entities.value.byId[v.value]:void 0),m=l.state,p=s.state,y=h(()=>{var ae,Ce;const q=r.entities.value.byId;return(Ce=(ae=f.value)==null?void 0:ae.keyframes.map(Re=>q[Re]))!=null?Ce:[]}),E=h(()=>zn(y.value)),b=h(()=>Dr(y.value)),w=h(()=>c(c({},t.boneMap.value),t.constraintMap.value)),T=h(()=>Ze(b.value,w.value)),O=h(()=>Ze(b.value,c(c({},Ee.value),we.value))),A=h(()=>c(c({},te(Ee.value,()=>({type:"bone"}))),te(we.value,()=>({type:"constraint"})))),B=h(()=>oe(bd(O.value)));function M(q,ae,Ce,Re,Xe,dt,kt){o.setPlaying("pause"),o.restore(q,ae),n.init(Bt(Ce)),r.init(Bt(Re)),a.restore(Xe),l.init(),s.init(),i.restore(dt),u.restore(kt)}function P(){return{currentFrame:o.currentFrame.value,endFrame:o.endFrame.value,actions:d.value,keyframes:Jt(r.entities.value),actionSelected:a.createSnapshot(),keyframeState:i.createSnapshot(),targetPropsState:u.createSnapshot()}}const R=h(()=>Ze(B.value,i.selectedStateMap.value)),x=h(()=>Object.keys(R.value).length>0),N=h(()=>R.value[i.lastSelectedId.value]),V=h(()=>Ze(u.selectedStateMap.value,A.value)),le=h(()=>np(b.value)),be=h(()=>es(t.constraintMap.value,le.value.constraint,o.currentFrame.value)),je=h(()=>Object.keys(p.value).length===0?be.value:es(t.constraintMap.value,te(le.value.constraint,q=>q.map(ae=>aC(ae,p.value[ae.targetId]))),o.currentFrame.value)),Pe=h(()=>Hs(T.value,o.currentFrame.value)),Be=h(()=>xy(Object.keys(m.value).concat(Object.keys(b.value)))),re=h(()=>Be.value.reduce((q,ae)=>(q[ae]=Vr(Qe(ae),Nt(ae)),q),{})),Z=h(()=>t.lastSelectedArmature.value?Ps(te(t.boneMap.value,q=>g(c({},q),{transform:I(q.id)})),je.value):{}),Ee=h(()=>te($t(t.selectedBones.value,q=>kd(q)),()=>!0)),Ke=h(()=>te(Ee.value,(q,ae)=>t.boneMap.value[ae])),me=h(()=>yb(Z.value,t.selectedBones.value)),z=h(()=>t.lastSelectedArmature.value?Ls(me.value):{x:0,y:0}),ie=h(()=>{const q=t.constraintMap.value;return te(Ke.value,ae=>ae.constraints.map(Ce=>g(c({},q[Ce]),{boneId:ae.id})))}),we=h(()=>oe(ye(ie.value).flat().filter(q=>b.value[q.id])));function Le(q){e.dispatch(l.createSetAction(q))}function Ue(q){Le(te(c(c({},m.value),q),(ae,Ce)=>q[Ce]?Vr(Nt(Ce),q[Ce]):Nt(Ce)))}function rt(q,ae){e.dispatch(s.createSetAction(q,ae))}function ht(q,ae){rt(so(p.value,q),ae)}function Mt(q,ae){e.dispatch(l.createSetAction(c(c({},m.value),nC(q,Ce=>{if(!!A.value[Ce])return Qe(Ce)})),ae))}function Qe(q){var ae;return(ae=Pe.value[q])!=null?ae:de()}function Nt(q){var ae;return(ae=m.value[q])!=null?ae:de({scale:{x:0,y:0}})}function I(q){var ae;return(ae=re.value[q])!=null?ae:de()}function L(q){q&&e.dispatch(q,[l.createSetAction({}),s.createSetAction({})])}function U(q,ae){L(o.createUpdateCurrentFrameAction(q,ae))}function W(){L(o.createJumpStartFrameAction())}function X(){L(o.createJumpEndFrameAction())}function ne(q,ae=!1,Ce){L(o.createStepFrameAction(q,ae,Ce))}function j(){L(o.createJumpNextKeyAction(y.value))}function D(){L(o.createJumpPrevKeyAction(y.value))}function G(q,ae){e.dispatch(o.createUpdateEndFrameAction(q,ae))}function K(q){v.value!==q&&e.dispatch(a.createSelectAction(q),[i.createClearAllAction()])}function pe(q){if(!t.lastSelectedArmature.value)return;const ae=Td({id:q,name:Xt("action",d.value.map(Ce=>Ce.name)),armatureId:t.lastSelectedArmature.value.id},!q);e.dispatch(n.createAddAction([ae]),[i.createClearAllAction(),a.createSelectAction(ae.id)])}function se(q){!v.value||e.dispatch(n.createUpdateAction({[v.value]:q}))}function he(){const q=f.value;!q||e.dispatch(n.createDeleteAction([q.id]),[r.createDeleteAction(q.keyframes),i.createClearAllAction()])}function _e(q,ae,Ce=!1){if(!(!q&&!x.value))if(q){const[Re,...Xe]=im(q,ae,Ce);e.dispatch(Re,Xe)}else{const[Re,...Xe]=um();e.dispatch(Re,Xe)}}function Ie(q,ae=!1){const Ce=E.value[q];Ce.length!==0&&e.dispatch(i.createMultiSelectAction(oe(Ce),ae),[u.createClearAllAction()])}function De(){Object.keys(R.value).length===Object.keys(B.value).length&&Object.keys(R.value).every(q=>Js(B.value[q],i.selectedStateMap.value[q]))?x.value&&_e(""):e.dispatch(sm())}function xe(q={}){f.value||pe();const ae=Object.keys(Ee.value).map(Xe=>Wf(o.currentFrame.value,Xe,I(Xe),q,!0)),[Ce,...Re]=qo(ae);e.dispatch(Ce,Re)}function ze(){if(!x.value)return;const[q,...ae]=pu(i.selectedStateMap.value);e.dispatch(q,ae)}function jt(q,ae){const[Ce,...Re]=cm(q,o.currentFrame.value,ae);e.dispatch(Ce,Re)}function An(q){const ae=je.value[q];if(!!ae)return rC(ae,p.value[ae.id])}function Oa(q,ae={}){if(Object.keys(Ee.value).length===0)return;f.value||pe();const Ce=An(q);if(!Ce)return;const Re=qf(o.currentFrame.value,q,Ce,ae,!0),[Xe,...dt]=qo([Re]);e.dispatch(Xe,dt)}function qn(q,ae={}){if(!x.value)return;const[Ce,...Re]=pu({[q]:{props:ae}});e.dispatch(Ce,Re)}function Ba(q,ae){const[Ce,...Re]=Jo(ye(q),!0,ae);e.dispatch(Ce,Re)}function At(q){const[ae,...Ce]=qo(W$(q.filter(Re=>t.boneMap.value[Re.targetId]).map(Re=>Uy(Re)),o.currentFrame.value));e.dispatch(ae,Ce)}function Gt(q,ae=[]){const[Ce,...Re]=Jo([...q,...ae],!0),Xe=br(q,"frame"),dt={};ae.forEach(kt=>{var wr,Qr;const Zr=fn((wr=Xe[kt.frame])!=null?wr:[],"targetId")[kt.targetId];dt[(Qr=Zr==null?void 0:Zr.id)!=null?Qr:kt.id]=kt}),e.dispatch(Ce,[...Re,i.createMultiSelectAction(dt)])}function La(q,ae,Ce=!1){!u.selectDryRun(q,ae,Ce)||e.dispatch(u.createSelectAction(q,ae,Ce))}return{initState:M,exportState:P,actions:d,actionMap:h(()=>oe(d.value)),keyframes:y,selectedKeyframeMap:i.selectedStateMap,lastSelectedKeyframe:N,keyframeMapByFrame:E,keyframeMapByTargetId:b,visibledKeyframeMap:B,visibledSelectedKeyframeMap:R,selectedConstraintMap:we,selectedTargetIdMap:A,visibledTargetPropsStateMap:V,posedTargetIds:Be,currentPosedBones:Z,selectedBoneIdMap:Ee,selectedBoneMap:Ke,selectedBones:me,selectedPosedBoneOrigin:z,getBoneEditedTransforms:Nt,getCurrentSelfTransforms:I,currentInterpolatedConstraintMap:je,originalInterpolatedConstraintMap:be,applyEditedTransforms:Ue,applyEditedConstraint:ht,pastePoses:Mt,playing:o.playing,setPlaying:o.setPlaying,togglePlaying:o.togglePlaying,currentFrame:o.currentFrame,setCurrentFrame:U,jumpStartFrame:W,jumpEndFrame:X,jumpNextKey:j,jumpPrevKey:D,stepFrame:ne,endFrame:o.endFrame,setEndFrame:G,selectedAction:f,selectAction:K,addAction:pe,updateAction:se,deleteAction:he,selectKeyframe:_e,selectKeyframeByFrame:Ie,selectAllKeyframes:De,execInsertKeyframe:xe,execDeleteKeyframes:ze,execDeleteTargetKeyframe:jt,execInsertKeyframeConstraint:Oa,execDeleteKeyframeConstraint:qn,execUpdateKeyframes:Ba,pasteKeyframes:At,upsertKeyframes:Gt,selectTargetProp:La};function sm(){return i.createSelectAllAction(B.value)}function um(){return[i.createFilterAction(),u.createDropAction(al(ye(B.value)))]}function im(q,ae,Ce=!1){const Re=B.value[q],Xe=ae!=null?ae:ts(Re);return[i.createSelectAction(q,Xe,Ce),u.createSelectAction(Re.targetId,{props:te(Xe.props,()=>"selected")},Ce,!0)]}function qo(q,ae=!1){return[...Jo(q,!ae),l.createSetAction(oC(m.value,al(q))),i.createSelectAllAction(oe(q)),u.createDropAction(al(ye(B.value)))]}function Jo(q,ae=!1,Ce){const Re=B.value,{merged:Xe,dropped:dt}=up(ye(Re),q,ae),kt=oe(Xe),mu=lt(kt,Re),Zr=Ze(kt,Re),wr=lt(oe(dt),kt),Qr=ye(mu);return[r.createAddAction(Qr),r.createDeleteAction(ye(wr).map(ea=>ea.id)),r.createUpdateAction(Zr,Ce),n.createUpdateAction({[f.value.id]:{keyframes:f.value.keyframes.filter(ea=>!wr[ea]).concat(Qr.map(ea=>ea.id))}}),i.createDropAction(wr)]}function pu(q){const ae=B.value,Ce=Ze(ae,q),Re={},Xe={};return ye(Ce).forEach(dt=>{const kt=Fi(dt,q[dt.id]);kt?Re[kt.id]=kt:Xe[dt.id]=!0}),[r.createUpdateAction(Re),r.createDeleteAction(Object.keys(Xe)),n.createUpdateAction({[f.value.id]:{keyframes:f.value.keyframes.filter(dt=>!Xe[dt])}}),i.createClearAllAction()]}function cm(q,ae,Ce){const Re=ye(B.value).find(dt=>dt.targetId===q&&dt.frame===ae);if(!Re)return[];const Xe=Fi(Re,{props:{[Ce]:!0}});return Xe?[r.createUpdateAction({[Xe.id]:Xe}),i.createClearAllAction()]:[r.createDeleteAction([Re.id]),n.createUpdateAction({[f.value.id]:{keyframes:f.value.keyframes.filter(dt=>dt!==Re.id)}}),i.createClearAllAction()]}}const hC=vC(Yn(),Rt());function rn(){return hC}function yC(e){const t=cn("Actor"),n=cn("Element"),r=cr("Element",()=>n.entities.value.byId),a=cr("Actor",()=>t.entities.value.byId);e.defineReducers(t.reducers),e.defineReducers(n.reducers),e.defineReducers(a.reducers),e.defineReducers(r.reducers);const o=h(()=>Jt(t.entities.value)),l=a.lastSelectedId,s=h(()=>l.value?t.entities.value.byId[l.value]:void 0),u=r.selectedMap,i=r.lastSelectedId,d=h(()=>{var B,M;const A=n.entities.value.byId;return oe((M=(B=s.value)==null?void 0:B.elements.map(P=>A[P]))!=null?M:[])}),v=h(()=>{if(!!i.value)return d.value[i.value]});function f(A,B,M,P){t.init(Bt(A)),n.init(Bt(B)),a.restore(M),r.restore(P)}function m(){return{actors:o.value,elements:Jt(n.entities.value),actorSelected:a.createSnapshot(),elementSelected:r.createSnapshot()}}function p(){const A=m1(),B=yf(A),M=Ts({id:"initial-actor",armatureId:"initial-armature",svgTree:A,elements:[B.id]});t.init(Bt([M])),n.init(Bt([B])),a.restore([[M.id,!0]]),r.restore([])}function y(A,B){e.dispatch(t.createDeleteAction(o.value.map(M=>M.id)),[t.createAddAction([A]),n.createAddAction(B),a.createSelectAction(A.id)])}function E(A=""){!a.getSelectHistoryDryRun(A)||e.dispatch(a.createSelectAction(A),[r.createClearAllAction()])}function b(A){const B=s.value;!B||e.dispatch(t.createUpdateAction({[B.id]:{armatureId:A}}))}function w(A="",B){!s.value||!r.getSelectHistoryDryRun(A,B==null?void 0:B.shift)||e.dispatch(r.createSelectAction(A,B==null?void 0:B.shift))}function T(){!s.value||e.dispatch(r.createSelectAllAction(!0))}function O(A){const B=v.value;!B||e.dispatch(n.createUpdateAction({[B.id]:A}))}return{actors:o,lastSelectedActor:s,elementMap:d,selectedElements:u,lastSelectedElement:v,initState:f,exportState:m,createDefaultEntities:p,importActor:y,selectActor:E,updateArmatureId:b,selectElement:w,selectAllElement:T,updateElement:O}}const gC=yC(Yn());function Mn(){return gC}const bC=de(),Di=de({scale:{x:0,y:0}});function _C(e,t,n,r){const a=po("Canvas Mode",()=>"object");e.defineReducers(a.reducers);const o=H("edit"),l=H(),s=H(),u=H(),i=H({}),d=H(""),v=a.state;bt(v,(Z,Ee)=>{o.value=Ee});function f(Z){a.restore(Z),o.value=Z!=="edit"?"edit":"object",l.value=void 0,s.value=void 0}function m(){return{canvasMode:a.createSnapshot()}}const p=h(()=>v.value==="edit"?t.selectedBonesOrigin.value:r.selectedPosedBoneOrigin.value),y=H();function E(Z=[]){y.value=Z}const b=H();function w(Z){b.value=Z}const T=H([]);function O(Z=[]){T.value=Z}const A=h(()=>{if(!t.lastSelectedArmature.value)return{};if(Object.keys(i.value).length>0){const Z=r.currentInterpolatedConstraintMap.value;return Ps(oe(ye(t.boneMap.value).map(Ee=>g(c({},Ee),{transform:Vr(r.getCurrentSelfTransforms(Ee.id),le(Ee.id))}))),Z)}else return r.currentPosedBones.value}),B=h(()=>t.lastSelectedArmature.value?v.value==="edit"?oe(ye(t.boneMap.value).map(Z=>Yl(Z,V(Z.id),t.selectedBones.value[Z.id]||{}))):Object.keys(A.value).reduce((Z,Ee)=>{const Ke=A.value[Ee];return Z[Ee]=Hr(Ke,[Ke.transform]),Z},{}):{}),M=h(()=>l.value);function P(Z=!1){return Z?R():v.value==="edit"?be(o.value):be("edit")}function R(){return v.value==="edit"?o.value==="object"?be("pose"):be("object"):v.value==="object"?be("pose"):be("object")}function x(Z){e.dispatch(a.createUpdateAction(Z))}function N(Z){l.value=Z}function V(Z){const Ee=u.value;return Ee&&t.selectedBones.value[Z]?Ee:bC}function le(Z){var Ee;return v.value!=="pose"?Di:(Ee=i.value[Z])!=null?Ee:Di}function be(Z){return Z==="weight"?n.lastSelectedActor.value&&x(Z):t.lastSelectedArmature.value?x(Z):x("object"),Z===a.state.value}function je(){const Z=u.value;!Z||(t.updateBones(Object.keys(t.selectedBones.value).reduce((Ee,Ke)=>(Ee[Ke]=Yl(t.boneMap.value[Ke],Z,t.selectedBones.value[Ke]),Ee),{})),Pe())}function Pe(Z,Ee=""){u.value=Z,d.value=Ee}function Be(){r.applyEditedTransforms(i.value),re()}function re(Z,Ee=""){i.value=Z!=null?Z:{},d.value=Ee}return{initState:f,exportState:m,canvasMode:v,editTransformType:h(()=>d.value),selectedBonesOrigin:p,changeCanvasMode:be,toggleCanvasMode:P,axisGridLine:M,setAxisGridInfo:N,getEditTransforms:V,getEditPoseTransforms:le,commandExamList:h(()=>y.value),setCommandExams:E,popupMenuList:h(()=>{var Z,Ee;return(Ee=(Z=b.value)==null?void 0:Z.items)!=null?Ee:[]}),popupMenuInfo:h(()=>b.value),setPopupMenuList:w,toolMenuGroupList:h(()=>T.value),setToolMenuGroups:O,posedBoneMap:A,visibledBoneMap:B,lastSelectedBoneSpace:h(()=>s.value),setEditTransform:Pe,completeEditTransform:je,completePoseTransforms:Be,setPoseTransforms:re}}const SC=_C(Yn(),Rt(),Mn(),rn());function Xn(){return SC}function Wn(e,t,n=!1){let r=!1,a;function o(...l){a=l,!r&&(r=!0,n&&e(...a),setTimeout(()=>{n||e(...a),r=!1},t))}return o}function Zs(e){const t=H(),n=H(),r=Ys();Ut(a),bt(()=>r.state.size,a);function a(){if(!n.value)return;const s=n.value.getBoundingClientRect();e().setViewSize({width:s.width,height:s.height})}function o(s){if(!t.value)return;const u=t.value.getBoundingClientRect();return ge(s,{x:u.left,y:u.top})}function l(s){if(!t.value)return;const u=t.value.getBoundingClientRect();return ce(s,{x:u.left,y:u.top})}return{wrapper:n,svg:t,addRootPosition:l,removeRootPosition:o}}function Qs(e,t){var d,v,f;const n=[{state:t()}];function r(){return n[n.length-1]}const a=(f=(v=(d=r().state).onStart)==null?void 0:v.call(d,e))!=null?f:Promise.resolve();function o(){return{label:r().state.getLabel()}}async function l(m){const p=await r().state.handleEvent(e,m);p&&(typeof p=="function"?await u(e,p()):p.type!=="break"?await u(e,p.getState(),p.type):await s(e))}async function s(m){var E,b,w,T;const p=r();await((b=(E=p.state).onEnd)==null?void 0:b.call(E,m)),n.pop(),n.length===0&&n.push({state:t()});const y=r();p.type!=="stack-resume"&&await((T=(w=y.state).onStart)==null?void 0:T.call(w,m))}async function u(m,p,y){var w,T,O,A,B;const E=r();E.state.shouldRequestPointerLock&&!p.shouldRequestPointerLock?m.exitPointerLock():!E.state.shouldRequestPointerLock&&p.shouldRequestPointerLock&&m.requestPointerLock();const b={state:p,type:y};switch(y){case"stack-restart":await((T=(w=E.state).onEnd)==null?void 0:T.call(w,m)),n.push(b);break;case"stack-resume":n.push(b);break;default:await((A=(O=E.state).onEnd)==null?void 0:A.call(O,m)),n[n.length-1]=g(c({},b),{type:E.type});break}await((B=p.onStart)==null?void 0:B.call(p,m))}async function i(){var p,y;await((y=(p=r().state).onEnd)==null?void 0:y.call(p,e)),n.length=0}return{getStateSummary:o,handleEvent:l,dispose:i,ready:a}}function Uo(e,t,n){let r;const a=e();return{getLabel:()=>a.getLabel()+(r?`:${r.getStateSummary().label}`:""),onStart:async o=>{var l;await((l=a.onStart)==null?void 0:l.call(a,o)),r=Qs(c(c({},o),n(o)),t),await r.ready},onEnd:async o=>{var l;await r.dispose(),await((l=a.onEnd)==null?void 0:l.call(a,o))},handleEvent:async(o,l)=>{const s=await a.handleEvent(o,l);return s||r.handleEvent(l)}}}function eu(e,t){function n(a){!a.clipboardData||(Object.entries(e()).forEach(([o,l])=>a.clipboardData.setData(o,l)),a.preventDefault())}async function r(a){if(!a.clipboardData)return;a.preventDefault();const o=Array.from(a.clipboardData.items).map(wC);o.length>0&&await t(o)}return{onCopy:n,onPaste:r}}function wC(e){return e.kind==="string"?{kind:"string",type:e.type,getAsString:()=>$C(e)}:{kind:"file",type:e.type,getAsFile:()=>CC(e)}}function $C(e){return e.kind==="string"?new Promise(t=>{e.getAsString(t)}):Promise.reject(`Can not read "${e.kind}" as string`)}function CC(e){if(e.kind==="file"){const t=e.getAsFile();return t?Promise.resolve(t):Promise.reject("Failed to read read the file")}else return Promise.reject(`Can not read "${e.kind}" as file`)}const xi="blendic-svg";function tu(e){return{serialize(t){return JSON.stringify({app:xi,appVersion:"0.17.0",type:e,data:t})},deserialize(t){const n=JSON.parse(t);if(n.app!==xi||n.type!==e)throw new Error("Invalid data");return n.data}}}const Ui=tu("bones");function Ki(e){return eu(()=>{const t=e.getDuplicateBones();return{"text/plain":Ui.serialize(t)}},async t=>{const n=t.find(o=>o.kind==="string");if(!n)return;const r=await n.getAsString(),a=Ui.deserialize(r);if(a.bones.length>0){const o=e.getBones(),l=ye(o).map(f=>f.name),s=qd(oe(a.bones),oe(a.createdConstraints),l),u=Gi(ye(te($t(e.getSelectedBones(),f=>!!(f.head&&f.tail)),(f,m)=>o[m]))),i=Gi(s.bones),d={x:u[0]-i[0]+20,y:u[1]-i[1]+20},v=s.bones.map(f=>g(c({},f),{head:ce(f.head,d),tail:ce(f.tail,d)}));e.addBones(v,{head:!0,tail:!0},s.createdConstraints)}})}function Gi(e){if(e.length===0)return[0,0];const[t,...n]=e;return n.reduce((r,a)=>(r[0]=Math.min(r[0],Math.min(a.head.x,a.tail.x)),r[1]=Math.min(r[1],Math.min(a.head.y,a.tail.y)),r),[Math.min(t.head.x,t.tail.x),Math.min(t.head.y,t.tail.y)])}function mn(){return EC}const EC={getLabel:()=>"Panning",shouldRequestPointerLock:!0,handleEvent:async(e,t)=>{switch(t.type){case"pointermove":e.panView(t.data);return;case"pointerup":return{type:"break"}}}};function vl(){return MC}const MC={getLabel:()=>"Grabbing",shouldRequestPointerLock:!0,onStart:async e=>{e.setEditTransform(de(),"grab")},onEnd:async e=>{e.setAxisGridInfo(),e.setEditTransform()},handleEvent:async(e,t)=>{var n,r;switch(t.type){case"pointermove":{const a=AC(e,t.data.ctrl?Bd(t.data.scale):0,ge(t.data.current,t.data.start));e.setEditTransform(de({translate:a}),"grab");return}case"pointerup":return t.data.options.button===0&&e.completeEditTransform(),Dt;case"keydown":switch(t.data.key){case"Escape":return Dt;case"x":((n=e.getAxisGridInfo())==null?void 0:n.axis)==="x"?e.setAxisGridInfo():e.setAxisGridInfo({axis:"x",local:!1,vec:{x:1,y:0},origin:Dn(e.getBones(),e.getSelectedBones())});return;case"y":((r=e.getAxisGridInfo())==null?void 0:r.axis)==="y"?e.setAxisGridInfo():e.setAxisGridInfo({axis:"y",local:!1,vec:{x:0,y:1},origin:Dn(e.getBones(),e.getSelectedBones())});return;default:return}default:return}}};function AC(e,t,n){const r=e.getAxisGridInfo();return r?jd(t,r.vec,n):Fd(t,0,n)}function IC(){return TC}const TC={getLabel:()=>"Rotating",shouldRequestPointerLock:!0,onStart:async e=>{e.setEditTransform(de(),"rotate")},onEnd:async e=>{e.setAxisGridInfo(),e.setEditTransform()},handleEvent:async(e,t)=>{switch(t.type){case"pointermove":{const n=Dn(e.getBones(),e.getSelectedBones()),r=(Tt(t.data.current,n)-Tt(t.data.start,n))/Math.PI*180,a=t.data.ctrl?Ld(r):r;e.setEditTransform(de({rotate:a,origin:n}),"rotate");return}case"pointerup":return t.data.options.button===0&&e.completeEditTransform(),Dt;case"keydown":switch(t.data.key){case"Escape":return Dt;default:return}default:return}}};function kC(){return OC}const OC={getLabel:()=>"Scaling",shouldRequestPointerLock:!0,onStart:async e=>{e.setEditTransform(de(),"scale")},onEnd:async e=>{e.setAxisGridInfo(),e.setEditTransform()},handleEvent:async(e,t)=>{var n,r;switch(t.type){case"pointermove":{const a=Dn(e.getBones(),e.getSelectedBones()),o=dg(a,t.data.start,t.data.current),l=Oe(Oe({x:1,y:1},o?-1:1),Un(t.data.current,a)/Un(t.data.start,a)),s=t.data.ctrl?Rd(l):l,u=BC(e,s);e.setEditTransform(de({scale:u,origin:a}),"scale");return}case"pointerup":return t.data.options.button===0&&e.completeEditTransform(),Dt;case"keydown":switch(t.data.key){case"Escape":return Dt;case"x":((n=e.getAxisGridInfo())==null?void 0:n.axis)==="x"?e.setAxisGridInfo():e.setAxisGridInfo({axis:"x",local:!1,vec:{x:1,y:0},origin:Dn(e.getBones(),e.getSelectedBones())});return;case"y":((r=e.getAxisGridInfo())==null?void 0:r.axis)==="y"?e.setAxisGridInfo():e.setAxisGridInfo({axis:"y",local:!1,vec:{x:0,y:1},origin:Dn(e.getBones(),e.getSelectedBones())});return;default:return}default:return}}};function BC(e,t){const n=e.getAxisGridInfo();return n?{x:n.axis==="y"?1:t.x,y:n.axis==="x"?1:t.y}:t}function LC(e){return{getLabel:()=>"Deleting",onStart:async t=>{RC(t,e)},onEnd:async t=>{t.setPopupMenuList()},handleEvent:async(t,n)=>{switch(n.type){case"pointerdown":switch(n.data.options.button){case 1:return mn;default:return Dt}case"keydown":switch(n.data.key){case"Escape":return Dt;default:return}case"popupmenu":switch(n.data.key){case"delete":return t.deleteBones(),Dt;case"dissolve":return t.dissolveBones(),Dt;default:return}}}}}function RC(e,t){e.setPopupMenuList({items:[{label:"Dissolve",key:"dissolve"},{label:"Delete",key:"delete"}],point:t.point})}function PC(){return NC}const NC={getLabel:()=>"RectangleSelecting",onStart:async e=>{e.startDragging(),e.setRectangleDragging(!0)},onEnd:async e=>{e.setRectangleDragging()},handleEvent:async(e,t)=>{switch(t.type){case"pointerup":{const n=e.getDraggedRectangle();return n&&e.selectBones(Gd(n,e.getBones()),t.data.options.shift),Dt}case"keydown":switch(t.data.key){case"Escape":return Dt}return}}};function Dt(){return jC}const jC={getLabel:()=>"Default",onStart:async e=>{zi(e)},handleEvent:async(e,t)=>{switch(t.type){case"pointerdown":switch(t.data.options.button){case 0:switch(t.target.type){case"empty":return e.selectBones({},t.data.options.shift),PC;case"bone-body":case"bone-head":case"bone-tail":e.selectBone(t.target.id,FC(t.target.type),t.data.options);return;default:return}case 1:return mn;default:return}case"keydown":switch(t.data.key){case"a":e.selectAllBones();return;case"A":e.addBone();return;case"x":{if(e.getLastSelectedBoneId()){const n=t.point;return n?()=>LC({point:n}):void 0}return}case"e":return e.getLastSelectedBoneId()?(e.extrudeBones(),vl):void 0;case"g":return e.getLastSelectedBoneId()?vl:void 0;case"r":return e.getLastSelectedBoneId()?IC:void 0;case"s":return e.getLastSelectedBoneId()?kC:void 0;case"D":return e.getLastSelectedBoneId()?(e.duplicateBones(),vl):void 0;default:return}case"popupmenu":switch(t.data.key){case"delete":e.deleteBones();return;case"dissolve":e.dissolveBones();return;case"subdivide":e.subdivideBones();return;case"symmetrize":e.symmetrizeBones();return;default:return}case"copy":{Ki(e).onCopy(t.nativeEvent);return}case"paste":{await Ki(e).onPaste(t.nativeEvent);return}case"selection":zi(e)}}};function zi(e){e.getLastSelectedBoneId()?(e.setCommandExams([{command:"e",title:"Extrude"},{command:"g",title:"Grab"},{command:"r",title:"Rotate"},{command:"s",title:"Scale"},{command:"a",title:"All Select"},{command:"A",title:"Add Bone"},{command:"x",title:"Delete"},{command:"D",title:"Duplicate"},{command:`${Vt()} + c`,title:"Clip"},{command:`${Vt()} + v`,title:"Paste"}]),e.setToolMenuGroups([{label:"Armature",items:[{label:"Subdivide",key:"subdivide"},{label:"Symmetrize",key:"symmetrize",underline:!0},{label:"Dissolve",key:"dissolve"},{label:"Delete",key:"delete"}]}])):(e.setCommandExams([{command:"a",title:"All Select"},{command:"A",title:"Add Bone"},{command:`${Vt()} + v`,title:"Paste"}]),e.setToolMenuGroups([]))}function FC(e){switch(e){case"bone-head":return{head:!0};case"bone-tail":return{tail:!0};default:return{head:!0,tail:!0}}}const Yi=tu("bone-poses");function Xi(e){return eu(()=>({"text/plain":Yi.serialize(te(e.getBones(),t=>t.transform))}),async t=>{const n=t.find(o=>o.kind==="string");if(!n)return;const r=await n.getAsString(),a=Yi.deserialize(r);Object.keys(a).length>0&&e.pastePoses(a)})}function VC(e){var l;const t=e.getLastSelectedBoneId();if(!t)return{origin:{x:0,y:0},radian:0};const n=e.getBones(),r=n[t],a=r.parentId?n[r.parentId]:void 0,o=(l=a==null?void 0:a.transform.rotate)!=null?l:0;return{origin:Hr(r,[r.transform]).head,radian:Wr(r)+o*Math.PI/180}}function mo(e,t){var r,a;const n=t==="x"?{x:1,y:0}:{x:0,y:1};if(((r=e.getAxisGridInfo())==null?void 0:r.axis)===t)if((a=e.getAxisGridInfo())!=null&&a.local)e.setAxisGridInfo();else{const o=VC(e);e.setAxisGridInfo({axis:t,local:!0,vec:tt(n,o.radian),origin:o.origin})}else e.setAxisGridInfo({axis:t,local:!1,vec:n,origin:Dn(e.getBones(),te(e.getSelectedBones(),()=>({head:!0})))})}function nu(e={}){return de(c({scale:{x:0,y:0}},e))}function DC(e,t,n){const r=t[n],a=t[r.parentId];return Tb(r,a==null?void 0:a.transform)(e)}function xC(){return UC}const UC={getLabel:()=>"Grabbing",shouldRequestPointerLock:!0,onStart:async e=>{e.setEditTransforms({},"grab"),e.setCommandExams([{command:"x",title:"On Axis X"},{command:"y",title:"On Axis Y"}])},onEnd:async e=>{e.setAxisGridInfo(),e.setEditTransforms(),e.setCommandExams()},handleEvent:async(e,t)=>{switch(t.type){case"pointermove":{const n=KC(e,t.data.ctrl?Bd(t.data.scale):0,ge(t.data.current,t.data.start)),r=e.getBones(),a=e.getSelectedBones(),o=$t(a,(l,s)=>r[s]&&!r[s].connected);e.setEditTransforms(te(o,(l,s)=>nu({translate:DC(n,r,s)})),"grab");return}case"pointerup":return t.data.options.button===0&&e.completeEditTransforms(),St;case"keydown":switch(t.data.key){case"Escape":return St;case"x":{mo(e,"x");return}case"y":{mo(e,"y");return}default:return}default:return}}};function KC(e,t,n){const r=e.getAxisGridInfo();return r?jd(t,r.vec,n):Fd(t,0,n)}function GC(e){return{getLabel:()=>"Inserting",onStart:async t=>{zC(t,e)},onEnd:async t=>{t.setPopupMenuList()},handleEvent:async(t,n)=>{switch(n.type){case"pointerdown":switch(n.data.options.button){case 1:return{getState:mn,type:"stack-resume"};default:return St}case"keydown":switch(n.data.key){case"Escape":return St;default:return}case"popupmenu":switch(n.data.key){case"location":return t.insertKeyframe({translateX:!0,translateY:!0}),St;case"rotation":return t.insertKeyframe({rotate:!0}),St;case"scale":return t.insertKeyframe({scaleX:!0,scaleY:!0}),St;case"location-rotation":return t.insertKeyframe({translateX:!0,translateY:!0,rotate:!0}),St;case"location-scale":t.insertKeyframe({translateX:!0,translateY:!0,scaleX:!0,scaleY:!0});break;case"rotation-scale":return t.insertKeyframe({rotate:!0,scaleX:!0,scaleY:!0}),St;case"all":return t.insertKeyframe({translateX:!0,translateY:!0,rotate:!0,scaleX:!0,scaleY:!0}),St;default:return}}}}}function zC(e,t){e.setPopupMenuList({items:[{label:"Location",key:"location"},{label:"Rotation",key:"rotation"},{label:"Scale",key:"scale"},{label:"Location & Rotation",key:"location-rotation"},{label:"Location & Scale",key:"location-scale"},{label:"Rotation & Scale",key:"rotation-scale"},{label:"All Transforms",key:"all"}],point:t.point})}function YC(){return XC}const XC={getLabel:()=>"RectangleSelecting",onStart:async e=>{e.startDragging(),e.setRectangleDragging(!0)},onEnd:async e=>{e.setRectangleDragging()},handleEvent:async(e,t)=>{switch(t.type){case"pointerup":{const n=e.getDraggedRectangle();return n&&e.selectBones(Gd(n,e.getBones()),t.data.options.shift),St}case"keydown":switch(t.data.key){case"Escape":return St}return}}};function WC(){let e=0,t=0;return{getLabel:()=>"Rotating",shouldRequestPointerLock:!0,onStart:async n=>{n.setEditTransforms({},"rotate")},onEnd:async n=>{n.setAxisGridInfo(),n.setEditTransforms()},handleEvent:async(n,r)=>{switch(r.type){case"pointermove":{const a=n.getSelectedBones(),o=Ls(a),l=Tt(r.data.current,o)-Tt(r.data.start,o),s=t+Od(e,l),u=s/Math.PI*180;e=l,t=s;const i=r.data.ctrl?Ld(u):u;n.setEditTransforms(te(a,d=>nu({rotate:i*HC(d)})),"rotate");return}case"pointerup":return r.data.options.button===0&&n.completeEditTransforms(),St;case"keydown":switch(r.data.key){case"Escape":return St;default:return}default:return}}}}function HC(e){const t=e.transform.scale;return Math.sign(t.x*t.y)}function qC(){return JC}const JC={getLabel:()=>"Scaling",shouldRequestPointerLock:!0,onStart:async e=>{e.setEditTransforms({},"scale"),e.setCommandExams([{command:"x",title:"On Axis X"},{command:"y",title:"On Axis Y"}])},onEnd:async e=>{e.setAxisGridInfo(),e.setEditTransforms(),e.setCommandExams()},handleEvent:async(e,t)=>{switch(t.type){case"pointermove":{const n=e.getBones(),r=e.getSelectedBones(),a=Ls(r),o=Oe({x:1,y:1},Un(t.data.current,a)/Un(t.data.start,a)-1),l=t.data.ctrl?Rd(o):o,s=ZC(e,l),u=$t(r,(d,v)=>n[v]&&!n[v].connected),i=nu({scale:s});e.setEditTransforms(te(u,()=>i),"scale");return}case"pointerup":return t.data.options.button===0&&e.completeEditTransforms(),St;case"keydown":switch(t.data.key){case"Escape":return St;case"x":{mo(e,"x");return}case"y":{mo(e,"y");return}default:return}default:return}}};function ZC(e,t){const n=e.getAxisGridInfo();return n?{x:n.axis==="y"?0:t.x,y:n.axis==="x"?0:t.y}:t}function St(){return QC}const QC={getLabel:()=>"Default",onStart:async e=>{Wi(e)},handleEvent:async(e,t)=>{switch(t.type){case"pointerdown":switch(t.data.options.button){case 0:switch(t.target.type){case"empty":return e.selectBones({},t.data.options.shift),YC;case"bone-body":case"bone-head":case"bone-tail":e.selectBone(t.target.id,{head:!0,tail:!0},t.data.options,!0);return;default:return}case 1:return mn;default:return}case"keydown":switch(t.data.key){case"a":e.selectAllBones();return;case"g":return e.getLastSelectedBoneId()?xC:void 0;case"r":return e.getLastSelectedBoneId()?WC:void 0;case"s":return e.getLastSelectedBoneId()?qC:void 0;case"i":{const n=t.point;return e.getLastSelectedBoneId()&&n?()=>GC({point:n}):void 0}default:return}case"copy":{Xi(e).onCopy(t.nativeEvent);return}case"paste":{await Xi(e).onPaste(t.nativeEvent);return}case"selection":Wi(e);return;default:return}}};function Wi(e){e.getLastSelectedBoneId()?e.setCommandExams([{command:"i",title:"Insert Keyframe"},{command:"g",title:"Grab"},{command:"r",title:"Rotate"},{command:"s",title:"Scale"},{command:"a",title:"All Select"},{command:`${Vt()} + c`,title:"Clip"},{command:`${Vt()} + v`,title:"Paste"}]):e.setCommandExams([{command:"a",title:"All Select"},{command:`${Vt()} + v`,title:"Paste"}]),e.setToolMenuGroups([])}function eE(){return tE}const tE={getLabel:()=>"Default",onStart:async e=>{e.setCommandExams()},handleEvent:async(e,t)=>{switch(t.type){case"pointerdown":switch(t.data.options.button){case 0:switch(t.target.type){case"empty":e.selectElement();return;case"element":e.selectElement(t.target.id,t.data.options);return;default:return}case 1:return mn;default:return}default:return}}};function ru(){return Uo(()=>nE,eE,e=>e.getWeightContext())}const nE={getLabel:()=>"Weight",handleEvent:async(e,t)=>{switch(t.type){case"state":switch(t.data.name){case"object":return Ko;case"edit":return ou;case"pose":return au;default:return}case"keydown":switch(t.data.key){case"Tab":e.toggleMode(t.data.shift);return;default:return}}}};function au(){return Uo(()=>rE,St,e=>e.getPoseContext())}const rE={getLabel:()=>"Pose",handleEvent:async(e,t)=>{switch(t.type){case"state":switch(t.data.name){case"object":return Ko;case"edit":return ou;case"weight":return ru;default:return}case"keydown":switch(t.data.key){case"Tab":e.toggleMode(t.data.shift);return;default:return}}}};function ou(){return Uo(()=>aE,Dt,e=>e.getEditContext())}const aE={getLabel:()=>"Edit",handleEvent:async(e,t)=>{switch(t.type){case"state":switch(t.data.name){case"object":return Ko;case"pose":return au;case"weight":return ru;default:return}case"keydown":switch(t.data.key){case"Tab":e.toggleMode(t.data.shift);return;default:return}}}};function oE(){return lE}const lE={getLabel:()=>"Default",onStart:async e=>{vo(e)},handleEvent:async(e,t)=>{switch(t.type){case"pointerdown":switch(t.data.options.button){case 0:switch(t.target.type){case"empty":return sE(e);case"armature-body":return uE(e,t)}return;case 1:return mn}return;case"keydown":switch(t.data.key){case"A":{e.addArmature();return}case"a":e.selectAllArmatures();return;case"x":Object.keys(e.getArmatures()).length>1&&e.deleteArmatures();return}return;case"selection":vo(e);return}}};function sE(e){e.selectArmature(),vo(e)}function uE(e,t){const n=t.target.id;n&&(e.selectArmature(n),vo(e))}function vo(e){e.getLastSelectedArmaturesId()?e.setCommandExams([{command:"a",title:"All Select"},{command:"A",title:"Add Armature"},...Object.keys(e.getArmatures()).length>1?[{command:"x",title:"Delete Armature"}]:[]]):e.setCommandExams([{command:"A",title:"Add Armature"}])}function Ko(){return Uo(()=>iE,oE,e=>e.getObjectContext())}const iE={getLabel:()=>"Object",handleEvent:async(e,t)=>{switch(t.type){case"state":switch(t.data.name){case"edit":return ou;case"pose":return au;case"weight":return ru;default:return}case"keydown":switch(t.data.key){case"Tab":e.toggleMode(t.data.shift);return;default:return}}}};function cE(e){const t=dE(e),n=fE(e),r=pE(e),a=mE(e),o=g(c({},Ta(e)),{getObjectContext:()=>t,getEditContext:()=>n,getPoseContext:()=>r,getWeightContext:()=>a,toggleMode:e.canvasStore.toggleCanvasMode});return{sm:Qs(o,Ko)}}function Ta(e){return{requestPointerLock:e.requestPointerLock,exitPointerLock:e.exitPointerLock,getTimestamp:()=>Date.now()}}function dE(e){const{indexStore:t,canvasStore:n}=e;return g(c({},Ta(e)),{getArmatures:()=>oe(t.armatures.value),getLastSelectedArmaturesId:()=>t.lastSelectedArmatureId.value,selectArmature:t.selectArmature,selectAllArmatures:t.selectAllArmature,addArmature:t.addArmature,deleteArmatures:t.deleteArmature,generateUuid:qe,panView:e.panView,startDragging:e.startDragging,setRectangleDragging:e.setRectangleDragging,getDraggedRectangle:e.getDraggedRectangle,setPopupMenuList:n.setPopupMenuList,setCommandExams:n.setCommandExams})}function fE(e){const{indexStore:t,canvasStore:n}=e;function r(){const a=t.allSelectedBones.value,o=ye(t.boneMap.value).map(l=>l.name);return qd(a,t.constraintMap.value,o)}return g(c({},Ta(e)),{generateUuid:qe,panView:e.panView,startDragging:e.startDragging,setRectangleDragging:e.setRectangleDragging,getDraggedRectangle:e.getDraggedRectangle,setPopupMenuList:n.setPopupMenuList,setCommandExams:n.setCommandExams,getBones:()=>t.boneMap.value,getLastSelectedBoneId:()=>t.lastSelectedBoneId.value,getSelectedBones:()=>t.selectedBones.value,selectBone:t.selectBone,selectBones:t.selectBones,selectAllBones:t.selectAllBones,addBone:t.addBone,addBones:t.addBones,updateBones:t.updateBones,deleteBones:t.deleteBone,extrudeBones:()=>{const a=t.boneMap.value,o=t.selectedBones.value,l=Object.values(a).map(i=>i.name),s={},u=[];Object.keys(o).forEach(i=>{const d=o[i],v=a[i],f=[];d.tail&&f.push(bi(v)),d.head&&f.push(bi(v,!0)),f.forEach(m=>{s[m.parentId]||(m.name=Xt(v.name,l),u.push(m),l.push(m.name),s[m.parentId]=!0)})}),t.addBones(u,{tail:!0})},dissolveBones:t.dissolveBone,subdivideBones:()=>{const a=Cb(t.boneMap.value,Object.keys(t.allSelectedBones.value)),o=Object.keys(a).reduce((l,s)=>(t.boneMap.value[s]||(l[s]={head:!0,tail:!0},l[a[s].parentId]={head:!0,tail:!0}),l),{});t.upsertBones(ye(a),o)},symmetrizeBones:()=>{const a=gb(t.boneMap.value,t.constraintMap.value,Object.keys(t.allSelectedBones.value));t.upsertBones(a.bones,te(oe(a.bones),()=>({head:!0,tail:!0})),a.createdConstraints)},duplicateBones:()=>{const a=r();t.addBones(a.bones,{head:!0,tail:!0},a.createdConstraints)},getDuplicateBones:r,setEditTransform:n.setEditTransform,completeEditTransform:n.completeEditTransform,setAxisGridInfo:n.setAxisGridInfo,getAxisGridInfo:()=>n.axisGridLine.value,setToolMenuGroups:n.setToolMenuGroups})}function pE(e){const{indexStore:t,canvasStore:n,animationStore:r}=e;return g(c({},Ta(e)),{generateUuid:qe,panView:e.panView,startDragging:e.startDragging,setRectangleDragging:e.setRectangleDragging,getDraggedRectangle:e.getDraggedRectangle,setPopupMenuList:n.setPopupMenuList,setCommandExams:n.setCommandExams,getBones:()=>r.currentPosedBones.value,getLastSelectedBoneId:()=>t.lastSelectedBoneId.value,getSelectedBones:()=>r.selectedBones.value,selectBone:t.selectBone,selectBones:t.selectBones,selectAllBones:t.selectAllBones,setEditTransforms:n.setPoseTransforms,completeEditTransforms:n.completePoseTransforms,setAxisGridInfo:n.setAxisGridInfo,getAxisGridInfo:()=>n.axisGridLine.value,insertKeyframe:r.execInsertKeyframe,pastePoses:r.pastePoses,setToolMenuGroups:n.setToolMenuGroups})}function mE(e){const{canvasStore:t,elementStore:n}=e;return g(c({},Ta(e)),{generateUuid:qe,panView:e.panView,startDragging:e.startDragging,setRectangleDragging:e.setRectangleDragging,getDraggedRectangle:e.getDraggedRectangle,setPopupMenuList:t.setPopupMenuList,setCommandExams:t.setCommandExams,selectElement:n.selectElement})}const Hi={id:"",type:"empty"};function ho(e){var o,l;if(!e.target)return Hi;const t=vE(e.target);if(!t)return Hi;const n=(o=t.dataset.id)!=null?o:"",r=(l=t.dataset.type)!=null?l:"",a=t.dataset?Object.entries(t.dataset).reduce((s,[u,i])=>(s[u]=i!=null?i:"true",s),{}):void 0;return{id:n,type:r,data:a}}function vE(e){const t=e.closest("[data-type]");return t||void 0}function lu(e){const t=H(),n=H(),r=h(()=>e().map(o=>{var l;return g(c({},o),{focus:o.label===t.value,opened:o.label===n.value,hover(){o.children&&(n.value=o.label)},exec(){o.exec?(t.value=o.label,n.value="",o.exec()):o.children&&(n.value=n.value===o.label?"":o.label)},children:(l=o.children)==null?void 0:l.map(s=>g(c({},s),{exec(){var u;(u=s.exec)==null||u.call(s),t.value=o.label}}))})}));function a(){n.value=""}return{list:r,clearOpened:a}}const hE=Q({components:{CanvasModepanel:z1,CommandExamPanel:Ks,CanvasToolMenuGroups:lw,PopupMenuList:zs,GlobalCursor:Iw,CursorLine:jw,SelectRectangle:Pf,FocusableBlock:Nf},props:{originalViewBox:{type:Object,default:void 0}},setup(e){const t=Rt(),n=Xn(),r=rn(),a=Mn(),{settings:o}=Et(),l=Rf(),{wrapper:s,svg:u,addRootPosition:i,removeRootPosition:d}=Zs(()=>l);Ws(()=>l.scale.value);const v=Wn(N,1e3/60,!0),f=xo({onMove:v,onGlobalMove:re=>{if(!u.value)return;const Z=d(re.p);!Z||l.setMousePoint(Z)},onEscape:()=>{m.sm.handleEvent({type:"keydown",data:{key:"Escape"},point:l.viewToCanvas(l.mousePoint.value)})}}),m=cE({indexStore:t,canvasStore:n,animationStore:r,elementStore:a,requestPointerLock:()=>{!u.value||(l.startMoving(),f.requestPointerLockFromElement(u.value))},exitPointerLock:()=>{f.exitPointerLock(),l.endMoving()},panView:re=>l.viewMove(re),startDragging:()=>l.startDragging(),setRectangleDragging:re=>l.setRectangleDragging(re),getDraggedRectangle:()=>l.draggedRectangle.value});bt(n.canvasMode,re=>{m.sm.handleEvent({type:"state",data:{name:re}})}),bt([t.lastSelectedArmature,t.selectedBones,a.selectedElements],()=>{m.sm.handleEvent({type:"selection"})});function p(){if(!e.originalViewBox)return;const re=Xs(e.originalViewBox,l.viewSize.value,150);l.viewOrigin.value=re.viewOrigin,l.scale.value=re.scale}bt(()=>e.originalViewBox,p),Ut(p);const y=h(()=>{if(!!l.editStartPoint.value&&!!n.axisGridLine.value)return g(c({},I1(n.axisGridLine.value.origin,n.axisGridLine.value.vec,l.viewCanvasRect.value)),{color:n.axisGridLine.value.axis==="x"?"red":"green"})});function E(){if(!s.value)return;const re=s.value.getBoundingClientRect();l.setViewSize({width:re.width,height:re.height})}const b=Ys();Ut(E),bt(()=>b.state.size,E);const w=h(()=>n.popupMenuInfo.value?i(l.canvasToView(n.popupMenuInfo.value.point)):void 0),T=lu(()=>{var re,Z;return(Z=(re=n.popupMenuInfo.value)==null?void 0:re.items.map(({label:Ee,children:Ke,key:me,data:z})=>({label:Ee,exec:me?()=>be(me,z):void 0,children:Ke==null?void 0:Ke.map(({label:ie,key:we,data:Le})=>({label:ie,exec:we?()=>be(we,Le):void 0}))})))!=null?Z:[]}),O=h(()=>{var re;return(re=n.toolMenuGroupList.value.map(({label:Z,items:Ee})=>({label:Z,items:Ee.map(({label:Ke,key:me})=>({label:Ke,exec:me?()=>be(me):void 0}))})))!=null?re:[]}),A=h(()=>{if(!!["scale","rotate"].includes(n.editTransformType.value))return{origin:n.selectedBonesOrigin.value,current:l.viewToCanvas(l.mousePoint.value)}}),B=h(()=>A.value?Tt(A.value.current,A.value.origin)*180/Math.PI:0),M=h(()=>{switch(n.editTransformType.value){case"rotate":return"move-v";case"scale":return"move-h";default:return"move"}}),P=h(()=>n.editTransformType.value?i(l.mousePoint.value):void 0);function R(re){m.sm.handleEvent({type:"pointerdown",target:ho(re),data:{point:l.viewToCanvas(l.mousePoint.value),options:hr(re)}})}function x(re){l.endMoving(),m.sm.handleEvent({type:"pointerup",target:ho(re),data:{point:l.viewToCanvas(l.mousePoint.value),options:hr(re)}})}function N(re){!l.editStartPoint.value||m.sm.handleEvent({type:"pointermove",data:{start:l.viewToCanvas(l.editStartPoint.value),current:l.viewToCanvas(l.mousePoint.value),ctrl:re.ctrl,scale:l.scale.value}})}function V(re){l.dragged.value&&l.editStartPoint.value&&m.sm.handleEvent({type:"pointerdrag",data:{start:l.viewToCanvas(l.editStartPoint.value),current:l.viewToCanvas(l.mousePoint.value),ctrl:Qt(re),scale:l.scale.value}})}function le(re){m.sm.handleEvent({type:"keydown",data:fo(re),point:l.viewToCanvas(l.mousePoint.value)})}function be(re,Z={}){m.sm.handleEvent({type:"popupmenu",data:c({key:re},Z)})}function je(re){m.sm.handleEvent({type:"copy",nativeEvent:re})}function Pe(re){m.sm.handleEvent({type:"paste",nativeEvent:re})}function Be(re){n.changeCanvasMode(re)}return{viewCanvasRect:h(()=>l.viewCanvasRect.value),showAxis:h(()=>o.showAxis),scale:l.scale,viewSize:l.viewSize,svg:u,wrapper:s,viewBox:l.viewBox,gridLineElm:y,dragRectangle:l.draggedRectangle,canvasMode:n.canvasMode,popupMenuItems:h(()=>T.list.value),popupMenuListPosition:w,wheel:l.wheel,changeMode:Be,commandExamList:n.commandExamList,toolMenuGroupList:O,cursorInfo:A,cursorRotate:B,cursorType:M,cursor:P,handleDownEvent:R,handleUpEvent:x,handleMoveEvent:N,handleNativeMoveEvent:V,handleKeydownEvent:le,handleCopyEvent:je,handlePasteEvent:Pe}}}),ip=e=>(it("data-v-f46d563a"),e=e(),ct(),e),yE={ref:"wrapper",class:"app-canvas-root"},gE=["viewBox","width","height"],bE=["stroke-width"],_E=ip(()=>C("line",{x1:"-20000",x2:"20000",stroke:"red"},null,-1)),SE=ip(()=>C("line",{y1:"-20000",y2:"20000",stroke:"green"},null,-1)),wE=[_E,SE],$E=["x1","y1","x2","y2","stroke","stroke-width"],CE={class:"left-top-space"};function EE(e,t,n,r,a,o){const l=F("SelectRectangle"),s=F("CursorLine"),u=F("FocusableBlock"),i=F("CanvasModepanel"),d=F("CanvasToolMenuGroups"),v=F("CommandExamPanel"),f=F("PopupMenuList"),m=F("GlobalCursor");return S(),k("div",yE,[$(u,{onKeydown:e.handleKeydownEvent,onCopy:e.handleCopyEvent,onPaste:e.handlePasteEvent},{default:Y(()=>[(S(),k("svg",{ref:"svg",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none","font-family":"sans-serif",viewBox:e.viewBox,width:e.viewSize.width,height:e.viewSize.height,onWheel:t[0]||(t[0]=Me((...p)=>e.wheel&&e.wheel(...p),["prevent"])),onMousedown:t[1]||(t[1]=Me((...p)=>e.handleDownEvent&&e.handleDownEvent(...p),["prevent"])),onMouseup:t[2]||(t[2]=Me((...p)=>e.handleUpEvent&&e.handleUpEvent(...p),["prevent"])),onMousemove:t[3]||(t[3]=(...p)=>e.handleNativeMoveEvent&&e.handleNativeMoveEvent(...p)),onContextmenu:t[4]||(t[4]=Me(()=>{},["prevent"]))},[e.showAxis?(S(),k("g",{key:0,"stroke-width":1*e.scale,"stroke-opacity":"0.3"},wE,8,bE)):fe("",!0),e.gridLineElm?(S(),k("line",{key:1,x1:e.gridLineElm.from.x,y1:e.gridLineElm.from.y,x2:e.gridLineElm.to.x,y2:e.gridLineElm.to.y,stroke:e.gridLineElm.color,"stroke-width":2*e.scale},null,8,$E)):fe("",!0),vt(e.$slots,"default",{scale:e.scale},void 0,!0),e.dragRectangle?(S(),Se(l,{key:2,x:e.dragRectangle.x,y:e.dragRectangle.y,width:e.dragRectangle.width,height:e.dragRectangle.height,class:"view-only"},null,8,["x","y","width","height"])):fe("",!0),e.cursorInfo?(S(),Se(s,{key:3,origin:e.cursorInfo.origin,current:e.cursorInfo.current},null,8,["origin","current"])):fe("",!0)],40,gE))]),_:3},8,["onKeydown","onCopy","onPaste"]),C("div",CE,[$(i,{class:"mode-panel","canvas-mode":e.canvasMode,onChangeMode:e.changeMode},null,8,["canvas-mode","onChangeMode"]),e.canvasMode==="edit"?(S(),Se(d,{key:0,class:"armature-menu",groups:e.toolMenuGroupList},null,8,["groups"])):fe("",!0)]),$(v,{class:"command-exam-panel","available-command-list":e.commandExamList},null,8,["available-command-list"]),e.popupMenuItems.length>0&&e.popupMenuListPosition?(S(),Se(f,{key:0,class:"popup-menu-list","popup-menu-list":e.popupMenuItems,style:at({left:`${e.popupMenuListPosition.x-20}px`,top:`${e.popupMenuListPosition.y-10}px`})},null,8,["popup-menu-list","style"])):fe("",!0),$(m,{p:e.cursor,rotate:e.cursorRotate,cursor:e.cursorType},null,8,["p","rotate","cursor"])],512)}var ME=ee(hE,[["render",EE],["__scopeId","data-v-f46d563a"]]);const AE=Q({props:{tabs:{type:Array,default:()=>[]},initialTab:{type:String,default:void 0}},setup(e){var n,r,a;const t=H((a=(r=e.initialTab)!=null?r:(n=e.tabs[0])==null?void 0:n.key)!=null?a:"");return{current:t,setTab:o=>t.value=o}}}),IE={class:"tab-panel-root"},TE=["onClick"],kE={class:"panels"};function OE(e,t,n,r,a,o){return S(),k("div",IE,[C("ul",null,[(S(!0),k(ve,null,Ae(e.tabs,l=>(S(),k("li",{key:l.key,class:pt({current:l.key===e.current})},[C("a",{href:"#",onClick:Me(s=>e.setTab(l.key),["prevent"])},Ve(l.label),9,TE)],2))),128))]),C("div",kE,[(S(!0),k(ve,null,Ae(e.tabs,l=>gr((S(),k("div",{key:l.key},[vt(e.$slots,l.key,{},void 0,!0)])),[[Dh,l.key===e.current]])),128))])])}var BE=ee(AE,[["render",OE],["__scopeId","data-v-628df2c2"]]);const LE=Q({setup(){return{historySummaries:Yn().historySummaries}}}),RE=e=>(it("data-v-bc049cc6"),e=e(),ct(),e),PE=RE(()=>C("h3",null,"history",-1));function NE(e,t,n,r,a,o){return S(),k("div",null,[PE,C("ul",null,[(S(!0),k(ve,null,Ae(e.historySummaries,(l,s)=>(S(),k("li",{key:s,class:pt({done:l.done})},Ve(l.name),3))),128))])])}var jE=ee(LE,[["render",NE],["__scopeId","data-v-bc049cc6"]]);function qi(e){return e[0]*e[3]-e[1]*e[2]===0?[0,0,0,0,0,0]:uy(e)}function FE(e,t,n){return Xr([n?qi(n):void 0,e?qi(e):void 0,t].filter(r=>!!r))}function VE(e,t){return Xr([e,t].filter(n=>!!n))}function cp(e,t,n){const r=su(e,t,n,void 0,void 0);return pp(e,r,t,n)}function su(e,t,n,r="",a=He){var v;const o=t[n.id],l=(v=Ji(e,r))!=null?v:He,s=(o==null?void 0:o.boneId)||r,u=Ji(e,s),i=DE(n,a),d=Xr([FE(l,u,a),i].filter(f=>!!f));return c({[n.id]:d},n.children.reduce((f,m)=>(st(m)||(f=c(c({},f),su(e,t,m,s,i))),f),{}))}function dp(e,t,n,r){const a=$1(e,n,r);return t&&!rg(t)&&(a.transform=fp(t)),a}function fp(e){return yd([ft(-5,e[0]),ft(-5,e[1]),ft(-5,e[2]),ft(-5,e[3]),ft(-5,e[4]),ft(-5,e[5])])}function pp(e,t,n,r){const a=dp(e,t[r.id],n[r.id],r);return g(c({},r),{attributes:c(c({},r.attributes),a),children:r.children.map(o=>st(o)?o:pp(e,t,n,o))})}function Ji(e,t){const n=e[t];return n?db(n):void 0}function DE(e,t){return VE(t,e.attributes.transform?py(e.attributes.transform):void 0)}function xE(e,t,n,r,a,o){return[...Array(o+1)].map((l,s)=>GE(e,t,n,r,a,s))}function UE(e,t,n){return e.map(r=>mp(r,t,n))}function KE(e,t,n,r){const a=np(e),o=Hs(a.bone,r),l=te(t,(u,i)=>{var d;return g(c({},u),{transform:(d=o[i])!=null?d:de()})}),s=qs(a.constraint,r);return{bones:l,constraints:te(n,u=>{const i=s[u.id];return i?g(c({},u),{option:i}):u})}}function GE(e,t,n,r,a,o){return mp(vp(e,t,n,o),r,a)}function mp(e,t,n){const r=su(e,t,n),a=oe(Ea([n]));return te(r,(o,l)=>dp(e,o,t[l],a[l]))}function vp(e,t,n,r){const a=KE(e,t,n,r);return Ps(a.bones,a.constraints)}function zE(e,t){return te(t,(n,r)=>Go(e[r],n))}function hp(e,t){return yp(e,WE(e,eM(e,t)))}function yp(e,t){const n=e[t.id],r=!n||t.attributes[gp];return g(c({},t),{attributes:r?t.attributes:Go(n,t.attributes),children:t.children.map(a=>st(a)?a:yp(e,a))})}const YE={x:!0,y:!0,dx:!0,dy:!0,width:!0,height:!0,cx:!0,cy:!0,r:!0,rx:!0,ry:!0,fx:!0,fy:!0,"font-size":!0,"stroke-dashoffset":!0,x1:!0,y1:!0,x2:!0,y2:!0,offset:!0},XE={id:!0,"text-anchor":!0,"dominant-baseline":!0,"stroke-dasharray":!0,gradientUnits:!0,spreadMethod:!0,clipPathUnits:!0,"clip-path":!0};function Go(e,t){var r,a;if(e.disabled)return{fill:"none",stroke:"none"};const n=c({},t);if(e.transform?n.transform=fp(ag(e.transform)):t.transform&&(n.transform=t.transform),e.fill)if(typeof e.fill=="string")n.fill=`url(#${e.fill})`;else{const o=ia(e.fill);n.fill=o.color,n["fill-opacity"]=o.opacity}if(e.stroke)if(typeof e.stroke=="string")n.stroke=`url(#${e.stroke})`;else{const o=ia(e.stroke);n.stroke=o.color,n["stroke-opacity"]=o.opacity}if(e["stroke-width"]&&(n["stroke-width"]=e["stroke-width"].toString()),e.attributes){const o=e.attributes;if(Object.entries(o).forEach(([l,s])=>{s!==void 0&&(YE[l]?n[l]=s.toString():XE[l]&&(n[l]=s))}),e.attributes.viewBox&&(n.viewBox=Do(e.attributes.viewBox)),e.attributes.d){const l=(a=(r=e.attributes.d[0])==null?void 0:r.trim())==null?void 0:a.toLowerCase()[0];(l==="m"||l==="l")&&(n.d=e.attributes.d.join(" "))}if(e.attributes["stop-color"]){const l=ia(e.attributes["stop-color"]);n["stop-color"]=l.color,n["stop-opacity"]=l.opacity}}return wp(e)&&(n[bp]=e.elementId),n}function WE(e,t){const n=Object.values(e).filter(u=>u.clone),r={},{tree:a,clonedElementIds:o}=qE(n,t,r),l=QE(e,a),s=Object.keys(o).map(u=>e[u]).concat(n);return HE(s,l,r)}function HE(e,t,n){const r=e.reduce((a,o)=>(o.elementId&&(a[o.elementId]=a[o.elementId]?[...a[o.elementId],o]:[o]),a),{});return _p(r,t,n)}const gp="data-blendic-use-origin-id",Sa="data-blendic-use-id",bp="data-blendic-use-id-for-g";function Zi(e,t,n){return{id:`clone_${e.id}`,tag:"use",attributes:c({href:`#${t}`,"xlink:href":`#${t}`},Go(e,n)),children:[]}}function _p(e,t,n,r={}){var i;const a=t.attributes[Sa]||t.attributes[bp],o=!!t.attributes[Sa],l=(i=e[a])!=null?i:[];r[a]||(r[a]=br(l,"parent"));const s=r[a],u=t.children.map(d=>{var m,p;if(st(d))return d;const v=_p(e,d,n,r),f=(p=o?s[v.id]:(m=s[v.id])==null?void 0:m.filter(y=>y.id!==a))!=null?p:[];return g(c({},v),{children:[...v.children,...f.map(y=>Zi(y,a,n[a]))]})});return o?g(c({},t),{children:[...u,...l.filter(d=>!d.parent).map(d=>Zi(d,a,n[a]))]}):g(c({},t),{children:u})}function qE(e,t,n){const r=e.map(a=>a.elementId).reduce((a,o)=>(o&&(a[o]=!0),a),{});return{tree:Sp(r,t,n),clonedElementIds:r}}const JE=["transform","fill","stroke","fill-opacity","stroke-opacity","x","y"];function ZE(e){const t=c({},e);JE.forEach(r=>{delete t[r]});const n=e.style;if(n){const r=$f(n);delete r.fill,delete r.stroke,delete r["fill-opacity"],delete r["stroke-opacity"];const a=Cf(r);a?t.style=a:delete t.style}return t}function Sp(e,t,n){const r=t.children.map(a=>st(a)?a:Sp(e,a,n));if(e[t.id]){n[t.id]=t.attributes;const a=ZE(t.attributes);return{id:`blendic_group_${t.id}`,tag:"g",attributes:{[Sa]:t.id},children:[{id:"",tag:"defs",attributes:{},children:[{id:t.id,tag:t.tag,attributes:g(c({},a),{[gp]:t.id,id:t.id}),children:r}]}]}}else return g(c({},t),{children:r})}function wp(e){return!!e.create&&!!e.elementId}function QE(e,t){const n=$t(e,wp),r={},a=$p(n,t,o=>{const l=e[o.id].elementId;r[l]||(r[l]=[]),r[l].push(o)});return Cp(r,a)}function $p(e,t,n){if(e[t.id]){n(t);return}else{const r=t.children.map(a=>st(a)?a:$p(e,a,n)).filter(a=>!!a);return g(c({},t),{children:r})}}function Cp(e,t){var r;const n=t.children.map(a=>st(a)?a:Cp(e,a));if(t.attributes[Sa]){const a=(r=e[t.attributes[Sa]])!=null?r:[];return g(c({},t),{children:[...n,...a]})}else return g(c({},t),{children:n})}function eM(e,t){const n=Object.values(e).filter(o=>o.create&&o.tag).map(o=>o.parent?o:g(c({},o),{parent:t.id})),r=br(n,"parent"),a=te(r,o=>o.map(tM));return Ep(t,a)}function tM(e){var t;return Lo({id:e.id,tag:(t=e.tag)!=null?t:"rect",attributes:Go(e,{}),children:e.text?[e.text]:[]})}function Ep(e,t){const n=t[e.id]?[...e.children,...t[e.id]]:e.children;return g(c({},e),{children:[...n.map(r=>st(r)?r:Ep(r,t))]})}function hl(e){return g(c({},e),{attributes:g(c({},e.attributes),{"xmlns:xlink":"http://www.w3.org/1999/xlink"})})}function nM(e){var i,d,v,f,m,p,y,E,b,w,T,O,A,B,M,P,R,x,N,V;const t=oe(e.keyframes),n=te(oe(e.actions),le=>le.keyframes.map(be=>t[be])),r=oe(e.elements),a=te(oe(e.actors),le=>le.elements.map(be=>r[be])),o=oe((i=e.nodes)!=null?i:[]),l=(v=(d=e.graphs)==null?void 0:d.map(le=>iM(le,o)))!=null?v:[],s=(m=(f=e.customGraphs)==null?void 0:f.map(le=>cM(le,o)))!=null?m:[],u=fM((p=e.nodes)!=null?p:[]);return{armatures:e.armatures.map(rM),bones:e.bones.map(aM),constraints:e.constraints.map(oM),armatureSelected:(y=e.armatureSelected)!=null?y:[],boneSelected:(E=e.boneSelected)!=null?E:[],canvasMode:(b=e.canvasMode)!=null?b:"object",currentFrame:(w=e.currentFrame)!=null?w:0,endFrame:(T=e.endFrame)!=null?T:60,actions:e.actions.map(lM),keyframes:e.actions.flatMap(le=>n[le.id].map(sM)),actionSelected:(O=e.actionSelected)!=null?O:[],keyframeState:(A=e.keyframeState)!=null?A:[],targetPropsState:(B=e.targetPropsState)!=null?B:[],actors:e.actors.map(uM),elements:e.actors.flatMap(le=>h1(le.svgTree,a[le.id])),actorSelected:(M=e.actorSelected)!=null?M:[],elementSelected:(P=e.elementSelected)!=null?P:[],graphs:l,customGraphs:s,nodes:u,graphSelected:(R=e.graphSelected)!=null?R:[],customGraphSelected:(x=e.customGraphSelected)!=null?x:[],nodeSelected:(N=e.nodeSelected)!=null?N:[],graphType:(V=e.graphType)!=null?V:"graph"}}function rM(e){return Gl(e)}function aM(e){return Vn(e)}function oM(e){return Dd(e)}function lM(e){return Td(e)}function sM(e){return tp(c({name:"bone"},e))}function uM(e){return Ts(e)}function iM(e,t){const n=Ad(e);return g(c({},n),{nodes:n.nodes.filter(r=>!!t[r])})}function cM(e,t){const n=Id(e);return g(c({},n),{nodes:n.nodes.filter(r=>!!t[r])})}function dM(e){var r;const t=(r=co(e.type))==null?void 0:r.struct;if(!t)return e;const n=t.create();return g(c(c({},n),e),{inputs:Ze(c(c({},n.inputs),e.inputs),t.inputs),data:Ze(c(c({},n.data),e.data),t.data)})}function fM(e){return e.filter(pM).map(dM)}function pM(e){return!0}function yl(e,t){const n=mM(e,t),r=vM(n),a=hM(n);return{struct:{create:(o={})=>g(c({},o),{type:e.id,data:{},inputs:te(r,l=>({value:l.default}))}),data:{},inputs:r,outputs:a,computation:(o,l,s,u)=>s.beginNamespace(l.id,()=>gM(n.outputNodes,Fs(u,s,yM(t,o)))),width:140,color:"#ff6347",textColor:"#fff",label:`${e.name}`}}}function mM(e,t){return e.nodes.reduce((n,r)=>{const a=t[r];switch(a.type){case"custom_begin_input":n.beginInputNode=a;break;case"custom_input":n.inputNodes[a.id]=a;break;case"custom_begin_output":n.beginOutputNode=a;break;case"custom_output":n.outputNodes[a.id]=a;break}return n},{beginInputNode:void 0,inputNodes:{},beginOutputNode:void 0,outputNodes:{}})}function vM({beginInputNode:e,inputNodes:t}){if(!e)return{};const n=ye(t).reduce((r,a)=>(a.inputs.input.from&&(r[a.inputs.input.from.id]=a.id),r),{});return Mp(n,e.id).reduce((r,a)=>{var l;const o=t[a];return r[a]={label:o.data.name,type:(l=o.data.default.genericsType)!=null?l:_.GENERICS,default:o.data.default.value},r},{})}function hM({beginOutputNode:e,outputNodes:t}){if(!e)return{};const n=ye(t).reduce((r,a)=>(a.inputs.output.from&&(r[a.inputs.output.from.id]=a.id),r),{});return Mp(n,e.id).reduce((r,a)=>{var l;const o=t[a];return r[a]=g(c({},(l=o.inputs.value.genericsType)!=null?l:_.GENERICS),{label:o.data.name}),r},{})}function Mp(e,t){const n=[];let r=e[t];for(;r;)n.push(r),r=e[r];return n}function yM(e,t){const n=Object.entries(t).reduce((r,[a,o])=>{const l=e[a];return l&&(r[l.id]=g(c({},l),{data:g(c({},l.data),{default:g(c({},l.data.default),{value:o})})})),r},{});return c(c({},e),n)}function gM(e,t){return ye(e).reduce((n,r)=>{if(r.inputs.value.from){const a=t[r.inputs.value.from.id];a&&(n[r.id]=a[r.inputs.value.from.key])}return n},{})}function bM(e,t){const n=cn("Graph"),r=cn("Node"),a=cn("CustomGraph"),o=cr("Graph",()=>n.entities.value.byId),l=cr("Node",()=>O.value),s=cr("CustomGraph",()=>a.entities.value.byId),u=po("Graph Type",()=>"graph");e.defineReducers(n.reducers),e.defineReducers(r.reducers),e.defineReducers(a.reducers),e.defineReducers(o.reducers),e.defineReducers(l.reducers),e.defineReducers(s.reducers),e.defineReducers(u.reducers);const i=h(()=>Jt(n.entities.value)),d=o.lastSelectedId,v=h(()=>o.lastSelectedId.value?n.entities.value.byId[o.lastSelectedId.value]:void 0),f=h(()=>Jt(a.entities.value)),m=s.lastSelectedId,p=h(()=>s.lastSelectedId.value?a.entities.value.byId[s.lastSelectedId.value]:void 0),y=h(()=>u.state.value);function E(j){e.dispatch(u.createUpdateAction(j),[l.createClearAllAction()])}function b(){return y.value==="graph"?n:a}function w(){return y.value==="graph"?o:s}function T(){const j=w().lastSelectedId.value;return j?b().entities.value.byId[j]:void 0}const O=h(()=>{const j=T();if(!j)return{};const D=r.entities.value.byId;return oe(j.nodes.map(G=>D[G]))}),A=l.selectedMap,B=l.lastSelectedId,M=h(()=>B.value?r.entities.value.byId[B.value]:void 0),P=h(t.getArmatureId),R=h(()=>{const j=r.entities.value.byId;return te(oe(f.value),D=>yl(D,oe(D.nodes.map(G=>j[G]))))}),x=h(()=>{const j=D=>R.value[D]?R.value[D]:co(D);return()=>j}),N=h(()=>y.value==="graph"?[{label:"Custom",children:f.value.map(j=>({label:j.name,type:j.id}))}]:[]),V=h(()=>d1(x.value(),O.value)),le=h(()=>p1(x.value(),O.value,V.value)),be=h(()=>{const j=T();if(!j)return;const D=j==null?void 0:j.armatureId,G=wf(D?t.getElementMap(D):{},t.getPosedBoneMap(),{currentFrame:t.getCurrentFrame(),endFrame:t.getEndFrame()}),K=Fs(x.value(),G,le.value);return{context:G,nodeMap:K}});function je(j,D,G,K,pe,se,he){n.init(Bt(j)),a.init(Bt(D)),r.init(Bt(G)),o.restore(K),s.restore(pe),l.restore(se),u.restore(he)}function Pe(){return{graphs:i.value,customGraphs:f.value,nodes:Jt(r.entities.value),graphSelected:o.createSnapshot(),customGraphSelected:s.createSnapshot(),nodeSelected:l.createSnapshot(),graphType:u.createSnapshot()}}function Be(j=""){!o.getSelectHistoryDryRun(j)||e.dispatch(o.createSelectAction(j),[l.createClearAllAction()])}function re(j={}){var G;if(!P.value)return;const D=Ad({id:j.id,name:Xt((G=j.name)!=null?G:"Graph",i.value.map(K=>K.name)),armatureId:P.value},!j.id);e.dispatch(n.createAddAction([D]),[l.createClearAllAction(),o.createSelectAction(D.id)])}function Z(){const j=v.value;!j||e.dispatch(n.createDeleteAction([j.id]),[r.createDeleteAction(j.nodes),l.createClearAllAction(),o.createClearAllAction()])}function Ee(j){!d.value||e.dispatch(n.createUpdateAction({[d.value]:j}))}function Ke(j="",D){!T()||!l.getSelectHistoryDryRun(j,D==null?void 0:D.shift)||e.dispatch(l.createSelectAction(j,D==null?void 0:D.shift))}function me(j,D){const G=Object.keys(j);!l.getMultiSelectHistoryDryRun(G,D==null?void 0:D.shift)||e.dispatch(l.createMultiSelectAction(G,D==null?void 0:D.shift))}function z(){Object.keys(O.value).length!==0&&e.dispatch(l.createSelectAllAction(!0))}function ie(j,D={}){T()||(y.value==="graph"?re():Qe());const G=T();if(!G)return;const K=JS(R.value,j,D,!D.id);return e.dispatch(r.createAddAction([K]),[b().createUpdateAction({[G.id]:{nodes:[...G.nodes,K.id]}}),l.createSelectAction(K.id)]),K}function we(j){return y.value==="graph"?!n1(j.type):!!co(j.type)&&!Vs(j.type)}function Le(j){const D=T(),G=j.filter(K=>we(K));!D||G.length===0||e.dispatch(r.createAddAction(G),[b().createUpdateAction({[D.id]:{nodes:D.nodes.concat(G.map(K=>K.id))}}),l.createMultiSelectAction(G.map(K=>K.id))])}function Ue(){const j=T();if(!j)return;const D=r1(x.value(),ye(O.value),A.value),G=oe(D.nodes),K=Ze(G,D.updatedIds),pe=jo(x.value(),c(c({},G),K)),se=lt(A.value,G),he=c(c({},K),pe),_e=Ie=>{e.dispatch(r.createDeleteAction(Object.keys(se)),[r.createUpdateAction(Ie),b().createUpdateAction({[j.id]:{nodes:j.nodes.filter(De=>!se[De])}}),l.createClearAllAction()])};if(y.value==="custom"&&p.value){const Ie=c(c({},lt(O.value,se)),he),De=yl(g(c({},p.value),{nodes:Object.keys(Ie)}),Ie).struct;if(ki(R.value[p.value.id].struct,De)){const xe=Ti(x.value(),c(c({},lt(r.entities.value.byId,se)),Ie),p.value.id,De);_e(xe)}else _e(he)}else _e(he)}function rt(j,D,G){!T()||e.dispatch(r.createUpdateAction({[j]:D},G))}function ht(j){if(!!T())if(y.value==="custom"&&p.value){const G=so(O.value,j),K=yl(p.value,G).struct;if(ki(R.value[p.value.id].struct,K)){const pe=Ti(x.value(),c(c({},r.entities.value.byId),G),p.value.id,K);e.dispatch(r.createUpdateAction(c(c({},j),pe)))}else e.dispatch(r.createUpdateAction(j))}else e.dispatch(r.createUpdateAction(j))}function Mt(j=""){!s.getSelectHistoryDryRun(j)||e.dispatch(s.createSelectAction(j))}function Qe(j={}){var pe;const D=Ai("custom_begin_input",{position:{x:-200,y:0}},!0),G=Ai("custom_begin_output",{position:{x:200,y:0}},!0),K=Id({id:j.id,name:Xt((pe=j.name)!=null?pe:"Custom",f.value.map(se=>se.name)),nodes:[D.id,G.id]},!j.id);e.dispatch(a.createAddAction([K]),[r.createAddAction([D,G]),s.createSelectAction(K.id)])}function Nt(){const j=p.value;!j||e.dispatch(a.createDeleteAction([j.id]),[r.createDeleteAction(j.nodes),l.createClearAllAction(),s.createClearAllAction()])}function I(j){!m.value||e.dispatch(a.createUpdateAction({[m.value]:j}))}const L=H(),U=H(),W=h(()=>{if(!L.value)return O.value;const j=ge(L.value.current,L.value.start),D=A.value;return te(O.value,(G,K)=>D[K]?g(c({},G),{position:ce(G.position,j)}):G)}),X=h(()=>te(W.value,j=>V1(x.value(),j))),ne=h(()=>{var G;const j=((G=U.value)==null?void 0:G.type)==="draft-output"?{id:U.value.input.nodeId,key:U.value.input.key}:void 0,D=W.value;return te(D,K=>{const pe=X.value[K.id].inputs;return Object.entries(K.inputs).reduce((se,[he,_e])=>(!_e.from||!X.value[_e.from.id]||!X.value[_e.from.id].outputs[_e.from.key]||j&&j.id===K.id&&j.key===he||(se[he]={from:ce(D[_e.from.id].position,X.value[_e.from.id].outputs[_e.from.key].p),to:ce(K.position,pe[he].p),inputId:K.id,inputKey:he,outputId:_e.from.id,outputKey:_e.from.key}),se),{})})});return{initState:je,exportState:Pe,graphType:y,setGraphType:E,parentGraphs:h(()=>Jt(b().entities.value)),parentGraph:h(T),graphs:i,lastSelectedGraph:v,customGraphs:f,lastSelectedCustomGraph:p,nodeMap:O,lastSelectedNode:M,selectedNodes:A,targetArmatureId:P,getGraphNodeModuleFn:x,customGraphNodeMenuOptionsSrc:N,nodeErrorMessagesMap:V,completedNodeMap:le,resolvedGraph:be,selectGraph:Be,addGraph:re,deleteGraph:Z,updateGraph:Ee,selectNode:Ke,selectNodes:me,selectAllNode:z,addNode:ie,deleteNodes:Ue,pasteNodes:Le,updateNode:rt,updateNodes:ht,selectCustomGraph:Mt,addCustomGraph:Qe,deleteCustomGraph:Nt,updateCustomGraph:I,editMovement:h(()=>L.value),setEditMovement:j=>{L.value=j},draftEdge:h(()=>U.value),setDraftEdge:j=>{U.value=j},editedNodeMap:W,edgePositionMap:X,edgeSummaryMap:ne}}const _M=bM(Yn(),{getArmatureId:()=>Rt().lastSelectedArmatureId.value,getPosedBoneMap:()=>Xn().posedBoneMap.value,getCurrentFrame:()=>rn().currentFrame.value,getEndFrame:()=>rn().endFrame.value,getElementMap:e=>{var n;const t=Mn();return((n=t.lastSelectedActor.value)==null?void 0:n.armatureId)===e?t.elementMap.value:{}}});function ka(){return _M}function Ap(e,t){return Ip(e,t)}function Ip(e,t){if(st(e))return e;const n=ns(e.tag,Ef(e.attributes),e.children.map(r=>Ip(r,t)));return t!=null&&t[e.id]&&n.classList.add(t[e.id]),n}const SM="http://www.w3.org/2000/svg";function ns(e,t=null,n=[]){const r=document.createElementNS(SM,e);return wM(r,t,n)}function wM(e,t=null,n=[]){for(const r in t)e.setAttribute(r,t[r].toString());return Array.isArray(n)?$M(e,n):e.textContent=n,e}function $M(e,t){const n=document.createDocumentFragment();for(let r=0;r<t.length;r++){const a=t[r];st(a)?n.appendChild(new Text(a)):n.appendChild(a)}e.appendChild(n)}const Tp="blendic-viewbox-g",CM="blendic-anim-group";function EM(e,t,n,r,a="infinite",o=1){const l=Xy(n,o,!0),s=MM(t),u=AM(s.id,l),i=Ea([s]),d=i.map(y=>y.id),v=i.reduce((y,E,b)=>(y[E.id]=`${e}-${b}`,y),{}),f=ns("g");f.classList.add(CM),f.innerHTML=d.map(y=>BM(y,u.map(E=>E[y]),r,a)).join("");const m=ns("style");m.innerHTML=d.map(y=>IM(v[y],u.map(E=>E[y]))).join("")+`.${v[s.id]} * {animation-duration:${r/1e3}s;animation-iteration-count:${a};animation-timing-function:linear;}`;const p=Ap(s,v);return p.prepend(f),p.prepend(m),p}function MM(e){return g(c({},e),{attributes:g(c({},e.attributes),{viewBox:`0 0 ${xr} ${xr}`}),children:[{id:Tp,tag:"g",attributes:{viewBox:kp(e.attributes.viewBox)},children:e.children}]})}function AM(e,t){return t.map(n=>{const r=n[e];return g(c({},n),{[e]:g(c({},r),{viewBox:`0 0 ${xr} ${xr}`}),[Tp]:{transform:kp(r==null?void 0:r.viewBox)}})})}const xr=100;function kp(e){const t=Vo(e);if(!t)return"";const n=t.width/xr,r=t.height/xr;return yd([1/n,0,0,1/r,-t.x/n,-t.y/r])}function IM(e,t){const n=uu(Ed(t)),r=TM(e,n);return r?r+OM(e):""}function TM(e,t){const n=Math.ceil(Math.log10(t.length)),r=Bp(t.length,100).map(o=>ft(-n,o)),a=uu(t).map((o,l)=>kM(o,r[l])).filter(o=>o);return a.length===0?"":`@keyframes ${Op(e)} {${a.join(" ")}}`}function uu(e){const t=Array.from(new Set(e.flatMap(o=>o?Object.keys(o):[]))),n=Qi(e,t),r=Qi(e.concat().reverse(),t),a=e.concat();return a[0]=n,a[a.length-1]=r,a}function Qi(e,t){return t.reduce((n,r)=>{const a=e.find(o=>(o==null?void 0:o[r])!==void 0);return a&&(n[r]=a[r]),n},{})}function kM(e,t){const n=Object.entries(e!=null?e:{}).filter(([a])=>PM(a));if(n.length===0)return"";const r=n.map(([a,o])=>`${a}:${o};`).join("");return`${t}%{${r}}`}function OM(e){return`.${e}{animation-name:${Op(e)};}`}function Op(e){return`blendic-keyframes-${e}`}function BM(e,t,n,r="infinite"){const a=uu(Ed(t));return Array.from(new Set(a.flatMap(l=>l?Object.keys(l):[]))).filter(NM).map(l=>LM(e,l,a.map(s=>s==null?void 0:s[l]),n,r)).join("")}function Bp(e,t=1){if(e===0)return[];if(e===1)return[0,t];const n=t/(e-1),r=[...Array(e)].map((a,o)=>n*o);return r[r.length-1]=t,r}function LM(e,t,n,r,a="infinite"){const o=Bp(n.length),l=[],s=[];return n.forEach((i,d)=>{i!==void 0&&(l.push(`${o[d]}`),s.push(`${i}`))}),l.length===0?"":`<animate ${[["repeatCount",typeof a=="string"?"indefinite":a],["dur",`${r/1e3}s`],["href",`#${e}`],["xlink:href",`#${e}`],["attributeName",`${t}`],["keyTimes",l.join(";")],["values",s.join(";")]].map(([i,d])=>`${i}="${d}"`).join(" ")}/>`}function RM(e,t=!1){let n;return e.forEach(r=>{n?n=Lp(n,r,t):n=r}),n}function Lp(e,t,n=!1){const r=new Map;t.children.forEach((l,s)=>{st(l)||r.set(l.id,[s,l])});const a=[];let o=-1;return e.children.forEach(l=>{if(st(l))a.push(l);else{const s=r.get(l.id);if(s){const u=s[0];u-o>1&&a.push(...t.children.slice(o+1,u).filter(i=>!st(i)).map(i=>n?rs(i):i)),o=u,a.push(Lp(l,s[1],n))}else a.push(l)}}),o<t.children.length&&a.push(...t.children.slice(o+1,t.children.length).filter(l=>!st(l)).map(l=>n?rs(l):l)),{id:e.id,tag:e.tag,attributes:e.attributes,children:a}}function rs(e){return g(c({},e),{attributes:g(c({},e.attributes),{fill:"none",stroke:"none"}),children:e.children.map(t=>st(t)?t:rs(t))})}function PM(e){return jM.has(e)}function NM(e){return FM.has(e)}const jM=new Set(["transform","fill","fill-opacity","stroke","stroke-opacity","stroke-width","stroke-dashoffset","stroke-dasharray","font-size","text-anchor","dominant-baseline","x","y","dx","dy","width","height","cx","cy","r","rx","ry","fx","fy","x1","y1","x2","y2","gradientUnits","spreadMethod","stop-color","stop-opacity"]),FM=new Set(["d","offset"]),gl="showOpenFilePicker"in window,as="blendic.json";let Bn;function Rp(){const e=Rt(),t=rn(),n=Yn(),r=Xn(),a=Mn(),o=ka();function l(){const{armatures:E,bones:b,constraints:w,armatureSelected:T,boneSelected:O}=e.exportState(),A=t.exportState(),{actions:B,keyframes:M}=q$(A.actions,A.keyframes,E,b),{canvasMode:P}=r.exportState(),R=a.exportState(),{actors:x,elements:N}=b1(R.actors,R.elements,E,b),V=o.exportState(),le=V.graphs,be=V.nodes,je={armatures:E,bones:b,constraints:w,armatureSelected:T,boneSelected:O,canvasMode:P,currentFrame:A.currentFrame,endFrame:A.endFrame,actions:B,keyframes:M,actionSelected:A.actionSelected,keyframeState:A.keyframeState,targetPropsState:A.targetPropsState,actors:x,elements:N,actorSelected:R.actorSelected,elementSelected:R.elementSelected,graphs:le,customGraphs:V.customGraphs,nodes:be,graphSelected:V.graphSelected,customGraphSelected:V.customGraphSelected,nodeSelected:V.nodeSelected,graphType:V.graphType};return JSON.stringify(je)}function s(E){try{const b=nM(JSON.parse(E));n.clear(),e.initState(b.armatures,b.bones,b.constraints,b.armatureSelected,b.boneSelected),r.initState(b.canvasMode),t.initState(b.currentFrame,b.endFrame,b.actions,b.keyframes,b.actionSelected,b.keyframeState,b.targetPropsState),a.initState(b.actors,b.elements,b.actorSelected,b.elementSelected),o.initState(b.graphs,b.customGraphs,b.nodes,b.graphSelected,b.customGraphSelected,b.nodeSelected,b.graphType)}catch(b){console.error(b),alert("Failed to load: Invalid file.")}}async function u(){let E;try{if(gl){const b=await xM();if(!b)return;Bn=b.handle,E=b.content}else{const b=await tc();E=await nc(b)}}catch{alert("Failed to open a file.")}if(!!E)try{s(E)}catch{Bn=void 0,alert("Failed to load: Invalid file.")}}async function i(){var b;const E=l();bl(E,(b=Bn==null?void 0:Bn.name)!=null?b:as)}async function d(){const E=l();Bn?await jp(Bn,E):gl?Bn=await UM(E):bl(E,as)}async function v(E=!1){try{const b=await tc(".svg, image/svg+xml"),w=await nc(b),{actor:T,elements:O}=v1(w);if(E&&a.lastSelectedActor.value){const A=_1({actor:a.lastSelectedActor.value,elements:ye(a.elementMap.value)},{actor:T,elements:O});a.importActor(A.actor,A.elements)}else a.importActor(T,O)}catch{alert("Failed to load: Invalid file.")}}function f(E){const b=e.lastSelectedArmature.value,w=a.lastSelectedActor.value;if(!b||!w)return;const T=hl(w.svgTree),O=t.exportState(),A=oe(O.actions),B=oe(O.keyframes),M=E.filter(R=>A[R]).map(R=>{const x=A[R],N=x.keyframes.map(le=>B[le]),V=xE(Dr(N),e.boneMap.value,e.constraintMap.value,a.elementMap.value,T,eC(N));return{name:x.name,attributesMapPerFrame:V}}),P={version:"1.0.0",appVersion:"0.17.0",actions:M,svgTree:T};bl(JSON.stringify(P),M.map(R=>R.name).join("_")+".json")}function m(E,b,w){const T=a.lastSelectedActor.value,O=a.elementMap.value,A=hl(cp(w,O,T.svgTree)),B=Oi(o.getGraphNodeModuleFn.value(),O,w,{currentFrame:E,endFrame:b},o.completedNodeMap.value);return hp(B,A)}function p(){if(!a.lastSelectedActor.value)return;const b=m(t.currentFrame.value,t.endFrame.value,t.currentPosedBones.value),w=t.selectedAction.value,T=o.lastSelectedGraph.value,O=[w==null?void 0:w.name,T==null?void 0:T.name].filter(A=>!!A).join("_");ec(Ap(b).outerHTML,`${O}.svg`)}function y(){var Be,re;if(!a.lastSelectedActor.value)return;const b=t.endFrame.value,w=[...Array(b+1)].map((Z,Ee)=>Ee),T=t.selectedAction.value,O=oe(t.keyframes.value),A=Dr((Be=T==null?void 0:T.keyframes.map(Z=>O[Z]))!=null?Be:[]),B=w.map(Z=>vp(A,e.boneMap.value,e.constraintMap.value,Z)),M=w.map(Z=>m(Z,b,B[Z])),P=RM(M,!0);if(!P)return;const R=c(c({},oe(Fo(P))),a.elementMap.value),x=hl(P),N=UE(B,R,x),V=te(oe(Ea([P])),Z=>Z.attributes),le=w.map(Z=>{const Ee=Oi(o.getGraphNodeModuleFn.value(),R,B[Z],{currentFrame:Z,endFrame:b},o.completedNodeMap.value),Ke=N[Z];return zE(Ee,te(V,(me,z)=>c(c({},me),Ke[z])))}),be=o.lastSelectedGraph.value,je=EM((re=[T==null?void 0:T.id,be==null?void 0:be.id].filter(Z=>!!Z).join("-"))!=null?re:"bsvg",x,le,b*100/6,"infinite",1/2),Pe=[T==null?void 0:T.name,be==null?void 0:be.name,"anim"].filter(Z=>!!Z).join("-");ec(je.outerHTML,`${Pe}.svg`)}return{fileSystemEnable:gl,loadProjectFile:u,saveProjectFile:i,overrideProjectFile:d,loadSvgFile:v,bakeAction:f,bakeSvg:p,bakeAnimatedSvg:y}}function bl(e,t){Pp(URL.createObjectURL(new Blob([e],{type:"text/plain"})),t)}function ec(e,t){Pp(URL.createObjectURL(new Blob([e],{type:"image/svg+xml"})),t)}function Pp(e,t){const n=document.createElement("a");n.href=e,n.download=t,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function tc(e=".json, application/json"){return new Promise((t,n)=>{const r=document.createElement("input");r.type="file",r.accept=e,r.onchange=a=>{const o=a==null?void 0:a.target;o!=null&&o.files?t(o.files[0]):n()},r.click()})}function nc(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{t(r.result)},r.onerror=n,r.readAsText(e)})}const Np={types:[{description:"JSON File",accept:{"text/plain":[".json"]}}]};async function VM(e){var t;try{const[n]=await window.showOpenFilePicker(e);return n}catch(n){if(n instanceof Error&&((t=n.message)==null?void 0:t.includes("aborted")))return;throw n}}async function DM(e){var t;try{return await window.showSaveFilePicker(g(c({},e),{suggestedName:as}))}catch(n){if(n instanceof Error&&((t=n.message)==null?void 0:t.includes("aborted")))return;throw n}}async function xM(){const e=await VM(Np);if(!e)return;const n=await(await e.getFile()).text();return{handle:e,content:n}}async function UM(e){const t=await DM(Np);if(!!t)return await jp(t,e),t}async function jp(e,t){var n;try{const r=await e.createWritable();await r.write(t),await r.close()}catch(r){if(r instanceof Error&&((n=r.message)==null?void 0:n.includes("not allowed")))return;throw r}}const KM=Q({props:{modelValue:{type:Boolean,default:!1},label:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){return{value:h({get(){return e.modelValue},set(n){t("update:model-value",n)}})}}}),GM=["disabled"],zM={key:0};function YM(e,t,n,r,a,o){return S(),k("label",{class:pt({disabled:e.disabled})},[gr(C("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>e.value=l),disabled:e.disabled,type:"checkbox"},null,8,GM),[[Nh,e.value]]),e.label?(S(),k("span",zM,Ve(e.label),1)):fe("",!0)],2)}var Lt=ee(KM,[["render",YM],["__scopeId","data-v-e81038c8"]]);const XM=Q({props:{fill:{type:String,default:"#888"},stroke:{type:String,default:"#fff"}}}),WM={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10"},HM=["fill"],qM=["stroke"];function JM(e,t,n,r,a,o){return S(),k("svg",WM,[C("rect",{width:"10",height:"10",stroke:"none",fill:e.fill},null,8,HM),C("path",{d:"M2.5 2.5L7.5 7.5M2.5 7.5L7.5 2.5","stroke-linejoin":"round",stroke:e.stroke,fill:"none"},null,8,qM)])}var zo=ee(XM,[["render",JM]]);const ZM=Q({components:{DeleteIcon:zo},props:{open:{type:Boolean,required:!0}},emits:["update:open"],setup(e,{emit:t}){return{close:()=>t("update:open",!1)}}}),QM=e=>(it("data-v-fd8ca978"),e=e(),ct(),e),eA={key:0,class:"dialog-wrapper"},tA=QM(()=>C("div",{class:"overlay"},null,-1)),nA={class:"body-innter"},rA={class:"body-content"},aA={key:0,class:"buttons"};function oA(e,t,n,r,a,o){const l=F("DeleteIcon");return e.open?(S(),k("div",eA,[tA,C("div",{class:"body-outer",onClick:t[1]||(t[1]=Me((...s)=>e.close&&e.close(...s),["self"]))},[C("div",nA,[C("button",{class:"close-button",onClick:t[0]||(t[0]=(...s)=>e.close&&e.close(...s))},[$(l,{fill:"none",stroke:"#888"})]),C("div",rA,[vt(e.$slots,"default",{},void 0,!0),e.$slots.buttons?(S(),k("div",aA,[vt(e.$slots,"buttons",{},void 0,!0)])):fe("",!0)])])])])):fe("",!0)}var lA=ee(ZM,[["render",oA],["__scopeId","data-v-fd8ca978"]]);const sA=Q({props:{type:{type:String,default:"default"},disabled:{type:Boolean,default:!1}}}),uA=["disabled"];function iA(e,t,n,r,a,o){return S(),k("button",{type:"button",class:pt({[e.type]:!0}),disabled:e.disabled},[vt(e.$slots,"default",{},void 0,!0)],10,uA)}var rc=ee(sA,[["render",iA],["__scopeId","data-v-5a5da806"]]);const cA=C("h3",null,"Select Actions",-1),dA=Kt("Cancel"),fA=Kt("Export"),pA=Q({props:{open:{type:Boolean},actions:null,initialActionIds:{default:()=>[]}},emits:["update:open","execute"],setup(e,{emit:t}){const n=e,r=H(Ry(n.initialActionIds,!0)),a=h(()=>n.actions.filter(s=>r.value[s.id]).map(s=>s.id));function o(s){t("update:open",s)}function l(){t("execute",Object.keys($t(r.value,s=>s)))}return(s,u)=>(S(),Se(nd,{to:"body"},[$(lA,{open:e.open,"onUpdate:open":o},{default:Y(()=>[cA,(S(!0),k(ve,null,Ae(e.actions,i=>(S(),Se(Lt,{key:i.id,modelValue:r.value[i.id],"onUpdate:modelValue":d=>r.value[i.id]=d,label:i.name},null,8,["modelValue","onUpdate:modelValue","label"]))),128))]),buttons:Y(()=>[$(rc,{onClick:u[0]||(u[0]=i=>o(!1))},{default:Y(()=>[dA]),_:1}),$(rc,{type:"primary",disabled:ke(a).length===0,onClick:l},{default:Y(()=>[fA]),_:1},8,["disabled"])]),_:1},8,["open"])]))}});const mA=Q({components:{CheckboxInput:Lt,BakingConfigDialog:pA},emits:[],setup(){const e=Rp(),t=H(!0),n=Rt(),r=rn(),a=H(!1),o=H([]),l=h(()=>r.actions.value.filter(u=>{var i;return((i=n.lastSelectedArmature.value)==null?void 0:i.id)===u.armatureId}));function s(u){a.value=!1,o.value=u,e.bakeAction(u)}return{appVersion:"0.17.0",fileSystemEnable:e.fileSystemEnable,openFile:e.loadProjectFile,saveProjectFile:e.saveProjectFile,overrideProjectFile:e.overrideProjectFile,isInheritWeight:t,importSvg(){e.loadSvgFile(t.value)},exportSvg:e.bakeSvg,exportAnimatedSvg:e.bakeAnimatedSvg,bakeAction:s,exportableActions:l,showSelectActionDialogFlag:a,showSelectActionDialog:()=>a.value=!0}}}),iu=e=>(it("data-v-e29a443e"),e=e(),ct(),e),vA={class:"file-panel"},hA=iu(()=>C("h3",null,"Project",-1)),yA={class:"menu-list"},gA=iu(()=>C("h3",null,"Import",-1)),bA={class:"menu-list"},_A=iu(()=>C("h3",null,"Export",-1)),SA={class:"menu-list"},wA=["disabled"];function $A(e,t,n,r,a,o){const l=F("CheckboxInput"),s=F("BakingConfigDialog");return S(),k("div",vA,[hA,C("div",yA,[C("button",{type:"button",onClick:t[0]||(t[0]=(...u)=>e.openFile&&e.openFile(...u))},"Open"),C("button",{type:"button",onClick:t[1]||(t[1]=(...u)=>e.overrideProjectFile&&e.overrideProjectFile(...u))},"Save"),e.fileSystemEnable?(S(),k("button",{key:0,type:"button",onClick:t[2]||(t[2]=(...u)=>e.saveProjectFile&&e.saveProjectFile(...u))}," Save as.. ")):fe("",!0)]),gA,C("div",bA,[C("button",{type:"button",onClick:t[3]||(t[3]=(...u)=>e.importSvg&&e.importSvg(...u))},"SVG"),$(l,{modelValue:e.isInheritWeight,"onUpdate:modelValue":t[4]||(t[4]=u=>e.isInheritWeight=u),label:"Inherit weight"},null,8,["modelValue"])]),_A,C("div",SA,[C("button",{type:"button",disabled:e.exportableActions.length===0,onClick:t[5]||(t[5]=(...u)=>e.showSelectActionDialog&&e.showSelectActionDialog(...u))}," Baked Action ",8,wA),C("button",{type:"button",onClick:t[6]||(t[6]=(...u)=>e.exportSvg&&e.exportSvg(...u))},"Posed SVG"),C("button",{type:"button",onClick:t[7]||(t[7]=(...u)=>e.exportAnimatedSvg&&e.exportAnimatedSvg(...u))},"Animated SVG")]),C("h3",null,"Version "+Ve(e.appVersion),1),$(s,{open:e.showSelectActionDialogFlag,"onUpdate:open":t[8]||(t[8]=u=>e.showSelectActionDialogFlag=u),actions:e.exportableActions,onExecute:e.bakeAction},null,8,["open","actions","onExecute"])])}var CA=ee(mA,[["render",$A],["__scopeId","data-v-e29a443e"]]);const EA=Q({props:{modelValue:{type:String,default:""},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1}},emits:["update:model-value","blur"],setup(e,{emit:t}){const n=H(),r=H(e.autofocus),a=H("");dr(()=>{a.value=e.modelValue});function o(){a.value!==e.modelValue&&t("update:model-value",a.value)}function l(){var u,i;(u=n.value)==null||u.focus(),(i=n.value)==null||i.select()}Ut(()=>{var u,i;e.autofocus&&((u=n.value)==null||u.focus(),(i=n.value)==null||i.select())});function s(){r.value=!1,t("blur")}return{focused:r,onFocus:()=>r.value=!0,onBlur:s,draftValue:a,inputEl:n,input:o,onClick:l}}}),MA={class:"input-wrapper"},AA=["disabled"];function IA(e,t,n,r,a,o){return S(),k("div",MA,[gr(C("input",{ref:"inputEl","onUpdate:modelValue":t[0]||(t[0]=l=>e.draftValue=l),type:"text",disabled:e.disabled,onChange:t[1]||(t[1]=(...l)=>e.input&&e.input(...l)),onFocus:t[2]||(t[2]=(...l)=>e.onFocus&&e.onFocus(...l)),onBlur:t[3]||(t[3]=(...l)=>e.onBlur&&e.onBlur(...l))},null,40,AA),[[Oo,e.draftValue]]),!e.focused&&!e.disabled?(S(),k("div",{key:0,class:"input-forward",onClick:t[4]||(t[4]=(...l)=>e.onClick&&e.onClick(...l))})):fe("",!0)])}var Yo=ee(EA,[["render",IA],["__scopeId","data-v-823e8be6"]]);const TA=Q({name:"TreeNode",components:{UpIcon:Gs,TextInput:Yo},props:{node:{type:Object,required:!0},nestIndex:{type:Number,default:0}},setup(e){const t=h(()=>e.node.children),n=Yt("onClickElement",()=>{}),r=Yt("selectedMap",h(()=>({}))),a=h(()=>!!r.value[e.node.id]),o=H(!1);function l(){o.value=!o.value}const s=H(!1),u=Yt("updateName",()=>{}),i=Yt("getEditable",()=>!1),d=h(i);return{hasChildren:h(()=>e.node.children.length>0),closed:o,toggleClosed:l,children:t,click:v=>n(e.node.id,hr(v)),selected:a,editingName:s,startEditingName:()=>{!d.value||(s.value=!0)},endEditingName:()=>s.value=!1,updateName(v){!d.value||(u(e.node.id,v),s.value=!1)}}}}),kA={class:"node-view"},OA={key:1,class:"spacer",style:{width:"16px"}},BA={key:0,class:"children-space"};function LA(e,t,n,r,a,o){const l=F("UpIcon"),s=F("TextInput"),u=F("TreeNode",!0);return S(),k("div",{class:pt(["tree-node",{"has-children":e.hasChildren}])},[C("div",kA,[C("div",{class:"spacer",style:at({width:`${e.nestIndex*8}px`})},null,4),e.hasChildren?(S(),k("button",{key:0,class:"toggle-closed",onClick:t[0]||(t[0]=(...i)=>e.toggleClosed&&e.toggleClosed(...i))},[$(l,{flipped:!e.closed,right:e.closed},null,8,["flipped","right"])])):(S(),k("div",OA)),e.editingName?(S(),Se(s,{key:2,"model-value":e.node.name,autofocus:"","onUpdate:modelValue":e.updateName,onBlur:e.endEditingName},null,8,["model-value","onUpdate:modelValue","onBlur"])):(S(),k("a",{key:3,class:pt(["node-name",{selected:e.selected}]),onClick:t[1]||(t[1]=Me((...i)=>e.click&&e.click(...i),["left","prevent"])),onDblclick:t[2]||(t[2]=Me((...i)=>e.startEditingName&&e.startEditingName(...i),["prevent"]))},Ve(e.node.name),35))]),e.closed?fe("",!0):(S(),k("div",BA,[(S(!0),k(ve,null,Ae(e.children,i=>(S(),Se(u,{key:i.id,node:i,"nest-index":e.nestIndex+1},null,8,["node","nest-index"]))),128))]))],2)}var RA=ee(TA,[["render",LA],["__scopeId","data-v-92781220"]]);const PA=Q({components:{TreeNode:RA},setup(){const e=Mn(),t=Xn(),n=Rt(),r=h(()=>{switch(t.canvasMode.value){case"object":case"edit":case"pose":return"Armature Tree";case"weight":return"Element Tree";default:return""}}),a=h(()=>e.lastSelectedActor.value),o=h(()=>{switch(t.canvasMode.value){case"object":case"edit":case"pose":return n.lastSelectedArmature.value?{id:n.lastSelectedArmature.value.id,name:n.lastSelectedArmature.value.name,children:Rs(n.boneMap.value)}:void 0;case"weight":return a.value?Sf(a.value.svgTree):void 0;default:return}}),l=h(()=>{switch(t.canvasMode.value){case"edit":case"pose":return te(n.allSelectedBones.value,()=>!0);case"weight":return e.selectedElements.value;default:return{}}});function s(i,d){switch(t.canvasMode.value){case"edit":case"pose":if(!n.lastSelectedArmature.value)return;i===n.lastSelectedArmature.value.id?n.selectAllBones():n.selectBone(i,{head:!0,tail:!0},d,t.canvasMode.value==="pose");return;case"weight":e.selectElement(i,d);return;default:return}}function u(i,d){if(!!d)switch(t.canvasMode.value){case"object":case"edit":case"pose":if(!n.lastSelectedArmature.value)return;i===n.lastSelectedArmature.value.id?n.updateArmatureName(d):n.updateBone({name:d});return;default:return}}return un("onClickElement",s),un("selectedMap",l),un("updateName",u),un("getEditable",()=>t.canvasMode.value!=="weight"),{treeType:r,treeRoot:o}}}),NA={class:"file-panel"},jA={key:0,class:"tree-view"};function FA(e,t,n,r,a,o){const l=F("TreeNode");return S(),k("div",NA,[C("h3",null,Ve(e.treeType),1),e.treeRoot?(S(),k("div",jA,[$(l,{node:e.treeRoot},null,8,["node"])])):fe("",!0)])}var VA=ee(PA,[["render",FA],["__scopeId","data-v-5f8d5721"]]);const DA={class:"select-root"},xA=["disabled"],UA={key:0,value:""},KA=["value"],GA=Q({props:{options:{type:Array,default:()=>[]},modelValue:{type:[Number,String],default:""},placeholder:{type:String,default:"None"},noPlaceholder:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const n=e,r=h({get(){return n.modelValue},set(a){t("update:model-value",a)}});return(a,o)=>(S(),k("span",DA,[gr(C("select",{"onUpdate:modelValue":o[0]||(o[0]=l=>gt(r)?r.value=l:null),disabled:e.disabled},[e.noPlaceholder?fe("",!0):(S(),k("option",UA,"-- "+Ve(e.placeholder)+" --",1)),(S(!0),k(ve,null,Ae(e.options,l=>(S(),k("option",{key:l.value,value:l.value},Ve(l.label),9,KA))),128))],8,xA),[[jh,ke(r)]])]))}});var Pt=ee(GA,[["__scopeId","data-v-5020e2ca"]]);const zA=Q({components:{SelectField:Pt},props:{options:{type:Array,default:()=>[]}},emits:["select"],setup(e,{emit:t}){const n=H();return{localValue:n,async update(){t("select",n.value),await $a(),n.value=void 0}}}});function YA(e,t,n,r,a,o){const l=F("SelectField");return S(),Se(l,{modelValue:e.localValue,"onUpdate:modelValue":[t[0]||(t[0]=s=>e.localValue=s),e.update],options:e.options,placeholder:"Add"},null,8,["modelValue","options","onUpdate:modelValue"])}var XA=ee(zA,[["render",YA]]);const WA={},HA={class:"row-block"};function qA(e,t){return S(),k("div",HA,[vt(e.$slots,"default",{},void 0,!0)])}var Fp=ee(WA,[["render",qA],["__scopeId","data-v-fd109cc2"]]);const JA=Q({components:{RowBlock:Fp},props:{label:{type:String,default:""},labelWidth:{type:String,default:void 0},between:{type:Boolean,default:!1}}}),ZA={class:"inline-content"};function QA(e,t,n,r,a,o){const l=F("RowBlock");return S(),Se(l,{class:pt(["inline-field",{between:e.between}])},{default:Y(()=>[e.label?(S(),k("label",{key:0,style:at({width:e.labelWidth})},Ve(e.label),5)):fe("",!0),C("div",ZA,[vt(e.$slots,"default",{},void 0,!0)])]),_:3},8,["class"])}var et=ee(JA,[["render",QA],["__scopeId","data-v-45271c32"]]);const eI=Q({props:{modelValue:{type:Number,default:0},integer:{type:Boolean,default:!1},min:{type:Number,default:void 0},max:{type:Number,default:void 0},step:{type:Number,default:1},disabled:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const n=H(),r=H(),a=H(0),o=H(!1),l=H(!1),s=H(),u=h(()=>{if(e.min!==void 0&&e.max!==void 0)return e.max-e.min}),i=h(()=>Math.round(Math.log(e.step)/Math.log(10))),d=H("0");dr(()=>{d.value=e.modelValue.toString()});const v=h(()=>e.integer?parseInt(d.value):parseFloat(d.value));function f(B){return!u.value||e.max===e.min?0:(B-e.min)/(e.max-e.min)}const m=h(()=>f(e.modelValue)),p=h(()=>f(a.value)),y=h(()=>Ge(0,1,m.value));function E(){var B;document.exitPointerLock(),l.value||(o.value=!0,(B=r.value)==null||B.select())}function b(B){if(!n.value)return;const M=n.value.getBoundingClientRect().width;if(M===0)return;const P=(B.p.x-B.base.x)/M;if(Math.abs(P)>0&&(l.value=!0),u.value){const R=ft(-2,Ge(0,1,p.value+P)*u.value+e.min);d.value=O(e.integer?Math.round(R):R).toString()}else{const R=(B.p.x-B.base.x)*.4;d.value=ft(i.value,O(a.value+R*e.step)).toString()}A()}const w=Wn(b,1e3/60,!0),T=xo({onMove:w,onEscape:()=>{l.value=!1,s.value=void 0}});function O(B){let M=B;return e.min!==void 0&&(M=Math.max(M,e.min)),e.max!==void 0&&(M=Math.min(M,e.max)),M}function A(){if(isNaN(v.value)){d.value=e.modelValue.toString();return}v.value!==e.modelValue&&t("update:model-value",O(v.value),s.value)}return{focused:o,onFocus:()=>o.value=!0,onBlur:()=>o.value=!1,draftValue:d,el:n,inputEl:r,onDown:B=>{l.value=!1,s.value=`slider_${Date.now()}`,a.value=e.modelValue,T.requestPointerLock(B,"move-h")},onUpForward:E,input:A,scaleX:y}}}),tI={ref:"el",class:"slider-wrapper"},nI=["disabled"];function rI(e,t,n,r,a,o){return S(),k("div",tI,[C("div",{class:"slider-background",style:at({transform:`scaleX(${e.scaleX})`})},null,4),gr(C("input",{ref:"inputEl","onUpdate:modelValue":t[0]||(t[0]=l=>e.draftValue=l),type:"text",disabled:e.disabled,onChange:t[1]||(t[1]=(...l)=>e.input&&e.input(...l)),onFocus:t[2]||(t[2]=(...l)=>e.onFocus&&e.onFocus(...l)),onBlur:t[3]||(t[3]=(...l)=>e.onBlur&&e.onBlur(...l))},null,40,nI),[[Oo,e.draftValue]]),!e.focused&&!e.disabled?(S(),k("div",{key:0,class:"slider-forward",onMouseup:t[4]||(t[4]=(...l)=>e.onUpForward&&e.onUpForward(...l)),onMousedown:t[5]||(t[5]=Me((...l)=>e.onDown&&e.onDown(...l),["prevent"]))},null,32)):fe("",!0)],512)}var Je=ee(eI,[["render",rI],["__scopeId","data-v-49d8ae74"]]);const aI=Q({props:{status:{type:String,default:"none"},updated:{type:Boolean,default:!1}},emits:["create","delete"],setup(e,{emit:t}){function n(){if(e.updated){t("create");return}switch(e.status){case"none":case"others":t("create");return;case"self":t("delete");return}}return{toggle:n,color:h(()=>e.updated?"#ffc0cb":"#aaa")}}}),oI={xmlns:"http://www.w3.org/2000/svg",viewBox:"-8 -8 16 16"},lI=["fill"],sI=["fill"],uI=["stroke"];function iI(e,t,n,r,a,o){return S(),k("button",{type:"button",onClick:t[0]||(t[0]=(...l)=>e.toggle&&e.toggle(...l))},[(S(),k("svg",oI,[e.status==="none"?(S(),k("circle",{key:0,r:"2.5",fill:e.color},null,8,lI)):e.status==="others"?(S(),k("path",{key:1,d:"M0,-5 L5,0 L0,5 L-5,0z",stroke:"none",fill:e.color},null,8,sI)):(S(),k("path",{key:2,d:"M0,-5 L5,0 L0,5 L-5,0z","stroke-linejoin":"round","stroke-width":"1.5",stroke:e.color,fill:"none"},null,8,uI))]))])}var Hn=ee(aI,[["render",iI],["__scopeId","data-v-4440e1f5"]]);function Sr(){return{modelValue:{type:Object,required:!0},propsUpdatedStatus:{type:Object,default:()=>({})},boneOptions:{type:Array,default:()=>[]},keyframeStatusMap:{type:Object,default:()=>({})},createKeyframe:{type:Function,default:()=>{}},deleteKeyframe:{type:Function,default:()=>{}}}}const Jr=[{value:"world",label:"World"},{value:"local",label:"Local"}],cI=Q({components:{SliderInput:Je,SelectField:Pt,InlineField:et,KeyDot:Hn},props:Sr(),emits:["update:model-value"],setup(e,{emit:t}){function n(r,a){t("update:model-value",c(c({},e.modelValue),r),a)}return{labelWidth:"100px",updateTargetId(r){n({targetId:r})},updatePoleTargetId(r){n({poleTargetId:r})},updateChainLength(r,a){n({chainLength:r},a)},updateIterations(r,a){n({iterations:r},a)},updateInfluence(r,a){n({influence:r},a)}}}});function dI(e,t,n,r,a,o){const l=F("SelectField"),s=F("InlineField"),u=F("SliderInput"),i=F("KeyDot");return S(),k("div",null,[$(s,{label:"Target","label-width":e.labelWidth},{default:Y(()=>[$(l,{"model-value":e.modelValue.targetId,options:e.boneOptions,"onUpdate:modelValue":e.updateTargetId},null,8,["model-value","options","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,{label:"Pole Target","label-width":e.labelWidth},{default:Y(()=>[$(l,{"model-value":e.modelValue.poleTargetId,options:e.boneOptions,"onUpdate:modelValue":e.updatePoleTargetId},null,8,["model-value","options","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,{label:"Chain Length","label-width":e.labelWidth},{default:Y(()=>[$(u,{"model-value":e.modelValue.chainLength,integer:"",min:0,"onUpdate:modelValue":e.updateChainLength},null,8,["model-value","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,{label:"Iterations","label-width":e.labelWidth},{default:Y(()=>[$(u,{"model-value":e.modelValue.iterations,integer:"",min:0,max:500,"onUpdate:modelValue":e.updateIterations},null,8,["model-value","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,{label:"Influence","label-width":e.labelWidth},{default:Y(()=>[$(u,{"model-value":e.modelValue.influence,min:0,max:1,"onUpdate:modelValue":e.updateInfluence},null,8,["model-value","onUpdate:modelValue"]),$(i,{status:e.keyframeStatusMap.influence,updated:e.propsUpdatedStatus.influence,onCreate:t[0]||(t[0]=d=>e.createKeyframe("influence")),onDelete:t[1]||(t[1]=d=>e.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1},8,["label-width"])])}var fI=ee(cI,[["render",dI]]);const pI=Q({components:{SliderInput:Je,SelectField:Pt,InlineField:et,CheckboxInput:Lt,KeyDot:Hn},props:Sr(),emits:["update:model-value"],setup(e,{emit:t}){function n(r,a){t("update:model-value",c(c({},e.modelValue),r),a)}return{labelWidth:"90px",spaceTypeOptions:Jr,updateSpaceType(r){n({spaceType:r})},updateMinX(r,a){n({minX:r},a)},updateMaxX(r,a){n({maxX:r},a)},updateMinY(r,a){n({minY:r},a)},updateMaxY(r,a){n({maxY:r},a)},updateUseMinX(r,a){n({useMinX:r},a)},updateUseMaxX(r,a){n({useMaxX:r},a)},updateUseMinY(r,a){n({useMinY:r},a)},updateUseMaxY(r,a){n({useMaxY:r},a)},updateInfluence(r,a){n({influence:r},a)}}}}),mI={class:"inline"},vI={class:"inline"},hI={class:"inline"},yI={class:"inline"};function gI(e,t,n,r,a,o){const l=F("SelectField"),s=F("InlineField"),u=F("CheckboxInput"),i=F("SliderInput"),d=F("KeyDot");return S(),k("div",null,[$(s,{label:"Space Type","label-width":e.labelWidth},{default:Y(()=>[$(l,{"model-value":e.modelValue.spaceType,options:e.spaceTypeOptions,"no-placeholder":"","onUpdate:modelValue":e.updateSpaceType},null,8,["model-value","options","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,{label:"Min X","label-width":e.labelWidth},{default:Y(()=>[C("div",mI,[$(u,{"model-value":e.modelValue.useMinX,"onUpdate:modelValue":e.updateUseMinX},null,8,["model-value","onUpdate:modelValue"]),$(i,{"model-value":e.modelValue.minX,"onUpdate:modelValue":e.updateMinX},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["label-width"]),$(s,{label:"Min Y","label-width":e.labelWidth},{default:Y(()=>[C("div",vI,[$(u,{"model-value":e.modelValue.useMinY,"onUpdate:modelValue":e.updateUseMinY},null,8,["model-value","onUpdate:modelValue"]),$(i,{"model-value":e.modelValue.minY,"onUpdate:modelValue":e.updateMinY},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["label-width"]),$(s,{label:"Max X","label-width":e.labelWidth},{default:Y(()=>[C("div",hI,[$(u,{"model-value":e.modelValue.useMaxX,"onUpdate:modelValue":e.updateUseMaxX},null,8,["model-value","onUpdate:modelValue"]),$(i,{"model-value":e.modelValue.maxX,"onUpdate:modelValue":e.updateMaxX},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["label-width"]),$(s,{label:"Max Y","label-width":e.labelWidth},{default:Y(()=>[C("div",yI,[$(u,{"model-value":e.modelValue.useMaxY,"onUpdate:modelValue":e.updateUseMaxY},null,8,["model-value","onUpdate:modelValue"]),$(i,{"model-value":e.modelValue.maxY,"onUpdate:modelValue":e.updateMaxY},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["label-width"]),$(s,{label:"Influence","label-width":e.labelWidth},{default:Y(()=>[$(i,{"model-value":e.modelValue.influence,min:0,max:1,"onUpdate:modelValue":e.updateInfluence},null,8,["model-value","onUpdate:modelValue"]),$(d,{status:e.keyframeStatusMap.influence,updated:e.propsUpdatedStatus.influence,onCreate:t[0]||(t[0]=v=>e.createKeyframe("influence")),onDelete:t[1]||(t[1]=v=>e.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1},8,["label-width"])])}var bI=ee(pI,[["render",gI],["__scopeId","data-v-f50c77ee"]]);const _I=Q({components:{SliderInput:Je,SelectField:Pt,InlineField:et,CheckboxInput:Lt,KeyDot:Hn},props:Sr(),emits:["update:model-value"],setup(e,{emit:t}){function n(r,a){t("update:model-value",c(c({},e.modelValue),r),a)}return{labelWidth:"100px",spaceTypeOptions:Jr,updateSpaceType(r){n({spaceType:r})},updateMin(r,a){n({min:r},a)},updateMax(r,a){n({max:r},a)},updateUseMin(r,a){n({useMin:r},a)},updateUseMax(r,a){n({useMax:r},a)},updateInfluence(r,a){n({influence:r},a)}}}}),SI={class:"inline"},wI={class:"inline"};function $I(e,t,n,r,a,o){const l=F("SelectField"),s=F("InlineField"),u=F("CheckboxInput"),i=F("SliderInput"),d=F("KeyDot");return S(),k("div",null,[$(s,{label:"Space Type","label-width":e.labelWidth},{default:Y(()=>[$(l,{"model-value":e.modelValue.spaceType,options:e.spaceTypeOptions,"no-placeholder":"","onUpdate:modelValue":e.updateSpaceType},null,8,["model-value","options","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,{label:"Min","label-width":e.labelWidth},{default:Y(()=>[C("div",SI,[$(u,{"model-value":e.modelValue.useMin,"onUpdate:modelValue":e.updateUseMin},null,8,["model-value","onUpdate:modelValue"]),$(i,{"model-value":e.modelValue.min,"onUpdate:modelValue":e.updateMin},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["label-width"]),$(s,{label:"Max","label-width":e.labelWidth},{default:Y(()=>[C("div",wI,[$(u,{"model-value":e.modelValue.useMax,"onUpdate:modelValue":e.updateUseMax},null,8,["model-value","onUpdate:modelValue"]),$(i,{"model-value":e.modelValue.max,"onUpdate:modelValue":e.updateMax},null,8,["model-value","onUpdate:modelValue"])])]),_:1},8,["label-width"]),$(s,{label:"Influence","label-width":e.labelWidth},{default:Y(()=>[$(i,{"model-value":e.modelValue.influence,min:0,max:1,"onUpdate:modelValue":e.updateInfluence},null,8,["model-value","onUpdate:modelValue"]),$(d,{status:e.keyframeStatusMap.influence,updated:e.propsUpdatedStatus.influence,onCreate:t[0]||(t[0]=v=>e.createKeyframe("influence")),onDelete:t[1]||(t[1]=v=>e.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1},8,["label-width"])])}var CI=ee(_I,[["render",$I],["__scopeId","data-v-3665aeea"]]);const EI={class:"inline"},MI={class:"inline"},AI={class:"inline"},II={class:"inline"},TI=Sr(),kI=Q({props:TI,emits:["update:model-value"],setup(e,{emit:t}){const n="90px";function r(p,y){t("update:model-value",p,y)}function a(p){r({spaceType:p})}function o(p,y){r({minX:p},y)}function l(p,y){r({maxX:p},y)}function s(p,y){r({minY:p},y)}function u(p,y){r({maxY:p},y)}function i(p,y){r({useMinX:p},y)}function d(p,y){r({useMaxX:p},y)}function v(p,y){r({useMinY:p},y)}function f(p,y){r({useMaxY:p},y)}function m(p,y){r({influence:p},y)}return(p,y)=>(S(),k("div",null,[$(et,{label:"Space Type","label-width":n},{default:Y(()=>[$(Pt,{"model-value":p.modelValue.spaceType,options:ke(Jr),"no-placeholder":"","onUpdate:modelValue":a},null,8,["model-value","options"])]),_:1}),$(et,{label:"Min X","label-width":n},{default:Y(()=>[C("div",EI,[$(Lt,{"model-value":p.modelValue.useMinX,"onUpdate:modelValue":i},null,8,["model-value"]),$(Je,{"model-value":p.modelValue.minX,step:.1,"onUpdate:modelValue":o},null,8,["model-value","step"])])]),_:1}),$(et,{label:"Min Y","label-width":n},{default:Y(()=>[C("div",MI,[$(Lt,{"model-value":p.modelValue.useMinY,"onUpdate:modelValue":v},null,8,["model-value"]),$(Je,{"model-value":p.modelValue.minY,step:.1,"onUpdate:modelValue":s},null,8,["model-value","step"])])]),_:1}),$(et,{label:"Max X","label-width":n},{default:Y(()=>[C("div",AI,[$(Lt,{"model-value":p.modelValue.useMaxX,"onUpdate:modelValue":d},null,8,["model-value"]),$(Je,{"model-value":p.modelValue.maxX,step:.1,"onUpdate:modelValue":l},null,8,["model-value","step"])])]),_:1}),$(et,{label:"Max Y","label-width":n},{default:Y(()=>[C("div",II,[$(Lt,{"model-value":p.modelValue.useMaxY,"onUpdate:modelValue":f},null,8,["model-value"]),$(Je,{"model-value":p.modelValue.maxY,step:.1,"onUpdate:modelValue":u},null,8,["model-value","step"])])]),_:1}),$(et,{label:"Influence","label-width":n},{default:Y(()=>[$(Je,{"model-value":p.modelValue.influence,min:0,max:1,"onUpdate:modelValue":m},null,8,["model-value"]),$(Hn,{status:p.keyframeStatusMap.influence,updated:p.propsUpdatedStatus.influence,onCreate:y[0]||(y[0]=E=>p.createKeyframe("influence")),onDelete:y[1]||(y[1]=E=>p.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1})]))}});var OI=ee(kI,[["__scopeId","data-v-31bc5709"]]);const BI=Q({components:{SliderInput:Je,SelectField:Pt,CheckboxInput:Lt,InlineField:et,KeyDot:Hn},props:Sr(),emits:["update:model-value"],setup(e,{emit:t}){function n(r,a){t("update:model-value",c(c({},e.modelValue),r),a)}return{labelWidth:"100px",spaceTypeOptions:Jr,updateTargetId(r){n({targetId:r})},updateTargetSpaceType(r){n({targetSpaceType:r})},updateOwnerSpaceType(r){n({ownerSpaceType:r})},updateInfluence(r,a){n({influence:r},a)},updateCopyX(r){n({copyX:r})},updateCopyY(r){n({copyY:r})},updateInvertX(r){n({invertX:r})},updateInvertY(r){n({invertY:r})}}}});function LI(e,t,n,r,a,o){const l=F("SelectField"),s=F("InlineField"),u=F("CheckboxInput"),i=F("SliderInput"),d=F("KeyDot");return S(),k("div",null,[$(s,{label:"Target","label-width":e.labelWidth},{default:Y(()=>[$(l,{"model-value":e.modelValue.targetId,options:e.boneOptions,"onUpdate:modelValue":e.updateTargetId},null,8,["model-value","options","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,{label:"Target Space","label-width":e.labelWidth},{default:Y(()=>[$(l,{"model-value":e.modelValue.targetSpaceType,options:e.spaceTypeOptions,"no-placeholder":"","onUpdate:modelValue":e.updateTargetSpaceType},null,8,["model-value","options","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,{label:"Owner Space","label-width":e.labelWidth},{default:Y(()=>[$(l,{"model-value":e.modelValue.ownerSpaceType,options:e.spaceTypeOptions,"no-placeholder":"","onUpdate:modelValue":e.updateOwnerSpaceType},null,8,["model-value","options","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,null,{default:Y(()=>[$(u,{"model-value":e.modelValue.copyX,label:"Axis X","onUpdate:modelValue":e.updateCopyX},null,8,["model-value","onUpdate:modelValue"])]),_:1}),$(s,null,{default:Y(()=>[$(u,{"model-value":e.modelValue.copyY,label:"Axis Y","onUpdate:modelValue":e.updateCopyY},null,8,["model-value","onUpdate:modelValue"])]),_:1}),$(s,null,{default:Y(()=>[$(u,{"model-value":e.modelValue.invertX,label:"Invert X","onUpdate:modelValue":e.updateInvertX},null,8,["model-value","onUpdate:modelValue"])]),_:1}),$(s,null,{default:Y(()=>[$(u,{"model-value":e.modelValue.invertY,label:"Invert Y","onUpdate:modelValue":e.updateInvertY},null,8,["model-value","onUpdate:modelValue"])]),_:1}),$(s,{label:"Influence","label-width":e.labelWidth},{default:Y(()=>[$(i,{"model-value":e.modelValue.influence,min:0,max:1,"onUpdate:modelValue":e.updateInfluence},null,8,["model-value","onUpdate:modelValue"]),$(d,{status:e.keyframeStatusMap.influence,updated:e.propsUpdatedStatus.influence,onCreate:t[0]||(t[0]=v=>e.createKeyframe("influence")),onDelete:t[1]||(t[1]=v=>e.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1},8,["label-width"])])}var RI=ee(BI,[["render",LI]]);const PI=Q({components:{SliderInput:Je,SelectField:Pt,CheckboxInput:Lt,InlineField:et,KeyDot:Hn},props:Sr(),emits:["update:model-value"],setup(e,{emit:t}){function n(r,a){t("update:model-value",c(c({},e.modelValue),r),a)}return{labelWidth:"100px",spaceTypeOptions:Jr,updateTargetId(r){n({targetId:r})},updateTargetSpaceType(r){n({targetSpaceType:r})},updateOwnerSpaceType(r){n({ownerSpaceType:r})},updateInfluence(r,a){n({influence:r},a)},updateInvert(r){n({invert:r})}}}});function NI(e,t,n,r,a,o){const l=F("SelectField"),s=F("InlineField"),u=F("CheckboxInput"),i=F("SliderInput"),d=F("KeyDot");return S(),k("div",null,[$(s,{label:"Target","label-width":e.labelWidth},{default:Y(()=>[$(l,{"model-value":e.modelValue.targetId,options:e.boneOptions,"onUpdate:modelValue":e.updateTargetId},null,8,["model-value","options","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,{label:"Target Space","label-width":e.labelWidth},{default:Y(()=>[$(l,{"model-value":e.modelValue.targetSpaceType,options:e.spaceTypeOptions,"no-placeholder":"","onUpdate:modelValue":e.updateTargetSpaceType},null,8,["model-value","options","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,{label:"Owner Space","label-width":e.labelWidth},{default:Y(()=>[$(l,{"model-value":e.modelValue.ownerSpaceType,options:e.spaceTypeOptions,"no-placeholder":"","onUpdate:modelValue":e.updateOwnerSpaceType},null,8,["model-value","options","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,null,{default:Y(()=>[$(u,{"model-value":e.modelValue.invert,label:"Invert","onUpdate:modelValue":e.updateInvert},null,8,["model-value","onUpdate:modelValue"])]),_:1}),$(s,{label:"Influence","label-width":e.labelWidth},{default:Y(()=>[$(i,{"model-value":e.modelValue.influence,min:0,max:1,"onUpdate:modelValue":e.updateInfluence},null,8,["model-value","onUpdate:modelValue"]),$(d,{status:e.keyframeStatusMap.influence,updated:e.propsUpdatedStatus.influence,onCreate:t[0]||(t[0]=v=>e.createKeyframe("influence")),onDelete:t[1]||(t[1]=v=>e.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1},8,["label-width"])])}var jI=ee(PI,[["render",NI]]);const FI=Q({components:{SliderInput:Je,SelectField:Pt,CheckboxInput:Lt,InlineField:et,KeyDot:Hn},props:Sr(),emits:["update:model-value"],setup(e,{emit:t}){function n(r,a){t("update:model-value",c(c({},e.modelValue),r),a)}return{labelWidth:"100px",spaceTypeOptions:Jr,updateTargetId(r){n({targetId:r})},updateTargetSpaceType(r){n({targetSpaceType:r})},updateOwnerSpaceType(r){n({ownerSpaceType:r})},updateInfluence(r,a){n({influence:r},a)},updatePower(r,a){n({power:r},a)},updateCopyX(r){n({copyX:r})},updateCopyY(r){n({copyY:r})}}}});function VI(e,t,n,r,a,o){const l=F("SelectField"),s=F("InlineField"),u=F("CheckboxInput"),i=F("SliderInput"),d=F("KeyDot");return S(),k("div",null,[$(s,{label:"Target","label-width":e.labelWidth},{default:Y(()=>[$(l,{"model-value":e.modelValue.targetId,options:e.boneOptions,"onUpdate:modelValue":e.updateTargetId},null,8,["model-value","options","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,{label:"Target Space","label-width":e.labelWidth},{default:Y(()=>[$(l,{"model-value":e.modelValue.targetSpaceType,options:e.spaceTypeOptions,"no-placeholder":"","onUpdate:modelValue":e.updateTargetSpaceType},null,8,["model-value","options","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,{label:"Owner Space","label-width":e.labelWidth},{default:Y(()=>[$(l,{"model-value":e.modelValue.ownerSpaceType,options:e.spaceTypeOptions,"no-placeholder":"","onUpdate:modelValue":e.updateOwnerSpaceType},null,8,["model-value","options","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,null,{default:Y(()=>[$(u,{"model-value":e.modelValue.copyX,label:"Axis X","onUpdate:modelValue":e.updateCopyX},null,8,["model-value","onUpdate:modelValue"])]),_:1}),$(s,null,{default:Y(()=>[$(u,{"model-value":e.modelValue.copyY,label:"Axis Y","onUpdate:modelValue":e.updateCopyY},null,8,["model-value","onUpdate:modelValue"])]),_:1}),$(s,{label:"Power","label-width":e.labelWidth},{default:Y(()=>[$(i,{"model-value":e.modelValue.power,step:.1,"onUpdate:modelValue":e.updatePower},null,8,["model-value","step","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(s,{label:"Influence","label-width":e.labelWidth},{default:Y(()=>[$(i,{"model-value":e.modelValue.influence,min:0,max:1,"onUpdate:modelValue":e.updateInfluence},null,8,["model-value","onUpdate:modelValue"]),$(d,{status:e.keyframeStatusMap.influence,updated:e.propsUpdatedStatus.influence,onCreate:t[0]||(t[0]=v=>e.createKeyframe("influence")),onDelete:t[1]||(t[1]=v=>e.deleteKeyframe("influence"))},null,8,["status","updated"])]),_:1},8,["label-width"])])}var DI=ee(FI,[["render",VI]]);const _l={IK:"IK",LIMIT_LOCATION:"Limit Location",LIMIT_ROTATION:"Limit Rotation",LIMIT_SCALE:"Limit Scale",COPY_LOCATION:"Copy Location",COPY_ROTATION:"Copy Rotation",COPY_SCALE:"Copy Scale"},xI={IK:fI,LIMIT_LOCATION:bI,LIMIT_ROTATION:CI,LIMIT_SCALE:OI,COPY_LOCATION:RI,COPY_ROTATION:jI,COPY_SCALE:DI},UI=Q({components:{SelectButton:XA,TextInput:Yo,UpIcon:Gs,DeleteIcon:zo,InlineField:et},props:{constraints:{type:Array,required:!0},originalConstraints:{type:Object,default:()=>({})},boneOptions:{type:Array,required:!0},constraintKeyframeMap:{type:Object,default:()=>({})},currentFrame:{type:Number,default:0}},emits:["update","update-item","add-keyframe","remove-keyframe"],setup(e,{emit:t}){const n=h(()=>oe(e.constraints)),r=h(()=>Object.keys(_l).map(w=>({value:w,label:_l[w]})));function a(w){const T=e.constraintKeyframeMap[w];if(!!T)return te(_a(T).props,O=>O.some(A=>A.frame===e.currentFrame)?"self":"others")}function o(w){const T=e.originalConstraints[w],O=n.value[w];return!T||!O?{}:{influence:T.option.influence!==O.option.influence}}function l(w){!w||u(w)}function s(w,T){t("update",w,T)}function u(w){const T=Dd({type:w},!0);T.name=Xt(_l[T.type],e.constraints.map(O=>O.name)),s([...e.constraints,T])}function i(w,T,O){const A=e.constraints[w];t("update-item",g(c({},A),{option:T}),O)}function d(w){const T=e.constraints.concat();T.splice(w,1),s(T)}function v(w,T){s(Oy(e.constraints,w,T))}function f(w){s(By(e.constraints,w))}function m(w){s(Ly(e.constraints,w))}function p(w,T){const O=e.constraints[w];!O||t("add-keyframe",O.id,T)}function y(w,T){const O=e.constraints[w];!O||t("remove-keyframe",O.id,T)}function E(w){return T=>{p(w,T)}}function b(w){return T=>{y(w,T)}}return{componentMap:xI,constraintOptions:r,getKeyframeStatus:a,setBoneConstraintType:l,deleteConstraint:d,updateName:v,updateConstraint:i,upConstraint:f,downConstraint:m,getKeyframeUpdatedStatus:o,addKeyframe:p,removeKeyframe:y,createKeyframe:E,deleteKeyframe:b}}}),KI={class:"constraint-header"},GI=["disabled","onClick"],zI=["disabled","onClick"],YI=["onClick"];function XI(e,t,n,r,a,o){const l=F("SelectButton"),s=F("InlineField"),u=F("TextInput"),i=F("UpIcon"),d=F("DeleteIcon");return S(),k(ve,null,[$(s,{label:"Constraints"},{default:Y(()=>[$(l,{options:e.constraintOptions,onSelect:e.setBoneConstraintType},null,8,["options","onSelect"])]),_:1}),(S(!0),k(ve,null,Ae(e.constraints,(v,f)=>(S(),k("div",{key:v.id,class:"constraints-item"},[C("div",KI,[$(u,{"model-value":v.name,"onUpdate:modelValue":m=>e.updateName(f,m)},null,8,["model-value","onUpdate:modelValue"]),C("button",{disabled:f===0,type:"button",onClick:m=>e.upConstraint(f)},[$(i,{class:"icon"})],8,GI),C("button",{disabled:f===e.constraints.length-1,type:"button",onClick:m=>e.downConstraint(f)},[$(i,{class:"icon",flipped:""})],8,zI),C("button",{type:"button",onClick:m=>e.deleteConstraint(f)},[$(d,{class:"icon"})],8,YI)]),(S(),Se(ad(e.componentMap[v.type]),{"model-value":v.option,"props-updated-status":e.getKeyframeUpdatedStatus(v.id),"keyframe-status-map":e.getKeyframeStatus(v.id),"bone-options":e.boneOptions,"create-keyframe":e.createKeyframe(f),"delete-keyframe":e.deleteKeyframe(f),"onUpdate:modelValue":(m,p)=>e.updateConstraint(f,m,p),onAddKeyframe:m=>e.addKeyframe(f,m),onRemoveKeyframe:m=>e.removeKeyframe(f,m)},null,8,["model-value","props-updated-status","keyframe-status-map","bone-options","create-keyframe","delete-keyframe","onUpdate:modelValue","onAddKeyframe","onRemoveKeyframe"]))]))),128))],64)}var WI=ee(UI,[["render",XI],["__scopeId","data-v-dbb5b532"]]);const HI=Q({components:{SelectField:Pt,CheckboxInput:Lt,ConstraintList:WI,InlineField:et,TextInput:Yo},setup(){const e=Rt(),t=rn(),n=h(()=>e.lastSelectedBone.value),r=t.keyframeMapByTargetId,a=t.currentFrame,o=h(()=>{if(!n.value)return[];const m=e.boneMap.value;return wb(m,n.value.id).map(p=>({value:p,label:m[p].name}))}),l=h(()=>n.value?n.value.constraints.map(m=>t.currentInterpolatedConstraintMap.value[m]):[]),s=h(()=>n.value?"bone":e.lastSelectedArmature.value?"armature":"");function u(m){return r.value[m].find(p=>p.frame===a.value)}function i(m,p){!n.value||e.updateBoneConstraints(m,p)}function d(m,p){var w,T;if(!n.value)return;const y=l.value.findIndex(O=>O.id===m.id),E=l.value[y];if(((T=_a((w=r.value[m.id])!=null?w:[]).props)!=null?T:{}).influence&&E.option.influence!==m.option.influence)t.applyEditedConstraint({[m.id]:{influence:m.option.influence}},p);else{const O=l.value.concat();O[y]=m,e.updateBoneConstraints(O,p)}}function v(m,p){t.execInsertKeyframeConstraint(m,{[p]:!0})}function f(m,p){const y=u(m);!y||t.execDeleteKeyframeConstraint(y.id,{[p]:!0})}return{lastSelectedArmature:e.lastSelectedArmature,lastSelectedBone:n,constraintList:l,constraintKeyframeMapByTargetId:r,currentFrame:a,otherBoneOptions:o,selectedObjectType:s,connected:h({get(){var m,p;return(p=(m=n.value)==null?void 0:m.connected)!=null?p:!1},set(m){e.updateBone({connected:m})}}),inheritRotation:h({get(){var m,p;return(p=(m=n.value)==null?void 0:m.inheritRotation)!=null?p:!1},set(m){e.updateBone({inheritRotation:m})}}),inheritScale:h({get(){var m,p;return(p=(m=n.value)==null?void 0:m.inheritScale)!=null?p:!1},set(m){e.updateBone({inheritScale:m})}}),parentId:h({get(){var m,p;return(p=(m=n.value)==null?void 0:m.parentId)!=null?p:""},set(m){e.updateBone({parentId:m})}}),changeArmatureName(m){e.updateArmatureName(m)},changeBoneName(m){e.updateBoneName(m)},originalInterpolatedConstraintMap:t.originalInterpolatedConstraintMap,updateConstraints:i,updateConstraint:d,addKeyframeConstraint:v,removeKeyframeConstraint:f}}}),Vp=e=>(it("data-v-4478742a"),e=e(),ct(),e),qI=Vp(()=>C("h3",null,"Armature",-1)),JI=Vp(()=>C("h3",null,"Bone",-1));function ZI(e,t,n,r,a,o){const l=F("TextInput"),s=F("InlineField"),u=F("SelectField"),i=F("CheckboxInput"),d=F("ConstraintList");return S(),k("div",null,[e.selectedObjectType==="armature"&&e.lastSelectedArmature?(S(),k("form",{key:0,onSubmit:t[0]||(t[0]=Me(()=>{},["prevent"]))},[qI,$(s,{label:"Name","label-width":"50px"},{default:Y(()=>[$(l,{"model-value":e.lastSelectedArmature.name,"onUpdate:modelValue":e.changeArmatureName},null,8,["model-value","onUpdate:modelValue"])]),_:1})],32)):fe("",!0),e.selectedObjectType==="bone"&&e.lastSelectedBone?(S(),k("form",{key:1,onSubmit:t[5]||(t[5]=Me(()=>{},["prevent"]))},[JI,$(s,{label:"Name","label-width":"50px"},{default:Y(()=>[$(l,{"model-value":e.lastSelectedBone.name,"onUpdate:modelValue":e.changeBoneName},null,8,["model-value","onUpdate:modelValue"])]),_:1}),$(s,{label:"Parent","label-width":"50px"},{default:Y(()=>[$(u,{modelValue:e.parentId,"onUpdate:modelValue":t[1]||(t[1]=v=>e.parentId=v),options:e.otherBoneOptions},null,8,["modelValue","options"])]),_:1}),$(s,null,{default:Y(()=>[$(i,{modelValue:e.connected,"onUpdate:modelValue":t[2]||(t[2]=v=>e.connected=v),disabled:!e.parentId,label:"Connect"},null,8,["modelValue","disabled"])]),_:1}),$(s,null,{default:Y(()=>[$(i,{modelValue:e.inheritRotation,"onUpdate:modelValue":t[3]||(t[3]=v=>e.inheritRotation=v),label:"Inherit Rotation"},null,8,["modelValue"])]),_:1}),$(s,null,{default:Y(()=>[$(i,{modelValue:e.inheritScale,"onUpdate:modelValue":t[4]||(t[4]=v=>e.inheritScale=v),label:"Inherit Scale"},null,8,["modelValue"])]),_:1}),$(d,{constraints:e.constraintList,"original-constraints":e.originalInterpolatedConstraintMap,"bone-options":e.otherBoneOptions,"constraint-keyframe-map":e.constraintKeyframeMapByTargetId,"current-frame":e.currentFrame,onUpdate:e.updateConstraints,onUpdateItem:e.updateConstraint,onAddKeyframe:e.addKeyframeConstraint,onRemoveKeyframe:e.removeKeyframeConstraint},null,8,["constraints","original-constraints","bone-options","constraint-keyframe-map","current-frame","onUpdate","onUpdateItem","onAddKeyframe","onRemoveKeyframe"])],32)):fe("",!0)])}var QI=ee(HI,[["render",ZI],["__scopeId","data-v-4478742a"]]);const eT=Q({components:{TabPanel:BE,DetailPanel:QI,HistoryStack:jE,FilePanel:CA,TreePanel:VA}});function tT(e,t,n,r,a,o){const l=F("DetailPanel"),s=F("HistoryStack"),u=F("FilePanel"),i=F("TreePanel"),d=F("TabPanel");return S(),k("div",null,[$(d,{tabs:[{key:"file",label:"File"},{key:"detail",label:"Detail"},{key:"tree",label:"Tree"},{key:"history",label:"History"}],"initial-tab":"file"},{detail:Y(()=>[$(l)]),history:Y(()=>[$(s)]),file:Y(()=>[$(u)]),tree:Y(()=>[$(i)]),_:1})])}var nT=ee(eT,[["render",tT]]);const rT=Q({props:{x:{type:Number,default:0},y:{type:Number,default:0},width:{type:Number,default:100},height:{type:Number,default:100},size:{type:Number,default:100}}}),aT=["x","y","width","height"];function oT(e,t,n,r,a,o){return S(),k("foreignObject",{x:e.x,y:e.y,width:e.width,height:e.height},[C("div",{xmlns:"http://www.w3.org/1999/xhtml",style:at({"background-position":`${e.size/2-e.x}px ${e.size/2-e.y}px`,"background-size":`${e.size}px ${e.size}px`})},null,4)],8,aT)}var lT=ee(rT,[["render",oT],["__scopeId","data-v-a1796bd4"]]);const sT={class:"edge-cutter","data-type":"edge-cutter"},uT=["d","stroke-width"],iT=Q({props:{from:null,to:null},setup(e){const t=e,n=h(()=>`M${t.from.x},${t.from.y} L${t.to.x},${t.to.y}`),r=h(pn());return(a,o)=>(S(),k("g",sT,[C("path",{d:ke(n),stroke:"lime","stroke-width":3*ke(r),fill:"none"},null,8,uT)]))}});function Dp(e,t,n){const r=cT(e,t,n);return Object.keys(r).reduce((a,o)=>{const l=e[o];return a[o]=g(c({},l),{position:ce(l.position,r[o].translate)}),a},{})}function cT(e,t,n){const r=cu(ge(n.current,n.start)),a=ce(r,dT(e[t].position)),o=de({translate:a});return te(e,()=>o)}function xp(e){const t=cu(ge(e.current,e.start));return g(c({},e),{current:ce(t,e.start)})}function cu(e){return{x:fi(10,e.x),y:fi(10,e.y)}}function dT(e){return ge(cu(e),e)}function Ur(e,t,n,r,a,o){if(!t[a]||!t[n])return{};const l=o1({node:t[a],key:o},{node:t[n],key:r});return l?c({[l.id]:l},Jl(e,g(c({},t),{[l.id]:l}),{id:l.id,key:r})):{}}function Xo(e){var r,a;const t=(r=e.data)==null?void 0:r.node_id,n=(a=e.data)==null?void 0:a.edge_key;if(!t||!n)throw new Error("Invalid node edge data.");return{id:t,key:n}}function fT(e){var o,l,s,u;const t=(o=e.data)==null?void 0:o.input_id,n=(l=e.data)==null?void 0:l.input_key,r=(s=e.data)==null?void 0:s.output_id,a=(u=e.data)==null?void 0:u.output_key;if(!t||!n||!r||!a)throw new Error("Invalid edge data.");return{inputId:t,inputKey:n,outputId:r,outputKey:a}}const Ln={add:{command:"A",title:"Add"},selectAll:{command:"a",title:"All Select"},delete:{command:"x",title:"Delete"},grab:{command:"g",title:"Grab"},duplicate:{command:"D",title:"Duplicate"},cutEdge:{command:`${Vt()} + R-Drag`,title:"Disconnect"},clip:{command:`${Vt()} + c`,title:"Clip"},paste:{command:`${Vt()} + v`,title:"Paste"}};function Up(e,t,n,r,a,o){const l=t[a],s=t[n];return l&&s&&ZS(e,{node:l,key:o},{node:s,key:r})}const ac=tu("graph-nodes");function oc(e){return eu(()=>({"text/plain":ac.serialize(oe(a1(e.getGraphNodeModule,ye(e.getSelectedNodeMap())).nodes))}),async t=>{const n=t.find(o=>o.kind==="string");if(!n)return;const r=await n.getAsString(),a=$t(ac.deserialize(r),o=>!!e.getGraphNodeModule(o.type));e.pasteNodes(ye(lf(e.getGraphNodeModule,a,e.getNodeMap(),e.generateUuid)).map(o=>g(c({},o),{position:ce(o.position,{x:20,y:20})})))})}function pT(e){let t=0;return{getLabel:()=>"MovingNodeState",onStart:n=>(n.startEditMovement(),n.startDragging(),t=n.getTimestamp(),Promise.resolve()),handleEvent:async(n,r)=>{switch(r.type){case"pointerdrag":n.getTimestamp()-t>100&&n.setEditMovement(xp(r.data));return;case"pointerup":{if(r.data.options.button===0){const a=n.getEditMovement();a&&n.updateNodes(Dp(n.getSelectedNodeMap(),e.nodeId,a))}return n.setEditMovement(),mt}case"keydown":switch(r.data.key){case"escape":return n.setEditMovement(),mt}return}}}}function Kp(){return mT}const mT={getLabel:()=>"GrabbingNodeState",shouldRequestPointerLock:!0,onStart:async e=>{e.startEditMovement()},handleEvent:async(e,t)=>{switch(t.type){case"pointermove":e.setEditMovement(xp(t.data));return;case"pointerup":{if(t.data.options.button===0){const n=e.getEditMovement(),r=e.getLastSelectedNodeId();n&&r&&e.updateNodes(Dp(e.getSelectedNodeMap(),r,n))}return e.setEditMovement(),mt}case"keydown":switch(t.data.key){case"Escape":return e.setEditMovement(),mt}return}}};function yo(e){return{getLabel:()=>"AddingNewNodeState",onStart:async t=>{e.insertion?hT(t,e):vT(t,e)},onEnd:async t=>{t.setDraftEdge(),t.setPopupMenuList()},handleEvent:async(t,n)=>{switch(n.type){case"pointerdown":switch(n.data.options.button){case 1:return{getState:mn,type:"stack-resume"}}return;case"pointerup":if(n.data.options.button!==1)return mt;break;case"keydown":switch(n.data.key){case"Escape":return mt}return;case"popupmenu":return e.insertion?gT(t,n,e):yT(t,n,e)}}}}function vT(e,t){var d;const n=e.getDraftEdge();if(!n){Gp(e,t);return}const r=n.type==="draft-input",[a,o]=r?[n.output,n.input]:[n.input,n.output],l=(d=e.getGraphNodeModule(e.getNodeMap()[a.nodeId].type))==null?void 0:d.struct,s=e.getNodeMap()[a.nodeId],i=Hl(e.getGraphNodeModule,e.getNodeItemList(),r?Ca(l,s,a.key):Kn(l,s,a.key),r).map(({label:v,children:f})=>({label:v,children:f.map(m=>({label:m.label,key:`${m.type}`,data:Md({inputKey:m.inputKey,outputKey:m.outputKey})}))}));e.setPopupMenuList({point:o,items:i})}function Gp(e,t){const n=e.getNodeItemList().map(({label:r,children:a})=>({label:r,children:a.map(({label:o,type:l})=>({label:o,key:l}))}));e.setPopupMenuList({point:t.point,items:n})}function hT(e,t){var d,v;const n=t.insertion;if(!n){Gp(e,t);return}const r=e.getNodeMap(),a=r[n.inputId],o=r[n.outputId];if(!a||!o)return;const l=(d=e.getGraphNodeModule(a.type))==null?void 0:d.struct,s=(v=e.getGraphNodeModule(o.type))==null?void 0:v.struct,i=zS(e.getGraphNodeModule,e.getNodeItemList(),Ca(s,o,n.outputKey),Kn(l,a,n.inputKey)).map(({label:f,children:m})=>({label:f,children:m.map(p=>({label:p.label,key:`${p.type}`,data:Md({inputKey:p.inputKey,outputKey:p.outputKey})}))}));e.setPopupMenuList({point:t.point,items:i})}function yT(e,t,n){var v;const r=t.data.key,a=(v=e.getGraphNodeModule(r))==null?void 0:v.struct,o=e.getDraftEdge();if(!a)return mt;const l=o&&o.type==="draft-input",s=l?{x:n.point.x,y:n.point.y-10}:{x:n.point.x-a.width,y:n.point.y-10},u=e.addNode(r,{position:s});if(!u||!o)return mt;const{inputKey:i,outputKey:d}=t.data;return l&&i?e.updateNodes(Ur(e.getGraphNodeModule,e.getNodeMap(),u.id,i,o.output.nodeId,o.output.key)):!l&&d&&e.updateNodes(Ur(e.getGraphNodeModule,e.getNodeMap(),o.input.nodeId,o.input.key,u.id,d)),mt}function gT(e,t,n){var f;const r=t.data.key,a=(f=e.getGraphNodeModule(r))==null?void 0:f.struct;if(!a)return mt;const o={x:n.point.x-a.width/2,y:n.point.y-10},l=e.addNode(r,{position:o});if(!l||!n.insertion)return mt;const{inputKey:s,outputKey:u}=t.data,i=e.getNodeMap(),d=Ur(e.getGraphNodeModule,i,l.id,s,n.insertion.outputId,n.insertion.outputKey),v=Ur(e.getGraphNodeModule,c(c({},i),d),n.insertion.inputId,n.insertion.inputKey,l.id,u);return e.updateNodes(c(c({},d),v)),mt}function bT(){return _T}const _T={getLabel:()=>"RectangleSelectingState",onStart:async e=>{e.startDragging(),e.setRectangleDragging(!0)},onEnd:async e=>{e.setRectangleDragging()},handleEvent:async(e,t)=>{switch(t.type){case"pointerup":{const n=e.getDraggedRectangle();if(n){const r=og(n);e.selectNodes(te($t(e.getNodeMap(),a=>r(R1(e.getGraphNodeModule,a))),()=>!0),t.data.options)}return mt}case"keydown":switch(t.data.key){case"Escape":return mt}return}}};function ST(e){return{getLabel:()=>"ConnectingInputEdgeState",onStart:async t=>{t.startDragging(),t.setDraftEdge({type:"draft-output",input:{nodeId:e.nodeId,key:e.inputKey},output:e.point})},handleEvent:async(t,n)=>{switch(n.type){case"pointerdown":switch(n.data.options.button){case 1:return{getState:mn,type:"stack-restart"}}return;case"pointerdrag":t.setDraftEdge({type:"draft-output",input:{nodeId:e.nodeId,key:e.inputKey},output:n.data.current});return;case"pointerup":if(n.data.options.button===0){if(n.target.type==="empty"){const r=t.getDraftEdge();if((r==null?void 0:r.type)==="draft-output"){const a=t.getNodeMap(),o=a[r.input.nodeId];if(o.inputs[r.input.key].from)t.updateNodes(hf(t.getGraphNodeModule,a,o.id,r.input.key));else return()=>yo({point:r.output})}}else if(n.target.type==="node-edge-output"){const r=t.getNodeMap(),a=Xo(n.target);Up(t.getGraphNodeModule,t.getNodeMap(),e.nodeId,e.inputKey,a.id,a.key)&&t.updateNodes(Ur(t.getGraphNodeModule,r,e.nodeId,e.inputKey,a.id,a.key))}}return t.setDraftEdge(),mt;case"keydown":switch(n.data.key){case"escape":return t.setDraftEdge(),mt}return}}}}function wT(e){return{getLabel:()=>"ConnectingOutputEdgeState",onStart:async t=>{t.startDragging(),t.setDraftEdge({type:"draft-input",output:{nodeId:e.nodeId,key:e.outputKey},input:e.point})},handleEvent:async(t,n)=>{switch(n.type){case"pointerdown":switch(n.data.options.button){case 1:return{getState:mn,type:"stack-restart"}}return;case"pointerdrag":t.setDraftEdge({type:"draft-input",output:{nodeId:e.nodeId,key:e.outputKey},input:n.data.current});return;case"pointerup":if(n.data.options.button===0){if(n.target.type==="empty"){const r=t.getDraftEdge();if((r==null?void 0:r.type)==="draft-input")return()=>yo({point:r.input})}else if(n.target.type==="node-edge-input"){const r=t.getNodeMap(),a=Xo(n.target);Up(t.getGraphNodeModule,t.getNodeMap(),a.id,a.key,e.nodeId,e.outputKey)&&t.updateNodes(Ur(t.getGraphNodeModule,r,a.id,a.key,e.nodeId,e.outputKey))}}return t.setDraftEdge(),mt;case"keydown":switch(n.data.key){case"escape":return t.setDraftEdge(),mt}return}}}}function $T(e){const t=te(e,r=>dy(r));function n(r){return Object.entries(t).reduce((a,[o,l])=>(l.some((u,i)=>{if(i<l.length-1)return qh(r,[u,l[i+1]])})&&(a[o]=!0),a),{})}return{getHitPathMap:n}}function CT(e){let t;return{getLabel:()=>"EdgeCutting",onStart:async n=>{t=te(n.getEdgeSummaryMap(),r=>$T(te(r,a=>Bf(a.from,a.to)))),n.setEdgeCutter({from:e.point,to:e.point}),n.startDragging()},onEnd:async n=>{n.setEdgeCutter(void 0)},handleEvent:async(n,r)=>{switch(r.type){case"pointerdrag":{const a=n.getEdgeCutter();if(a){n.setEdgeCutter(g(c({},a),{to:r.data.current}));return}else return{type:"break"}}case"pointerup":{const a=n.getEdgeCutter();if(a&&t){const o=[a.from,a.to],l=te(t,u=>u.getHitPathMap(o)),s=f1(n.getGraphNodeModule,n.getNodeMap(),l);Object.keys(s).length>0&&n.updateNodes(s)}return{type:"break"}}}}}}function mt(){return ET}const ET={getLabel:()=>"DefaultState",onStart:async e=>{lc(e)},handleEvent:async(e,t)=>{switch(t.type){case"pointerdown":switch(t.data.options.button){case 0:switch(t.target.type){case"empty":return MT(e,t);case"node-body":return AT(e,t);case"node-edge-input":return IT(t);case"node-edge-output":return TT(t)}return;case 1:return mn;case 2:if(t.data.options.ctrl)return()=>CT({point:t.data.point})}return;case"pointerup":switch(t.data.options.button){case 0:switch(t.target.type){case"edge":return()=>yo({point:t.data.point,insertion:fT(t.target)})}return}return;case"keydown":switch(t.data.key){case"A":{const n=t.point;return n?()=>yo({point:n}):void 0}case"a":e.selectAllNode();return;case"g":return e.getLastSelectedNodeId()?Kp:void 0;case"D":return kT(e);case"x":e.deleteNodes();return}return;case"copy":{oc(e).onCopy(t.nativeEvent);return}case"paste":{await oc(e).onPaste(t.nativeEvent);return}case"selection":lc(e);return}}};function lc(e){const t=e.getLastSelectedNodeId();e.setCommandExams([Ln.add,Ln.selectAll,Ln.cutEdge,...t?[Ln.delete,Ln.grab,Ln.duplicate,Ln.clip]:[],Ln.paste])}function MT(e,t){return e.selectNodes({},t.data.options),bT}function AT(e,t){var r;const n=(r=t.target.data)==null?void 0:r.node_id;if(n)if(t.data.options.shift)e.selectNodes({[n]:!0},t.data.options);else return e.getSelectedNodeMap()[n]||e.selectNodes({[n]:!0},t.data.options),()=>pT({nodeId:n})}function IT(e){const t=Xo(e.target);return()=>ST({nodeId:t.id,inputKey:t.key,point:e.data.point})}function TT(e){const t=Xo(e.target);return()=>wT({nodeId:t.id,outputKey:t.key,point:e.data.point})}function kT(e){return e.pasteNodes(ye(lf(e.getGraphNodeModule,e.getSelectedNodeMap(),e.getNodeMap(),e.generateUuid)).map(t=>g(c({},t),{position:ce(t.position,{x:20,y:20})}))),Kp}function OT(e){const t=e.graphStore,n={generateUuid:qe,requestPointerLock:e.requestPointerLock,exitPointerLock:e.exitPointerLock,getTimestamp:()=>Date.now(),getGraphNodeModule:a=>t.getGraphNodeModuleFn.value()(a),getNodeMap:()=>t.nodeMap.value,updateNodes:t.updateNodes,getSelectedNodeMap:()=>te(t.selectedNodes.value,(a,o)=>t.nodeMap.value[o]),getLastSelectedNodeId:()=>{var a;return(a=t.lastSelectedNode.value)==null?void 0:a.id},selectNodes:t.selectNodes,selectAllNode:t.selectAllNode,deleteNodes:t.deleteNodes,addNode:t.addNode,pasteNodes:t.pasteNodes,getEditMovement:()=>t.editMovement.value,setEditMovement:t.setEditMovement,getDraftEdge:()=>t.draftEdge.value,setDraftEdge:t.setDraftEdge,startEditMovement:e.startEditMovement,startDragging:e.startDragging,setPopupMenuList:e.setPopupMenuList,getNodeItemList:e.getNodeItemList,panView:e.panView,setRectangleDragging:e.setRectangleDragging,getDraggedRectangle:e.getDraggedRectangle,setCommandExams:e.setCommandExams,setEdgeCutter:e.setEdgeCutter,getEdgeCutter:e.getEdgeCutter,getEdgeSummaryMap:()=>t.edgeSummaryMap.value};return{sm:Qs(n,mt)}}const BT=Q({components:{PopupMenuList:zs,CommandExamPanel:Ks,DotBackground:lT,SelectRectangle:Pf,EdgeCutterElm:iT,FocusableBlock:Nf},props:{canvas:{type:Object,required:!0}},setup(e){const{wrapper:t,svg:n,addRootPosition:r,removeRootPosition:a}=Zs(()=>e.canvas);Ws(()=>e.canvas.scale.value),Ut(()=>{e.canvas.adjustToCenter()});const o=H(),l=h(()=>o.value?r(e.canvas.canvasToView(o.value.point)):void 0),s=Wn(E,1e3/60,!0),u=xo({onMove:s,onGlobalMove:B=>{if(!n.value)return;const M=a(B.p);!M||e.canvas.setMousePoint(M)},onEscape:()=>{m.sm.handleEvent({type:"keydown",data:{key:"Escape"},point:e.canvas.viewToCanvas(e.canvas.mousePoint.value)})}}),i=lu(()=>{var B,M;return(M=(B=o.value)==null?void 0:B.items.map(({label:P,children:R})=>({label:P,children:R==null?void 0:R.map(({label:x,key:N,data:V})=>({label:x,exec:N?()=>T(N,V):void 0}))})))!=null?M:[]}),d=H(),v=H(),f=ka(),m=OT({graphStore:f,requestPointerLock:()=>{!n.value||(e.canvas.startMoving(),u.requestPointerLockFromElement(n.value))},exitPointerLock:()=>{u.exitPointerLock(),e.canvas.endMoving()},startEditMovement:()=>{f.setEditMovement({start:e.canvas.viewToCanvas(e.canvas.mousePoint.value),current:e.canvas.viewToCanvas(e.canvas.mousePoint.value),ctrl:!1,scale:e.canvas.scale.value})},startDragging:()=>e.canvas.startDragging(),panView:B=>e.canvas.viewMove(B),setRectangleDragging:B=>e.canvas.setRectangleDragging(B),getDraggedRectangle:()=>e.canvas.draggedRectangle.value,setPopupMenuList:B=>o.value=B,getNodeItemList:()=>GS.concat(f.customGraphNodeMenuOptionsSrc.value),setCommandExams:B=>d.value=B,getEdgeCutter:()=>v.value,setEdgeCutter:B=>v.value=B});bt(f.selectedNodes,()=>{m.sm.handleEvent({type:"selection"})});function p(B){m.sm.handleEvent({type:"pointerdown",target:ho(B),data:{point:e.canvas.viewToCanvas(e.canvas.mousePoint.value),options:hr(B)}})}function y(B){e.canvas.endMoving(),m.sm.handleEvent({type:"pointerup",target:ho(B),data:{point:e.canvas.viewToCanvas(e.canvas.mousePoint.value),options:hr(B)}})}function E(B){!e.canvas.editStartPoint.value||m.sm.handleEvent({type:"pointermove",data:{start:e.canvas.viewToCanvas(e.canvas.editStartPoint.value),current:e.canvas.viewToCanvas(e.canvas.mousePoint.value),ctrl:B.ctrl,scale:e.canvas.scale.value}})}function b(B){e.canvas.dragged.value&&e.canvas.editStartPoint.value&&m.sm.handleEvent({type:"pointerdrag",data:{start:e.canvas.viewToCanvas(e.canvas.editStartPoint.value),current:e.canvas.viewToCanvas(e.canvas.mousePoint.value),ctrl:Qt(B),scale:e.canvas.scale.value}})}function w(B){m.sm.handleEvent({type:"keydown",data:fo(B),point:e.canvas.viewToCanvas(e.canvas.mousePoint.value)})}function T(B,M={}){m.sm.handleEvent({type:"popupmenu",data:c({key:B},M)})}function O(B){m.sm.handleEvent({type:"copy",nativeEvent:B})}function A(B){m.sm.handleEvent({type:"paste",nativeEvent:B})}return{wrapper:t,svg:n,scale:h(()=>e.canvas.scale.value),viewOrigin:h(()=>e.canvas.viewOrigin.value),viewSize:h(()=>e.canvas.viewSize.value),viewBox:h(()=>e.canvas.viewBox.value),viewCanvasRect:h(()=>e.canvas.viewCanvasRect.value),popupMenuItems:h(()=>i.list.value),availableCommandList:h(()=>{var B;return(B=d.value)!=null?B:[]}),popupMenuListPosition:l,draggedRectangle:h(()=>e.canvas.draggedRectangle.value),edgeCutter:h(()=>v.value),onCopy:O,onPaste:A,wheel:e.canvas.wheel,handleDownEvent:p,handleUpEvent:y,handleNativeMoveEvent:b,handleKeydownEvent:w}}}),LT=e=>(it("data-v-5b6d610b"),e=e(),ct(),e),RT={ref:"wrapper",class:"graph-canvas-root"},PT=["viewBox","width","height"],NT=LT(()=>C("g",{"stroke-width":"2","stroke-dasharray":"3",stroke:"#000"},[C("line",{x1:"-20",x2:"20"}),C("line",{y1:"-20",y2:"20"})],-1));function jT(e,t,n,r,a,o){const l=F("DotBackground"),s=F("SelectRectangle"),u=F("EdgeCutterElm"),i=F("FocusableBlock"),d=F("CommandExamPanel"),v=F("PopupMenuList");return S(),k("div",RT,[$(i,{onKeydown:e.handleKeydownEvent,onCopy:e.onCopy,onPaste:e.onPaste},{default:Y(()=>[(S(),k("svg",{ref:"svg",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none","font-family":"sans-serif",viewBox:e.viewBox,width:e.viewSize.width,height:e.viewSize.height,onWheel:t[0]||(t[0]=Me((...f)=>e.wheel&&e.wheel(...f),["prevent"])),onMousedown:t[1]||(t[1]=Me((...f)=>e.handleDownEvent&&e.handleDownEvent(...f),["prevent"])),onMouseup:t[2]||(t[2]=Me((...f)=>e.handleUpEvent&&e.handleUpEvent(...f),["prevent"])),onMousemove:t[3]||(t[3]=(...f)=>e.handleNativeMoveEvent&&e.handleNativeMoveEvent(...f)),onContextmenu:t[4]||(t[4]=Me(()=>{},["prevent"]))},[$(l,{x:e.viewCanvasRect.x,y:e.viewCanvasRect.y,width:e.viewCanvasRect.width,height:e.viewCanvasRect.height,size:40,class:"view-only"},null,8,["x","y","width","height"]),NT,vt(e.$slots,"default",{scale:e.scale,viewOrigin:e.viewOrigin,viewSize:e.viewSize},void 0,!0),e.draggedRectangle?(S(),Se(s,{key:0,x:e.draggedRectangle.x,y:e.draggedRectangle.y,width:e.draggedRectangle.width,height:e.draggedRectangle.height,class:"view-only"},null,8,["x","y","width","height"])):fe("",!0),e.edgeCutter?(S(),Se(u,{key:1,from:e.edgeCutter.from,to:e.edgeCutter.to},null,8,["from","to"])):fe("",!0)],40,PT))]),_:3},8,["onKeydown","onCopy","onPaste"]),$(d,{class:"command-exam-panel","available-command-list":e.availableCommandList},null,8,["available-command-list"]),e.popupMenuItems.length>0&&e.popupMenuListPosition?(S(),Se(v,{key:0,class:"popup-menu-list","popup-menu-list":e.popupMenuItems,style:at({left:`${e.popupMenuListPosition.x-20}px`,top:`${e.popupMenuListPosition.y-10}px`})},null,8,["popup-menu-list","style"])):fe("",!0)],512)}var FT=ee(BT,[["render",jT],["__scopeId","data-v-5b6d610b"]]);const VT={},DT={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10"},xT=C("rect",{width:"10",height:"10",stroke:"none",fill:"#888"},null,-1),UT=C("path",{d:"M2.5 5L7.5 5M5 2.5L5 7.5","stroke-linejoin":"round",stroke:"#fff",fill:"none"},null,-1),KT=[xT,UT];function GT(e,t){return S(),k("svg",DT,KT)}var zp=ee(VT,[["render",GT]]);const zT=Q({props:{hsva:{type:Object,default:void 0},transform:{type:Object,default:void 0}},setup(e){return{color:h(()=>e.hsva?Fr(vr(e.hsva)):e.transform?E1(e.transform):"#000")}}});function YT(e,t,n,r,a,o){return S(),k("div",{class:"color-rect",style:at({"background-color":e.color})},null,4)}var du=ee(zT,[["render",YT],["__scopeId","data-v-3cd9385f"]]);const Yp=Symbol(),Xp=Symbol(),Wp=Symbol();function XT(e){un(Yp,e)}function Hp(){return Yt(Yp,()=>co)}function WT(e){un(Xp,e)}function HT(){return Yt(Xp,()=>[])}function qT(e){un(Wp,e)}function qp(){return Yt(Wp,()=>[])}const JT=Q({components:{ColorRect:du},props:{modelValue:{type:null,required:!0},label:{type:String,required:!0},type:{type:Object,required:!0}},emits:["update:model-value"],setup(e,{emit:t}){function n(l,s){t("update:model-value",l,s)}const r=h(()=>e.type.type),a=h(()=>fn(qp()(),"value")),o=h(()=>{var l,s;switch(e.type.type){case J.TEXT:case J.SCALER:case J.BOOLEAN:return gn(`${e.modelValue}`,6);case J.BONE:{const u=(s=(l=a.value[e.modelValue])==null?void 0:l.label)!=null?s:"";return gn(`${u}`,10)}case J.VECTOR2:{const u=e.modelValue;return`(${gn(u.x,4)},${gn(u.y,4)})`}default:return""}});return{update:n,inputType:r,valueText:o}}}),ZT={width:"100",height:"40"},QT={xmlns:"http://www.w3.org/1999/xhtml",class:"field"},ek={key:1};function tk(e,t,n,r,a,o){const l=F("ColorRect");return S(),k("foreignObject",ZT,[C("div",QT,[C("h5",null,Ve(e.label),1),e.inputType==="COLOR"?(S(),Se(l,{key:0,transform:e.modelValue,class:"color"},null,8,["transform"])):(S(),k("p",ek,Ve(e.valueText),1))])])}var nk=ee(JT,[["render",tk],["__scopeId","data-v-648eb591"]]);const rk=Q({props:{inputKey:{type:String,required:!0},input:{type:Object,required:!0},type:{type:Object,required:!0}},setup(e){const t=H(),n=H(0),r=pn();Ut(async()=>{if(await $a(),!t.value)return 0;n.value=t.value.getBoundingClientRect().width*r()});const a=h(()=>e.input.from?"":x1(e.type,e.input.value)),o=h(()=>e.type.type===J.COLOR);return{textRef:t,valueLabel:a,isColor:o,width:n}}}),ak=["x","fill"];function ok(e,t,n,r,a,o){return S(),k("g",null,[C("text",{ref:"textRef","dominant-baseline":"middle","font-size":"14",fill:"#000"},Ve(e.inputKey+(e.valueLabel&&!e.isColor?` (${e.valueLabel})`:"")),513),e.valueLabel&&e.isColor?(S(),k("rect",{key:0,x:e.width+6,y:"-6",width:"12",height:"12",fill:e.valueLabel},null,8,ak)):fe("",!0)])}var lk=ee(rk,[["render",ok]]);const sk=Q({props:{dep:{type:null,required:!0},marginSize:{type:Object,default:()=>({width:0,height:0})}},setup(e){const t=H(),n=H({width:0,height:0}),r=Tw();function a(){if(!t.value)return;const o=r(t.value);n.value={width:o.width+e.marginSize.width*2,height:o.height+e.marginSize.height*2}}return bt(()=>e.dep,a),bt(()=>e.marginSize,a),Ut(a),{target:t,size:n}}}),uk=["transform"];function ik(e,t,n,r,a,o){return S(),k("g",null,[vt(e.$slots,"background",{size:e.size}),C("g",{ref:"target",transform:`translate(${e.marginSize.width}, ${e.marginSize.height})`},[vt(e.$slots,"default")],8,uk)])}var ck=ee(sk,[["render",ik]]);const dk=Q({components:{OutlineRect:ck},props:{errors:{type:Array,required:!0}}}),fk=["width","height"],pk={"font-size":"16","font-weight":"600",fill:"red","dominant-baseline":"text-before-edge"},mk=["dy"];function vk(e,t,n,r,a,o){const l=F("OutlineRect");return S(),Se(l,{dep:e.errors,"margin-size":{width:10,height:4}},{background:Y(s=>[C("rect",{width:s.size.width,height:s.size.height,fill:"#fff",stroke:"red","stroke-width":"2"},null,8,fk)]),default:Y(()=>[C("text",pk,[(S(!0),k(ve,null,Ae(e.errors,(s,u)=>(S(),k("tspan",{key:u,x:"0",dy:u===0?0:"1.2em"},Ve(s),9,mk))),128))])]),_:1},8,["dep"])}var hk=ee(dk,[["render",vk]]);const yk=["title","transform"],gk=["data-node_id"],bk=["d","stroke","stroke-width"],_k=["d","stroke","stroke-width","fill"],Sk=["fill"],wk=["transform"],$k={class:"view-only"},Ck=["x","y","height"],Ek={x:"-10","dominant-baseline":"middle","text-anchor":"end","font-size":"14",fill:"#000"},Mk=["data-node_id","data-edge_key"],Ak=["fill"],Ik={class:"view-only"},Tk=["transform"],kk=["transform"],Ok={class:"view-only"},Bk=["y","height"],Lk={transform:"translate(10, 0)"},Rk=["data-node_id","data-edge_key"],Pk=["fill"],Nk=["transform"],jk=Q({props:{node:null,edgePositions:{default:()=>({inputs:{},outputs:{}})},selected:{type:Boolean,default:!1},errors:{default:void 0}},emits:["update:data"],setup(e,{emit:t}){const n=e;function r(M){return`M${0},${_n} L${0},${14} A${14},${14} 0 0 1 ${14},${0} L${M.width-14},${0} A${14},${14} 0 0 1 ${M.width},${14} L${M.width},${_n}`}function a(M){return`M${0},${_n} L${0},${M.height-8} A${8},${8} 0 0 0 ${8},${M.height} L${M.width-8},${M.height} A${8},${8} 0 0 0 ${M.width},${M.height-8} L${M.width},${_n}`}const{settings:o}=Et(),l=h(Hp()),s=h(()=>xs(l.value,n.node)),u=h(()=>r(s.value)),i=h(()=>a(s.value)),d=h(()=>{var M;return(M=l.value(n.node.type))==null?void 0:M.struct}),v=h(()=>{var M,P;return(P=(M=d.value)==null?void 0:M.label)!=null?P:"Unknown"}),f=h(()=>{var M,P;return(P=(M=d.value)==null?void 0:M.color)!=null?P:"#ccc"}),m=h(()=>{var M,P;return(P=(M=d.value)==null?void 0:M.textColor)!=null?P:"#ff0000"}),p=h(()=>N1(l.value,n.node)),y=h(()=>te(p.value,(M,P)=>c({position:M},df(l.value,n.node,P))));function E(M,P,R){t("update:data",n.node.id,g(c({},n.node.data),{[M]:P}),R)}const b=h(()=>Ds(d.value,n.node)),w=Of,T=Gn,O=h(()=>n.errors?"red":n.selected?o.selectedColor:"#555"),A=h(()=>n.errors?6:n.selected?2:1),B=60;return(M,P)=>(S(),k("g",{title:e.node.type,transform:`translate(${e.node.position.x}, ${e.node.position.y})`},[C("g",{"data-type":"node-body","data-node_id":e.node.id},[C("path",{d:ke(i),stroke:ke(O),"stroke-width":ke(A),fill:"#fafafa"},null,8,bk),C("path",{d:ke(u),stroke:ke(O),"stroke-width":ke(A),fill:ke(f)},null,8,_k)],8,gk),C("g",null,[C("text",{x:"8",y:"3","dominant-baseline":"text-before-edge","font-size":"16",fill:ke(m),class:"view-only"},Ve(ke(v)),9,Sk)]),C("g",null,[(S(!0),k(ve,null,Ae(Object.entries(e.edgePositions.outputs),([R,x])=>(S(),k("g",{key:R,transform:`translate(${x.p.x}, ${x.p.y})`},[C("g",$k,[C("rect",{x:-B,y:-ke(T)/2,width:B,height:ke(T),fill:"transparent",stroke:"none"},null,8,Ck),C("text",Ek,Ve(x.label),1)]),C("circle",{"data-type":"node-edge-output","data-node_id":e.node.id,"data-edge_key":R,r:"10",fill:"transparent",stroke:"none",class:"edge-anchor"},null,8,Mk),C("circle",{r:"5",fill:ke(w)[x.type.type],stroke:"none",class:"view-only"},null,8,Ak)],8,wk))),128))]),C("g",Ik,[(S(!0),k(ve,null,Ae(ke(y),(R,x)=>(S(),k("g",{key:x,transform:`translate(${R.position.x}, ${R.position.y})`},[$(nk,{label:x,type:R.type,"model-value":R.value,"onUpdate:modelValue":(N,V)=>E(x,N,V)},null,8,["label","type","model-value","onUpdate:modelValue"])],8,Tk))),128))]),C("g",null,[(S(!0),k(ve,null,Ae(Object.entries(e.edgePositions.inputs),([R,x])=>(S(),k("g",{key:R,transform:`translate(${x.p.x}, ${x.p.y})`},[C("g",Ok,[C("rect",{y:-ke(T)/2,width:B,height:ke(T),fill:"transparent",stroke:"none"},null,8,Bk),C("g",Lk,[$(lk,{"input-key":x.label,type:ke(b)[R],input:e.node.inputs[R]},null,8,["input-key","type","input"])])]),C("circle",{"data-type":"node-edge-input","data-node_id":e.node.id,"data-edge_key":R,r:"10",fill:"transparent",stroke:"none",class:"edge-anchor"},null,8,Rk),C("circle",{r:"5",fill:ke(w)[x.type.type],stroke:"none",class:"view-only"},null,8,Pk)],8,kk))),128))]),e.errors?(S(),k("g",{key:0,transform:`translate(0, ${ke(s).height})`},[$(hk,{errors:e.errors},null,8,["errors"])],8,Nk)):fe("",!0)],8,yk))}});var Fk=ee(jk,[["__scopeId","data-v-303e7c48"]]);const Jp=e=>(it("data-v-5079bf74"),e=e(),ct(),e),Vk=["title","transform"],Dk=["data-node_id"],xk=["d","stroke","stroke-width"],Uk=["transform"],Kk=["data-node_id"],Gk=Jp(()=>C("circle",{r:"8",fill:"transparent",stroke:"none"},null,-1)),zk=[Gk],Yk=["fill"],Xk=["transform"],Wk=["data-node_id"],Hk=Jp(()=>C("circle",{r:"8",fill:"transparent",stroke:"none"},null,-1)),qk=[Hk],Jk=["fill"],{settings:Zk}=Et(),Qk=Q({props:{node:null,edgePositions:null,selected:{type:Boolean,default:!1},errors:{default:void 0}},setup(e){const t=e,n=h(()=>t.edgePositions.inputs.value),r=h(()=>t.edgePositions.outputs.value),a=h(()=>Of[t.edgePositions.inputs.value.type.type]),o=h(()=>{const u=r.value.p.x-n.value.p.x;return`M0,-2 Q${u},-2 ${u},10 T${0},22 z`}),l=h(()=>t.errors?"red":t.selected?Zk.selectedColor:"#555"),s=h(()=>t.errors?6:t.selected?3:2);return(u,i)=>(S(),k("g",{title:e.node.type,transform:`translate(${e.node.position.x}, ${e.node.position.y})`},[C("g",{"data-type":"node-body","data-node_id":e.node.id},[C("path",{d:ke(o),stroke:ke(l),"stroke-width":ke(s),fill:"#ddd"},null,8,xk)],8,Dk),C("g",{transform:`translate(${ke(r).p.x}, ${ke(r).p.y})`},[C("g",{class:"edge-anchor","data-type":"node-edge-output","data-node_id":e.node.id,"data-edge_key":"value"},zk,8,Kk),C("circle",{r:"4.5",fill:ke(a),stroke:"none",class:"view-only"},null,8,Yk)],8,Uk),C("g",{transform:`translate(${ke(n).p.x}, ${ke(n).p.y})`},[C("g",{class:"edge-anchor","data-type":"node-edge-input","data-node_id":e.node.id,"data-edge_key":"value"},qk,8,Wk),C("circle",{r:"4.5",fill:ke(a),stroke:"none",class:"view-only"},null,8,Jk)],8,Xk)],8,Vk))}});var eO=ee(Qk,[["__scopeId","data-v-5079bf74"]]);const tO=["data-input_id","data-input_key","data-output_id","data-output_key"],nO=["d","stroke","stroke-width"],rO=["d","stroke","stroke-width"],aO=["stroke"],oO=["cx","cy"],lO=["cx","cy"],sO=Q({props:{from:null,to:null,selected:{type:Boolean,default:!1},inputId:{default:void 0},inputKey:{default:void 0},outputId:{default:void 0},outputKey:{default:void 0}},setup(e){const t=e,n=h(()=>Bf(t.from,t.to)),{settings:r}=Et(),a=h(pn()),o=h(()=>r.selectedColor),l=h(()=>t.selected?r.selectedColor:"#888");return(s,u)=>(S(),k("g",{class:pt(["edge",{selected:e.selected}]),"data-type":"edge","data-input_id":e.inputId,"data-input_key":e.inputKey,"data-output_id":e.outputId,"data-output_key":e.outputKey},[C("path",{d:ke(n),stroke:ke(l),"stroke-width":3*ke(a),fill:"none"},null,8,nO),C("path",{class:"highlight",d:ke(n),stroke:ke(l),"stroke-width":9*ke(a),fill:"none"},null,8,rO),e.selected?(S(),k("g",{key:0,fill:"none",stroke:ke(o),"stroke-width":"5"},[C("circle",{cx:e.from.x,cy:e.from.y,r:"7"},null,8,oO),C("circle",{cx:e.to.x,cy:e.to.y,r:"7"},null,8,lO)],8,aO)):fe("",!0)],10,tO))}});var uO=ee(sO,[["__scopeId","data-v-ecf1b698"]]);const iO=Q({props:{tabs:{type:Array,default:()=>[]},defaultTab:{type:String,default:""}},setup(e){const t=H(e.defaultTab);function n(r){t.value=t.value===r?"":r}return{currentTab:t,toggleTab:n}}}),cO={class:"side-bar"},dO={class:"tab-list"},fO=["onClick"],pO={key:0,class:"tab-content"};function mO(e,t,n,r,a,o){return S(),k("div",cO,[C("ul",dO,[(S(!0),k(ve,null,Ae(e.tabs,l=>(S(),k("li",{key:l.key,class:pt({current:e.currentTab===l.key})},[C("a",{href:"#",onClick:Me(s=>e.toggleTab(l.key),["prevent"])},Ve(l.label),9,fO)],2))),128))]),e.currentTab!==""?(S(),k("div",pO,[vt(e.$slots,e.currentTab,{},void 0,!0)])):fe("",!0)])}var Zp=ee(iO,[["render",mO],["__scopeId","data-v-6dc8b35c"]]);const vO=Q({components:{RowBlock:Fp},props:{label:{type:String,default:""}}}),hO={key:0,class:"label"},yO={class:"block-content"};function gO(e,t,n,r,a,o){const l=F("RowBlock");return S(),Se(l,null,{default:Y(()=>[e.label?(S(),k("label",hO,Ve(e.label),1)):fe("",!0),C("div",yO,[vt(e.$slots,"default",{},void 0,!0)])]),_:3})}var Wo=ee(vO,[["render",gO],["__scopeId","data-v-e2b82a2e"]]),rr=function(){return rr=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},rr.apply(this,arguments)};/*!
 * okanvas v0.0.4
 * (c) miyanokomiya <tomoya.hstexze24632@gmail.com>
 * Released under the MIT License.
 */function bO(e){return"touches"in e}function go(e){return bO(e)?{x:e.touches[0].pageX,y:e.touches[0].pageY}:{x:e.pageX,y:e.pageY}}function Ho(e,t){t===void 0&&(t=function(){});var n=!1,r=null,a=null,o=null,l=0;return{onDown:function(s){n=!0,r=go(s),o=rr({},r),a=rr({},r),l=Date.now()},onMove:function(s){n&&(s.preventDefault(),o=go(s),n&&r&&o&&a&&(e({base:r,p:rr({},o),d:{x:o.x-a.x,y:o.y-a.y}}),a=rr({},o)))},onUp:function(){o&&Date.now()-l<100&&t(rr({},o)),n=!1,r=null,o=null,a=null,l=0}}}const _O=Q({props:{radius:{type:Number,default:50}},setup(e){const n=[...Array(120)].map((s,u)=>a(Math.PI*2/120*u)),r=n.map((s,u)=>l(u));function a(s){return{x:Math.cos(s)*e.radius,y:Math.sin(s)*e.radius}}function o(s){const u=n[s],i=n[(s+1)%120];return`M0,0L${u.x},${u.y}A${e.radius},${e.radius},0,0,1,${i.x},${i.y}z`}function l(s){return Fr(vr({h:s*360/120,s:1,v:1,a:1}))}return{points:n,getD:o,colors:r}}}),SO=["d","stroke","fill"];function wO(e,t,n,r,a,o){return S(),k("g",null,[(S(!0),k(ve,null,Ae(e.points,(l,s)=>(S(),k("path",{key:s,d:e.getD(s),stroke:e.colors[s],fill:e.colors[s]},null,8,SO))),128))])}var $O=ee(_O,[["render",wO]]);const CO=Q({components:{HueCicle:$O},props:{modelValue:{type:Number,default:void 0}},emits:["update:model-value"],setup(e,{emit:t}){function n(p){return{x:Math.cos(p)*50,y:Math.sin(p)*50}}const r=h(()=>e.modelValue===void 0?0:e.modelValue*Math.PI/180),a=h(()=>{if(e.modelValue!==void 0)return n(r.value)}),o=H(!1),l=H(),s=H();function u(p){t("update:model-value",p,l.value)}function i(p){if(!s.value)return;const y=s.value.getBoundingClientRect(),E=ge(p,{x:y.left+y.width/2,y:y.top+y.height/2}),b=r.value+Od(r.value,Tt(E));return Math.round(b*180/Math.PI)}function d(p){const y=i(p.p);y!==void 0&&u(y)}const v=Wn(d,1e3/60,!0),f=Ho(v);Ma(f.onMove),Aa(()=>{f.onUp(),o.value=!1,l.value=void 0});function m(p){o.value=!1,l.value=`color_${Date.now()}`;const y=i(go(p));y!==void 0&&(u(y),f.onDown(p))}return{cursorP:a,svg:s,onDown:m}}}),EO=C("circle",{r:"40",fill:"#fff"},null,-1),MO=["x2","y2"],AO=C("circle",{r:"39",fill:"#fff"},null,-1);function IO(e,t,n,r,a,o){const l=F("HueCicle");return S(),k("svg",{ref:"svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"-50 -50 100 100",onMousedown:t[0]||(t[0]=(...s)=>e.onDown&&e.onDown(...s))},[$(l,{radius:49}),EO,e.cursorP?(S(),k("line",{key:0,x2:e.cursorP.x,y2:e.cursorP.y,stroke:"#ddd","stroke-width":"4"},null,8,MO)):fe("",!0),AO],544)}var TO=ee(CO,[["render",IO]]);const Sl=110,kO=Q({components:{SliderInput:Je,InlineField:et,HueCiclePicker:TO},props:{modelValue:{type:[String,Object],default:""},extraHue:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const n=H(),r=H(!1),a=H(),o=h(()=>{if(typeof e.modelValue!="string")return e.modelValue;const E=fg(e.modelValue);return E?vg(E):{h:0,s:0,v:0,a:1}}),l=h(()=>({x:o.value.s,y:1-o.value.v})),s=h(()=>Fr(vr({h:o.value.h,s:1,v:1,a:1})));function u(E,b){t("update:model-value",typeof e.modelValue=="string"?Fr(vr(E)):E,b)}function i(E,b){u(g(c({},o.value),{h:E}),b)}function d(E,b){u(g(c({},o.value),{a:E}),b)}function v(E){if(!n.value)return;const b=n.value.getBoundingClientRect(),w=ge(E,{x:b.left,y:b.top}),T={x:w.x/Sl,y:w.y/Sl},O={s:Ge(0,1,T.x),v:1-Ge(0,1,T.y)};u(g(c({},o.value),{s:O.s,v:O.v}),a.value)}function f(E){v(E.p)}const m=Wn(f,1e3/60,!0),p=Ho(m);Ma(p.onMove),Aa(()=>{p.onUp(),r.value=!1,a.value=void 0});function y(E){r.value=!1,a.value=`color_${Date.now()}`,v(go(E)),p.onDown(E)}return{RECT_SIZE:Sl,colorRect:n,baseColor:s,localHsva:o,onDown:y,updateHue:i,updateAlpha:d,rateInRect:l}}}),OO=e=>(it("data-v-d6425af2"),e=e(),ct(),e),BO={class:"color-picker-wrapper"},LO={class:"color-picker-inner"},RO=OO(()=>C("div",null,null,-1)),PO=[RO],NO={class:"input-block"};function jO(e,t,n,r,a,o){const l=F("HueCiclePicker"),s=F("SliderInput"),u=F("InlineField");return S(),k("div",BO,[C("div",LO,[$(l,{"model-value":e.localHsva.h,class:"hue-circle","onUpdate:modelValue":e.updateHue},null,8,["model-value","onUpdate:modelValue"]),C("div",{ref:"colorRect",class:"color-rect",style:at({"background-color":e.baseColor}),onMousedown:t[0]||(t[0]=(...i)=>e.onDown&&e.onDown(...i))},[C("div",{class:"cursor",style:at({transform:`translate(${e.rateInRect.x*e.RECT_SIZE}px,${e.rateInRect.y*e.RECT_SIZE}px)`})},PO,4)],36),C("div",NO,[C("div",null,[$(u,{label:"A","label-width":"10px"},{default:Y(()=>[$(s,{"model-value":e.localHsva.a,min:0,max:1,"onUpdate:modelValue":e.updateAlpha},null,8,["model-value","onUpdate:modelValue"])]),_:1})])])])])}var Qp=ee(kO,[["render",jO],["__scopeId","data-v-d6425af2"]]);const FO=Kt(" ( "),VO=Kt(" , "),DO=Kt(" ) "),xO=Kt(" ( "),UO=Kt(" , "),KO=Kt(" ) "),GO=Kt(" ( "),zO=Kt(" , "),YO=Kt(" ) "),XO=Q({props:{modelValue:null,disabled:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){const n=e;function r(d,v){t("update:model-value",g(c({},n.modelValue),{translate:{x:d,y:n.modelValue.translate.y}}),v)}function a(d,v){t("update:model-value",g(c({},n.modelValue),{translate:{x:n.modelValue.translate.x,y:d}}),v)}function o(d,v){t("update:model-value",g(c({},n.modelValue),{scale:{x:d,y:n.modelValue.scale.y}}),v)}function l(d,v){t("update:model-value",g(c({},n.modelValue),{scale:{x:n.modelValue.scale.x,y:d}}),v)}function s(d,v){t("update:model-value",g(c({},n.modelValue),{rotate:d}),v)}function u(d,v){t("update:model-value",g(c({},n.modelValue),{origin:{x:d,y:n.modelValue.origin.y}}),v)}function i(d,v){t("update:model-value",g(c({},n.modelValue),{origin:{x:n.modelValue.origin.x,y:d}}),v)}return(d,v)=>(S(),k("div",null,[$(et,{label:"tr","label-width":"10px"},{default:Y(()=>[FO,$(Je,{"model-value":e.modelValue.translate.x,step:1,disabled:e.disabled,"onUpdate:modelValue":r},null,8,["model-value","disabled"]),VO,$(Je,{"model-value":e.modelValue.translate.y,step:1,disabled:e.disabled,"onUpdate:modelValue":a},null,8,["model-value","disabled"]),DO]),_:1}),$(et,{label:"ro","label-width":"10px"},{default:Y(()=>[$(Je,{"model-value":e.modelValue.rotate,step:1,disabled:e.disabled,"onUpdate:modelValue":s},null,8,["model-value","disabled"])]),_:1}),$(et,{label:"sc","label-width":"10px"},{default:Y(()=>[xO,$(Je,{"model-value":e.modelValue.scale.x,step:.1,disabled:e.disabled,"onUpdate:modelValue":o},null,8,["model-value","step","disabled"]),UO,$(Je,{"model-value":e.modelValue.scale.y,step:.1,disabled:e.disabled,"onUpdate:modelValue":l},null,8,["model-value","step","disabled"]),KO]),_:1}),$(et,{label:"or","label-width":"10px"},{default:Y(()=>[GO,$(Je,{"model-value":e.modelValue.origin.x,step:1,disabled:e.disabled,"onUpdate:modelValue":u},null,8,["model-value","disabled"]),zO,$(Je,{"model-value":e.modelValue.origin.y,step:1,disabled:e.disabled,"onUpdate:modelValue":i},null,8,["model-value","disabled"]),YO]),_:1})]))}});const WO={[J.BOOLEAN]:!0,[J.SCALER]:!0,[J.VECTOR2]:!0,[J.BONE]:!0,[J.OBJECT]:!0,[J.COLOR]:!0,[J.TEXT]:!0,[J.TRANSFORM]:!0},HO=Q({components:{TextInput:Yo,SliderInput:Je,SelectField:Pt,CheckboxInput:Lt,InlineField:et,ColorPicker:Qp,ColorRect:du,GraphNodeDataFieldTransform:XO},props:{modelValue:{type:null,required:!0},label:{type:String,required:!0},type:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},emits:["update:model-value"],setup(e,{emit:t}){function n(m,p){t("update:model-value",m,p)}const r=h(HT()),a=h(qp()),o=H(!1);function l(){o.value=!o.value}function s(m,p){n(Os(m),p)}const u=h(()=>e.type.type),i=h(()=>{var m;return(m=e.type.scale)!=null?m:1}),d=h(()=>e.type.enumKey),v=h(()=>{var m;return((m=gd[d.value])!=null?m:[]).map(p=>({label:`${p.value}: ${p.key}`,value:p.value}))}),f=h(()=>u.value==="COLOR"?qr(e.modelValue):void 0);return{editableTypes:WO,update:n,objectOptions:r,boneOptions:a,valueEnumOptions:v,valueTypeKey:u,valueScale:i,valueEnumKey:d,showColorPicker:o,toggleShowColorPicker:l,updateByColor:s,hsva:f}}}),qO={key:0},JO={key:7,class:"color-block"},ZO=["disabled"],QO={key:0,class:"color-popup"};function eB(e,t,n,r,a,o){const l=F("SelectField"),s=F("SliderInput"),u=F("TextInput"),i=F("CheckboxInput"),d=F("InlineField"),v=F("GraphNodeDataFieldTransform"),f=F("ColorRect"),m=F("ColorPicker");return e.editableTypes[e.valueTypeKey]?(S(),k("div",qO,[C("h5",null,Ve(e.label),1),e.valueTypeKey==="SCALER"?(S(),k(ve,{key:0},[e.valueEnumKey?(S(),Se(l,{key:0,"model-value":e.modelValue,options:e.valueEnumOptions,disabled:e.disabled,"no-placeholder":"","onUpdate:modelValue":e.update},null,8,["model-value","options","disabled","onUpdate:modelValue"])):(S(),Se(s,{key:1,step:e.valueScale,"model-value":e.modelValue,disabled:e.disabled,"onUpdate:modelValue":e.update},null,8,["step","model-value","disabled","onUpdate:modelValue"]))],64)):e.valueTypeKey==="BONE"?(S(),k(ve,{key:1},[e.disabled?(S(),Se(u,{key:0,"model-value":e.modelValue,disabled:""},null,8,["model-value"])):(S(),Se(l,{key:1,"model-value":e.modelValue,options:e.boneOptions,"onUpdate:modelValue":e.update},null,8,["model-value","options","onUpdate:modelValue"]))],64)):e.valueTypeKey==="OBJECT"?(S(),k(ve,{key:2},[e.disabled?(S(),Se(u,{key:0,"model-value":e.modelValue,disabled:""},null,8,["model-value"])):(S(),Se(l,{key:1,"model-value":e.modelValue,options:e.objectOptions,"onUpdate:modelValue":e.update},null,8,["model-value","options","onUpdate:modelValue"]))],64)):e.valueTypeKey==="TEXT"?(S(),Se(u,{key:3,"model-value":e.modelValue,disabled:e.disabled,"onUpdate:modelValue":e.update},null,8,["model-value","disabled","onUpdate:modelValue"])):e.valueTypeKey==="BOOLEAN"?(S(),Se(i,{key:4,"model-value":e.modelValue,disabled:e.disabled,"onUpdate:modelValue":e.update},null,8,["model-value","disabled","onUpdate:modelValue"])):e.valueTypeKey==="VECTOR2"?(S(),k(ve,{key:5},[$(d,{label:"x","label-width":"20px"},{default:Y(()=>[$(s,{"model-value":e.modelValue.x,step:e.valueScale,disabled:e.disabled,"onUpdate:modelValue":t[0]||(t[0]=(p,y)=>e.update({x:p,y:e.modelValue.y},y))},null,8,["model-value","step","disabled"])]),_:1}),$(d,{label:"y","label-width":"20px"},{default:Y(()=>[$(s,{"model-value":e.modelValue.y,step:e.valueScale,disabled:e.disabled,"onUpdate:modelValue":t[1]||(t[1]=(p,y)=>e.update({x:e.modelValue.x,y:p},y))},null,8,["model-value","step","disabled"])]),_:1})],64)):e.valueTypeKey==="TRANSFORM"?(S(),Se(v,{key:6,"model-value":e.modelValue,disabled:e.disabled,"onUpdate:modelValue":e.update},null,8,["model-value","disabled","onUpdate:modelValue"])):e.valueTypeKey==="COLOR"?(S(),k("div",JO,[C("button",{type:"button",class:"color-button",disabled:e.disabled,onClick:t[2]||(t[2]=(...p)=>e.toggleShowColorPicker&&e.toggleShowColorPicker(...p))},[$(f,{hsva:e.hsva},null,8,["hsva"])],8,ZO),e.showColorPicker?(S(),k("div",QO,[$(m,{class:"color-picker","model-value":e.hsva,"extra-hue":"","onUpdate:modelValue":e.updateByColor},null,8,["model-value","onUpdate:modelValue"])])):fe("",!0)])):fe("",!0)])):fe("",!0)}var tB=ee(HO,[["render",eB],["__scopeId","data-v-0a62b647"]]);const nB=Q({components:{BlockField:Wo,GraphNodeDataField:tB},setup(){const e=ka(),t=e.lastSelectedNode,n=h(Hp()),r=h(()=>{var i;if(!!t.value)return(i=n.value(t.value.type))==null?void 0:i.struct}),a=h(()=>{const i=t.value;return!i||!r.value?{}:te(i.data,(d,v)=>g(c({},df(n.value,i,v)),{label:v}))});function o(i,d,v){const f=t.value;!f||e.updateNode(f.id,{data:g(c({},f.data),{[i]:s1(n.value,f.type,i,f.data[i],d)})},v)}const l=h(()=>{var f,m,p;if(!t.value||!r.value)return{};const i=t.value.inputs,d=Ds((f=n.value(t.value.type))==null?void 0:f.struct,t.value),v=(p=(m=e.resolvedGraph.value)==null?void 0:m.nodeMap)!=null?p:{};return r.value.inputs,te(i,(y,E)=>{var w,T,O,A,B;const b=(O=(T=(w=r.value)==null?void 0:w.inputs[E])==null?void 0:T.label)!=null?O:E;return y.from?{type:d[E],value:(B=(A=v[y.from.id])==null?void 0:A[y.from.key])!=null?B:"",disabled:!0,label:b}:{type:d[E],value:y.value,label:b}})});function s(i,d,v){!t.value||e.updateNode(t.value.id,{inputs:g(c({},t.value.inputs),{[i]:g(c({},t.value.inputs[i]),{value:d})})},v)}const u=h(()=>Object.keys(l.value).length>0);return{targetNode:t,dataMap:a,updateData:o,inputsMap:l,updateInput:s,hasInput:u}}}),fu=e=>(it("data-v-7938d738"),e=e(),ct(),e),rB={key:0,class:"item-panel"},aB=fu(()=>C("h5",null,"Data",-1)),oB=fu(()=>C("h5",null,"Inputs",-1)),lB={key:1},sB=fu(()=>C("p",null,"No Item",-1)),uB=[sB];function iB(e,t,n,r,a,o){const l=F("GraphNodeDataField"),s=F("BlockField");return e.targetNode?(S(),k("div",rB,[C("form",{onSubmit:t[0]||(t[0]=Me(()=>{},["prevent"]))},[aB,(S(!0),k(ve,null,Ae(e.dataMap,(u,i)=>(S(),Se(s,{key:i},{default:Y(()=>[$(l,{label:i,type:u.type,"model-value":u.value,"onUpdate:modelValue":(d,v)=>e.updateData(i,d,v)},null,8,["label","type","model-value","onUpdate:modelValue"])]),_:2},1024))),128)),e.hasInput?(S(),k(ve,{key:0},[oB,(S(!0),k(ve,null,Ae(e.inputsMap,(u,i)=>(S(),Se(s,{key:i},{default:Y(()=>[$(l,{label:u.label,type:u.type,"model-value":u.value,disabled:u.disabled,"onUpdate:modelValue":(d,v)=>e.updateInput(i,d,v)},null,8,["label","type","model-value","disabled","onUpdate:modelValue"])]),_:2},1024))),128))],64)):fe("",!0)],32)])):(S(),k("div",lB,uB))}var cB=ee(nB,[["render",iB],["__scopeId","data-v-7938d738"]]);const dB=Q({components:{SideBar:Zp,GraphItemPanel:cB},setup(){return{tabs:h(()=>[{key:"item",label:"Item"}])}}});function fB(e,t,n,r,a,o){const l=F("GraphItemPanel"),s=F("SideBar");return S(),Se(s,{tabs:e.tabs,"default-tab":"item"},{item:Y(()=>[$(l)]),_:1},8,["tabs"])}var pB=ee(dB,[["render",fB]]);const mB=Q({components:{AnimationGraphCanvas:FT,SelectField:Pt,AddIcon:zp,DeleteIcon:zo,GraphEdge:uO,GraphSideBar:pB},setup(){const e=[{value:"graph",label:"Graph"},{value:"custom",label:"Custom Node"}],t=Rt(),n=Mn(),r=ka(),a=h(()=>r.lastSelectedGraph.value),o=Rf(),l=h(()=>r.getGraphNodeModuleFn.value());XT(()=>l.value);const s=h(()=>t.lastSelectedArmature.value),u=h(()=>r.parentGraph.value),i=h(()=>r.parentGraphs.value.map(O=>O.name)),d=H("");dr(()=>{var O,A;d.value=(A=(O=u.value)==null?void 0:O.name)!=null?A:""});function v(){r.graphType.value==="graph"?r.addGraph():r.addCustomGraph()}function f(){r.graphType.value==="graph"?r.deleteGraph():r.deleteCustomGraph()}function m(){var O,A;i.value.includes(d.value)?d.value=(A=(O=u.value)==null?void 0:O.name)!=null?A:"":r.graphType.value==="graph"?r.updateGraph({name:d.value}):r.updateCustomGraph({name:d.value})}const p=h(()=>r.graphType.value==="graph"?r.graphs.value.map(O=>{var B;const A=((B=s.value)==null?void 0:B.id)!==O.armatureId;return{value:O.id,label:`${A?"(x)":""} ${O.name}`}}):r.customGraphs.value.map(O=>({value:O.id,label:O.name}))),y=h({get:()=>{var O,A,B;return(B=r.graphType.value==="graph"?(O=r.lastSelectedGraph.value)==null?void 0:O.id:(A=r.lastSelectedCustomGraph.value)==null?void 0:A.id)!=null?B:""},set:O=>r.graphType.value==="graph"?r.selectGraph(O):r.selectCustomGraph(O)}),E=r.selectedNodes,b=r.editedNodeMap,w=r.edgePositionMap,T=h(()=>{if(!!r.draftEdge.value)return r.draftEdge.value.type==="draft-input"?{output:ce(b.value[r.draftEdge.value.output.nodeId].position,w.value[r.draftEdge.value.output.nodeId].outputs[r.draftEdge.value.output.key].p),input:r.draftEdge.value.input}:{output:r.draftEdge.value.output,input:ce(b.value[r.draftEdge.value.input.nodeId].position,w.value[r.draftEdge.value.input.nodeId].inputs[r.draftEdge.value.input.key].p)}});return WT(()=>{const O=n.lastSelectedActor.value;if(r.graphType.value!=="graph"||!O||!a.value)return[];if(O.armatureId!==a.value.armatureId)return[];const A=oe(Ea([O.svgTree]));return O.elements.map(B=>({value:B,label:_f(A[B])}))}),qT(()=>{const O=t.lastSelectedArmature.value;return r.graphType.value!=="graph"||!O||!a.value?[]:O.id!==a.value.armatureId?[]:Object.values(t.boneMap.value).map(A=>({value:A.id,label:A.name}))}),{GraphNode:Fk,GraphNodeReroute:eO,canvasType:r.graphType,setGraphType:O=>r.setGraphType(O),canvasTypeOptions:e,canvas:o,selectedArmature:s,editedNodeMap:b,edgePositionMap:w,edgeSummaryMap:r.edgeSummaryMap,draftEdge:T,nodeErrorMessagesMap:r.nodeErrorMessagesMap,draftName:d,changeGraphName:m,selectedGraphId:y,graphOptions:p,addParentGraph:v,deleteParentGraph:f,selectedNodes:E}}}),vB=e=>(it("data-v-5451a4f9"),e=e(),ct(),e),hB={class:"animation-graph-panel-root"},yB={class:"top"},gB={class:"select-graph-type"},bB={class:"select-graph"},_B={class:"graph-buttons"},SB=["disabled"],wB=["disabled"],$B=vB(()=>C("p",null,"(!!Experimental!!)",-1)),CB={class:"main"},EB={key:0};function MB(e,t,n,r,a,o){const l=F("SelectField"),s=F("AddIcon"),u=F("DeleteIcon"),i=F("GraphEdge"),d=F("AnimationGraphCanvas"),v=F("GraphSideBar");return S(),k("div",hB,[C("div",yB,[C("div",gB,[$(l,{options:e.canvasTypeOptions,"model-value":e.canvasType,"no-placeholder":"","onUpdate:modelValue":e.setGraphType},null,8,["options","model-value","onUpdate:modelValue"])]),C("div",bB,[$(l,{modelValue:e.selectedGraphId,"onUpdate:modelValue":t[0]||(t[0]=f=>e.selectedGraphId=f),options:e.graphOptions},null,8,["modelValue","options"])]),gr(C("input",{"onUpdate:modelValue":t[1]||(t[1]=f=>e.draftName=f),type:"text",class:"name-input",onChange:t[2]||(t[2]=(...f)=>e.changeGraphName&&e.changeGraphName(...f))},null,544),[[Oo,e.draftName]]),C("div",_B,[C("button",{class:"add-graph",title:"Add graph",disabled:!e.selectedArmature,onClick:t[3]||(t[3]=(...f)=>e.addParentGraph&&e.addParentGraph(...f))},[$(s)],8,SB),C("button",{class:"delete-graph",title:"Delete graph",disabled:!e.selectedGraphId,onClick:t[4]||(t[4]=(...f)=>e.deleteParentGraph&&e.deleteParentGraph(...f))},[$(u)],8,wB)]),$B]),C("div",CB,[$(d,{class:"canvas",canvas:e.canvas},{default:Y(()=>[(S(!0),k(ve,null,Ae(e.edgeSummaryMap,(f,m)=>(S(),k("g",{key:m},[(S(!0),k(ve,null,Ae(f,(p,y)=>(S(),Se(i,{key:y,from:p.from,to:p.to,"input-id":p.inputId,"input-key":p.inputKey,"output-id":p.outputId,"output-key":p.outputKey},null,8,["from","to","input-id","input-key","output-id","output-key"]))),128))]))),128)),(S(!0),k(ve,null,Ae(e.editedNodeMap,f=>(S(),Se(ad(f.type==="reroute"?e.GraphNodeReroute:e.GraphNode),{key:f.id,node:f,"edge-positions":e.edgePositionMap[f.id],selected:e.selectedNodes[f.id],errors:e.nodeErrorMessagesMap[f.id]},null,8,["node","edge-positions","selected","errors"]))),128)),e.draftEdge?(S(),k("g",EB,[$(i,{from:e.draftEdge.output,to:e.draftEdge.input,selected:""},null,8,["from","to"])])):fe("",!0)]),_:1},8,["canvas"]),$(v,{class:"side-bar"})])])}var AB=ee(mB,[["render",MB],["__scopeId","data-v-5451a4f9"]]);const IB=Q({components:{PopupMenuList:zs},props:{canvas:{type:Object,required:!0},mode:{type:Object,required:!0}},setup(e){const{wrapper:t,svg:n,addRootPosition:r,removeRootPosition:a}=Zs(()=>e.canvas);Ws(()=>e.canvas.scale.value);const o=h(()=>e.mode.popupMenuList.value),l=H();bt(o,()=>{l.value=r(e.canvas.mousePoint.value)});const s=H(!1);function u(m){!e.canvas.dragInfo.value||e.mode.drag({start:e.canvas.viewToCanvas(e.canvas.dragInfo.value.downAt),current:e.canvas.viewToCanvas(e.canvas.mousePoint.value),ctrl:Qt(m),scale:e.canvas.scale.value})}function i(m){var p;if(e.canvas.viewMovingInfo.value){e.canvas.viewMove();return}e.canvas.editStartPoint.value&&e.mode.mousemove({start:e.canvas.viewToCanvas(e.canvas.editStartPoint.value),current:e.canvas.viewToCanvas(e.canvas.mousePoint.value),ctrl:(p=m.ctrl)!=null?p:!1,scale:e.canvas.scale.value})}const d=Wn(i,1e3/60,!0),v=xo({onMove:d,onGlobalMove:m=>{const p=a(m.p);!p||e.canvas.setMousePoint(p)},onEscape:f});bt(()=>e.mode.command.value,m=>{m===""&&v.exitPointerLock()});function f(){e.mode.cancel()}return{scale:h(()=>e.canvas.scale.value),viewOrigin:h(()=>e.canvas.viewOrigin.value),viewSize:h(()=>e.canvas.viewSize.value),viewBox:h(()=>e.canvas.viewBox.value),popupMenuList:o,mousemoveNative:u,wheel:m=>e.canvas.wheel(m,!0),downLeft:m=>{s.value=m.target===n.value,e.canvas.downLeft();const p=e.canvas.viewToCanvas(e.canvas.mousePoint.value);e.mode.drag({current:p,start:p,ctrl:Qt(m),scale:e.canvas.scale.value})},upLeft:m=>{m.target===n.value&&s.value?e.mode.clickEmpty():e.mode.clickAny(),e.canvas.upLeft(),e.mode.upLeft(),s.value=!1},downMiddle:m=>{e.canvas.downMiddle(),v.requestPointerLock(m)},upMiddle:()=>{e.canvas.upMiddle(),v.exitPointerLock()},escape:f,editKeyDown:m=>{const{needLock:p}=e.mode.execKey({key:m.key,shift:m.shiftKey,ctrl:Qt(m)});p&&(v.requestPointerLock(m),e.canvas.setEditStartPoint(e.canvas.mousePoint.value))},wrapper:t,svg:n,popupMenuListPosition:l,focus:()=>{var m;return(m=n.value)==null?void 0:m.focus()}}}}),TB={ref:"wrapper",class:"timeline-canvas-root"},kB=["viewBox","width","height"];function OB(e,t,n,r,a,o){const l=F("PopupMenuList");return S(),k("div",TB,[(S(),k("svg",{ref:"svg",tabindex:"-1",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none","font-family":"sans-serif",viewBox:e.viewBox,width:e.viewSize.width,height:e.viewSize.height,onWheel:t[0]||(t[0]=Me((...s)=>e.wheel&&e.wheel(...s),["prevent"])),onContextmenu:t[1]||(t[1]=Me(()=>{},["right","prevent"])),onMouseup:[t[2]||(t[2]=Me((...s)=>e.escape&&e.escape(...s),["right","prevent"])),t[6]||(t[6]=Me((...s)=>e.upLeft&&e.upLeft(...s),["left","prevent"])),t[8]||(t[8]=Me((...s)=>e.upMiddle&&e.upMiddle(...s),["middle","prevent"]))],onMouseenter:t[3]||(t[3]=(...s)=>e.focus&&e.focus(...s)),onMousemove:t[4]||(t[4]=Me((...s)=>e.mousemoveNative&&e.mousemoveNative(...s),["prevent"])),onMousedown:[t[5]||(t[5]=Me((...s)=>e.downLeft&&e.downLeft(...s),["left","prevent"])),t[7]||(t[7]=Me((...s)=>e.downMiddle&&e.downMiddle(...s),["middle","prevent"]))],onKeydown:t[9]||(t[9]=Me((...s)=>e.editKeyDown&&e.editKeyDown(...s),["prevent"]))},[vt(e.$slots,"default",{scale:e.scale,viewOrigin:e.viewOrigin,viewSize:e.viewSize},void 0,!0)],40,kB)),e.popupMenuList.length>0&&e.popupMenuListPosition?(S(),Se(l,{key:0,class:"popup-menu-list","popup-menu-list":e.popupMenuList,style:at({left:`${e.popupMenuListPosition.x-20}px`,top:`${e.popupMenuListPosition.y-10}px`})},null,8,["popup-menu-list","style"])):fe("",!0)],512)}var BB=ee(IB,[["render",OB],["__scopeId","data-v-4e6ecc8d"]]);const LB=Q({props:{scale:{type:Number,default:1},originX:{type:Number,default:0},viewWidth:{type:Number,default:100},currentFrame:{type:Number,default:0},endFrame:{type:Number,default:60},headerHeight:{type:Number,default:24}},emits:["down-current-frame","up-current-frame"],setup(e,{emit:t}){const n=h(()=>D$(e.scale)),r=h(()=>z$(n.value,e.originX)),a=h(()=>Math.ceil(e.viewWidth*e.scale/bn)),o=h(()=>Math.ceil(a.value/n.value)+3),l=h(()=>[...Array(o.value)].map((d,v)=>{const f=v*n.value+r.value;return{f,labelSize:f%10===0?14:f%5===0?11:0,strokeWidth:f%10===0?2:1}})),s=h(()=>e.currentFrame*bn),u=h(()=>Math.max(e.currentFrame.toString().length,2)*10+2),i=h(()=>e.endFrame*bn);return{frames:l,frameWidth:bn,currentFrameX:s,endFrameX:i,currentFrameLabelWidth:u,downCurrentFrame:()=>t("down-current-frame")}}}),em=e=>(it("data-v-cd983580"),e=e(),ct(),e),RB={class:"view-only"},PB=["transform"],NB=["y1","stroke-width"],jB={class:"view-only"},FB=["transform"],VB=em(()=>C("g",{transform:"scale(-1, 1)"},[C("rect",{width:"200000",height:"200000"})],-1)),DB=["transform"],xB=em(()=>C("rect",{width:"200000",height:"200000"},null,-1)),UB=[xB],KB={class:"view-only"},GB=["transform","y1"],zB=["transform"],YB=["height"],XB={class:"view-only"},WB=["transform"],HB=["y","font-size"],qB={class:"view-only"},JB=["transform"],ZB=["x","y","width"],QB=["y"];function eL(e,t,n,r,a,o){return S(),k("g",null,[C("g",RB,[(S(!0),k(ve,null,Ae(e.frames,l=>(S(),k("g",{key:l.f,transform:`translate(${l.f*e.frameWidth}, 0) scale(${e.scale})`},[l.strokeWidth>0?(S(),k("line",{key:0,x1:"0",y1:e.headerHeight,x2:"0",y2:"20000",stroke:"#aaa","stroke-width":l.strokeWidth},null,8,NB)):fe("",!0)],8,PB))),128))]),C("g",jB,[C("g",{transform:`translate(0, ${e.headerHeight})`,fill:"#aaa",stroke:"none","fill-opacity":"0.5"},[VB,C("g",{transform:`translate(${e.endFrameX}, 0)`},UB,8,DB)],8,FB)]),C("g",KB,[C("line",{transform:`translate(${e.currentFrameX}, 0) scale(${e.scale})`,x1:"0",y1:e.headerHeight,x2:"0",y2:"20000",stroke:"blue","stroke-width":"2"},null,8,GB)]),vt(e.$slots,"default",{},void 0,!0),C("g",{transform:`scale(${e.scale})`,onMousedown:t[0]||(t[0]=Me((...l)=>e.downCurrentFrame&&e.downCurrentFrame(...l),["left"]))},[C("rect",{x:"-100000",width:"200000",height:e.headerHeight,fill:"#fff",stroke:"#000"},null,8,YB)],40,zB),C("g",XB,[(S(!0),k(ve,null,Ae(e.frames,l=>(S(),k("g",{key:l.f,transform:`translate(${l.f*e.frameWidth}, 0) scale(${e.scale})`},[l.labelSize>0?(S(),k("text",{key:0,y:e.headerHeight-4,"font-size":l.labelSize,"dominant-baseline":"text-after-edge","text-anchor":"middle"},Ve(l.f),9,HB)):fe("",!0)],8,WB))),128))]),C("g",qB,[C("g",{transform:`translate(${e.currentFrameX}, 0) scale(${e.scale})`},[C("rect",{x:-e.currentFrameLabelWidth/2,y:e.headerHeight-22,width:e.currentFrameLabelWidth,height:20,rx:"4",ry:"4",fill:"blue",stroke:"none"},null,8,ZB),C("text",{y:e.headerHeight-4,"font-size":"12","dominant-baseline":"text-after-edge","text-anchor":"middle",fill:"#fff"},Ve(e.currentFrame),9,QB)],8,JB)])])}var tL=ee(LB,[["render",eL],["__scopeId","data-v-cd983580"]]);const nL=Q({props:{scale:{type:Number,default:1},originY:{type:Number,default:0},viewWidth:{type:Number,default:100},viewHeight:{type:Number,default:100}},setup(e){const{settings:t}=Et(),n=h(()=>x$(t.graphValueWidth,e.scale)),r=h(()=>Y$(t.graphValueWidth,n.value,e.originY)),a=h(()=>Math.ceil(e.viewHeight*e.scale/t.graphValueWidth)),o=h(()=>Math.ceil(a.value/n.value)+3);return{values:h(()=>[...Array(o.value)].map((s,u)=>u*n.value+r.value)),valueWidth:h(()=>t.graphValueWidth)}}}),rL={"font-size":"12","text-anchor":"middle","dominant-baseline":"middle"},aL=["transform"],oL={transform:"translate(12,0) rotate(-90)"},lL={fill:"#fff",stroke:"#fff"},sL={fill:"#333",stroke:"#333"},uL=["x2"];function iL(e,t,n,r,a,o){return S(),k("g",rL,[(S(!0),k(ve,null,Ae(e.values,l=>(S(),k("g",{key:l,transform:`translate(0, ${l*e.valueWidth}) scale(${e.scale})`},[C("g",oL,[C("text",lL,Ve(l),1),C("text",sL,Ve(l),1)]),C("line",{x2:e.viewWidth,stroke:"#aaa"},null,8,uL)],8,aL))),128))])}var cL=ee(nL,[["render",iL],["__scopeId","data-v-5ef3a2a3"]]);const dL=Q({props:{labelWidth:{type:Number,default:100},labelHeight:{type:Number,default:24},label:{type:String,required:!0},expanded:{type:Boolean,required:!1},showExpanded:{type:Boolean,required:!1},selected:{type:Boolean,required:!1},color:{type:String,default:"#000"}},emits:["toggle-expanded"],setup(e,{emit:t}){return{toggleExpanded(){t("toggle-expanded")}}}}),fL=e=>(it("data-v-5d0cfb57"),e=e(),ct(),e),pL=["width","height"],mL=["y","fill"],vL=["transform"],hL=fL(()=>C("rect",{x:"-1",y:"-1",width:"14",height:"14",stroke:"none",fill:"#888"},null,-1)),yL={"stroke-linejoin":"round",stroke:"none",fill:"#fff"},gL={key:0,d:"M2 9L10 9L6 3z"},bL={key:1,d:"M10 3L2 3L6 9z"};function _L(e,t,n,r,a,o){return S(),k("g",{class:"toggle-expanded",onClick:t[0]||(t[0]=(...l)=>e.toggleExpanded&&e.toggleExpanded(...l))},[C("rect",{width:e.labelWidth,height:e.labelHeight,fill:"#fff",stroke:"#000"},null,8,pL),C("text",{x:"4",y:e.labelHeight/2,"dominant-baseline":"central",fill:e.color},Ve(e.label),9,mL),e.showExpanded?(S(),k("g",{key:0,transform:`translate(${e.labelWidth-16}, ${e.labelHeight/2-6})`},[hL,C("g",yL,[e.expanded?(S(),k("path",gL)):(S(),k("path",bL))])],8,vL)):fe("",!0)])}var SL=ee(dL,[["render",_L],["__scopeId","data-v-5d0cfb57"]]);const wL=Q({components:{TimelineRow:SL},props:{targetList:{type:Array,default:()=>[]},labelWidth:{type:Number,default:200},height:{type:Number,default:24},scrollY:{type:Number,default:0},targetExpandedMap:{type:Object,default:()=>({})},targetTopMap:{type:Object,default:()=>({})},propsStateMap:{type:Object,default:()=>({})}},emits:["toggle-target-expanded","select"],setup(e,{emit:t}){const{settings:n}=Et();function r(u){t("toggle-target-expanded",u)}const a=h(()=>e.targetList.map(u=>Mf(e.height,0,u.children)));function o(u){var i;return(i={translateX:"Translate X",translateY:"Translate Y",rotate:"Rotate",scaleX:"Scale X",scaleY:"Scale Y",influence:"Influence"}[u])!=null?i:""}function l(u,i){var d;return((d=e.propsStateMap[u])==null?void 0:d.props[i])==="selected"}function s(u,i,d=!1){t("select",u,{props:{[i]:"selected"}},d)}return{settings:n,childTopMapList:a,getLabel:o,toggleBoneExpanded:r,isSelectedProp:l,clickRow:s}}}),$L=["width"],CL=["x1","x2"],EL=["transform"],ML=["transform"],AL={key:0},IL=["transform"];function TL(e,t,n,r,a,o){const l=F("TimelineRow");return S(),k("g",null,[C("rect",{width:e.labelWidth,height:"10000",stroke:"none",fill:"#fff"},null,8,$L),C("line",{x1:e.labelWidth,y1:"0",x2:e.labelWidth,y2:"10000",stroke:"black"},null,8,CL),C("g",{transform:`translate(0, ${-e.scrollY})`},[(S(!0),k(ve,null,Ae(e.targetList,(s,u)=>(S(),k("g",{key:s.id,transform:`translate(0, ${e.targetTopMap[s.id]})`},[$(l,{"label-width":e.labelWidth,"label-height":e.height,label:s.name,expanded:e.targetExpandedMap[s.id],"show-expanded":"",onToggleExpanded:i=>e.toggleBoneExpanded(s.id)},null,8,["label-width","label-height","label","expanded","onToggleExpanded"]),e.targetExpandedMap[s.id]?(S(),k("g",AL,[(S(!0),k(ve,null,Ae(e.childTopMapList[u],(i,d)=>(S(),Se(l,{key:d,transform:`translate(10, ${i})`,"label-width":e.labelWidth-10,"label-height":e.height,label:e.getLabel(d),color:e.isSelectedProp(s.id,d)?e.settings.selectedColor:void 0,onClick:[Me(v=>e.clickRow(s.id,d),["left","exact"]),Me(v=>e.clickRow(s.id,d,!0),["left","shift","exact"])]},null,8,["transform","label-width","label-height","label","color","onClick"]))),128))])):fe("",!0)],8,ML))),128))],8,EL),C("g",null,[$(l,{"label-width":e.labelWidth,"label-height":e.height,label:""},null,8,["label-width","label-height"])]),C("g",{transform:`translate(0, ${e.height})`},[$(l,{"label-width":e.labelWidth,"label-height":e.height,label:"Summary"},null,8,["label-width","label-height"])],8,IL)])}var kL=ee(wL,[["render",TL]]);const OL=Q({props:{top:{type:Number,required:!0},selected:{type:Boolean,default:!1},sameRangeWidth:{type:Number,default:0},tooltip:{type:String,default:""}},emits:["select","shift-select"],setup(e,{emit:t}){const{settings:n}=Et();return{selectedColor:h(()=>n.selectedColor),select(){t("select")},shiftSelect(){t("shift-select")}}}}),BL={key:0},LL=["y","width"],RL=["cy","fill"],PL=["cy"];function NL(e,t,n,r,a,o){return S(),k("g",null,[e.tooltip?(S(),k("title",BL,Ve(e.tooltip),1)):fe("",!0),C("rect",{y:e.top-3,width:e.sameRangeWidth,height:"6",fill:"#aaa","fill-opacity":"0.5",class:"view-only"},null,8,LL),C("circle",{cy:e.top,r:"5",stroke:"#000",fill:e.selected?e.selectedColor:"#fff"},null,8,RL),C("circle",{cy:e.top,r:"10",fill:"transparent",onClick:[t[0]||(t[0]=Me((...l)=>e.select&&e.select(...l),["left","exact"])),t[1]||(t[1]=Me((...l)=>e.shiftSelect&&e.shiftSelect(...l),["left","shift","exact"]))]},null,8,PL)])}var jL=ee(OL,[["render",NL]]);const FL=Q({components:{KeyPoint:jL},props:{keyFrame:{type:Object,required:!0},childMap:{type:Object,required:!0},top:{type:Number,default:0},selectedState:{type:Object,default:()=>({name:"",props:{}})},expanded:{type:Boolean,default:!1},sameRangeWidth:{type:Object,default:()=>Qf(()=>0)},height:{type:Number,default:24},scrollY:{type:Number,default:0}},emits:["select","shift-select"],setup(e,{emit:t}){function n(o){return o>e.scrollY+e.height*1.5}const r=h(()=>Jf(e.selectedState)),a=h(()=>$t(Mf(e.height,e.top,e.childMap),(o,l)=>l in e.keyFrame.points&&n(o)));return{isVisible:n,childTopMap:a,selectedAny:r,select(o){t("select",{props:o})},shiftSelect(o){t("shift-select",{props:o})},selectAll(){t("select",ts(e.keyFrame))},shiftSelectAll(){t("shift-select",ts(e.keyFrame))}}}});function VL(e,t,n,r,a,o){const l=F("KeyPoint");return S(),k("g",null,[e.isVisible(e.top)?(S(),Se(l,{key:0,top:e.top,selected:e.selectedAny,"same-range-width":e.sameRangeWidth.all,onSelect:e.selectAll,onShiftSelect:e.shiftSelectAll},null,8,["top","selected","same-range-width","onSelect","onShiftSelect"])):fe("",!0),e.expanded?(S(!0),k(ve,{key:1},Ae(e.childTopMap,(s,u)=>(S(),Se(l,{key:u,top:s,selected:e.selectedState.props[u],"same-range-width":e.sameRangeWidth[u],tooltip:e.keyFrame.points[u].curve.name,onSelect:i=>e.select({[u]:!0}),onShiftSelect:i=>e.shiftSelect({[u]:!0})},null,8,["top","selected","same-range-width","tooltip","onSelect","onShiftSelect"]))),128)):fe("",!0)])}var DL=ee(FL,[["render",VL]]);const xL=Q({components:{KeyPointGroup:DL},props:{scale:{type:Number,default:1},keyframeMapByFrame:{type:Object,default:()=>({})},targetList:{type:Array,default:()=>[]},selectedKeyframeMap:{type:Object,default:()=>({})},scrollY:{type:Number,default:0},height:{type:Number,default:24},targetExpandedMap:{type:Object,default:()=>({})},targetTopMap:{type:Object,default:()=>({})}},emits:["select","shift-select","select-frame","shift-select-frame"],setup(e,{emit:t}){const{settings:n}=Et(),r=h(()=>e.targetList.map(b=>b.id)),a=h(()=>r.value.reduce((b,w,T)=>(b[w]=T,b),{})),o=h(()=>a.value),l=h(()=>Object.keys(e.keyframeMapByFrame).reduce((b,w)=>(b[w]=f(e.keyframeMapByFrame[w]),b),{})),s=h(()=>Dr(Object.keys(e.keyframeMapByFrame).flatMap(b=>e.keyframeMapByFrame[b]))),u=h(()=>B$(s.value));function i(b,w){var A;const T=(A=u.value[b])==null?void 0:A[w];if(!T)return;const O=te(T.props,B=>B*bn/e.scale);return O.all=Math.min(...Object.keys(O).map(B=>O[B])),O}const d=h(()=>te(e.keyframeMapByFrame,b=>b.some(w=>e.selectedKeyframeMap[w.id]))),v=h(()=>oe(e.targetList));function f(b){return b.filter(w=>o.value[w.targetId]>-1).sort((w,T)=>o.value[w.targetId]-o.value[T.targetId])}function m(b,w){t("select",b,w)}function p(b,w){t("shift-select",b,w)}function y(b){t("select-frame",b)}function E(b){t("shift-select-frame",b)}return{frameWidth:bn,sortedKeyframeMapByFrame:l,targetMap:v,getSameRangeFrame:i,selectedFrameMap:d,select:m,shiftSelect:p,selectFrame:y,shiftSelectFrame:E,selectedColor:n.selectedColor}}}),UL=e=>(it("data-v-769916cd"),e=e(),ct(),e),KL=["transform"],GL=UL(()=>C("line",{x1:"-100000",x2:"100000",stroke:"#000"},null,-1)),zL=[GL],YL=["transform"],XL=["transform"],WL=["cy","fill","onClick"],HL=["transform"];function qL(e,t,n,r,a,o){const l=F("KeyPointGroup");return S(),k("g",null,[C("g",{transform:`scale(${e.scale}) translate(0, ${e.height*2})`},zL,8,KL),(S(!0),k(ve,null,Ae(e.sortedKeyframeMapByFrame,(s,u)=>(S(),k("g",{key:u,transform:`translate(${parseInt(u)*e.frameWidth}, 0)`},[C("g",{transform:`scale(${e.scale}) translate(0, ${e.height/2})`},[s.length>0?(S(),k("circle",{key:"all",cy:e.height,r:"5",stroke:"#000",fill:e.selectedFrameMap[u]?e.selectedColor:"#fff",onClick:[Me(i=>e.selectFrame(u),["left","exact"]),Me(i=>e.shiftSelectFrame(u),["left","shift","exact"])]},null,8,WL)):fe("",!0),C("g",{transform:`translate(0, ${-e.scrollY})`},[(S(!0),k(ve,null,Ae(s,i=>(S(),k("g",{key:i.id},[$(l,{"key-frame":i,"child-map":e.targetMap[i.targetId].children,top:e.targetTopMap[i.targetId],"selected-state":e.selectedKeyframeMap[i.id],expanded:e.targetExpandedMap[i.targetId],"same-range-width":e.getSameRangeFrame(i.targetId,i.frame),height:e.height,"scroll-y":e.scrollY,onSelect:d=>e.select(i.id,d),onShiftSelect:d=>e.shiftSelect(i.id,d)},null,8,["key-frame","child-map","top","selected-state","expanded","same-range-width","height","scroll-y","onSelect","onShiftSelect"])]))),128))],8,HL)],8,XL)],8,YL))),128))])}var JL=ee(xL,[["render",qL],["__scopeId","data-v-769916cd"]]);const ZL=Q({props:{c0:{type:Object,required:!0},controlIn:{type:Object,default:void 0},controlOut:{type:Object,default:void 0},color:{type:String,default:"#fff"},scale:{type:Number,default:1}},emits:["down-control-in","down-control-out"],setup(e,{emit:t}){return{rectSize:h(()=>10*e.scale),downControlIn:()=>t("down-control-in"),downControlOut:()=>t("down-control-out")}}}),QL={stroke:"#000",fill:"#fff",class:"view-only"},eR=["x1","y1","x2","y2"],tR=["x1","y1","x2","y2"],nR={stroke:"#000",fill:"#fff"},rR=["x","y","width","height"],aR=["x","y","width","height"],oR={fill:"transparent"},lR=["x","y","width","height"],sR=["x","y","width","height"];function uR(e,t,n,r,a,o){return S(),k("g",null,[C("g",QL,[e.controlIn?(S(),k("line",{key:0,x1:e.controlIn.x,y1:e.controlIn.y,x2:e.c0.x,y2:e.c0.y},null,8,eR)):fe("",!0),e.controlOut?(S(),k("line",{key:1,x1:e.c0.x,y1:e.c0.y,x2:e.controlOut.x,y2:e.controlOut.y},null,8,tR)):fe("",!0)]),C("g",nR,[e.controlIn?(S(),k("rect",{key:0,x:e.controlIn.x-e.rectSize/2,y:e.controlIn.y-e.rectSize/2,width:e.rectSize,height:e.rectSize},null,8,rR)):fe("",!0),e.controlOut?(S(),k("rect",{key:1,x:e.controlOut.x-e.rectSize/2,y:e.controlOut.y-e.rectSize/2,width:e.rectSize,height:e.rectSize},null,8,aR)):fe("",!0)]),C("g",oR,[e.controlIn?(S(),k("rect",{key:0,x:e.controlIn.x-e.rectSize,y:e.controlIn.y-e.rectSize,width:e.rectSize*2,height:e.rectSize*2,onMousedown:t[0]||(t[0]=Me((...l)=>e.downControlIn&&e.downControlIn(...l),["left"]))},null,40,lR)):fe("",!0),e.controlOut?(S(),k("rect",{key:1,x:e.controlOut.x-e.rectSize,y:e.controlOut.y-e.rectSize,width:e.rectSize*2,height:e.rectSize*2,onMousedown:t[1]||(t[1]=Me((...l)=>e.downControlOut&&e.downControlOut(...l),["left"]))},null,40,sR)):fe("",!0)])])}var iR=ee(ZL,[["render",uR],["__scopeId","data-v-1cf86fb1"]]);const cR=Q({props:{c0:{type:Object,required:!0},c1:{type:Object,required:!0},c2:{type:Object,required:!0},c3:{type:Object,required:!0},color:{type:String,default:"#fff"},scale:{type:Number,default:1},lineWidth:{type:Number,default:1}},setup(e){return{d:h(()=>`M ${e.c0.x},${e.c0.y} C ${e.c1.x},${e.c1.y} ${e.c2.x},${e.c2.y} ${e.c3.x},${e.c3.y}`)}}}),dR=["d","stroke","stroke-width"];function fR(e,t,n,r,a,o){return S(),k("path",{d:e.d,stroke:e.color,"stroke-width":e.lineWidth*e.scale},null,8,dR)}var pR=ee(cR,[["render",fR]]);const mR=Q({props:{from:{type:Object,required:!0},to:{type:Object,required:!0},color:{type:String,default:"#fff"},scale:{type:Number,default:1},lineWidth:{type:Number,default:1}}}),vR=["stroke-width"],hR=["x1","y1","x2","y2"],yR=["x1","y1","x2","y2"];function gR(e,t,n,r,a,o){return S(),k("g",{"stroke-width":e.lineWidth*e.scale},[C("line",{x1:e.from.x,y1:e.from.y,x2:e.to.x,y2:e.from.y},null,8,hR),C("line",{x1:e.to.x,y1:e.from.y,x2:e.to.x,y2:e.to.y},null,8,yR)],8,vR)}var bR=ee(mR,[["render",gR]]);const _R=Q({components:{CurveBezier3Vue:pR,CurveConstant:bR},props:{curve:{type:Object,required:!0},first:{type:Boolean,default:!1},last:{type:Boolean,default:!1},color:{type:String,default:"#fff"},scale:{type:Number,default:1},lineWidth:{type:Number,default:1}}}),SR=["stroke","stroke-width"],wR=["x1","y1","x2","y2"],$R=["x1","y1","x2","y2"],CR={key:1},ER=["x1","y1","x2","y2","stroke-width"];function MR(e,t,n,r,a,o){const l=F("CurveBezier3Vue"),s=F("CurveConstant");return S(),k("g",{stroke:e.color,"stroke-width":e.lineWidth*e.scale,fill:"none"},[e.first?(S(),k("line",{key:0,x1:e.curve.from.x-2e4,y1:e.curve.from.y,x2:e.curve.from.x,y2:e.curve.from.y},null,8,wR)):fe("",!0),e.last?(S(),k("line",{key:1,x1:e.curve.from.x,y1:e.curve.from.y,x2:e.curve.from.x+2e4,y2:e.curve.from.y},null,8,$R)):e.curve.to?(S(),k(ve,{key:2},[e.curve.name==="bezier3"?(S(),Se(l,{key:0,c0:e.curve.from,c1:e.curve.fixedC1,c2:e.curve.fixedC2,c3:e.curve.to,color:e.color,scale:e.scale,"line-width":e.lineWidth},null,8,["c0","c1","c2","c3","color","scale","line-width"])):e.curve.name==="constant"?(S(),k("g",CR,[$(s,{from:e.curve.from,to:e.curve.to,color:e.color,scale:e.scale,"line-width":e.lineWidth},null,8,["from","to","color","scale","line-width"])])):(S(),k("line",{key:2,x1:e.curve.from.x,y1:e.curve.from.y,x2:e.curve.to.x,y2:e.curve.to.y,"stroke-width":e.lineWidth*e.scale},null,8,ER))],64)):fe("",!0)],8,SR)}var AR=ee(_R,[["render",MR]]);const IR=Q({components:{GraphCurveLine:AR},props:{curves:{type:Object,required:!0},color:{type:String,default:"#fff"},scale:{type:Number,default:1},lineWidth:{type:Number,default:1}}});function TR(e,t,n,r,a,o){const l=F("GraphCurveLine");return S(),k("g",null,[(S(!0),k(ve,null,Ae(e.curves,s=>(S(),k("g",{key:s.id},[$(l,{curve:s,color:e.color,scale:e.scale,first:s.first,last:s.last,"line-width":e.lineWidth},null,8,["curve","color","scale","first","last","line-width"])]))),128))])}var kR=ee(IR,[["render",TR]]);function tm(e,t,n){return{x:lp(t),y:e.value*n}}function os(e,t){return{x:lp(e.x),y:e.y*t}}function OR(e,t){return{x:op(e.x),y:e.y/t}}function BR(e,t,n,r,a,o){if(e===r.length-1)return c({},n);const l=r[e+1],s=tm(l.points[a],l.frame,o);if(t.curve.name!=="bezier3")return g(c({},n),{to:s});const u=os(t.curve.controlOut,o),i=os(l.points[a].curve.controlIn,o),[,d,v]=zf(n.from,u,i,s),[,f,m]=Yf(n.from,u,i,s);return g(c({},n),{to:s,c1:d,c2:v,fixedC1:f,fixedC2:m,controlOut:d})}function LR(e){const t=e.keyframes.length,n={};let r;return e.keyframes.reduce((a,o,l)=>{var f;const s=e.selectedStateMap[o.id],u=o.points[e.pointKey],i=tm(u,o.frame,e.valueWidth),d=(r==null?void 0:r.name)==="bezier3"?ce(os(u.curve.controlIn,e.valueWidth),i):void 0;n[o.id]=!0;const v=BR(l,u,{id:o.id,keyframeName:o.name,name:u.curve.name,selected:(f=s==null?void 0:s.props[e.pointKey])!=null?f:!1,first:l===0,last:l===t-1,from:i,controlIn:d},e.keyframes,e.pointKey,e.valueWidth);return r=v,a[v.id]=v,a},{})}function RR(e,t,n){return Object.keys(t).reduce((r,a)=>(e[a]&&(r[a]=PR(e[a],t[a],n)),r),{})}function PR(e,t,n){return g(c({},e),{points:te(e.points,(r,a)=>{const o=t[a];if(!o)return r;const l=o.controlIn?{x:Math.min(r.curve.controlIn.x+n.x,0),y:r.curve.controlIn.y+n.y}:r.curve.controlIn,s=o.controlOut?{x:Math.max(r.curve.controlOut.x+n.x,0),y:r.curve.controlOut.y+n.y}:r.curve.controlOut;return{value:r.value,curve:{name:r.curve.name,controlIn:l,controlOut:s}}})})}const NR=Q({components:{BezierControls:iR,GraphCurveLines:kR},props:{pointKey:{type:String,required:!0},keyframes:{type:Array,required:!0},selectedStateMap:{type:Object,default:()=>({})},color:{type:String,default:"#fff"},focused:{type:Boolean,default:!1}},emits:["select","shift-select","down-control"],setup(e,{emit:t}){const{settings:n}=Et(),r=h(()=>LR({keyframes:e.keyframes,selectedStateMap:e.selectedStateMap,pointKey:e.pointKey,valueWidth:n.graphValueWidth}));function a(d,v){t("select",d,{name:v,props:{[e.pointKey]:!0}})}function o(d,v){t("shift-select",d,{name:v,props:{[e.pointKey]:!0}})}function l(d,v){t("down-control",d,e.pointKey,v)}const s=pn(),u=h(()=>e.focused?6.5:5),i=h(()=>e.focused?2.5:1);return{scale:h(s),radius:u,lineWidth:i,selectedColor:h(()=>n.selectedColor),curves:r,select:a,shiftSelect:o,downControl:l}}}),jR={class:"view-only"},FR=["cx","cy","r","stroke","stroke-width","fill","onClick"];function VR(e,t,n,r,a,o){const l=F("GraphCurveLines"),s=F("BezierControls");return S(),k("g",null,[C("g",jR,[$(l,{curves:e.curves,color:e.color,scale:e.scale,"line-width":e.lineWidth},null,8,["curves","color","scale","line-width"])]),C("g",null,[(S(!0),k(ve,null,Ae(e.curves,u=>(S(),k("g",{key:u.id},[C("title",null,Ve(e.pointKey),1),C("circle",{cx:u.from.x,cy:u.from.y,r:e.radius*e.scale,stroke:u.selected?"#000":"#777","stroke-width":e.scale,fill:u.selected?e.selectedColor:e.color,onClick:[Me(i=>e.select(u.id,u.keyframeName),["exact"]),Me(i=>e.shiftSelect(u.id,u.keyframeName),["shift","exact"])]},null,8,FR)]))),128))]),C("g",null,[(S(!0),k(ve,null,Ae(e.curves,u=>(S(),k("g",{key:u.id},[u.selected?(S(),Se(s,{key:0,c0:u.from,"control-in":u.controlIn,"control-out":u.controlOut,color:e.color,scale:e.scale,onDownControlIn:i=>e.downControl(u.id,{controlIn:!0}),onDownControlOut:i=>e.downControl(u.id,{controlOut:!0})},null,8,["c0","control-in","control-out","color","scale","onDownControlIn","onDownControlOut"])):fe("",!0)]))),128))])])}var DR=ee(NR,[["render",VR],["__scopeId","data-v-2e2a73da"]]);const xR=Q({components:{GraphKeyPoints:DR},props:{keyframeMapByFrame:{type:Object,default:()=>({})},selectedKeyframeMap:{type:Object,default:()=>({})},colorMap:{type:Object,default:()=>({})},propsStateMap:{type:Object,default:()=>({})}},emits:["select","shift-select","down-control"],setup(e,{emit:t}){const n=h(()=>Dr(Object.keys(e.keyframeMapByFrame).flatMap(f=>e.keyframeMapByFrame[f]))),r=h(()=>Object.keys(n.value).reduce((f,m)=>{const p=n.value[m];return f[m]=Zf(p,Ky(p,"name","bone")),f[m].props=Object.keys(f[m].props).reduce((y,E)=>(f[m].props[E].length>0&&(y[E]=f[m].props[E]),y),{}),f},{})),a=h(()=>V$(r.value,o));function o(f,m){var p;return((p=e.propsStateMap[f])==null?void 0:p.props[m])==="selected"}function l(f,m){t("select",f,m)}function s(f,m){t("shift-select",f,m)}function u(f,m,p){t("down-control",f,m,p)}const i=My(()=>oe(bd(e.keyframeMapByFrame)),r);bt(()=>e.selectedKeyframeMap,i.updateCache);function d(f,m){return r.value[f].props[m].some(p=>{var y;return(y=e.selectedKeyframeMap[p.id])==null?void 0:y.props[m]})}function v(f,m){var y,E;if(d(f,m))return r.value[f].props[m];const p=(E=(y=i.cache.value)==null?void 0:y[f])==null?void 0:E.props[m];return p||(console.warn(`Invalid cache for id: ${f} key: ${m}: Fallback to original data.`),r.value[f].props[m])}return{keyframePointsMapByTargetId:r,keyframePointsMapByTargetIdFilteredFocused:a,select:l,shiftSelect:s,downControl:u,getKeyframes:v,isFocusedProp:o}}});function UR(e,t,n,r,a,o){const l=F("GraphKeyPoints");return S(),k("g",null,[C("g",null,[(S(!0),k(ve,null,Ae(Object.entries(e.keyframePointsMapByTargetIdFilteredFocused.falseMap),([s,u])=>(S(),k("g",{key:s},[(S(!0),k(ve,null,Ae(Object.keys(u.props),i=>(S(),Se(l,{key:i,"point-key":i,keyframes:e.getKeyframes(s,i),"selected-state-map":e.selectedKeyframeMap,color:e.colorMap[i],onSelect:e.select,onShiftSelect:e.shiftSelect,onDownControl:e.downControl},null,8,["point-key","keyframes","selected-state-map","color","onSelect","onShiftSelect","onDownControl"]))),128))]))),128))]),C("g",null,[(S(!0),k(ve,null,Ae(Object.entries(e.keyframePointsMapByTargetIdFilteredFocused.trueMap),([s,u])=>(S(),k("g",{key:s},[(S(!0),k(ve,null,Ae(Object.keys(u.props),i=>(S(),Se(l,{key:i,"point-key":i,keyframes:e.getKeyframes(s,i),"selected-state-map":e.selectedKeyframeMap,color:e.colorMap[i],focused:"",onSelect:e.select,onShiftSelect:e.shiftSelect,onDownControl:e.downControl},null,8,["point-key","keyframes","selected-state-map","color","onSelect","onShiftSelect","onDownControl"]))),128))]))),128))])])}var KR=ee(xR,[["render",UR]]);const GR=["transform"],zR=C("rect",{width:"10",height:"10",stroke:"none",fill:"#888"},null,-1),YR=C("path",{d:"M2 5L7 2L7 8z","stroke-linejoin":"round",stroke:"none",fill:"#fff"},null,-1),XR=[zR,YR],WR=Q({props:{flipped:{type:Boolean,default:!1}},setup(e){return(t,n)=>(S(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",transform:`scale(${e.flipped?1:-1}, 1)`},XR,8,GR))}}),HR={},qR={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 21 10"},JR=C("rect",{width:"21",height:"10",stroke:"none",fill:"#888"},null,-1),ZR=C("line",{x1:"8",y1:"2",x2:"8",y2:"8",stroke:"#fff","stroke-width":"1.5"},null,-1),QR=C("line",{x1:"12",y1:"2",x2:"12",y2:"8",stroke:"#fff","stroke-width":"1.5"},null,-1),eP=[JR,ZR,QR];function tP(e,t){return S(),k("svg",qR,eP)}var nP=ee(HR,[["render",tP]]);const rP=Q({props:{flipped:{type:Boolean,default:!1}}}),aP=["transform"],oP=C("rect",{width:"10",height:"10",stroke:"none",fill:"#888"},null,-1),lP=C("path",{d:"M5 5L8 2L8 8z","stroke-linejoin":"round",stroke:"none",fill:"#fff"},null,-1),sP=C("circle",{cx:"3",cy:"5",r:"1.5",stroke:"none",fill:"#fff"},null,-1),uP=[oP,lP,sP];function iP(e,t,n,r,a,o){return S(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",transform:`scale(${e.flipped?1:-1}, 1)`},uP,8,aP)}var cP=ee(rP,[["render",iP]]);const dP=Q({props:{flipped:{type:Boolean,default:!1}}}),fP=["transform"],pP=C("rect",{width:"10",height:"10",stroke:"none",fill:"#888"},null,-1),mP=C("path",{d:"M5 5L8 2L8 8z","stroke-linejoin":"round",stroke:"none",fill:"#fff"},null,-1),vP=C("line",{x1:"3",y1:"2",x2:"3",y2:"8",stroke:"#fff","stroke-width":"1.2"},null,-1),hP=[pP,mP,vP];function yP(e,t,n,r,a,o){return S(),k("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 10",transform:`scale(${e.flipped?1:-1}, 1)`},hP,8,fP)}var gP=ee(dP,[["render",yP]]);const bP=Q({components:{PlayIcon:WR,PauseIcon:nP,JumpKeyIcon:cP,JumpEndIcon:gP},props:{playing:{type:String,default:"pause"}},emits:["jump-end","jump-start","play","pause","reverse","jump-next","jump-prev"],setup(e,{emit:t}){return{emit:t}}}),_P={class:"animation-controller"};function SP(e,t,n,r,a,o){const l=F("JumpEndIcon"),s=F("JumpKeyIcon"),u=F("PauseIcon"),i=F("PlayIcon");return S(),k("div",_P,[C("button",{type:"button",title:"jump to start",onClick:t[0]||(t[0]=d=>e.emit("jump-start"))},[$(l,{flipped:""})]),C("button",{type:"button",title:"jump to prev keyframe",onClick:t[1]||(t[1]=d=>e.emit("jump-prev"))},[$(s,{flipped:""})]),e.playing!=="pause"?(S(),k("button",{key:0,type:"button",title:"pause",class:"pause-button",onClick:t[2]||(t[2]=d=>e.emit("pause"))},[$(u)])):(S(),k(ve,{key:1},[C("button",{type:"button",title:"reverse",onClick:t[3]||(t[3]=d=>e.emit("reverse"))},[$(i,{flipped:""})]),C("button",{type:"button",title:"play",onClick:t[4]||(t[4]=d=>e.emit("play"))},[$(i)])],64)),C("button",{type:"button",title:"jump to next keyframe",onClick:t[5]||(t[5]=d=>e.emit("jump-next"))},[$(s)]),C("button",{type:"button",title:"jump to end",onClick:t[6]||(t[6]=d=>e.emit("jump-end"))},[$(l)])])}var wP=ee(bP,[["render",SP],["__scopeId","data-v-1de0eeec"]]);const $P=Gf.map(e=>({label:e.label,value:e.name})),CP=Q({components:{BlockField:Wo,SelectField:Pt,SliderInput:Je},props:{keyframe:{type:Object,default:void 0},selectedState:{type:Object,default:void 0}},emits:["update"],setup(e,{emit:t}){const n=h(()=>{if(!!e.selectedState)return Object.keys(e.selectedState.props)[0]}),r=h(()=>{var i;if(!!n.value)return(i=e.keyframe)==null?void 0:i.points[n.value]});function a(i,d){!e.keyframe||!e.selectedState||t("update",ep(e.keyframe,e.selectedState,i),d)}function o(i){a(d=>g(c({},d),{curve:Kf(i)}))}function l(i,d){a(v=>g(c({},v),{value:i}),d)}const{settings:s}=Et(),u=h({get(){return s.graphValueWidth},set(i){s.graphValueWidth=i}});return{targetPoint:r,curveOptions:$P,updateCurveName:o,updateCurveValue:l,valueWidth:u}}}),EP=e=>(it("data-v-4247ad08"),e=e(),ct(),e),MP={class:"graph-panel-wrapper"},AP=EP(()=>C("hr",null,null,-1));function IP(e,t,n,r,a,o){const l=F("SliderInput"),s=F("BlockField"),u=F("SelectField");return S(),k("div",MP,[$(s,{label:"Value Scale"},{default:Y(()=>[$(l,{modelValue:e.valueWidth,"onUpdate:modelValue":t[0]||(t[0]=i=>e.valueWidth=i),min:.5,max:10},null,8,["modelValue","min"])]),_:1}),AP,e.targetPoint?(S(),k(ve,{key:0},[$(s,{label:"Interpolation"},{default:Y(()=>[$(u,{"model-value":e.targetPoint.curve.name,options:e.curveOptions,"no-placeholder":"","onUpdate:modelValue":e.updateCurveName},null,8,["model-value","options","onUpdate:modelValue"])]),_:1}),$(s,{label:"Value"},{default:Y(()=>[$(l,{"model-value":e.targetPoint.value,"onUpdate:modelValue":e.updateCurveValue},null,8,["model-value","onUpdate:modelValue"])]),_:1})],64)):fe("",!0)])}var TP=ee(CP,[["render",IP],["__scopeId","data-v-4247ad08"]]);function sc(){var e,t;return(t=(e=performance==null?void 0:performance.now)==null?void 0:e.call(performance))!=null?t:Date.now()}function kP(e,t=60){let n=0,r=0,a=!1;function o(){if(a)return;const l=Math.floor((sc()-n)/(1e3/t)),s=l-r;s>0&&(e(s),r=l),requestAnimationFrame(o)}return{begin(){n=sc(),requestAnimationFrame(o)},stop(){a=!0}}}const hn={needLock:!1};function uc(e){const t=$n({command:"",editMovement:void 0,clipboard:void 0,tmpKeyframes:void 0,selectedControlMap:void 0,snapAxis:""}),n=rn(),r=h(()=>n.visibledKeyframeMap.value),a=h(()=>n.visibledSelectedKeyframeMap.value),o=h(()=>Ze(n.selectedKeyframeMap.value,r.value)),l=h(()=>Object.keys(a.value).length>0),{settings:s}=Et();function u(){t.command="",t.editMovement=void 0,t.tmpKeyframes=void 0,t.selectedControlMap=void 0,t.snapAxis=""}function i(me){e!=="graph"||t.command!=="grab"||(t.snapAxis===me?t.snapAxis="":t.snapAxis=me)}function d(){t.command&&w()}function v(){t.command?w():n.selectKeyframe("")}function f(){t.command&&w()}function m(me,z){return l.value?(me(),{needLock:z}):{needLock:!1}}function p(me){switch(me.key){case"Escape":return u(),hn;case"a":return u(),n.selectAllKeyframes(),hn;case"x":return t.command==="grab"?i("x"):(u(),n.execDeleteKeyframes()),hn;case"y":return t.command==="grab"&&i("y"),hn;case"g":return u(),m(()=>{t.command="grab"},!0);case"t":return u(),m(()=>{t.command="interpolation"},!1);case"c":return me.ctrl?m(()=>{x()},!1):hn;case"v":return me.ctrl&&N(),hn;case"D":return u(),V();default:return hn}}const y=h(()=>{const me=t.editMovement;if(!me)return;const z=ge(me.current,me.start);return qy(G$({x:t.snapAxis!=="y"?z.x:0,y:t.snapAxis!=="x"&&e==="graph"?z.y:0},s.graphValueWidth),ie=>me.ctrl?ft(1,ie):ie)}),E=h(()=>{const me=j$(r.value,o.value);return{selected:me.selected,notSelected:Vy(me.notSelected)}}),b=h(()=>{if(t.command!=="grab")return;const me=y.value;return me?{selected:te(E.value.selected,z=>F$(z,me)),notSelected:c(c({},E.value.notSelected),t.tmpKeyframes)}:E.value});function w(){b.value&&n.upsertKeyframes(ye(b.value.notSelected),ye(b.value.selected)),t.tmpKeyframes=void 0,t.editMovement=void 0,t.command="",t.snapAxis=""}function T(me,z){if(t.command){w();return}n.selectKeyframe(me,z)}function O(me,z){if(t.command){w();return}n.selectKeyframe(me,z,!0)}function A(me){if(t.command){w();return}n.selectKeyframeByFrame(me)}function B(me){if(t.command){w();return}n.selectKeyframeByFrame(me,!0)}function M(){if(t.command){u();return}n.selectAllKeyframes()}function P(me){t.command&&(t.editMovement=me)}function R(){if(t.command){u();return}n.execDeleteKeyframes()}function x(){t.clipboard=ye(E.value.selected)}function N(){!t.clipboard||n.pasteKeyframes(t.clipboard)}function V(){if(!l.value)return hn;if(t.command)return u(),hn;const me=oe(ye(te(a.value,z=>tp(c({},z),!0))));return t.tmpKeyframes=me,t.command="grab",{needLock:!0}}const le=h(()=>t.command==="grab"?[{command:"x",title:"On Axis Frame"},{command:"y",title:"On Axis Value"},{command:Vt(),title:"Snap"}]:l.value?[{command:"g",title:"Grab"},{command:"t",title:"Interpolation"},{command:"a",title:"All Select"},{command:"x",title:"Delete"},{command:"D",title:"Duplicate"},{command:`${Vt()} + c`,title:"Clip"},{command:`${Vt()} + v`,title:"Paste"},{command:"Space",title:"Play/Stop"}]:[{command:"a",title:"All Select"},{command:`${Vt()} + v`,title:"Paste"},{command:"Space",title:"Play/Stop"}]);function be(me){const z=o.value;n.execUpdateKeyframes(N$(Ze(a.value,z),z,ie=>g(c({},ie),{curve:g(c({},ie.curve),{name:me})}))),t.command=""}const je=lu(()=>Gf.map(me=>({label:me.label,exec:()=>be(me.name)}))),Pe=h(()=>{switch(t.command){case"interpolation":return je.list.value;default:return[]}});function Be(me,z,ie){if(t.command){w();return}t.selectedControlMap={[me]:{[z]:ie}},t.command="grab-control",re.value=`grab-control_${Date.now()}`}const re=H();function Z(){if(t.command){w();return}t.command="grab-current-frame",re.value=`grab-current-frame_${Date.now()}`}function Ee(me){return OR(me,s.graphValueWidth)}function Ke(me){if(t.command==="grab-current-frame")n.setCurrentFrame(ap(me.current.x),re.value),t.editMovement=me;else if(t.command==="grab-control"){if(t.editMovement){const z=Ee(ge(me.current,t.editMovement.current));if(t.selectedControlMap){const ie=RR(r.value,t.selectedControlMap,z);n.execUpdateKeyframes(ie,re.value)}}t.editMovement=me}}return{command:h(()=>t.command),end:()=>u(),cancel:u,snap:i,execKey:p,select:T,shiftSelect:O,selectFrame:A,shiftSelectFrame:B,selectAll:M,mousemove:P,drag:Ke,clickAny:d,clickEmpty:v,upLeft:f,execDelete:R,availableCommandList:le,popupMenuList:Pe,editedKeyframeMap:b,grabCurrentFrame:Z,grabControl:Be}}function nm(e,t){const n=e?`Resizable_${e}`:void 0,r=n?localStorage.getItem(n):void 0,a=H(!1);function o(s){a.value=s}function l(s){n&&a.value&&localStorage.setItem(n,s.toString()),a.value=!1}return{restoredRate:r?parseFloat(r):t,dirty:h(()=>a.value),setDirty:o,save:l}}const OP=Q({props:{initialRate:{type:Number,default:.5},minRate:{type:Number,default:.1},maxRate:{type:Number,default:.9},dense:{type:Boolean,default:!1},storageKey:{type:String,default:""}},setup(e){const t=nm(e.storageKey,e.initialRate),n=H(),r=H(),a=H(),o=H(t.restoredRate),l=H(100),s=H(100),u=h(()=>e.dense?0:9),i=h(()=>`calc((100% - ${u.value}px) * ${o.value})`),d=h(()=>`calc((100% - ${u.value}px) * ${1-o.value})`);function v(){var y,E,b,w;l.value=(E=(y=r.value)==null?void 0:y.getBoundingClientRect().width)!=null?E:100,s.value=(w=(b=a.value)==null?void 0:b.getBoundingClientRect().width)!=null?w:100}async function f(y){if(!n.value)return;const E=n.value.getBoundingClientRect();o.value=ft(-5,Ge(e.minRate,e.maxRate,(y.p.x-E.left)/E.width)),t.setDirty(!0),await $a(),v(),window.dispatchEvent(new Event("resize"))}const m=Wn(f,1e3/60,!0),p=Ho(m);return Ma(y=>{y.preventDefault(),p.onMove(y)}),Aa(()=>{t.save(o.value),p.onUp()}),Ut(v),{root:n,left:r,right:a,leftPx:l,rightPx:s,leftSize:i,rightSize:d,onDown:p.onDown}}}),BP=e=>(it("data-v-f81ad29e"),e=e(),ct(),e),LP={ref:"root",class:"resizable-h-wrapper"},RP=BP(()=>C("div",null,null,-1)),PP=[RP];function NP(e,t,n,r,a,o){return S(),k("div",LP,[C("div",{ref:"left",style:at({width:e.leftSize})},[vt(e.$slots,"left",{size:e.leftPx},void 0,!0)],4),e.dense?fe("",!0):(S(),k("div",{key:0,class:"anchor",onMousedown:t[0]||(t[0]=Me((...l)=>e.onDown&&e.onDown(...l),["prevent"]))},PP,32)),C("div",{ref:"right",class:"right",style:at({width:e.rightSize})},[vt(e.$slots,"right",{size:e.rightPx},void 0,!0),e.dense?(S(),k("div",{key:0,class:"anchor-dence",onMousedown:t[1]||(t[1]=Me((...l)=>e.onDown&&e.onDown(...l),["prevent"]))},null,32)):fe("",!0)],4)],512)}var rm=ee(OP,[["render",NP],["__scopeId","data-v-f81ad29e"]]);function jP(e){const t=H({});function n(r){t.value[r]?delete t.value[r]:t.value[r]=!0}return bt(e,r=>{const a=r.reduce((o,l)=>g(c({},o),{[l]:!0}),{});t.value=$t(t.value,(o,l)=>l in a)}),{booleanMap:t,toggle:n}}const ic=24,FP=[{label:"Action",value:"action"},{label:"Graph",value:"graph"}];function VP(){const e=H("action");function t(n){e.value=n}return{canvasType:e,setCanvas:t,canvasOptions:h(()=>FP)}}function DP(e){const t=h(()=>{switch(e.value){case"action":return uc("action");default:return uc("graph")}});return{mode:t,handlers:{downCurrentFrame(){t.value.grabCurrentFrame()},selectKeyframe(n,r){t.value.select(n,r)},shiftSelectKeyframe(n,r){t.value.shiftSelect(n,r)},selectKeyframeByFrame(n){t.value.selectFrame(n)},shiftSelectKeyframeByFrame(n){t.value.shiftSelectFrame(n)},grabControl(n,r,a){t.value.grabControl(n,r,a)}}}}const xP={translateX:"red",translateY:"green",rotate:"blue",scaleX:"hotpink",scaleY:"mediumaquamarine",influence:"darkviolet"},UP=Q({components:{SelectField:Pt,TimelineCanvas:BB,TimelineAxis:tL,GraphAxis:cL,TimelineBones:kL,KeyframeGroup:JL,GraphKeyframes:KR,AnimationController:wP,SliderInput:Je,CommandExamPanel:Ks,GraphPanel:TP,AddIcon:zp,DeleteIcon:zo,InlineField:et,ResizableH:rm},setup(){const e=Rt(),t=rn(),n=H({width:0,height:0}),r={scaleMin:1,ignoreNegativeY:!0,scaleAtFixY:!0,viewOrigin:H({x:-20,y:0}),viewSize:n},a=cl(r),o=cl(r),l=cl({scaleMin:1,viewOrigin:H({x:-20,y:-50}),viewSize:n}),s=VP(),u=DP(s.canvasType),i=h(()=>{switch(s.canvasType.value){case"action":return o;default:return l}}),d=h(()=>t.selectedAction.value),v=h(()=>Object.keys(t.selectedBoneIdMap.value)),f=h(()=>ye(t.selectedBoneMap.value)),m=h(()=>Object.keys(t.selectedConstraintMap.value)),p=h(()=>v.value.concat(m.value)),y=h(()=>{const P=t.keyframeMapByTargetId.value,R=t.selectedBoneMap.value,x=t.selectedConstraintMap.value;return[...f.value.map(N=>{var V;return k1(N,_a((V=P[N.id])!=null?V:[]).props)}),...m.value.map(N=>{var le;const V=x[N];return B1(R[V.boneId],V,_a((le=P[N])!=null?le:[]).props)})]}),E=h(()=>{const P=u.mode.value.editedKeyframeMap.value;return zn(P?up(ye(c(c({},t.visibledKeyframeMap.value),P.notSelected)),ye(P.selected),!0).merged:ye(t.visibledKeyframeMap.value))}),b=H("");dr(()=>{var P,R;b.value=(R=(P=d.value)==null?void 0:P.name)!=null?R:""});const w=h(()=>t.actions.value.map(P=>{var x;const R=((x=e.lastSelectedArmature.value)==null?void 0:x.id)!==P.armatureId;return{value:P.id,label:`${R?"(x)":""} ${P.name}`}})),T=H();let O;dr(()=>{O==null||O.stop(),t.playing.value!=="pause"&&(T.value=`play_${Date.now()}`,O=kP(A,60),O.begin())});function A(P){t.stepFrame(P,t.playing.value==="reverse",T.value)}const B=jP(()=>Object.keys(e.boneMap.value).concat(Object.keys(e.constraintMap.value))),M=h(()=>L1(y.value,B.booleanMap.value,ic,2));return c({labelCanvas:a,currentCanvas:i,playing:t.playing,selectedTargetIdList:p,selectedTargetSummaryList:y,propsStateMap:t.visibledTargetPropsStateMap,lastSelectedKeyframe:t.lastSelectedKeyframe,keyframeMapByFrame:E,selectedKeyframeMap:t.selectedKeyframeMap,draftName:b,changeActionName(){var R,x;t.actions.value.map(N=>N.name).includes(b.value)?b.value=(x=(R=d.value)==null?void 0:R.name)!=null?x:"":t.updateAction({name:b.value})},currentFrame:t.currentFrame,setPlaying:t.setPlaying,jumpStartFrame:t.jumpStartFrame,jumpEndFrame:t.jumpEndFrame,jumpNextKey:t.jumpNextKey,jumpPrevKey:t.jumpPrevKey,endFrame:h(()=>t.endFrame.value),updateEndFrame(P,R){t.setEndFrame(P,R)},addAction:()=>t.addAction(),deleteAction:t.deleteAction,actionOptions:w,selectedActionId:h({get:()=>{var P,R;return(R=(P=d.value)==null?void 0:P.id)!=null?R:""},set:P=>t.selectAction(P)}),expandedMap:B.booleanMap,toggleTargetExpanded:B.toggle,targetTopMap:M,labelHeight:ic,updateKeyframe(P,R){t.execUpdateKeyframes({[P.id]:P},R)},selectTargetProp:t.selectTargetProp,canvasType:s.canvasType,setCurrentCanvas:P=>s.setCanvas(P),canvasOptions:s.canvasOptions,keyframePointColorMap:xP,availableCommandList:h(()=>u.mode.value.availableCommandList.value),mode:u.mode},u.handlers)}}),KP={class:"animation-panel-root"},GP={class:"top"},zP={class:"select-canvas"},YP={class:"select-action"},XP={class:"action-buttons"},WP=["disabled"],HP={class:"end-frame-field"},qP=["transform"],JP={class:"timeline-canvas-inner"},ZP=["transform"],QP=["transform"],eN=["transform"],tN={class:"graph-panel-space"};function nN(e,t,n,r,a,o){const l=F("SelectField"),s=F("AddIcon"),u=F("DeleteIcon"),i=F("AnimationController"),d=F("SliderInput"),v=F("InlineField"),f=F("TimelineBones"),m=F("TimelineCanvas"),p=F("GraphAxis"),y=F("KeyframeGroup"),E=F("GraphKeyframes"),b=F("TimelineAxis"),w=F("CommandExamPanel"),T=F("GraphPanel"),O=F("ResizableH");return S(),k("div",KP,[C("div",GP,[C("div",zP,[$(l,{"model-value":e.canvasType,options:e.canvasOptions,"no-placeholder":"","onUpdate:modelValue":e.setCurrentCanvas},null,8,["model-value","options","onUpdate:modelValue"])]),C("div",YP,[$(l,{modelValue:e.selectedActionId,"onUpdate:modelValue":t[0]||(t[0]=A=>e.selectedActionId=A),options:e.actionOptions},null,8,["modelValue","options"])]),gr(C("input",{"onUpdate:modelValue":t[1]||(t[1]=A=>e.draftName=A),type:"text",onChange:t[2]||(t[2]=(...A)=>e.changeActionName&&e.changeActionName(...A))},null,544),[[Oo,e.draftName]]),C("div",XP,[C("button",{class:"add-action",title:"Add action",onClick:t[3]||(t[3]=(...A)=>e.addAction&&e.addAction(...A))},[$(s)]),C("button",{class:"delete-action",title:"Delete action",disabled:!e.selectedActionId,onClick:t[4]||(t[4]=(...A)=>e.deleteAction&&e.deleteAction(...A))},[$(u)],8,WP)]),$(i,{playing:e.playing,onPlay:t[5]||(t[5]=A=>e.setPlaying("play")),onReverse:t[6]||(t[6]=A=>e.setPlaying("reverse")),onPause:t[7]||(t[7]=A=>e.setPlaying("pause")),onJumpStart:e.jumpStartFrame,onJumpEnd:e.jumpEndFrame,onJumpNext:e.jumpNextKey,onJumpPrev:e.jumpPrevKey},null,8,["playing","onJumpStart","onJumpEnd","onJumpNext","onJumpPrev"]),C("div",HP,[$(v,{label:"End"},{default:Y(()=>[$(d,{"model-value":e.endFrame,min:0,integer:"",class:"slider","onUpdate:modelValue":e.updateEndFrame},null,8,["model-value","onUpdate:modelValue"])]),_:1})])]),$(O,{class:"middle","initial-rate":.15,"storage-key":"animation-label",dense:""},{left:Y(({size:A})=>[$(m,{class:"label-canvas",canvas:e.labelCanvas,mode:e.mode},{default:Y(({scale:B,viewOrigin:M})=>[C("g",{transform:`translate(${M.x}, ${M.y}) scale(${B})`},[$(f,{"target-list":e.selectedTargetSummaryList,"label-width":A+1,"scroll-y":M.y,"target-expanded-map":e.expandedMap,"target-top-map":e.targetTopMap,"props-state-map":e.propsStateMap,height:e.labelHeight,onToggleTargetExpanded:e.toggleTargetExpanded,onSelect:e.selectTargetProp},null,8,["target-list","label-width","scroll-y","target-expanded-map","target-top-map","props-state-map","height","onToggleTargetExpanded","onSelect"])],8,qP)]),_:2},1032,["canvas","mode"])]),right:Y(()=>[$(O,{class:"timeline-canvas-space","initial-rate":.8,"storage-key":"animation-timeline",dense:""},{left:Y(()=>[C("div",JP,[$(m,{canvas:e.currentCanvas,mode:e.mode},{default:Y(({scale:A,viewOrigin:B,viewSize:M})=>[e.canvasType==="graph"?(S(),k("g",{key:0,transform:`translate(${B.x}, 0)`},[$(p,{scale:A,"origin-y":B.y,"view-width":M.width,"view-height":M.height},null,8,["scale","origin-y","view-width","view-height"])],8,ZP)):fe("",!0),C("g",{transform:`translate(0, ${B.y})`},[$(b,{scale:A,"origin-x":B.x,"view-width":M.width,"current-frame":e.currentFrame,"end-frame":e.endFrame,"header-height":e.labelHeight,onDownCurrentFrame:e.downCurrentFrame},{default:Y(()=>[e.canvasType==="action"?(S(),Se(y,{key:0,scale:A,"keyframe-map-by-frame":e.keyframeMapByFrame,"target-list":e.selectedTargetSummaryList,"target-ids":e.selectedTargetIdList,"selected-keyframe-map":e.selectedKeyframeMap,"scroll-y":B.y,"target-expanded-map":e.expandedMap,"target-top-map":e.targetTopMap,height:e.labelHeight,onSelect:e.selectKeyframe,onShiftSelect:e.shiftSelectKeyframe,onSelectFrame:e.selectKeyframeByFrame,onShiftSelectFrame:e.shiftSelectKeyframeByFrame},null,8,["scale","keyframe-map-by-frame","target-list","target-ids","selected-keyframe-map","scroll-y","target-expanded-map","target-top-map","height","onSelect","onShiftSelect","onSelectFrame","onShiftSelectFrame"])):(S(),k("g",{key:1,transform:`translate(0, ${-B.y})`},[$(E,{"keyframe-map-by-frame":e.keyframeMapByFrame,"selected-keyframe-map":e.selectedKeyframeMap,"color-map":e.keyframePointColorMap,"props-state-map":e.propsStateMap,onSelect:e.selectKeyframe,onShiftSelect:e.shiftSelectKeyframe,onDownControl:e.grabControl},null,8,["keyframe-map-by-frame","selected-keyframe-map","color-map","props-state-map","onSelect","onShiftSelect","onDownControl"])],8,eN))]),_:2},1032,["scale","origin-x","view-width","current-frame","end-frame","header-height","onDownCurrentFrame"])],8,QP)]),_:1},8,["canvas","mode"]),$(w,{class:"command-exam-panel","available-command-list":e.availableCommandList},null,8,["available-command-list"])])]),right:Y(()=>{var A;return[C("div",tN,[$(T,{keyframe:e.lastSelectedKeyframe,"selected-state":e.selectedKeyframeMap[(A=e.lastSelectedKeyframe)==null?void 0:A.id],onUpdate:e.updateKeyframe},null,8,["keyframe","selected-state","onUpdate"])])]}),_:1},8,["initial-rate"])]),_:1},8,["initial-rate"])])}var rN=ee(UP,[["render",nN],["__scopeId","data-v-3809af9e"]]);const am=Q({props:{element:{type:Object,required:!0},groupSelected:{type:Boolean,default:!1}},setup(e){const{settings:t}=Et(),n=Yt("selectedMap",h(()=>({}))),r=h(()=>{if(n.value[e.element.id]||e.groupSelected)return{fill:t.selectedColor,stroke:t.selectedColor}}),a=h(()=>e.element),o=h(()=>e.groupSelected||n.value[a.value.id]),l=h(()=>{var u;return g(c({},Ef(c(c(c({},a.value.attributes),(u=r.value)!=null?u:{}),bf(a.value.tag)?{"data-type":"element","data-id":a.value.id}:{}))),{key:e.element.id})}),s=h(()=>a.value.children.map(u=>st(u)?u:Nl(am,{element:u,groupSelected:o.value,key:u.id})));return()=>Nl(a.value.tag,l.value,s.value)}}),aN=am;var oN=ee(aN,[["__scopeId","data-v-4b0815c6"]]);function lN(e){return st(e)?e:e.id}const sN=Q({components:{NativeElement:oN},props:{boneMap:{type:Object,default:()=>({})},canvasMode:{type:String,default:"object"}},setup(e){const t=Rt(),n=ka(),r=Mn(),a=Xn(),{settings:o}=Et(),l=h(()=>e.canvasMode!=="weight"?{}:r.selectedElements.value);un("selectedMap",l);const s=h(()=>["pose","weight"].includes(e.canvasMode)?e.boneMap:{}),u=h(()=>{if(!t.lastSelectedArmature.value||!r.lastSelectedActor.value||!n.lastSelectedGraph.value||a.canvasMode.value==="edit")return!1;const y=t.lastSelectedArmature.value.id;return y===r.lastSelectedActor.value.armatureId&&y===n.lastSelectedGraph.value.armatureId}),i=h(()=>{if(!!r.lastSelectedActor.value)return cp(s.value,r.elementMap.value,r.lastSelectedActor.value.svgTree)}),d=h(()=>{if(!i.value||!u.value||!n.resolvedGraph.value)return i.value;try{const y=n.resolvedGraph.value.context.getObjectMap();return hp(y,i.value)}catch(y){return console.warn(y),i.value}}),v=h(()=>{if(!!d.value)return Vo(d.value.attributes.viewBox)}),f=h(pn()),m=h(()=>f.value),p=h(()=>[2,2].map(y=>y*f.value).join(" "));return{elementRoot:d,getId:lN,viewBox:v,settings:o,viewboxStrokeWidth:m,viewboxStrokeDasharray:p}}}),uN={key:0},iN=["x","y","width","height","stroke-width","stroke-dasharray"],cN=["id"];function dN(e,t,n,r,a,o){const l=F("NativeElement");return e.elementRoot?(S(),k("g",uN,[e.viewBox&&e.settings.showViewbox?(S(),k("rect",{key:0,x:e.viewBox.x,y:e.viewBox.y,width:e.viewBox.width,height:e.viewBox.height,fill:"none",stroke:"#777","stroke-width":e.viewboxStrokeWidth,"stroke-dasharray":e.viewboxStrokeDasharray},null,8,iN)):fe("",!0),C("g",{id:e.elementRoot.id},[(S(!0),k(ve,null,Ae(e.elementRoot.children,s=>(S(),Se(l,{key:e.getId(s),element:s},null,8,["element"]))),128))],8,cN)])):fe("",!0)}var fN=ee(sN,[["render",dN]]);function cc(e,t,n,r=!1){const a=Oe(ge(t,e),.15),o=ce(e,a);return ce(o,Oe(tt(Oe(a,.6),Math.PI/2*(r?-1:1)),n))}function pN(e,t,n){return Math.max(Un(e,t)*.04,2*n)}const mN=Q({props:{bone:{type:Object,required:!0},parent:{type:Object,default:void 0},opacity:{type:Number,default:1},scale:{type:Number,default:1},selectedState:{type:Object,default:()=>({})},poseMode:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){const{settings:n}=Et(),r=h(()=>e.bone.head),a=h(()=>e.bone.tail),o=h(()=>cc(r.value,a.value,e.bone.transform.scale.x)),l=h(()=>cc(r.value,a.value,e.bone.transform.scale.x,!0)),s=h(()=>e.poseMode?e.selectedState.head||e.selectedState.tail:e.selectedState.head&&e.selectedState.tail),u=h(()=>pN(r.value,a.value,e.scale));return{adjustedOpacity:h(()=>e.opacity*n.boneOpacity),name:h(()=>n.showBoneName?e.bone.name:""),circleR:u,head:r,tail:a,headPath:h(()=>Bi([r.value,o.value,l.value],!0)),tailPath:h(()=>Bi([a.value,o.value,l.value],!0)),fill:h(()=>s.value?n.selectedColor:"#ddd"),fillDark:h(()=>s.value?n.selectedColor:"#bbb"),fillHead:h(()=>e.selectedState.head?n.selectedColor:""),fillTail:h(()=>e.selectedState.tail?n.selectedColor:""),click:(i,d)=>{const v=e.poseMode?{head:!0,tail:!0}:d;hw(i,{plain:()=>t("select",v),shift:()=>t("select",v,{shift:!0}),ctrl:()=>t("select",v,{ctrl:!0})})}}}}),vN=["fill","opacity","stroke-width","title"],hN=["data-type","data-id"],yN=["d","fill"],gN=["d"],bN=["r","cx","cy","fill","data-type","data-id"],_N=["r","cx","cy","fill","data-type","data-id"],SN=["x1","y1","x2","y2","stroke-dasharray"],wN=["transform","font-size"],$N={fill:"#fff",stroke:"#fff"},CN={fill:"#000",stroke:"none"};function EN(e,t,n,r,a,o){return S(),k("g",{stroke:"black",fill:e.fill,opacity:e.adjustedOpacity,"stroke-width":1.2*Math.min(e.scale,1),title:e.bone.name},[C("g",{"stroke-linejoin":"bevel","data-type":e.readOnly?void 0:"bone-body","data-id":e.readOnly?void 0:e.bone.id,onClick:t[0]||(t[0]=l=>e.click(l,{head:!0,tail:!0}))},[C("path",{d:e.headPath,fill:e.fillDark},null,8,yN),C("path",{d:e.tailPath},null,8,gN)],8,hN),C("circle",{r:e.circleR,cx:e.head.x,cy:e.head.y,fill:e.fillHead,"data-type":e.readOnly?void 0:"bone-head","data-id":e.readOnly?void 0:e.bone.id,onClick:t[1]||(t[1]=l=>e.click(l,{head:!0}))},null,8,bN),C("circle",{r:e.circleR,cx:e.tail.x,cy:e.tail.y,fill:e.fillTail,"data-type":e.readOnly?void 0:"bone-tail","data-id":e.readOnly?void 0:e.bone.id,onClick:t[2]||(t[2]=l=>e.click(l,{tail:!0}))},null,8,_N),e.parent?(S(),k("line",{key:0,x1:e.parent.tail.x,y1:e.parent.tail.y,x2:e.head.x,y2:e.head.y,"stroke-dasharray":`${2*e.scale} ${2*e.scale}`,class:"view-only"},null,8,SN)):fe("",!0),e.name?(S(),k("g",{key:1,transform:`translate(${(e.head.x+e.tail.x)/2}, ${(e.head.y+e.tail.y)/2})`,"font-size":Math.min(16*e.scale,16),"text-anchor":"middle","dominant-baseline":"middle",class:"view-only"},[C("text",$N,Ve(e.name),1),C("text",CN,Ve(e.name),1)],8,wN)):fe("",!0)],8,vN)}var om=ee(mN,[["render",EN],["__scopeId","data-v-51eb8853"]]);const MN=Q({components:{BoneElm:om},props:{armature:{type:Object,required:!0},bones:{type:Array,required:!0},opacity:{type:Number,default:.8},selected:{type:Boolean,default:!1}},emits:["select"],setup(e,{emit:t}){const n=h(()=>Zd(e.bones));return{scale:h(pn()),sortedBoneMap:n,boneMap:h(()=>oe(e.bones)),transform:h(()=>A1(e.armature.transform)),boneSelectedState:h(()=>e.selected?{head:!0,tail:!0}:void 0),click:()=>t("select")}}}),AN=["transform","opacity","data-id"];function IN(e,t,n,r,a,o){const l=F("BoneElm");return S(),k("g",{transform:e.transform,opacity:e.opacity,"data-type":"armature-body","data-id":e.armature.id},[(S(!0),k(ve,null,Ae(e.sortedBoneMap,s=>(S(),Se(l,{key:s.id,"read-only":"",bone:s,"selected-state":e.boneSelectedState,parent:e.boneMap[s.parentId],scale:e.scale,onSelect:e.click},null,8,["bone","selected-state","parent","scale","onSelect"]))),128))],8,AN)}var TN=ee(MN,[["render",IN],["__scopeId","data-v-fe8f66b8"]]);const kN=Q({components:{SelectField:Pt,BlockField:Wo},setup(){const e=Rt(),t=Xn(),n=Mn(),r=t.canvasMode,a=h(()=>n.lastSelectedActor.value),o=h(()=>n.lastSelectedElement.value),l=h({get(){var p,y;return(y=(p=n.lastSelectedActor.value)==null?void 0:p.armatureId)!=null?y:""},set(p){n.updateArmatureId(p)}}),s=h(()=>e.armatures.value.find(p=>p.id===l.value)),u=h(()=>Ul(e.armatures.value.map(p=>({value:p.id,label:p.name})),"label")),i=h({get(){var p,y;return(y=(p=o.value)==null?void 0:p.boneId)!=null?y:""},set(p){n.updateElement({boneId:p})}}),d=h({get(){var p,y;return(y=(p=o.value)==null?void 0:p.fillBoneId)!=null?y:""},set(p){n.updateElement({fillBoneId:p})}}),v=h({get(){var p,y;return(y=(p=o.value)==null?void 0:p.strokeBoneId)!=null?y:""},set(p){n.updateElement({strokeBoneId:p})}}),f=h({get(){var p,y;return(y=(p=o.value)==null?void 0:p.viewBoxBoneId)!=null?y:""},set(p){n.updateElement({viewBoxBoneId:p})}}),m=h(()=>s.value?Ul(e.getBonesByArmatureId(s.value.id).map(p=>({value:p.id,label:p.name})),"label"):[]);return{canvasMode:r,targetActor:a,targetElement:o,armatureId:l,armatureOptions:u,boneOptions:m,boneId:i,fillBoneId:d,strokeBoneId:v,viewBoxBoneId:f}}}),lm=e=>(it("data-v-7c77fa30"),e=e(),ct(),e),ON={class:"weight-panel"},BN=lm(()=>C("h4",null,"Weight Paint",-1)),LN={key:1},RN=lm(()=>C("p",null,"No Item",-1)),PN=[RN];function NN(e,t,n,r,a,o){const l=F("SelectField"),s=F("BlockField");return S(),k("div",ON,[BN,e.canvasMode==="weight"&&e.targetActor?(S(),k("form",{key:0,onSubmit:t[5]||(t[5]=Me(()=>{},["prevent"]))},[$(s,{label:"Armature"},{default:Y(()=>[$(l,{modelValue:e.armatureId,"onUpdate:modelValue":t[0]||(t[0]=u=>e.armatureId=u),options:e.armatureOptions},null,8,["modelValue","options"])]),_:1}),e.targetElement?(S(),k(ve,{key:0},[e.targetElement.tag==="svg"?(S(),Se(s,{key:0,label:"Viewbox"},{default:Y(()=>[$(l,{modelValue:e.viewBoxBoneId,"onUpdate:modelValue":t[1]||(t[1]=u=>e.viewBoxBoneId=u),options:e.boneOptions},null,8,["modelValue","options"])]),_:1})):(S(),k(ve,{key:1},[$(s,{label:"Transform"},{default:Y(()=>[$(l,{modelValue:e.boneId,"onUpdate:modelValue":t[2]||(t[2]=u=>e.boneId=u),options:e.boneOptions},null,8,["modelValue","options"])]),_:1}),$(s,{label:"Fill"},{default:Y(()=>[$(l,{modelValue:e.fillBoneId,"onUpdate:modelValue":t[3]||(t[3]=u=>e.fillBoneId=u),options:e.boneOptions},null,8,["modelValue","options"])]),_:1}),$(s,{label:"Stroke"},{default:Y(()=>[$(l,{modelValue:e.strokeBoneId,"onUpdate:modelValue":t[4]||(t[4]=u=>e.strokeBoneId=u),options:e.boneOptions},null,8,["modelValue","options"])]),_:1})],64))],64)):fe("",!0)],32)):(S(),k("div",LN,PN))])}var jN=ee(kN,[["render",NN],["__scopeId","data-v-7c77fa30"]]);const FN=Q({components:{SliderInput:Je,WeightPanel:jN,InlineField:et,ColorPicker:Qp,ColorRect:du,KeyDot:Hn},setup(){const e=Rt(),t=rn(),n=Xn(),r=$n({translateX:0,translateY:0,rotate:0,scaleX:0,scaleY:0}),a=$n({headX:0,headY:0,tailX:0,tailY:0}),o=h(()=>{if(n.canvasMode.value==="object")return;const N=e.lastSelectedBone.value;if(!!N)return n.canvasMode.value==="edit"?Yl(N,n.getEditTransforms(N.id),e.selectedBones.value[N.id]||{}):e.lastSelectedBone.value}),l=h(()=>{var N;return(N=o.value)==null?void 0:N.connected}),s=h(()=>{if(!!o.value&&n.canvasMode.value==="pose")return Vr(t.getCurrentSelfTransforms(o.value.id),n.getEditPoseTransforms(o.value.id))}),u=H(!1);function i(){u.value=!u.value}const d=h(()=>s.value?qr(s.value):"");function v(N,V){if(!s.value)return;const le=Os(N);r.translateX=le.translate.x,r.translateY=le.translate.y,r.rotate=le.rotate,r.scaleX=le.scale.x,B(V)}function f(N,V){a.headX=N,E(V)}function m(N,V){a.headY=N,E(V)}function p(N,V){a.tailX=N,E(V)}function y(N,V){a.tailY=N,E(V)}function E(N){!o.value||e.updateBones({[o.value.id]:{head:{x:a.headX,y:a.headY},tail:{x:a.tailX,y:a.tailY}}},N)}function b(N,V){r.translateX=N,B(V)}function w(N,V){r.translateY=N,B(V)}function T(N,V){r.rotate=N,B(V)}function O(N,V){r.scaleX=N,B(V)}function A(N,V){r.scaleY=N,B(V)}function B(N){!o.value||t.pastePoses({[o.value.id]:de({translate:{x:r.translateX,y:r.translateY},rotate:r.rotate,scale:{x:r.scaleX,y:r.scaleY}})},N)}const M=h(()=>{if(!o.value)return{};const V=t.getBoneEditedTransforms(o.value.id);return{translateX:V.translate.x!==0,translateY:V.translate.y!==0,scaleX:V.scale.x!==0,scaleY:V.scale.y!==0,rotate:V.rotate!==0}}),P=h(()=>{if(!o.value)return{};const N=t.keyframeMapByTargetId.value[o.value.id];if(!N)return{};const V=t.currentFrame.value;return te(_a(N).props,le=>le.some(be=>be.frame===V)?"self":"others")});function R(N){!o.value||t.execInsertKeyframe({[N]:!0})}function x(N){!o.value||t.execDeleteTargetKeyframe(o.value.id,N)}return dr(()=>{!o.value||(a.headX=o.value.head.x,a.headY=o.value.head.y,a.tailX=o.value.tail.x,a.tailY=o.value.tail.y)}),dr(()=>{!s.value||(r.translateX=s.value.translate.x,r.translateY=s.value.translate.y,r.rotate=s.value.rotate,r.scaleX=s.value.scale.x,r.scaleY=s.value.scale.y)}),{labelWidth:"20px",canvasMode:n.canvasMode,targetBone:o,hsva:d,draftBone:a,changeBoneHeadX:f,changeBoneHeadY:m,changeBoneTailX:p,changeBoneTailY:y,targetTransform:s,draftTransform:r,changeTranslateX:b,changeTranslateY:w,changeRotate:T,changeScaleX:O,changeScaleY:A,connected:l,showColorPicker:u,toggleShowColorPicker:i,updatePoseByColor:v,keyframeStatusMap:P,posePropsUpdatedStatus:M,createKeyframe:R,deleteKeyframe:x}}}),vn=e=>(it("data-v-76161816"),e=e(),ct(),e),VN={key:1,class:"item-panel"},DN=vn(()=>C("h4",null,"Pose",-1)),xN=vn(()=>C("h5",null,"Translate",-1)),UN=vn(()=>C("h5",null,"Rotate",-1)),KN=vn(()=>C("h5",null,"Scale",-1)),GN={key:0,class:"color-popup"},zN={key:1},YN=vn(()=>C("p",null,"No Item",-1)),XN=[YN],WN={key:2,class:"item-panel"},HN=vn(()=>C("h4",null,"Bone",-1)),qN=vn(()=>C("h5",null,"Head",-1)),JN=vn(()=>C("h5",null,"Tail",-1)),ZN={key:1},QN=vn(()=>C("p",null,"No Item",-1)),ej=[QN],tj={key:3},nj=vn(()=>C("p",null,"No Item",-1)),rj=[nj];function aj(e,t,n,r,a,o){const l=F("WeightPanel"),s=F("SliderInput"),u=F("KeyDot"),i=F("InlineField"),d=F("ColorRect"),v=F("ColorPicker");return e.canvasMode==="weight"?(S(),Se(l,{key:0})):e.canvasMode==="pose"?(S(),k("div",VN,[DN,e.targetTransform?(S(),k("form",{key:0,onSubmit:t[11]||(t[11]=Me(()=>{},["prevent"]))},[xN,$(i,{label:"x","label-width":e.labelWidth},{default:Y(()=>[$(s,{"model-value":e.draftTransform.translateX,disabled:e.connected,"onUpdate:modelValue":e.changeTranslateX},null,8,["model-value","disabled","onUpdate:modelValue"]),$(u,{status:e.keyframeStatusMap.translateX,updated:e.posePropsUpdatedStatus.translateX,onCreate:t[0]||(t[0]=f=>e.createKeyframe("translateX")),onDelete:t[1]||(t[1]=f=>e.deleteKeyframe("translateX"))},null,8,["status","updated"])]),_:1},8,["label-width"]),$(i,{label:"y","label-width":e.labelWidth},{default:Y(()=>[$(s,{"model-value":e.draftTransform.translateY,disabled:e.connected,"onUpdate:modelValue":e.changeTranslateY},null,8,["model-value","disabled","onUpdate:modelValue"]),$(u,{status:e.keyframeStatusMap.translateY,updated:e.posePropsUpdatedStatus.translateY,onCreate:t[2]||(t[2]=f=>e.createKeyframe("translateY")),onDelete:t[3]||(t[3]=f=>e.deleteKeyframe("translateY"))},null,8,["status","updated"])]),_:1},8,["label-width"]),UN,$(i,{"label-width":e.labelWidth},{default:Y(()=>[$(s,{"model-value":e.draftTransform.rotate,"onUpdate:modelValue":e.changeRotate},null,8,["model-value","onUpdate:modelValue"]),$(u,{status:e.keyframeStatusMap.rotate,updated:e.posePropsUpdatedStatus.rotate,onCreate:t[4]||(t[4]=f=>e.createKeyframe("rotate")),onDelete:t[5]||(t[5]=f=>e.deleteKeyframe("rotate"))},null,8,["status","updated"])]),_:1},8,["label-width"]),KN,$(i,{label:"x","label-width":e.labelWidth},{default:Y(()=>[$(s,{step:.1,"model-value":e.draftTransform.scaleX,"onUpdate:modelValue":e.changeScaleX},null,8,["step","model-value","onUpdate:modelValue"]),$(u,{status:e.keyframeStatusMap.scaleX,updated:e.posePropsUpdatedStatus.scaleX,onCreate:t[6]||(t[6]=f=>e.createKeyframe("scaleX")),onDelete:t[7]||(t[7]=f=>e.deleteKeyframe("scaleX"))},null,8,["status","updated"])]),_:1},8,["label-width"]),$(i,{label:"y","label-width":e.labelWidth},{default:Y(()=>[$(s,{step:.1,"model-value":e.draftTransform.scaleY,"onUpdate:modelValue":e.changeScaleY},null,8,["step","model-value","onUpdate:modelValue"]),$(u,{status:e.keyframeStatusMap.scaleY,updated:e.posePropsUpdatedStatus.scaleY,onCreate:t[8]||(t[8]=f=>e.createKeyframe("scaleY")),onDelete:t[9]||(t[9]=f=>e.deleteKeyframe("scaleY"))},null,8,["status","updated"])]),_:1},8,["label-width"]),$(i,null,{default:Y(()=>[C("button",{type:"button",class:"color-button",onClick:t[10]||(t[10]=(...f)=>e.toggleShowColorPicker&&e.toggleShowColorPicker(...f))},[$(d,{hsva:e.hsva},null,8,["hsva"])]),e.showColorPicker?(S(),k("div",GN,[$(v,{class:"color-picker","model-value":e.hsva,"extra-hue":"","onUpdate:modelValue":e.updatePoseByColor},null,8,["model-value","onUpdate:modelValue"])])):fe("",!0)]),_:1})],32)):(S(),k("div",zN,XN))])):e.canvasMode==="edit"?(S(),k("div",WN,[HN,e.targetBone?(S(),k("form",{key:0,onSubmit:t[12]||(t[12]=Me(()=>{},["prevent"]))},[qN,$(i,{label:"x","label-width":e.labelWidth},{default:Y(()=>[$(s,{"model-value":e.draftBone.headX,"onUpdate:modelValue":e.changeBoneHeadX},null,8,["model-value","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(i,{label:"y","label-width":e.labelWidth},{default:Y(()=>[$(s,{"model-value":e.draftBone.headY,"onUpdate:modelValue":e.changeBoneHeadY},null,8,["model-value","onUpdate:modelValue"])]),_:1},8,["label-width"]),JN,$(i,{label:"x","label-width":e.labelWidth},{default:Y(()=>[$(s,{"model-value":e.draftBone.tailX,"onUpdate:modelValue":e.changeBoneTailX},null,8,["model-value","onUpdate:modelValue"])]),_:1},8,["label-width"]),$(i,{label:"y","label-width":e.labelWidth},{default:Y(()=>[$(s,{"model-value":e.draftBone.tailY,"onUpdate:modelValue":e.changeBoneTailY},null,8,["model-value","onUpdate:modelValue"])]),_:1},8,["label-width"])],32)):(S(),k("div",ZN,ej))])):(S(),k("div",tj,rj))}var oj=ee(FN,[["render",aj],["__scopeId","data-v-76161816"]]);const lj=Q({components:{CheckboxInput:Lt,InlineField:et,BlockField:Wo,SliderInput:Je},setup(){const{settings:e}=Et();return{settings:e}}}),sj=e=>(it("data-v-4814dca0"),e=e(),ct(),e),uj={class:"view-panel"},ij=sj(()=>C("h4",null,"View",-1));function cj(e,t,n,r,a,o){const l=F("CheckboxInput"),s=F("InlineField"),u=F("SliderInput"),i=F("BlockField");return S(),k("div",uj,[ij,C("form",null,[$(s,null,{default:Y(()=>[$(l,{modelValue:e.settings.showBoneName,"onUpdate:modelValue":t[0]||(t[0]=d=>e.settings.showBoneName=d),label:"Bone Name"},null,8,["modelValue"])]),_:1}),$(i,{label:"Bone Opacity"},{default:Y(()=>[$(u,{modelValue:e.settings.boneOpacity,"onUpdate:modelValue":t[1]||(t[1]=d=>e.settings.boneOpacity=d),min:0,max:1,step:.1},null,8,["modelValue","step"])]),_:1}),$(s,null,{default:Y(()=>[$(l,{modelValue:e.settings.showViewbox,"onUpdate:modelValue":t[2]||(t[2]=d=>e.settings.showViewbox=d),label:"Viewbox"},null,8,["modelValue"])]),_:1}),$(s,null,{default:Y(()=>[$(l,{modelValue:e.settings.showAxis,"onUpdate:modelValue":t[3]||(t[3]=d=>e.settings.showAxis=d),label:"Axis"},null,8,["modelValue"])]),_:1})])])}var dj=ee(lj,[["render",cj],["__scopeId","data-v-4814dca0"]]);const fj=Q({components:{SideBar:Zp,ItemPanel:oj,ViewPanel:dj},setup(){return{tabs:h(()=>[{key:"item",label:"Item"},{key:"view",label:"View"}])}}});function pj(e,t,n,r,a,o){const l=F("ItemPanel"),s=F("ViewPanel"),u=F("SideBar");return S(),Se(u,{tabs:e.tabs,"default-tab":"item"},{item:Y(()=>[$(l)]),view:Y(()=>[$(s)]),_:1},8,["tabs"])}var mj=ee(fj,[["render",pj]]);const vj=Q({components:{BoneElm:om},props:{boneMap:{type:Object,default:()=>({})},selectedBones:{type:Object,default:()=>({})},canvasMode:{type:String,default:"object"}},emits:["select"],setup(e,{emit:t}){const n=h(()=>Zd(ye(e.boneMap)));return{scale:h(pn()),sortedBoneMap:n,selectBone(a,o,l){t("select",a,o,l)}}}});function hj(e,t,n,r,a,o){const l=F("BoneElm");return S(),k("g",null,[(S(!0),k(ve,null,Ae(e.sortedBoneMap,s=>(S(),Se(l,{key:s.id,bone:s,parent:e.boneMap[s.parentId],"selected-state":e.selectedBones[s.id],scale:e.scale,"pose-mode":e.canvasMode==="pose",class:pt({"view-only":e.canvasMode==="weight"}),onSelect:(u,i)=>e.selectBone(s.id,u,i)},null,8,["bone","parent","selected-state","scale","pose-mode","class","onSelect"]))),128))])}var yj=ee(vj,[["render",hj],["__scopeId","data-v-67b42d74"]]);const gj=Q({props:{origin:{type:Object,required:!0},radian:{type:Number,required:!0}},setup(e){return{scale:h(pn()),rotate:h(()=>e.radian*180/Math.PI)}}}),bj=["transform"],_j=["stroke-width","stroke-dasharray"],Sj=C("line",{x1:"-50",x2:"50",stroke:"red"},null,-1),wj=C("line",{y1:"-50",y2:"50",stroke:"green"},null,-1),$j=[Sj,wj],Cj=C("path",{d:"M50,0 L40,-5 L40,5z",fill:"red"},null,-1),Ej=C("path",{d:"M0,50 L-5,40 L5,40z",fill:"green"},null,-1);function Mj(e,t,n,r,a,o){return S(),k("g",{transform:`translate(${e.origin.x}, ${e.origin.y}) rotate(${e.rotate})`},[C("g",{"stroke-width":2*e.scale,"stroke-dasharray":`${2*e.scale},${2*e.scale}`},$j,8,_j),Cj,Ej],8,bj)}var Aj=ee(gj,[["render",Mj]]);const dc=9,Ij=Q({props:{initialRate:{type:Number,default:.5},minRate:{type:Number,default:.1},maxRate:{type:Number,default:.9},storageKey:{type:String,default:""}},setup(e){const t=nm(e.storageKey,e.initialRate),n=H(),r=H(t.restoredRate),a=h(()=>`calc((100% - ${dc}px) * ${r.value})`),o=h(()=>`calc((100% - ${dc}px) * ${1-r.value})`);async function l(i){if(!n.value)return;const d=n.value.getBoundingClientRect();r.value=ft(-5,Ge(e.minRate,e.maxRate,(i.p.y-d.top)/d.height)),t.setDirty(!0),await $a(),window.dispatchEvent(new Event("resize"))}const s=Wn(l,1e3/60,!0),u=Ho(s);return Ma(i=>{i.preventDefault(),u.onMove(i)}),Aa(()=>{t.save(r.value),u.onUp()}),{root:n,topSize:a,bottomSize:o,onDown:u.onDown}}}),Tj=e=>(it("data-v-594e8adc"),e=e(),ct(),e),kj={ref:"root",class:"resizable-v-wrapper"},Oj=Tj(()=>C("div",null,null,-1)),Bj=[Oj];function Lj(e,t,n,r,a,o){return S(),k("div",kj,[C("div",{class:"top",style:at({height:e.topSize})},[vt(e.$slots,"top",{},void 0,!0)],4),C("div",{class:"anchor",onMousedown:t[0]||(t[0]=Me((...l)=>e.onDown&&e.onDown(...l),["prevent"]))},Bj,32),C("div",{class:"bottom",style:at({height:e.bottomSize})},[vt(e.$slots,"bottom",{},void 0,!0)],4)],512)}var Rj=ee(Ij,[["render",Lj],["__scopeId","data-v-594e8adc"]]);const Pj=Q({components:{AppCanvas:ME,ArmatureElm:TN,SidePanel:nT,AnimationGraphPanel:AB,AnimationPanel:rN,CanvasSideBar:mj,ElementLayer:fN,BoneLayer:yj,ResizableV:Rj,ResizableH:rm,SpaceAxis:Aj},setup(){const e=Rt(),t=Xn(),n=rn(),r=Yn(),a=Mn();e.createDefaultEntities(),a.createDefaultEntities();const o=h(()=>{var p;return(p=a.lastSelectedActor.value)==null?void 0:p.viewBox}),l=t.canvasMode,s=h(()=>e.armatures.value.filter(p=>{var y;return p.id!==((y=e.lastSelectedArmature.value)==null?void 0:y.id)})),u=t.posedBoneMap,i=t.visibledBoneMap,d=t.lastSelectedBoneSpace,v=Rp();function f(p){var y;["input","textarea"].includes((y=p.target)==null?void 0:y.tagName.toLowerCase())||(Qt(p)&&p.key.toLowerCase()==="z"?(p.preventDefault(),p.shiftKey?r.redo():r.undo()):p.key.toLowerCase()===" "?(p.preventDefault(),n.togglePlaying()):Qt(p)&&p.key.toLowerCase()==="s"?(p.preventDefault(),v.overrideProjectFile()):Qt(p)&&p.key.toLowerCase()==="o"&&(p.preventDefault(),p.shiftKey?v.loadSvgFile():v.loadProjectFile()))}Ut(()=>{document.addEventListener("keydown",f)}),yr(()=>{document.removeEventListener("keydown",f)});const m=h(()=>{if(l.value==="weight"){const p=a.lastSelectedElement.value;return p!=null&&p.boneId?{[p.boneId]:{head:!0,tail:!0}}:{}}else return e.selectedBones.value});return{viewBox:o,armatures:e.armatures,otherArmatures:s,lastSelectedArmatureId:h(()=>{var p;return(p=e.lastSelectedArmature.value)==null?void 0:p.id}),bonesByArmatureId:e.bonesByArmatureId,posedBoneMap:u,lastSelectedBoneSpace:d,visibledBoneMap:i,selectedBones:m,canvasMode:l}}}),Nj={class:"main"},jj={key:0},Fj={key:1},Vj={class:"bottom"};function Dj(e,t,n,r,a,o){const l=F("AnimationGraphPanel"),s=F("ElementLayer"),u=F("ArmatureElm"),i=F("BoneLayer"),d=F("SpaceAxis"),v=F("AppCanvas"),f=F("CanvasSideBar"),m=F("ResizableH"),p=F("SidePanel"),y=F("AnimationPanel"),E=F("ResizableV");return S(),Se(E,{"initial-rate":.7,"storage-key":"app-v",class:"app-root"},{top:Y(()=>[$(m,{"initial-rate":.8,"storage-key":"app-panel-h",dense:"",class:"top"},{left:Y(()=>[$(m,{"initial-rate":.1,"storage-key":"app-canvas-h",dense:"",class:"main-wrapper"},{left:Y(()=>[$(l,{class:"animation-graph"})]),right:Y(()=>[C("div",Nj,[$(v,{"original-view-box":e.viewBox,class:"canvas"},{default:Y(()=>[$(s,{"bone-map":e.posedBoneMap,"canvas-mode":e.canvasMode,class:pt({"view-only":e.canvasMode!=="weight"})},null,8,["bone-map","canvas-mode","class"]),e.canvasMode==="object"?(S(),k("g",jj,[(S(!0),k(ve,null,Ae(e.armatures,b=>(S(),Se(u,{key:b.id,armature:b,bones:e.bonesByArmatureId[b.id],selected:e.lastSelectedArmatureId===b.id},null,8,["armature","bones","selected"]))),128))])):(S(),k("g",Fj,[(S(!0),k(ve,null,Ae(e.otherArmatures,b=>(S(),Se(u,{key:b.id,armature:b,bones:e.bonesByArmatureId[b.id],opacity:.3,class:"view-only"},null,8,["armature","bones","opacity"]))),128)),$(i,{"bone-map":e.visibledBoneMap,"selected-bones":e.selectedBones,"canvas-mode":e.canvasMode},null,8,["bone-map","selected-bones","canvas-mode"]),e.lastSelectedBoneSpace?(S(),Se(d,{key:0,origin:e.lastSelectedBoneSpace.origin,radian:e.lastSelectedBoneSpace.radian,class:"view-only"},null,8,["origin","radian"])):fe("",!0)]))]),_:1},8,["original-view-box"]),$(f,{class:"side-bar"})])]),_:1},8,["initial-rate"])]),right:Y(()=>[$(p,{class:"side-panel"})]),_:1},8,["initial-rate"])]),bottom:Y(()=>[C("div",Vj,[$(y)])]),_:1},8,["initial-rate"])}var xj=ee(Pj,[["render",Dj],["__scopeId","data-v-1c423e41"]]);Kh(xj).mount("#app");
